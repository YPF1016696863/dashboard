!function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],d=0,p=[];d<s.length;d++)o=s[d],a[o]&&p.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([713,2]),n()}([,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(22),n(36),n(15);var r=n(318),a=n.n(r);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}a.a.config({placement:"bottomRight",duration:3});var s={};["success","error","info","warning","warn"].forEach(e=>{s[e]=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a.a[e](i({},r,{message:t,description:n}))}}),t.default=i({},a.a,s)},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Auth",function(){return o}),n.d(t,"currentUser",function(){return s}),n.d(t,"clientConfig",function(){return l}),n.d(t,"messages",function(){return c}),n.d(t,"default",function(){return h});var r=n(85),a=n.n(r),i=n(2);f.$inject=["$injector"],m.$inject=["$window","$location","$q","$http"];var o=null,s={canEdit:function(e){var t=e.user_id||e.user&&e.user.id;return this.hasPermission("admin")||t&&t===this.id},hasPermission:function(e){return Object(i.includes)(this.permissions,e)},get isAdmin(){return this.hasPermission("admin")}},l={},c=[],u=a()("redash:auth"),d={loaded:!1};function p(e){u("Updating session to be:",e),Object(i.extend)(d,e,{loaded:!0}),Object(i.extend)(s,d.user),Object(i.extend)(l,d.client_config),Object(i.extend)(c,d.messages)}function m(e,t,n,r){return{isAuthenticated:function(){return d.loaded&&d.user.id},login:function(){var e=encodeURI(t.url());u("Calling login with next = %s",e),window.location.href="login?next=".concat(e)},logout:function(){u("Logout."),e.location.href="logout"},loadSession:function(){return u("Loading session"),d.loaded&&d.user.id?(u("Resolving with local value."),n.resolve(d)):(this.setApiKey(null),r.get("api/session").then(e=>(p(e.data),d)))},loadConfig:function(){return u("Loading config"),r.get("/api/config").then(e=>(p({client_config:e.data.client_config,user:{permissions:[]},messages:[]}),e.data))},setApiKey:function(e){u("Set API key to: %s",e),this.apiKey=e},getApiKey:function(){return this.apiKey},requireSession:function(){return u("Requested authentication"),this.isAuthenticated()?n.when(d):this.loadSession().then(()=>{if(this.isAuthenticated())return u("Loaded session"),d;u("Need to login, redirecting"),this.login()}).catch(()=>{u("Need to login, redirecting"),this.login()})}}}function f(e){return{request:function(t){var n=e.get("Auth").getApiKey();return n&&(t.headers.Authorization="Key ".concat(n)),t}}}function h(e){e.factory("Auth",m),e.value("currentUser",s),e.value("clientConfig",l),e.value("messages",c),e.factory("apiKeyHttpInterceptor",f),e.config(["$httpProvider",e=>{e.interceptors.push("apiKeyHttpInterceptor")}]),e.run(["$injector",e=>{o=e.get("Auth")}])}h.init=!0},,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Columns",function(){return E}),n.d(t,"default",function(){return S});n(16),n(17),n(29);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(5),c=n.n(l),u=n(113),d=n.n(u),p=n(420),m=n(155),f=n(41),h=n(305);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(){return Object(r.extend)(this.apply(void 0,arguments),{sorter:!0})}var E={favorites:function(e){return Object(r.extend)({width:"1%",render:(e,t)=>i.a.createElement(p.FavoritesControl,{item:t})},e)},avatar:function(e,t){return t=Object(r.isFunction)(t)?t:r.identity,Object(r.extend)({width:"1%",render:(e,n)=>i.a.createElement("img",{src:n.user.profile_image_url,className:"profile__image_thumb",alt:t(e.name,n),title:t(e.name,n)})},e)},dateTime:function(e){return Object(r.extend)({render:e=>Object(h.b)(e)},e)},duration:function(e){return Object(r.extend)({width:"1%",className:"text-nowrap",render:e=>Object(f.durationHumanize)(e)},e)},timeAgo:function(e){return Object(r.extend)({render:e=>i.a.createElement(m.TimeAgo,{date:e})},e)},custom:function(e,t){return Object(r.extend)({render:e},t)}};E.dateTime.sortable=j,E.duration.sortable=j,E.timeAgo.sortable=j,E.custom.sortable=j;var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,v(t).apply(this,arguments))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,i.a.Component),n=t,(a=[{key:"prepareColumns",value:function(){var e=this.props,t=e.orderByField,n=e.orderByReverse,a=e.toggleSorting,i=n?"descend":"ascend";return Object(r.map)(Object(r.map)(Object(r.filter)(this.props.columns,e=>!Object(r.isFunction)(e.isAvailable)||e.isAvailable()),e=>Object(r.extend)(e,{orderByField:e.orderByField||e.field})),(e,n)=>{var o=e.sorter?()=>({onClick:()=>a(e.orderByField)}):null,s=Object(r.isFunction)(e.render)?(t,n)=>e.render(t,n.item):r.identity;return Object(r.extend)(Object(r.omit)(e,["field","orderByField","render"]),{key:"column"+n,dataIndex:"item["+JSON.stringify(e.field)+"]",defaultSortOrder:e.orderByField===t?i:null,onHeaderCell:o,render:s})})}},{key:"render",value:function(){var e=this.prepareColumns(),t=Object(r.map)(this.props.items,(e,t)=>({key:"row"+t,item:e})),n=Object(r.isFunction)(this.props.onRowClick)?e=>({onClick:t=>{this.props.onRowClick(t,e.item)}}):null,a=this.props.showHeader;return i.a.createElement(d.a,{className:c()("table-data",{"ant-table-headerless":!a}),columns:e,showHeader:a,dataSource:t,rowKey:e=>e.key,pagination:!1,onRow:n})}}])&&b(n.prototype,a),o&&b(n,o),t}();O(S,"propTypes",{items:s.a.arrayOf(s.a.object),columns:s.a.arrayOf(s.a.shape({field:s.a.string,orderByField:s.a.string,render:s.a.func,isAvailable:s.a.func})),showHeader:s.a.bool,onRowClick:s.a.func,orderByField:s.a.string,orderByReverse:s.a.bool,toggleSorting:s.a.func}),O(S,"defaultProps",{items:[],columns:[],showHeader:!0,onRowClick:null,orderByField:null,orderByReverse:!1,toggleSorting:()=>{}})},,function(e,t,n){"use strict";n.r(t),n.d(t,"$http",function(){return r}),n.d(t,"$sanitize",function(){return a}),n.d(t,"$location",function(){return i}),n.d(t,"$route",function(){return o}),n.d(t,"$routeParams",function(){return s}),n.d(t,"$q",function(){return l}),n.d(t,"$rootScope",function(){return c}),n.d(t,"$uibModal",function(){return u}),n.d(t,"default",function(){return d});var r=null,a=null,i=null,o=null,s=null,l=null,c=null,u=null;function d(e){e.run(["$injector",e=>{r=e.get("$http"),a=e.get("$sanitize"),i=e.get("$location"),o=e.get("$route"),s=e.get("$routeParams"),l=e.get("$q"),c=e.get("$rootScope"),u=e.get("$uibModal")}])}d.init=!0},,,function(e,t,n){"use strict";n.r(t),n.d(t,"VisualizationType",function(){return c}),n.d(t,"RendererPropTypes",function(){return u}),n.d(t,"EditorPropTypes",function(){return d}),n.d(t,"registeredVisualizations",function(){return p}),n.d(t,"registerVisualization",function(){return f}),n.d(t,"getDefaultVisualization",function(){return h}),n.d(t,"newVisualization",function(){return g});n(15),n(22),n(36);var r=n(2),a=n(1),i=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=i.a.object,l=i.a.shape({columns:i.a.arrayOf(i.a.object).isRequired,rows:i.a.arrayOf(i.a.object).isRequired}),c=i.a.shape({type:i.a.string.isRequired,name:i.a.string.isRequired,options:s.isRequired}),u={visualizationName:i.a.string,data:l.isRequired,options:s.isRequired,onOptionsChange:i.a.func},d={visualizationName:i.a.string,data:l.isRequired,options:s.isRequired,onOptionsChange:i.a.func.isRequired},p={},m=i.a.shape({type:i.a.string.isRequired,name:i.a.string.isRequired,getOptions:i.a.func.isRequired,isDeprecated:i.a.bool,Renderer:i.a.func.isRequired,Editor:i.a.func,autoHeight:i.a.bool,defaultRows:i.a.number,defaultColumns:i.a.number,minRows:i.a.number,maxRows:i.a.number,minColumns:i.a.number,maxColumns:i.a.number});function f(e){if(function(e){var t={config:m},n={config:e};i.a.checkPropTypes(t,n,"prop","registerVisualization")}(e),e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},e),p[e.type])throw new Error("Visualization ".concat(e.type," already registered."));p[e.type]=e}function h(){return Object(r.find)(p,e=>!e.isDeprecated)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e?p[e]:h();return{type:n.type,name:n.name,description:"",options:t}}},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"DialogPropType",function(){return p}),n.d(t,"wrap",function(){return h});n(15),n(22),n(36),n(42),n(89);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(13),c=n.n(l);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p=s.a.shape({props:s.a.shape({visible:s.a.bool,onOk:s.a.func,onCancel:s.a.func,afterClose:s.a.func}).isRequired,close:s.a.func.isRequired,dismiss:s.a.func.isRequired}),m={Promise:Promise,DialogPropType:p,wrap:function(){}};function f(e,t){var n={props:{visible:!0,onOk:()=>{},onCancel:()=>{},afterClose:()=>{}},close:()=>{},dismiss:()=>{}},a={resolve:()=>{},reject:()=>{}},o=document.createElement("div");function s(){c.a.render(i.a.createElement(e,d({},t,{dialog:n})),o)}function l(e){a.resolve(e),n.props.visible=!1,s()}function p(e){a.reject(e),n.props.visible=!1,s()}document.body.appendChild(o),n.props.onOk=l,n.props.onCancel=p,n.props.afterClose=function(){setTimeout(()=>{c.a.unmountComponentAtNode(o),document.body.removeChild(o)},10)},n.close=l,n.dismiss=p;var f={close:l,dismiss:p,update:e=>{t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}({},t,e),s()},result:new m.Promise((e,t)=>{a.resolve=e,a.reject=t})};return s(),Object(r.isFunction)(f.result.suppressUnhandledRejections)&&f.result.suppressUnhandledRejections(),f}function h(e){return{Component:e,showModal:t=>f(e,t)}}m.wrap=h,t.default=m},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"DataSource",function(){return l}),n.d(t,"Table",function(){return c}),n.d(t,"Schema",function(){return u}),n.d(t,"RefreshScheduleType",function(){return d}),n.d(t,"RefreshScheduleDefault",function(){return p}),n.d(t,"Field",function(){return m}),n.d(t,"Action",function(){return f}),n.d(t,"AntdForm",function(){return h}),n.d(t,"UserProfile",function(){return g}),n.d(t,"Moment",function(){return y});var r=n(1),a=n.n(r),i=n(2),o=n(12),s=n.n(o),l=a.a.shape({syntax:a.a.string,options:a.a.shape({doc:a.a.string,doc_url:a.a.string}),type_name:a.a.string}),c=a.a.shape({columns:a.a.arrayOf(a.a.string).isRequired}),u=a.a.arrayOf(c),d=a.a.shape({interval:a.a.number,time:a.a.string,day_of_week:a.a.string,until:a.a.string}),p={interval:null,time:null,day_of_week:null,until:null},m=a.a.shape({name:a.a.string.isRequired,title:a.a.string,type:a.a.oneOf(["text","email","password","number","checkbox","file","select","content"]).isRequired,initialValue:a.a.oneOfType([a.a.string,a.a.number,a.a.bool,a.a.arrayOf(a.a.string),a.a.arrayOf(a.a.number)]),content:a.a.node,mode:a.a.string,required:a.a.bool,readOnly:a.a.bool,autoFocus:a.a.bool,minLength:a.a.number,placeholder:a.a.string,contentAfter:a.a.oneOfType([a.a.node,a.a.func]),loading:a.a.bool,props:a.a.object}),f=a.a.shape({name:a.a.string.isRequired,callback:a.a.func.isRequired,type:a.a.string,pullRight:a.a.bool,disabledWhenDirty:a.a.bool}),h=a.a.shape({validateFieldsAndScroll:a.a.func}),g=a.a.shape({id:a.a.number.isRequired,name:a.a.string.isRequired,email:a.a.string.isRequired,profileImageUrl:a.a.string,apiKey:a.a.string,isDisabled:a.a.bool});function b(e,t,n,r){var a=t[n],i=e&&null!==a,o=!e&&(null===a||s.a.isMoment(a));if(!i&&!o)return new Error("Prop `"+n+"` supplied to `"+r+"` should be a Moment.js instance.")}var y=Object(i.wrap)(!1,b);y.isRequired=Object(i.wrap)(!0,b)},function(e,t,n){"use strict";n.r(t),n.d(t,"IntervalEnum",function(){return s}),n.d(t,"localizeTime",function(){return l}),n.d(t,"secondsToInterval",function(){return c}),n.d(t,"intervalToSeconds",function(){return u}),n.d(t,"pluralize",function(){return d}),n.d(t,"durationHumanize",function(){return p}),n.d(t,"toHuman",function(){return m}),n.d(t,"colWidth",function(){return f}),n.d(t,"capitalize",function(){return h}),n.d(t,"remove",function(){return g}),n.d(t,"notEmpty",function(){return b}),n.d(t,"showError",function(){return y}),n.d(t,"prettySize",function(){return w}),n.d(t,"join",function(){return O});n(16),n(17),n(15),n(92),n(116);var r=n(12),a=n.n(r),i=n(2);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s={NEVER:"Never",SECONDS:"second",MINUTES:"minute",HOURS:"hour",DAYS:"day",WEEKS:"week"};function l(e){var t=o(e.split(":"),2),n=t[0],r=t[1];return a.a.utc().hour(n).minute(r).local().format("HH:mm")}function c(e){if(!e)return{interval:s.NEVER};var t=s.SECONDS;return e>=60&&(e/=60,t=s.MINUTES),e>=60&&(e/=60,t=s.HOURS),e>=24&&t===s.HOURS&&(e/=24,t=s.DAYS),e>=7&&!(e%7)&&t===s.DAYS&&(e/=7,t=s.WEEKS),{count:e,interval:t}}function u(e,t){var n=0;switch(t){case s.MINUTES:n=60;break;case s.HOURS:n=3600;break;case s.DAYS:n=86400;break;case s.WEEKS:n=604800;break;default:return null}return n*e}function d(e,t){return e+(1!==t?"s":"")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"-";var n="",r=c(e),a=r.interval,i=r.count,o=Math.round(i);return 1===o&&t.omitSingleValueNumber||(n="".concat(o," ")),n+=d(a,o)}function m(e){return e.replace(/_/g," ").replace(/(?:^|\s)\S/g,e=>e.toUpperCase())}function f(e){return 0===e?0:1===e?6:2===e?12:e}function h(e){return e?Object(i.capitalize)(e):null}function g(e,t){if(void 0===e)return e;var n;n=t instanceof Array?e=>-1===t.indexOf(e):e=>t!==e;for(var r=[],a=0;a<e.length;a+=1)n(e[a])&&r.push(e[a]);return r}function b(e){return!Object(i.isEmpty)(e)}function y(e){return void 0!==e&&(e.$touched&&e.$invalid)}var v=["bytes","KB","MB","GB","TB","PB"];function w(e){if(isNaN(parseFloat(e))||!isFinite(e))return"?";for(var t=0;e>=1024;)e/=1024,t+=1;return e.toFixed(3)+" "+v[t]}function O(e){return null==e?"":e.join(" / ")}},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(42);var r=n(0),a=n.n(r),i=n(67);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){return a.a.createElement("div",{className:"text-center"},a.a.createElement(i.BigMessage,o({icon:"fa-spinner fa-2x fa-pulse",message:"Loading..."},e)))}},,,function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l});n(15),n(22),n(36),n(205);var r=n(2);function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e,t){var n={};return t=Object(r.extend)({},t),Object(r.each)(e,e=>{var i=e.path,s=e.title,l=e.key,c=o(e,["path","title","key"]);Object(r.each)(c,(e,t)=>{c[t]=(()=>e)}),n[i]=a({},t,{title:s,resolve:a({},t.resolve,c,{currentPage:()=>l})})}),n}function l(e){var t=e=>(Object(r.each)(e,(n,a)=>{(""+a).startsWith("$$")?delete e[a]:e[a]=Object(r.isObject)(n)?t(n):n}),e),n=Object(r.cloneDeep)(e);return Object(r.isObject)(n)?t(n):n}},function(e,t,n){"use strict";n.r(t),n.d(t,"ControllerType",function(){return O}),n.d(t,"wrap",function(){return j});n(16),n(17),n(15),n(22),n(36),n(29);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(413),c=n.n(l),u=n(25),d=n(14),p=n(65);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=s.a.shape({params:s.a.object.isRequired,isLoaded:s.a.bool.isRequired,isEmpty:s.a.bool.isRequired,searchTerm:s.a.string,updateSearch:s.a.func.isRequired,selectedTags:s.a.array.isRequired,updateSelectedTags:s.a.func.isRequired,orderByField:s.a.string,orderByReverse:s.a.bool.isRequired,toggleSorting:s.a.func.isRequired,page:s.a.number.isRequired,itemsPerPage:s.a.number.isRequired,totalItemsCount:s.a.number.isRequired,pageSizeOptions:s.a.arrayOf(s.a.number).isRequired,pageItems:s.a.array.isRequired,updatePagination:s.a.func.isRequired,handleError:s.a.func.isRequired});function j(e,t,n){var a=function(a){function o(e){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=b(this,y(o).call(this,e)),n=n||new p.StateStorage,t.setState(h({},n.getState(),{validate:!1})),t.getCallbackContext=(()=>a.state),t.onBeforeUpdate=(()=>{var e=t.getState();n.setState(e),a.setState(a.getState(h({},e,{isLoaded:!1})))}),t.onAfterUpdate=(()=>{var e=t.getState();a.setState(a.getState(h({},e,{isLoaded:!0})))}),t.onError=(e=>a.props.onError(e));var i=a.getState(h({},t.getState(),{isLoaded:!1})),s=t.updatePagination,l=t.toggleSorting,c=t.updateSearch,u=t.updateSelectedTags,d=t.update,m=t.handleError;return a.state=h({},i,{toggleSorting:l,updateSearch:Object(r.debounce)(c,200),updateSelectedTags:u,updatePagination:s,update:d,handleError:m}),a}var s,l,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,i.a.Component),s=o,(l=[{key:"componentDidMount",value:function(){this.state.update()}},{key:"componentWillUnmount",value:function(){t.onBeforeUpdate=(()=>{}),t.onAfterUpdate=(()=>{}),t.onError=(()=>{})}},{key:"getState",value:function(e){var t=e.isLoaded,n=e.totalCount,a=e.pageItems,i=e.params,o=f(e,["isLoaded","totalCount","pageItems","params"]);return i=h({},i,{title:u.$route.current.title},u.$routeParams,Object(r.omit)(u.$route.current.locals,["$scope","$template"]),Object(r.omit)(this.props,["onError","children"])),h({},o,{params:i,isLoaded:t,isEmpty:!t||0===n,totalItemsCount:t?n:0,pageSizeOptions:d.clientConfig.pageSizeOptions,pageItems:t?a:[]})}},{key:"render",value:function(){var t=this.props,n=t.children,r=(t.onError,f(t,["children","onError"]));return r.controller=this.state,i.a.createElement(e,r,n)}}])&&g(s.prototype,l),c&&g(s,c),o}();return w(a,"propTypes",h({},Object(r.omit)(e.propTypes,["controller"]),{onError:s.a.func,children:s.a.node})),w(a,"defaultProps",h({},Object(r.omit)(e.defaultProps,["controller"]),{onError:e=>{setTimeout(()=>{throw e})},children:null})),c()(a,e),a}},function(e,t,n){"use strict";n.r(t),n.d(t,"User",function(){return s}),n.d(t,"default",function(){return b});var r=n(2),a=n(25),i=n(9),o=n(14);g.$inject=["$resource"];var s=null;function l(e){return"api/users/".concat(e.id,"/disable")}function c(e){var t=Object(a.$sanitize)(e.name);return a.$http.delete(l(e)).then(n=>(i.default.success("User ".concat(t," is now enabled.")),e.is_disabled=!1,e.profile_image_url=n.data.profile_image_url,n)).catch(e=>{var t=Object(r.get)(e,"data.message",e.statusText);Object(r.isString)(t)||(t="Unknown error"),i.default.error("Cannot enable user",t)})}function u(e){var t=Object(a.$sanitize)(e.name);return a.$http.post(l(e)).then(n=>(i.default.warning("User ".concat(t," is now disabled.")),e.is_disabled=!0,e.profile_image_url=n.data.profile_image_url,n)).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.get)(e,"data.message",e.statusText);i.default.error("Cannot disable user",t)})}function d(e){var t=Object(a.$sanitize)(e.name);return a.$http.delete("api/users/".concat(e.id)).then(e=>(i.default.warning("User ".concat(t," has been deleted.")),e)).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.get)(e,"data.message",e.statusText);i.default.error("Cannot delete user",t)})}function p(e){return{id:e.id,name:e.name,email:e.email,profileImageUrl:e.profile_image_url,apiKey:e.api_key,groupIds:e.groups,isDisabled:e.is_disabled,isInvitationPending:e.is_invitation_pending}}function m(e){return a.$http.post("api/users/".concat(e.id,"/regenerate_api_key")).then(e=>{var t=e.data;return i.default.success("The API Key has been updated."),t.api_key}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.get)(e,"data.message",e.statusText);i.default.error("Failed regenerating API Key",t)})}function f(e){return a.$http.post("api/users/".concat(e.id,"/reset_password")).then(e=>{var t=e.data;if(o.clientConfig.mailSettingsMissing)return i.default.warning("The mail server is not configured."),t.reset_link;i.default.success("Password reset email sent.")}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.get)(e,"data.message",e.statusText);i.default.error("Failed to send password reset email",t)})}function h(e){return a.$http.post("api/users/".concat(e.id,"/invite")).then(e=>{var t=e.data;if(o.clientConfig.mailSettingsMissing)return i.default.warning("The mail server is not configured."),t.invite_link;i.default.success("Invitation sent.")}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.get)(e,"data.message",e.statusText);i.default.error("Failed to resend invitation",t)})}function g(e){var t=e("api/users/:id",{id:"@id"},{get:{method:"GET"},create:{method:"POST"},save:{method:"POST"},query:{method:"GET",isArray:!1},delete:{method:"DELETE"},disable:{method:"POST",url:"api/users/:id/disable"},enable:{method:"DELETE",url:"api/users/:id/disable"}});return t.enableUser=c,t.disableUser=u,t.deleteUser=d,t.convertUserInfo=p,t.regenerateApiKey=m,t.sendPasswordReset=f,t.resendInvitation=h,t}function b(e){e.factory("User",g),e.run(["$injector",e=>{s=e.get("User")}])}b.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"Query",function(){return g}),n.d(t,"Parameter",function(){return O}),n.d(t,"default",function(){return x});n(106),n(552),n(61),n(104),n(105),n(16),n(17),n(42),n(22),n(36),n(116),n(15);var r=n(12),a=n.n(r),i=n(85),o=n.n(i),s=n(451),l=n.n(s),c=n(2);function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}S.$inject=["$resource","$http","$location","$q","currentUser","QueryResultError","QueryResult"],E.$inject=["$q"],l.a.escape=c.identity;var g=null,b=o()("redash:services:query"),y={date:"YYYY-MM-DD","date-range":"YYYY-MM-DD","datetime-local":"YYYY-MM-DD HH:mm","datetime-range":"YYYY-MM-DD HH:mm","datetime-with-seconds":"YYYY-MM-DD HH:mm:ss","datetime-range-with-seconds":"YYYY-MM-DD HH:mm:ss"};function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=parseFloat(e);return isFinite(n)?n:t}function w(e){return Object(c.includes)(["date-range","datetime-range","datetime-range-with-seconds"],e)}var O=function(){function e(t,n){m(this,e),this.title=t.title,this.name=t.name,this.type=t.type,this.useCurrentDateTime=t.useCurrentDateTime,this.global=t.global,this.enumOptions=t.enumOptions,this.queryId=t.queryId,this.parentQueryId=n,this.locals=[],this.setValue(t.value),Object.defineProperty(this,"urlPrefix",{configurable:!0,enumerable:!1,writable:!0,value:"p_"})}return h(e,[{key:"clone",value:function(){return new e(this,this.parentQueryId)}},{key:"getValue",value:function(){return this.constructor.getValue(this)}},{key:"setValue",value:function(e){var t;return w(this.type)?(this.value=null,this.$$value=null,Object(c.isObject)(e)&&!Object(c.isArray)(e)&&(e=[e.start,e.end]),Object(c.isArray)(e)&&2===e.length&&(e=[a()(e[0]),a()(e[1])])[0].isValid()&&e[1].isValid()&&(this.value={start:e[0].format(y[this.type]),end:e[1].format(y[this.type])},this.$$value=e)):(t=this.type,Object(c.includes)(["date","datetime-local","datetime-with-seconds"],t)?(this.value=null,this.$$value=null,(e=a()(e)).isValid()&&(this.value=e.format(y[this.type]),this.$$value=e)):"number"===this.type?(this.value=e,this.$$value=v(e,null)):(this.value=e,this.$$value=e)),Object(c.isArray)(this.locals)&&Object(c.each)(this.locals,e=>{e.setValue(this.value)}),this}},{key:"toUrlParams",value:function(){if(this.isEmpty)return{};var e,t=this.urlPrefix;return w(this.type)?(p(e={},"".concat(t).concat(this.name,".start"),this.value.start),p(e,"".concat(t).concat(this.name,".end"),this.value.end),e):p({},"".concat(t).concat(this.name),this.value)}},{key:"fromUrlParams",value:function(e){var t=this.urlPrefix;if(w(this.type)){var n="".concat(t).concat(this.name,".start"),r="".concat(t).concat(this.name,".end");Object(c.has)(e,n)&&Object(c.has)(e,r)&&this.setValue([e[n],e[r]])}else{var a="".concat(t).concat(this.name);Object(c.has)(e,a)&&this.setValue(e[a])}}},{key:"toQueryTextFragment",value:function(){return w(this.type)?"{{ ".concat(this.name,".start }} {{ ").concat(this.name,".end }}"):"{{ ".concat(this.name," }}")}},{key:"loadDropdownValues",value:function(){return this.parentQueryId?g.associatedDropdown({queryId:this.parentQueryId,dropdownQueryId:this.queryId}).$promise:g.asDropdown({id:this.queryId}).$promise}},{key:"isEmpty",get:function(){return Object(c.isNull)(this.getValue())}},{key:"normalizedValue",get:function(){return this.$$value}},{key:"ngModel",get:function(){return this.normalizedValue},set:function(e){this.setValue(e)}}],[{key:"getValue",value:function(e){var t=e.value,n=e.type,r=e.useCurrentDateTime;return Object(c.isNull)(t)||Object(c.isUndefined)(t)||""===t?Object(c.includes)(["date","datetime-local","datetime-with-seconds"],n)&&r?a()().format(y[n]):null:"number"===n?v(t,null):t}}]),e}(),j=function(){function e(t,n){m(this,e),this.query=t,this.updateParameters(),this.initFromQueryString(n)}return h(e,[{key:"parseQuery",value:function(){var e=[];try{var t=l.a.parse(this.query.query);e=Object(c.uniq)(function e(t){var n=[];return t.forEach(t=>{"name"===t[0]||"&"===t[0]?n.push(t[1].split(".")[0]):"#"===t[0]&&(n=Object(c.union)(n,e(t[4])))}),n}(t))}catch(t){b("Failed parsing parameters: ",t),e=Object(c.map)(this.query.options.parameters,e=>e.name)}return e}},{key:"updateParameters",value:function(){if(this.query.query!==this.cachedQueryText){this.cachedQueryText=this.query.query;var e=this.parseQuery();this.query.options.parameters=this.query.options.parameters||[];var t={};this.query.options.parameters.forEach(e=>{t[e.name]=e}),e.forEach(e=>{Object(c.has)(t,e)||this.query.options.parameters.push(new O({title:e,name:e,type:"text",value:null,global:!1}))});var n=this.query.options.parameters;this.query.options.parameters=n.filter(t=>Object(c.includes)(e,t.name)).map(e=>new O(e,this.query.id))}}},{key:"initFromQueryString",value:function(e){this.get().forEach(t=>{t.fromUrlParams(e)})}},{key:"get",value:function(){return this.updateParameters(),this.query.options.parameters}},{key:"add",value:function(e){this.query.options.parameters=this.query.options.parameters.filter(t=>t.name!==e.name);var t=new O(e);return this.query.options.parameters.push(t),t}},{key:"getMissing",value:function(){return Object(c.map)(Object(c.filter)(this.get(),e=>e.isEmpty),e=>e.title)}},{key:"isRequired",value:function(){return!Object(c.isEmpty)(this.get())}},{key:"getValues",value:function(){var e=this.get();return Object(c.zipObject)(Object(c.map)(e,e=>e.name),Object(c.map)(e,e=>e.getValue()))}},{key:"toUrlParams",value:function(){if(0===this.get().length)return"";var e=d.apply(void 0,u(this.get().map(e=>e.toUrlParams())));return Object.keys(e).map(t=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))).join("&")}}]),e}();function E(e){return function(){function t(e){m(this,t),this.errorMessage=e,this.updatedAt=a.a.utc()}return h(t,[{key:"getUpdatedAt",value:function(){return this.updatedAt}},{key:"getError",value:function(){return this.errorMessage}},{key:"toPromise",value:function(){return e.reject(this)}},{key:"getStatus",value:function(){return"failed"}},{key:"getData",value:function(){return null}},{key:"getLog",value:function(){return null}}]),t}()}function S(e,t,n,r,i,o,s){var l=e("api/queries/:id",{id:"@id"},{recent:{method:"get",isArray:!0,url:"api/queries/recent"},archive:{method:"get",isArray:!1,url:"api/queries/archive"},query:{isArray:!1},myQueries:{method:"get",isArray:!1,url:"api/queries/my"},fork:{method:"post",isArray:!1,url:"api/queries/:id/fork",params:{id:"@id"}},resultById:{method:"get",isArray:!1,url:"api/queries/:id/results.json"},asDropdown:{method:"get",isArray:!0,url:"api/queries/:id/dropdown"},associatedDropdown:{method:"get",isArray:!0,url:"api/queries/:queryId/dropdowns/:dropdownQueryId"},favorites:{method:"get",isArray:!1,url:"api/queries/favorites"},favorite:{method:"post",isArray:!1,url:"api/queries/:id/favorite",transformRequest:[()=>""]},unfavorite:{method:"delete",isArray:!1,url:"api/queries/:id/favorite",transformRequest:[()=>""]}});return l.newQuery=function(){return new l({query:"",name:"New Query",schedule:null,user:i,options:{}})},l.format=function(e,n){if("json"!==e)return"sql"===e?t.post("api/queries/format",{query:n}).then(e=>e.data.query):r.reject("Query formatting is not supported for your data source syntax.");try{var a=JSON.stringify(JSON.parse(n)," ",4);return r.resolve(a)}catch(e){return r.reject(String(e))}},l.prototype.getSourceLink=function(){return"/queries/".concat(this.id,"/source")},l.prototype.isNew=function(){return void 0===this.id},l.prototype.hasDailySchedule=function(){return this.schedule&&null!==this.schedule.match(/\d\d:\d\d/)},l.prototype.scheduleInLocalTime=function(){var e=this.schedule.split(":");return a.a.utc().hour(e[0]).minute(e[1]).local().format("HH:mm")},l.prototype.hasResult=function(){return!(!this.latest_query_data&&!this.latest_query_data_id)},l.prototype.paramsRequired=function(){return this.getParameters().isRequired()},l.prototype.hasParameters=function(){return this.getParametersDefs().length>0},l.prototype.prepareQueryResultExecution=function(e,t){if(!this.query)return new o("Can't execute empty query.");var n=this.getParameters(),r=n.getMissing();if(r.length>0){var a="parameter",i="value";return r.length>1&&(a="parameters",i="values"),new s({job:{error:"missing ".concat(i," for ").concat(r.join(", ")," ").concat(a,"."),status:4}})}if(n.isRequired()&&(this.latest_query_data=null,this.latest_query_data_id=null),this.latest_query_data&&0!==t)this.queryResult||(this.queryResult=new s({query_result:this.latest_query_data}));else if(this.latest_query_data_id&&0!==t)this.queryResult||(this.queryResult=s.getById(this.latest_query_data_id));else{if(!this.data_source_id)return new o("Please select data source to run this query.");this.queryResult=e()}return this.queryResult},l.prototype.getQueryResult=function(e){return this.prepareQueryResultExecution(()=>s.getByQueryId(this.id,this.getParameters().getValues(),e),e)},l.prototype.getQueryResultByText=function(e,t){var n=t||this.query,r=this.getParameters().getValues();return this.prepareQueryResultExecution(()=>s.get(this.data_source_id,n,r,e,this.id),e)},l.prototype.getUrl=function(e,t){var n="queries/".concat(this.id);e&&(n+="/source");var r={};return this.getParameters().isRequired()&&this.getParametersDefs().forEach(e=>{Object(c.extend)(r,e.toUrlParams())}),""!==(r=Object(c.map)(r,(e,t)=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e))).join("&"))&&(n+="?".concat(r)),t&&(n+="#".concat(t)),n},l.prototype.getQueryResultPromise=function(){return this.getQueryResult().toPromise()},l.prototype.getParameters=function(){return this.$parameters||(this.$parameters=new j(this,n.search())),this.$parameters},l.prototype.getParametersDefs=function(){return this.getParameters().get()},l}function x(e){e.factory("QueryResultError",E),e.factory("Query",S),e.run(["$injector",e=>{g=e.get("Query")}])}x.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"Group",function(){return r}),n.d(t,"default",function(){return i}),a.$inject=["$resource"];var r={};function a(e){return e("api/groups/:id",{id:"@id"},{get:{method:"GET",cache:!1,isArray:!1},query:{method:"GET",cache:!1,isArray:!0},members:{method:"GET",cache:!1,isArray:!0,url:"api/groups/:id/members"},addMember:{method:"POST",url:"api/groups/:id/members"},removeMember:{method:"DELETE",url:"api/groups/:id/members/:userId"},dataSources:{method:"GET",cache:!1,isArray:!0,url:"api/groups/:id/data_sources"},addDataSource:{method:"POST",url:"api/groups/:id/data_sources"},removeDataSource:{method:"DELETE",url:"api/groups/:id/data_sources/:dataSourceId"},updateDataSource:{method:"POST",url:"api/groups/:id/data_sources/:dataSourceId"}})}function i(e){e.factory("Group",a),e.run(["$injector",e=>{r=e.get("Group")}])}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"SearchInput",function(){return g}),n.d(t,"Menu",function(){return b}),n.d(t,"MenuIcon",function(){return y}),n.d(t,"ProfileImage",function(){return v}),n.d(t,"Tags",function(){return w}),n.d(t,"PageSizeSelect",function(){return O});n(15),n(22),n(36);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(5),c=n.n(l),u=n(37),d=n.n(u),p=n(30),m=n.n(p),f=n(426);function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function g(e){var t=e.placeholder,n=e.value,r=e.showIcon,a=e.onChange,o=r?d.a.Search:d.a;return i.a.createElement("div",{className:"m-b-10"},i.a.createElement(o,{className:"form-control",placeholder:t,defaultValue:n,onChange:e=>a(e.target.value),autoFocus:!0}))}function b(e){var t=e.items,n=e.selected;return 0===(t=Object(r.filter)(t,e=>!Object(r.isFunction)(e.isAvailable)||e.isAvailable())).length?null:i.a.createElement("div",{className:"list-group m-b-10 tags-list tiled"},Object(r.map)(t,e=>i.a.createElement("a",{key:e.key,href:e.href,className:c()("list-group-item",{active:n===e.key})},Object(r.isString)(e.icon)&&""!==e.icon&&i.a.createElement("span",{className:"btn-favourite m-r-5"},i.a.createElement("i",{className:e.icon,"aria-hidden":"true"})),Object(r.isFunction)(e.icon)&&(e.icon(e)||null),e.title)))}function y(e){var t=e.icon;return i.a.createElement("span",{className:"btn-favourite m-r-5"},i.a.createElement("i",{className:t,"aria-hidden":"true"}))}function v(e){var t=e.user;return Object(r.isString)(t.profile_image_url)&&""!==t.profile_image_url?i.a.createElement("img",{src:t.profile_image_url,className:"profile__image--navbar m-r-5",width:"13",alt:t.name}):null}function w(e){var t=e.url,n=e.onChange;return""===t?null:i.a.createElement("div",{className:"m-b-10"},i.a.createElement(f.TagsList,{tagsUrl:t,onUpdate:n}))}function O(e){var t=e.options,n=e.value,a=e.onChange,o=h(e,["options","value","onChange"]);return i.a.createElement("div",o,i.a.createElement(m.a,{className:"w-100",defaultValue:n,onChange:a},Object(r.map)(t,e=>i.a.createElement(m.a.Option,{key:e,value:e},e," results"))))}g.propTypes={placeholder:s.a.string,value:s.a.string.isRequired,showIcon:s.a.bool,onChange:s.a.func.isRequired},g.defaultProps={placeholder:"Search...",showIcon:!1},b.propTypes={items:s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,href:s.a.string.isRequired,title:s.a.string.isRequired,icon:s.a.func,isAvailable:s.a.func})),selected:s.a.string},b.defaultProps={items:[],selected:null},y.propTypes={icon:s.a.string.isRequired},v.propTypes={user:s.a.shape({profile_image_url:s.a.string,name:s.a.string}).isRequired},w.propTypes={url:s.a.string.isRequired,onChange:s.a.func.isRequired},O.propTypes={options:s.a.arrayOf(s.a.number).isRequired,value:s.a.number.isRequired,onChange:s.a.func.isRequired}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"policy",function(){return r}),n.d(t,"setPolicy",function(){return a});var r=new(n(430).default);function a(e){r=e}},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});n(42),n(15),n(22),n(36);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(5),l=n.n(s);n(1168);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d={className:o.a.string,children:o.a.node},p={className:null,children:null};function m(e){var t=e.className,n=e.children,r=u(e,["className","children"]);return a.a.createElement("div",c({className:l()("layout-sidebar",t)},r),a.a.createElement("div",null,n))}function f(e){var t=e.className,n=e.children,r=u(e,["className","children"]);return a.a.createElement("div",c({className:l()("layout-content",t)},r),a.a.createElement("div",null,n))}function h(e){var t=e.className,n=e.children,r=u(e,["className","children"]);return a.a.createElement("div",c({className:l()("layout-with-sidebar",t)},r),n)}m.propTypes=d,m.defaultProps=p,f.propTypes=d,f.defaultProps=p,h.propTypes=d,h.defaultProps=p,h.Sidebar=m,h.Content=f},,,function(e,t,n){"use strict";n.r(t),n.d(t,"StateStorage",function(){return g}),n.d(t,"UrlStateStorage",function(){return b});n(16),n(17),n(564),n(29),n(15),n(22),n(36),n(106);var r=n(2),a=n(14),i=n(25),o=n(190);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e),this._state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e}({},t)}return h(e,[{key:"getState",value:function(){return Object(r.defaults)(this._state,{page:1,itemsPerPage:a.clientConfig.pageSize,orderByField:"created_at",orderByReverse:!1,searchTerm:"",tags:[]})}},{key:"setState",value:function(){}}]),e}(),b=function(e){function t(){return m(this,t),l(this,u(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,g),h(t,[{key:"getState",value:function(){var e=c(u(t.prototype),"getState",this).call(this),n=i.$location.search(),r=n.q||"",a=""!==r?"":Object(o.compile)(e.orderByField,e.orderByReverse),s=Object(o.parse)(n.order||a),l=s.field,d=s.reverse;return{page:parseInt(n.page,10)||e.page,itemsPerPage:parseInt(n.page_size,10)||e.itemsPerPage,orderByField:l,orderByReverse:d,searchTerm:r}}},{key:"setState",value:function(e){var t=e.page,n=e.itemsPerPage,r=e.orderByField,a=e.orderByReverse,s=e.searchTerm;i.$location.search({page:t,page_size:n,order:Object(o.compile)(r,a),q:""!==s?s:null})}}]),t}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});n(92);var r=n(2),a=n(25);function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(r.isString)(e)&&(a.$location.url(e),t&&a.$location.replace(),a.$rootScope.$applyAsync())}},function(e,t,n){"use strict";n.r(t),n.d(t,"BigMessage",function(){return l}),n.d(t,"default",function(){return c});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11);function l(e){var t=e.message,n=e.icon,r=e.children,i=e.className;return a.a.createElement("div",{className:"p-15 text-center "+i},a.a.createElement("h3",{className:"m-t-0 m-b-0"},a.a.createElement("i",{className:"fa "+n})),a.a.createElement("br",null),t,r)}function c(e){e.component("bigMessage",Object(s.react2angular)(l))}l.propTypes={message:o.a.string,icon:o.a.string.isRequired,children:o.a.node,className:o.a.string},l.defaultProps={message:"",children:null,className:"tiled bg-white"},c.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"SCHEMA_NOT_SUPPORTED",function(){return r}),n.d(t,"SCHEMA_LOAD_ERROR",function(){return a}),n.d(t,"IMG_ROOT",function(){return i}),n.d(t,"DataSource",function(){return o}),n.d(t,"default",function(){return l}),s.$inject=["$q","$resource","$http"];var r=1,a=2,i="/static/images/db-logos",o=null;function s(e,t,n){var r=t("api/data_sources/:id",{id:"@id"},{get:{method:"GET",cache:!1,isArray:!1},query:{method:"GET",cache:!1,isArray:!0},save:{method:"POST"},types:{method:"GET",cache:!1,isArray:!0,url:"api/data_sources/types"},test:{method:"POST",cache:!1,isArray:!1,url:"api/data_sources/:id/test"}});return r.prototype.getSchema=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return void 0===this._schema||t?function(e){var t={};return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t.refresh=!0),n.get("api/data_sources/".concat(e,"/schema"),{params:t})}(this.id,t).then(e=>{var t=e.data;return this._schema=t,t}):e.resolve(this._schema)},r}function l(e){e.factory("DataSource",s),e.run(["$injector",e=>{o=e.get("DataSource")}])}l.init=!0},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(2),a=n(25),i=[],o=Object(r.debounce)(()=>{var e=i;i=[],a.$http.post("api/events",e)},1e3);function s(e,t,n,a){var s={action:e,object_type:t,object_id:n,timestamp:Date.now()/1e3,screen_resolution:"".concat(window.screen.width,"x").concat(window.screen.height)};Object(r.extend)(s,a),i.push(s),o()}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Paginator",function(){return u}),n.d(t,"default",function(){return d});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(304),c=n.n(l);function u(e){var t=e.page,n=e.itemsPerPage,r=e.totalCount,i=e.onChange;return r<=n?null:a.a.createElement("div",{className:"paginator-container"},a.a.createElement(c.a,{defaultCurrent:t,defaultPageSize:n,total:r,onChange:i}))}function d(e){e.component("paginatorImpl",Object(s.react2angular)(u)),e.component("paginator",{template:'\n      <paginator-impl\n        page="$ctrl.paginator.page"\n        items-per-page="$ctrl.paginator.itemsPerPage"\n        total-count="$ctrl.paginator.totalCount"\n        on-change="$ctrl.onPageChanged"\n      ></paginator-impl>',bindings:{paginator:"<"},controller:["$scope",function(e){this.onPageChanged=(t=>{this.paginator.setPage(t),e.$applyAsync()})}]})}u.propTypes={page:o.a.number.isRequired,itemsPerPage:o.a.number.isRequired,totalCount:o.a.number.isRequired,onChange:o.a.func},u.defaultProps={onChange:()=>{}},d.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"ItemsSource",function(){return y}),n.d(t,"ResourceItemsSource",function(){return v});n(16),n(17),n(29),n(15),n(22),n(36),n(89);var r=n(2),a=n(433),i=n(190),o=n(86),s=n(314);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){b(e,t,n[t])})}return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function e(t){var n=t.getRequest,a=t.doRequest,i=t.processResults,l=t.isPlainList,c=void 0!==l&&l,u=p(t,["getRequest","doRequest","processResults","isPlainList"]);f(this,e),b(this,"onBeforeUpdate",null),b(this,"onAfterUpdate",null),b(this,"onError",null),b(this,"getCallbackContext",()=>null),b(this,"updatePagination",e=>{var t=e.page,n=e.itemsPerPage,r=this._paginator,a=r.page,i=r.itemsPerPage;this._paginator.setItemsPerPage(n),this._paginator.setPage(t),this._changed({pagination:{page:a!==this._paginator.page,itemsPerPage:i!==this._paginator.itemsPerPage}})}),b(this,"toggleSorting",e=>{this._sorter.toggleField(e),this._savedOrderByField=this._sorter.field,this._changed({sorting:!0})}),b(this,"updateSearch",e=>{this._searchTerm=e,""===e?this._sorter.setField(this._savedOrderByField):this._sorter.setField(null),this._paginator.setPage(1),this._changed({search:!0,pagination:{page:!0}})}),b(this,"updateSelectedTags",e=>{this._selectedTags=e,this._paginator.setPage(1),this._changed({tags:!0,pagination:{page:!0}})}),b(this,"update",()=>this._changed()),b(this,"handleError",e=>{Object(r.isFunction)(this.onError)&&(e.status&&e.data&&(e=new o.a(e)),this.onError(e))}),Object(r.isFunction)(n)||(n=r.identity),this._fetcher=c?new s.PlainListFetcher({getRequest:n,doRequest:a,processResults:i}):new s.PaginatedListFetcher({getRequest:n,doRequest:a,processResults:i}),this.setState(u),this._pageItems=[],this._params={}}return g(e,[{key:"_beforeUpdate",value:function(){return Object(r.isFunction)(this.onBeforeUpdate)?Promise.resolve(this.onBeforeUpdate(this.getState(),this.getCallbackContext())):Promise.resolve()}},{key:"_afterUpdate",value:function(){return Object(r.isFunction)(this.onAfterUpdate)?Promise.resolve(this.onAfterUpdate(this.getState(),this.getCallbackContext())):Promise.resolve()}},{key:"_changed",value:function(e){var t={paginator:this._paginator,sorter:this._sorter,searchTerm:this._searchTerm,selectedTags:this._selectedTags},n={},a=m({},this.getCallbackContext(),{setCustomParams:e=>{Object(r.extend)(n,e)}});return this._beforeUpdate().then(()=>this._fetcher.fetch(e,t,a).then(e=>{var t=e.results,r=e.count,a=e.allResults;return this._pageItems=t,this._allItems=a||null,this._paginator.setTotalCount(r),this._params=m({},this._params,n),this._afterUpdate()}).catch(e=>{this.handleError(e)}))}}]),g(e,[{key:"getState",value:function(){return{page:this._paginator.page,itemsPerPage:this._paginator.itemsPerPage,orderByField:this._sorter.field,orderByReverse:this._sorter.reverse,searchTerm:this._searchTerm,selectedTags:this._selectedTags,totalCount:this._paginator.totalCount,pageItems:this._pageItems,allItems:this._allItems,params:this._params}}},{key:"setState",value:function(e){this._paginator=new a.default(e),this._sorter=new i.default(e),this._searchTerm=e.searchTerm||"",this._selectedTags=e.selectedTags||[],this._savedOrderByField=this._sorter.field}}]),e}(),v=function(e){function t(e){var n=e.getResource,a=e.getItemProcessor,i=p(e,["getResource","getItemProcessor"]);return f(this,t),a=Object(r.isFunction)(a)?a:()=>null,c(this,u(t).call(this,m({},i,{doRequest:(e,t)=>{return n(t)(e).$promise},processResults:(e,t)=>{var n=a(t);return n=Object(r.isFunction)(n)?n:r.identity,Object(r.map)(e,e=>n(e,t))}})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,y),t}()},function(e,t,n){"use strict";n.r(t);n(205);var r=n(2);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var s=function(){function e(t){a(this,e),Object(r.extend)(this,{pathPrefix:"/".concat(t.path)},Object(r.omit)(t,["isActive"])),Object(r.isFunction)(t.isActive)&&(this.isActive=t.isActive)}return o(e,[{key:"isActive",value:function(e){return e.startsWith(this.pathPrefix)}}]),e}(),l=function(){function e(){a(this,e),this.items=[]}return o(e,[{key:"add",value:function(e){this.items.push(new s(e)),this.items=Object(r.sortBy)(this.items,"order")}}]),e}();t.default=new l},function(e,t,n){"use strict";n.r(t);n(61),n(104),n(16),n(17),n(89),n(92),n(968),n(105),n(22),n(36),n(15);var r=n(0),a=n.n(r),i=n(2);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default={getFields:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{options:{}},n=e.configuration_schema;!function(e){Object(i.each)(e.properties,(t,n)=>{"password"!==n&&"passwd"!==n||(t.type="password"),n.endsWith("File")&&(t.type="file"),"boolean"===t.type&&(t.type="checkbox"),"string"===t.type&&(t.type="text"),t.required=Object(i.includes)(e.required,n)}),e.order=e.order||[]}(n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===Object.keys(t).length){var n=e.properties;Object.keys(n).forEach(e=>{Object(i.isUndefined)(n[e].default)||"checkbox"!==n[e].type||(t[e]=n[e].default)})}}(n,t.options);var r=!t.id;return[{name:"name",title:"Name",type:"text",required:!0,initialValue:t.name,contentAfter:a.a.createElement("hr"),placeholder:"My ".concat(e.name),autoFocus:r}].concat(o(function(e,t,n){var r=new Array(t.length);return Object.keys(e).forEach(a=>{var i=t.indexOf(a),o={name:a,title:e[a].title,type:e[a].type,placeholder:e[a].default&&e[a].default.toString(),required:e[a].required,initialValue:n[a]};i>-1?r[i]=o:r.push(o)}),r}(n.properties,n.order,t.options)))},updateTargetWithValues:function(e,t){e.name=t.name,Object.keys(t).forEach(n=>{"name"!==n&&(e.options[n]=t[n])})},toHuman:function(e){return e.replace(/_/g," ").replace(/(?:^|\s)\S/g,e=>e.toUpperCase())},getBase64:function(e){return new Promise((t,n)=>{var r=new FileReader;r.readAsDataURL(e),r.onload=(()=>t(r.result.substr(r.result.indexOf(",")+1))),r.onerror=(e=>n(e))})}}},,function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});n(92);var r=n(12),a=n.n(r),i=n(455),o=n.n(i),s=n(2),l=n.n(s);o.a.options.scalePercentBy100=!1;var c=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,u=Object.prototype.hasOwnProperty;function d(e){switch(e.displayAs){case"number":return function(e){if(l.a.isString(e)&&""!==e){var t=o()(0);return n=>null===n||""===n?"":t.set(n).format(e)}return e=>e}(e.numberFormat);case"boolean":return function(e){if(l.a.isArray(e)){if(e.length>=2)return t=>null==t?"":""+e[t?1:0];if(1===e.length)return t=>t?e[0]:""}return e=>null==e?"":e?"true":"false"}(e.booleanValues);case"datetime":return t=e.dateTimeFormat,l.a.isString(t)&&""!==t?e=>e&&a.a.isMoment(e)?e.format(t):e:e=>e;default:return e.allowHTML&&e.highlightLinks?e=>(l.a.isString(e)&&(e=e.replace(c,'$1<a href="$2" target="_blank">$2</a>')),e):e=>e}var t}function p(e,t){return l.a.isString(e)?e.replace(/{{\s*([^\s]+?)\s*}}/g,(e,n)=>u.call(t,n)&&!l.a.isUndefined(t[n])?t[n]:e):""}},function(e,t,n){"use strict";n.r(t),n.d(t,"MappingType",function(){return Y}),n.d(t,"parameterMappingsToEditableMappings",function(){return K}),n.d(t,"editableMappingsToParameterMappings",function(){return X}),n.d(t,"synchronizeWidgetTitles",function(){return J}),n.d(t,"ParameterMappingInput",function(){return Z}),n.d(t,"ParameterMappingListInput",function(){return ne});n(61),n(104),n(42),n(16),n(17),n(15),n(29),n(105);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(5),c=n.n(l),u=n(30),d=n.n(u),p=n(113),m=n.n(p),f=n(452),h=n.n(f),g=n(21),b=n.n(g),y=n(27),v=n.n(y),w=n(184),O=n.n(w),j=n(37),E=n.n(j),S=n(99),x=n.n(S),P=n(47),k=n.n(P),$=n(48),_=n.n($),C=n(421),T=n(100),q=n(14),R=n(52),D=n(123);n(1080);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function L(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?Q(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=d.a.Option,Y={DashboardAddNew:"dashboard-add-new",DashboardMapToExisting:"dashboard-map-to-existing",WidgetLevel:"widget-level",StaticValue:"static-value"};function K(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(r.map)(e,e=>{var a=Object(r.extend)({},e),i=Object(r.includes)(n,e.mapTo);switch(a.param=Object(r.find)(t,t=>t.name===e.name),e.type){case T.ParameterMappingType.DashboardLevel:a.type=i?Y.DashboardMapToExisting:Y.DashboardAddNew,a.value=null;break;case T.ParameterMappingType.StaticValue:a.type=Y.StaticValue,a.param=a.param.clone(),a.param.setValue(a.value);break;case T.ParameterMappingType.WidgetLevel:a.type=Y.WidgetLevel,a.value=null}return a})}function X(e){return Object(r.fromPairs)(Object(r.map)(e,e=>{var t=Object(r.extend)({},e);switch(e.type){case Y.DashboardAddNew:case Y.DashboardMapToExisting:t.type=T.ParameterMappingType.DashboardLevel,t.value=null;break;case Y.StaticValue:t.type=T.ParameterMappingType.StaticValue,t.param=e.param.clone(),t.param.setValue(t.value),t.value=t.param.value;break;case Y.WidgetLevel:t.type=T.ParameterMappingType.WidgetLevel,t.value=null}return delete t.param,[t.name,t]}))}function J(e,t){var n=[];return Object(r.each)(e,e=>{e.type===T.ParameterMappingType.DashboardLevel&&Object(r.each)(t,t=>{var a=t.options.parameterMappings;Object(r.each)(a,r=>{r.type===T.ParameterMappingType.DashboardLevel&&r.mapTo===e.mapTo&&r.title!==e.title&&(r.title=e.title,n.push(t))})})}),n}var Z=function(e){function t(){var e,n;M(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return G(Q(n=L(this,(e=V(t)).call.apply(e,[this].concat(i)))),"formItemProps",{labelCol:{span:5},wrapperCol:{span:16},className:"form-item"}),G(Q(n),"updateSourceType",e=>{var t=n.props.mapping.mapTo,a=n.props.existingParamNames;e!==Y.DashboardMapToExisting||Object(r.includes)(a,t)||(t=a[0]),n.updateParamMapping({type:e,mapTo:t})}),G(Q(n),"updateParamMapping",e=>{var t=n.props,a=t.onChange,i=t.mapping;a(Object(r.extend)({},i,e))}),n}return B(t,i.a.Component),U(t,[{key:"renderMappingTypeSelector",value:function(){var e=Object(r.isEmpty)(this.props.existingParamNames);return i.a.createElement(x.a.Group,{value:this.props.mapping.type,onChange:e=>this.updateSourceType(e.target.value)},i.a.createElement(x.a,{className:"radio",value:Y.DashboardAddNew},"New dashboard parameter"),i.a.createElement(x.a,{className:"radio",value:Y.DashboardMapToExisting,disabled:e},"Existing dashboard parameter"," ",e?i.a.createElement(_.a,{title:"There are no dashboard parameters corresponding to this data type"},i.a.createElement(v.a,{type:"question-circle",theme:"filled"})):null),i.a.createElement(x.a,{className:"radio",value:Y.WidgetLevel},"Widget parameter"),i.a.createElement(x.a,{className:"radio",value:Y.StaticValue},"Static value"))}},{key:"renderDashboardAddNew",value:function(){var e=this.props.mapping.mapTo;return i.a.createElement(E.a,{value:e,onChange:e=>this.updateParamMapping({mapTo:e.target.value})})}},{key:"renderDashboardMapToExisting",value:function(){var e=this.props,t=e.mapping,n=e.existingParamNames;return i.a.createElement(d.a,{value:t.mapTo,onChange:e=>this.updateParamMapping({mapTo:e}),dropdownMatchSelectWidth:!1},Object(r.map)(n,e=>i.a.createElement(W,{value:e,key:e},e)))}},{key:"renderStaticValue",value:function(){var e=this.props.mapping;return i.a.createElement(C.ParameterValueInput,{type:e.param.type,value:e.param.normalizedValue,enumOptions:e.param.enumOptions,queryId:e.param.queryId,onSelect:e=>this.updateParamMapping({value:e}),clientConfig:this.props.clientConfig,Query:this.props.Query})}},{key:"renderInputBlock",value:function(){switch(this.props.mapping.type){case Y.DashboardAddNew:return["Key","Enter a new parameter keyword",this.renderDashboardAddNew()];case Y.DashboardMapToExisting:return["Key","Select from a list of existing parameters",this.renderDashboardMapToExisting()];case Y.StaticValue:return["Value",null,this.renderStaticValue()];default:return[]}}},{key:"render",value:function(){var e=this.props.inputError,t=z(this.renderInputBlock(),3),n=t[0],r=t[1],a=t[2];return i.a.createElement(k.a,{layout:"horizontal"},i.a.createElement(k.a.Item,I({label:"Source"},this.formItemProps),this.renderMappingTypeSelector()),i.a.createElement(k.a.Item,I({style:{height:60,visibility:a?"visible":"hidden"},label:n},this.formItemProps,{validateStatus:e?"error":"",help:e||r}),a))}}]),t}();G(Z,"propTypes",{mapping:s.a.object,existingParamNames:s.a.arrayOf(s.a.string),onChange:s.a.func,clientConfig:s.a.any,Query:s.a.any,inputError:s.a.string}),G(Z,"defaultProps",{mapping:{},existingParamNames:[],onChange:()=>{},clientConfig:null,Query:null,inputError:null});var ee=function(e){function t(e){var n;return M(this,t),G(Q(n=L(this,V(t).call(this,e))),"onVisibleChange",e=>{e?n.show():n.hide()}),G(Q(n),"onChange",e=>{var t=null;e.type===Y.DashboardAddNew&&(Object(r.isEmpty)(e.mapTo)?t="Keyword must have a value":Object(r.includes)(n.props.existingParamNames,e.mapTo)&&(t="A parameter with this name already exists")),n.setState({mapping:e,inputError:t})}),G(Q(n),"save",()=>{n.props.onChange(n.props.mapping,n.state.mapping),n.hide()}),G(Q(n),"show",()=>{n.setState({visible:!0,mapping:Object(r.clone)(n.props.mapping)})}),G(Q(n),"hide",()=>{n.setState({visible:!1})}),n.state={visible:!1,mapping:Object(r.clone)(n.props.mapping),inputError:null},n}return B(t,i.a.Component),U(t,[{key:"renderContent",value:function(){var e=this.state,t=e.mapping,n=e.inputError;return i.a.createElement("div",{className:"parameter-mapping-editor"},i.a.createElement("header",null,"Edit Source and Value ",i.a.createElement(D.HelpTrigger,{type:"VALUE_SOURCE_OPTIONS"})),i.a.createElement(Z,{mapping:t,existingParamNames:this.props.existingParamNames,onChange:this.onChange,clientConfig:q.clientConfig,Query:R.Query,inputError:n}),i.a.createElement("footer",null,i.a.createElement(b.a,{onClick:this.hide},"Cancel"),i.a.createElement(b.a,{onClick:this.save,disabled:!!n,type:"primary"},"OK")))}},{key:"render",value:function(){return i.a.createElement(h.a,{placement:"left",trigger:"click",content:this.renderContent(),visible:this.state.visible,onVisibleChange:this.onVisibleChange},i.a.createElement(b.a,{size:"small",type:"dashed"},i.a.createElement(v.a,{type:"edit"})))}}]),t}();G(ee,"propTypes",{mapping:s.a.object.isRequired,existingParamNames:s.a.arrayOf(s.a.string).isRequired,onChange:s.a.func.isRequired});var te=function(e){function t(){var e,n;M(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return G(Q(n=L(this,(e=V(t)).call.apply(e,[this].concat(i)))),"state",{showPopup:!1,title:""}),G(Q(n),"onPopupVisibleChange",e=>{n.setState({showPopup:e,title:e?n.getMappingTitle():""})}),G(Q(n),"onEditingTitleChange",e=>{n.setState({title:e.target.value})}),G(Q(n),"save",()=>{var e=Object(r.extend)({},n.props.mapping,{title:n.state.title});n.props.onChange(e),n.hide()}),G(Q(n),"hide",()=>{n.setState({showPopup:!1})}),n}return B(t,i.a.Component),U(t,[{key:"getMappingTitle",value:function(){var e=this.props.mapping;if(Object(r.isString)(e.title)&&""!==e.title)return e.title;if(e.type===Y.DashboardMapToExisting){var t=Object(r.find)(this.props.existingParams,{name:e.mapTo});t&&(e=t)}return e.title||e.param.title}},{key:"renderPopover",value:function(){var e=this.props.mapping.param.title;return i.a.createElement("div",{className:"parameter-mapping-title-editor"},i.a.createElement(E.a,{size:"small",value:this.state.title,placeholder:e,onChange:this.onEditingTitleChange,onPressEnter:this.save,maxLength:100,autoFocus:!0}),i.a.createElement(b.a,{size:"small",type:"dashed",onClick:this.hide},i.a.createElement(v.a,{type:"close"})),i.a.createElement(b.a,{size:"small",type:"dashed",onClick:this.save},i.a.createElement(v.a,{type:"check"})))}},{key:"renderEditButton",value:function(){return this.props.mapping.type===Y.StaticValue?i.a.createElement(_.a,{placement:"right",title:"Titles for static values don't appear in widgets"},i.a.createElement("i",{className:"fa fa-eye-slash"})):i.a.createElement(h.a,{placement:"right",trigger:"click",content:this.renderPopover(),visible:this.state.showPopup,onVisibleChange:this.onPopupVisibleChange},i.a.createElement(b.a,{size:"small",type:"dashed"},i.a.createElement(v.a,{type:"edit"})))}},{key:"render",value:function(){var e=this.props.mapping.type===Y.StaticValue;return i.a.createElement("div",{className:c()("parameter-mapping-title",{disabled:e})},i.a.createElement("span",{className:"text"},this.getMappingTitle()),this.renderEditButton())}}]),t}();G(te,"propTypes",{existingParams:s.a.arrayOf(s.a.object),mapping:s.a.object.isRequired,onChange:s.a.func.isRequired}),G(te,"defaultProps",{existingParams:[]});var ne=function(e){function t(){return M(this,t),L(this,V(t).apply(this,arguments))}return B(t,i.a.Component),U(t,[{key:"updateParamMapping",value:function(e,t){var n=N(this.props.mappings),a=Object(r.findIndex)(n,e);a>=0?n[a]=t:n.push(t),this.props.onChange(n)}},{key:"render",value:function(){var e=this.props.existingParams,t=this.props.mappings.map(e=>({mapping:e}));return i.a.createElement("div",{className:"parameters-mapping-list"},i.a.createElement(m.a,{dataSource:t,size:"middle",pagination:!1,rowKey:(e,t)=>"row".concat(t)},i.a.createElement(m.a.Column,{title:"Title",dataIndex:"mapping",key:"title",render:t=>i.a.createElement(te,{existingParams:e,mapping:t,onChange:e=>this.updateParamMapping(t,e)})}),i.a.createElement(m.a.Column,{title:"Keyword",dataIndex:"mapping",key:"keyword",className:"keyword",render:e=>i.a.createElement("code",null,"{{ ".concat(e.name," }}"))}),i.a.createElement(m.a.Column,{title:"Default Value",dataIndex:"mapping",key:"value",render:e=>this.constructor.getDefaultValue(e,this.props.existingParams)}),i.a.createElement(m.a.Column,{title:"Value Source",dataIndex:"mapping",key:"source",render:t=>{var n=e.filter(e=>{return e.type===t.param.type}).map(e=>{return e.name});return i.a.createElement(a.Fragment,null,this.constructor.getSourceTypeLabel(t)," ",i.a.createElement(ee,{mapping:t,existingParamNames:n,onChange:(e,t)=>this.updateParamMapping(e,t)}))}})))}}],[{key:"getStringValue",value:function(e){return e?e instanceof Object&&"start"in e&&"end"in e?"".concat(e.start," ~ ").concat(e.end):"object"===A(e)?Object(r.map)(e,e=>this.getStringValue(e)).join(", "):e.toString():""}},{key:"getDefaultValue",value:function(e,t){var n=e.type,a=e.mapTo,i=e.name,o=e.param;if(n===Y.DashboardMapToExisting&&a!==i){var s=Object(r.find)(t,{name:a});s&&(o=s)}else n===Y.StaticValue&&(o=o.clone().setValue(e.value));var l=R.Parameter.getValue(o);return this.getStringValue(l)}},{key:"getSourceTypeLabel",value:function(e){var t=e.type,n=e.mapTo;switch(t){case Y.DashboardAddNew:case Y.DashboardMapToExisting:return i.a.createElement(a.Fragment,null,"Dashboard"," ",i.a.createElement(O.a,{className:"tag"},n));case Y.WidgetLevel:return"Widget parameter";case Y.StaticValue:return"Static value";default:return""}}}]),t}();G(ne,"propTypes",{mappings:s.a.arrayOf(s.a.object),existingParams:s.a.arrayOf(s.a.object),onChange:s.a.func}),G(ne,"defaultProps",{mappings:[],existingParams:[],onChange:()=>{}})},,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(61),n(104),n(551),n(16),n(17),n(29);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}var l=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),void 0!==e.status&&(404===e.status?r="It seems like the page you're looking for cannot be found.":403!==e.status&&401!==e.status||(r="It seems like you dont have permission to see this page.")),void 0===r&&(r="It seems like we encountered an error. Try refreshing this page or contact your administrator."),(n=a(this,i(t).call(this,r))).rejection=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(t,s(Error)),t}()},,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"Widget",function(){return l}),n.d(t,"ParameterMappingType",function(){return c}),n.d(t,"default",function(){return d});n(106);var r=n(12),a=n.n(r),i=n(2),o=n(28);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u.$inject=["$http","$location","Query","dashboardGridOptions"];var l=null;var c={DashboardLevel:"dashboard-level",WidgetLevel:"widget-level",StaticValue:"static-value"};function u(e,t,n,r){var l,u,d,p=function(){function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Object(i.each)(e,(e,t)=>{this[t]=e});var t=function(e,t){t.width=1;var n={autoHeight:!1,sizeX:Math.round(e.columns/2),sizeY:e.defaultSizeY,minSizeX:e.minSizeX,maxSizeX:e.maxSizeX,minSizeY:e.minSizeY,maxSizeY:e.maxSizeY},r=t.visualization?o.registeredVisualizations[t.visualization.type]:null;if(Object(i.isObject)(r)){Object.prototype.hasOwnProperty.call(r,"autoHeight")&&(n.autoHeight=r.autoHeight);var a=parseInt(r.minColumns,10);isFinite(a)&&a>=0&&(n.minSizeX=a);var s=parseInt(r.maxColumns,10);isFinite(s)&&s>=0&&(n.maxSizeX=Math.min(s,e.columns));var l=parseInt(r.height,10);isFinite(l)&&(n.minSizeY=Math.ceil(l/e.rowHeight));var c=parseInt(r.minRows,10);isFinite(c)&&(n.minSizeY=c);var u=parseInt(r.maxRows,10);isFinite(u)&&u>=0&&(n.maxSizeY=u);var d=parseInt(r.defaultColumns,10);isFinite(d)&&d>0&&(n.sizeX=d);var p=parseInt(r.defaultRows,10);isFinite(p)&&p>0&&(n.sizeY=p)}return n}(r,this);this.options=this.options||{},this.options.position=Object(i.extend)({},t,Object(i.pick)(this.options.position,["col","row","sizeX","sizeY","autoHeight"])),this.options.position.sizeY<0&&(this.options.position.autoHeight=!0),this.updateOriginalPosition()}var c,u,d;return c=l,(u=[{key:"updateOriginalPosition",value:function(){this.$originalPosition=Object(i.extend)({},this.options.position)}},{key:"getQuery",value:function(){return!this.query&&this.visualization&&(this.query=new n(this.visualization.query)),this.query}},{key:"getQueryResult",value:function(){return this.data}},{key:"getName",value:function(){return this.visualization?"".concat(this.visualization.query.name," (").concat(this.visualization.name,")"):Object(i.truncate)(this.text,20)}},{key:"load",value:function(e,t){if(this.visualization)return(e||void 0===this.queryResult)&&(this.loading=!0,this.refreshStartedAt=a()(),(void 0===t||e)&&(t=e?0:void 0),this.queryResult=this.getQuery().getQueryResult(t),this.queryResult.toPromise().then(e=>{this.loading=!1,this.data=e}).catch(e=>{this.loading=!1,this.data=e})),this.queryResult.toPromise()}},{key:"save",value:function(){var t=Object(i.pick)(this,"options","text","id","width","dashboard_id","visualization_id"),n="api/widgets";return this.id&&(n="".concat(n,"/").concat(this.id)),e.post(n,t).then(e=>(Object(i.each)(e.data,(e,t)=>{this[t]=e}),this.updateOriginalPosition(),this))}},{key:"delete",value:function(){var t="api/widgets/".concat(this.id);return e.delete(t)}},{key:"isStaticParam",value:function(e){return this.getParameterMappings()[e.name].type===l.MappingType.StaticValue}},{key:"getParametersDefs",value:function(){var e=this.getParameterMappings(),n=this.getQuery()?this.getQuery().getParametersDefs():[],r=t.search(),a=[l.MappingType.WidgetLevel,l.MappingType.StaticValue];return Object(i.map)(Object(i.filter)(n,t=>a.indexOf(e[t.name].type)>=0),t=>{var n=e[t.name],a=t.clone();return a.title=n.title||t.title,a.locals=[t],a.urlPrefix="p_w".concat(this.id,"_"),n.type===l.MappingType.StaticValue?a.setValue(n.value):a.fromUrlParams(r),a})}},{key:"getParameterMappings",value:function(){Object(i.isObject)(this.options.parameterMappings)||(this.options.parameterMappings={});var e={},t=this.getQuery()?this.getQuery().getParametersDefs():[];Object(i.each)(t,t=>{e[t.name]=!0,Object(i.isObject)(this.options.parameterMappings[t.name])||(this.options.parameterMappings[t.name]={name:t.name,type:t.global?l.MappingType.DashboardLevel:l.MappingType.WidgetLevel,mapTo:t.name,value:null,title:""})});var n=Object(i.difference)(Object(i.keys)(this.options.parameterMappings),Object(i.keys)(e));return Object(i.each)(n,e=>{delete this.options.parameterMappings[e]}),this.options.parameterMappings}}])&&s(c.prototype,u),d&&s(c,d),l}();return d=c,(u="MappingType")in(l=p)?Object.defineProperty(l,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):l[u]=d,p}function d(e){e.factory("Widget",u),e.run(["$injector",e=>{l=e.get("Widget")}])}d.init=!0},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"PreviewCard",function(){return d}),n.d(t,"UserPreviewCard",function(){return p}),n.d(t,"DataSourcePreviewCard",function(){return m});n(42),n(15),n(22),n(36);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(5),l=n.n(s);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e){var t=e.imageUrl,n=e.roundedImage,r=e.title,i=e.body,o=e.children,s=e.className,d=u(e,["imageUrl","roundedImage","title","body","children","className"]);return a.a.createElement("div",c({},d,{className:s+" w-100 d-flex align-items-center"}),a.a.createElement("img",{src:t,width:"32",height:"32",className:l()({"profile__image--settings":n},"m-r-5"),alt:"Logo/Avatar"}),a.a.createElement("div",{className:"flex-fill"},a.a.createElement("div",null,r),i&&a.a.createElement("div",{className:"text-muted"},i)),o)}function p(e){var t=e.user,n=e.withLink,r=e.children,i=u(e,["user","withLink","children"]),o=n?a.a.createElement("a",{href:"users/"+t.id},t.name):t.name;return a.a.createElement(d,c({},i,{imageUrl:t.profile_image_url,title:o,body:t.email}),r)}function m(e){var t=e.dataSource,n=e.withLink,r=e.children,i=u(e,["dataSource","withLink","children"]),o="/static/images/db-logos/".concat(t.type,".png"),s=n?a.a.createElement("a",{href:"data_sources/"+t.id},t.name):t.name;return a.a.createElement(d,c({},i,{imageUrl:o,title:s}),r)}d.propTypes={imageUrl:o.a.string.isRequired,title:o.a.node.isRequired,body:o.a.node,roundedImage:o.a.bool,className:o.a.string,children:o.a.node},d.defaultProps={body:null,roundedImage:!0,className:"",children:null},p.propTypes={user:o.a.shape({profile_image_url:o.a.string.isRequired,name:o.a.string.isRequired,email:o.a.string.isRequired}).isRequired,withLink:o.a.bool,children:o.a.node},p.defaultProps={withLink:!1,children:null},m.propTypes={dataSource:o.a.shape({name:o.a.string.isRequired,type:o.a.string.isRequired}).isRequired,withLink:o.a.bool,children:o.a.node},m.defaultProps={withLink:!1,children:null}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"TagsControl",function(){return v}),n.d(t,"QueryTagsControl",function(){return O}),n.d(t,"DashboardTagsControl",function(){return j}),n.d(t,"default",function(){return E});n(16),n(17),n(15),n(22),n(36),n(29),n(89);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(48),u=n.n(c),d=n(418);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=h(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==p(a)&&"function"!=typeof a?g(r):a,y(g(n),"editTags",(e,t)=>{d.default.showModal({tags:e,getAvailableTags:t}).result.then(n.props.onEdit)}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i.a.Component),n=t,(a=[{key:"renderEditButton",value:function(){var e=Object(r.map)(this.props.tags,r.trim);return i.a.createElement("a",{className:"label label-tag",role:"none",onClick:()=>this.editTags(e,this.props.getAvailableTags)},0===e.length&&i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"zmdi zmdi-plus m-r-5"}),"Add tag"),e.length>0&&i.a.createElement("i",{className:"zmdi zmdi-edit"}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"tags-control "+this.props.className},this.props.children,Object(r.map)(this.props.tags,e=>i.a.createElement("span",{className:"label label-tag",key:e,title:e},e)),this.props.canEdit&&this.renderEditButton())}}])&&f(n.prototype,a),o&&f(n,o),t}();function w(e){var t=e.archivedTooltip;function n(e){var n=e.isDraft,r=e.isArchived,a=m(e,["isDraft","isArchived"]);return i.a.createElement(v,a,!r&&n&&i.a.createElement("span",{className:"label label-tag-unpublished"},"Unpublished"),r&&i.a.createElement(u.a,{placement:"right",title:t},i.a.createElement("span",{className:"label label-tag-archived"},"Archived")))}return n.propTypes=Object(r.extend)({isDraft:s.a.bool,isArchived:s.a.bool},v.propTypes),n.defaultProps=Object(r.extend)({isDraft:!1,isArchived:!1},v.defaultProps),n}y(v,"propTypes",{tags:s.a.arrayOf(s.a.string),canEdit:s.a.bool,getAvailableTags:s.a.func,onEdit:s.a.func,className:s.a.string,children:s.a.node}),y(v,"defaultProps",{tags:[],canEdit:!1,getAvailableTags:()=>Promise.resolve([]),onEdit:()=>{},className:"",children:null});var O=w({archivedTooltip:"This query is archived and can't be used in dashboards, or appear in search results."}),j=w({archivedTooltip:"This dashboard is archived and won't be listed in dashboards nor search results."});function E(e){e.component("queryTagsControl",Object(l.react2angular)(O)),e.component("dashboardTagsControl",Object(l.react2angular)(j))}E.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"BaseColors",function(){return i}),n.d(t,"AdditionalColors",function(){return o}),n.d(t,"ColorPaletteArray",function(){return s});n(15),n(22),n(36);var r=n(2);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={Blue:"#356AFF",Red:"#E92828",Green:"#3BD973",Purple:"#604FE9",Cyan:"#50F5ED",Orange:"#FB8D3D","Light Blue":"#799CFF",Lilac:"#B554FF","Light Green":"#8CFFB4",Brown:"#A55F2A",Black:"#000000",Gray:"#494949",Pink:"#FF7DE3","Dark Blue":"#002FB4"},o={"Indian Red":"#981717","Green 2":"#17BF51","Green 3":"#049235",DarkTurquoise:"#00B6EB","Dark Violet":"#A58AFF","Pink 2":"#C63FA9"},s=Object(r.values)(i),l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){a(e,t,n[t])})}return e}({},i,o);t.default=l},,function(e,t,n){"use strict";n.r(t),n.d(t,"IMG_ROOT",function(){return r}),n.d(t,"Destination",function(){return a}),n.d(t,"default",function(){return o}),i.$inject=["$resource"];var r="/static/images/destinations",a=null;function i(e){return e("api/destinations/:id",{id:"@id"},{get:{method:"GET",cache:!1,isArray:!1},types:{method:"GET",cache:!1,isArray:!0,url:"api/destinations/types"},query:{method:"GET",cache:!1,isArray:!0}})}function o(e){e.factory("Destination",i),e.run(["$injector",e=>{a=e.get("Destination")}])}o.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"normalizeValue",function(){return g}),n.d(t,"prepareData",function(){return E}),n.d(t,"prepareLayout",function(){return S}),n.d(t,"updateData",function(){return k}),n.d(t,"updateLayout",function(){return $});n(1386),n(204),n(336),n(15),n(22),n(61),n(223);var r=n(2),a=n(12),i=n.n(a),o=n(10),s=n.n(o),l=n(442),c=n.n(l),u=n(82),d=n(112);function p(e){return Object(r.isUndefined)(e)?e:c()(e)||0}function m(e){var t=e["@@y"];return void 0!==e["@@yError"]&&(t="".concat(t,"  ").concat(e["@@yError"])),void 0!==e["@@yPercent"]&&(t="".concat(e["@@yPercent"]," (").concat(t,")")),void 0!==e["@@size"]&&(t="".concat(t,": ").concat(e["@@size"])),t}function f(e){return e["@@yPercent"]+" ("+e["@@y"]+")"}function h(e){var t="#333333";if(Object(r.isString)(e)){var n,a,i,o=/#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(e);if(o)n=parseInt(o[1],16),a=parseInt(o[2],16),i=parseInt(o[3],16);else{if(!(o=/#?([0-9a-f])([0-9a-f])([0-9a-f])/i.exec(e)))return t;n=parseInt(o[1]+o[1],16),a=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)}.299*n+.587*a+.114*i<170&&(t="#ffffff")}return t}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD HH:mm:ss";return"datetime"===t&&i.a.utc(e).isValid()&&(e=i.a.utc(e)),i.a.isMoment(e)?e.format(n):e}function b(e,t){return e===t?0:e<t?-1:1}function y(e,t,n){return Object(r.isNumber)(t)||(t=Math.min(0,Object(r.min)(Object(r.map)(e,e=>Object(r.min)(e.y))))),Object(r.isNumber)(n)||(n=Object(r.max)(Object(r.map)(e,e=>Object(r.max)(e.y)))),[t,n]}function v(e){return"datetime"===e?"date":"logarithmic"===e?"log":e}function w(e){return Object(r.isUndefined)(e)||Object(r.isUndefined)(e.title)?null:e.title.text}function O(e,t){var n=e.length>2?2:1,a=Math.ceil(e.length/n);return{rows:n,cellsInRow:a,cellWidth:1/a,cellHeight:1/n,xPadding:.02,yPadding:.1,hasX:Object(r.includes)(Object(r.values)(t.columnMapping),"x"),hasY2:!!Object(r.find)(e,e=>{var n=t.seriesOptions[e.name]||{type:t.globalSeriesType};return 1===n.yAxis&&(null===t.series.stacking||"line"===n.type)})}}function j(e,t){var n=!0===t.sortX||void 0===t.sortX,a=Object(u.a)({displayAs:"number",numberFormat:t.numberFormat}),i=Object(u.a)({displayAs:"number",numberFormat:t.percentFormat}),o=""===t.textFormat?m:e=>Object(u.b)(t.textFormat,e),s=function(e){var t="text";return/{{\s*@@x\s*}}/.test(e.textFormat)||(t+="+x"),/{{\s*@@name\s*}}/.test(e.textFormat)||(t+="+name"),t}(t);return Object(r.map)(e,(e,l)=>{var c=t.seriesOptions[e.name]||{type:t.globalSeriesType},u=function(e,t){return e.color||d.ColorPaletteArray[t%d.ColorPaletteArray.length]}(c,l),m=n?Object(r.sortBy)(e.data,e=>g(e.x,t.xAxis.type)):e.data,f=Object(r.includes)(["bubble","scatter"],c.type)?g:p,b=new Map,y=[],v=[],w=[];Object(r.each)(m,e=>{var n=g(e.x,t.xAxis.type),a=f(e.y,t.yAxis[0].type),i=p(e.yError),o=p(e.size);b.set(n,{x:n,y:a,yError:i,size:o,yPercent:null,raw:Object(r.extend)({},e.$raw,{"@@x":g(e.x,t.xAxis.type,t.dateTimeFormat)})}),y.push(n),v.push(a),w.push(i)});var O={visible:!0,hoverinfo:s,x:y,y:v,error_y:{array:w,color:u},name:c.name||e.name,marker:{color:u},insidetextfont:{color:h(u)},sourceData:b,formatNumber:a,formatPercent:i,formatText:o};return 1!==c.yAxis||null!==t.series.stacking&&"line"!==c.type||(O.yaxis="y2"),function(e,t,n){switch(t){case"column":e.type="bar",n.showDataLabels&&(e.textposition="inside");break;case"line":e.mode="lines"+(n.showDataLabels?"+text":"");break;case"area":e.mode="lines"+(n.showDataLabels?"+text":""),e.fill=null===n.series.stacking?"tozeroy":"tonexty";break;case"scatter":e.type="scatter",e.mode="markers"+(n.showDataLabels?"+text":"");break;case"bubble":e.mode="markers";break;case"box":e.type="box",e.mode="markers"}}(O,c.type,t),"bubble"===c.type?O.marker={color:u,size:Object(r.map)(m,e=>e.size)}:"box"===c.type&&(O.boxpoints="outliers",O.hoverinfo=!1,O.marker={color:u,size:3},t.showpoints&&(O.boxpoints="all",O.jitter=.3,O.pointpos=-1.8)),O})}function E(e,t){return"pie"===t.globalSeriesType?function(e,t){var n=O(e,t),a=n.cellWidth,i=n.cellHeight,o=n.xPadding,l=n.yPadding,c=n.cellsInRow,m=n.hasX,h=Object(u.a)({displayAs:"number",numberFormat:t.numberFormat}),b=Object(u.a)({displayAs:"number",numberFormat:t.percentFormat}),y=""===t.textFormat?f:e=>Object(u.b)(t.textFormat,e),v=function(e){var t="text";return/{{\s*@@x\s*}}/.test(e.textFormat)||(t+="+label"),t}(t),w=s.a.scale.ordinal().domain([]).range(d.ColorPaletteArray),j={};return Object(r.each)(t.valuesOptions,(e,t)=>{Object(r.isString)(e.color)&&""!==e.color&&(j[t]=e.color)}),Object(r.map)(e,(e,n)=>{var s=n%c*a,u=Math.floor(n/c)*i,d=new Map,f=Object(r.reduce)(e.data,(e,t)=>{var n=p(t.y);return e+Math.abs(n)},0);return Object(r.each)(e.data,e=>{var n=g(e.x),a=p(e.y);d.set(n,{x:n,y:a,yPercent:a/f*100,raw:Object(r.extend)({},e.$raw,{"@@x":g(e.x,t.xAxis.type,t.dateTimeFormat)})})}),{values:Object(r.map)(e.data,e=>e.y),labels:Object(r.map)(e.data,e=>m?g(e.x):"Slice ".concat(n)),type:"pie",hole:.4,marker:{colors:Object(r.map)(e.data,e=>j[e.x]||w(e.x))},hoverinfo:v,text:[],textinfo:t.showDataLabels?"percent":"none",textposition:"inside",textfont:{color:"#ffffff"},name:e.name,direction:t.direction.type,domain:{x:[s,s+a-o],y:[u,u+i-l]},sourceData:d,formatNumber:h,formatPercent:b,formatText:y}})}(e,t):"heatmap"===t.globalSeriesType?Object(r.flatten)(function(e,t){var n=Object(u.a)({displayAs:"number",numberFormat:t.numberFormat}),a=[];return a=t.colorScheme?"Custom..."===t.colorScheme?[[0,t.heatMinColor],[1,t.heatMaxColor]]:t.colorScheme:[[0,"#356aff"],[.14,"#4a7aff"],[.28,"#5d87ff"],[.42,"#7398ff"],[.56,"#fb8c8c"],[.71,"#ec6463"],[.86,"#ec4949"],[1,"#e92827"]],Object(r.map)(e,e=>{var i={x:[],y:[],z:[],type:"heatmap",name:"",colorscale:a};i.x=Object(r.uniq)(Object(r.map)(e.data,"x")),i.y=Object(r.uniq)(Object(r.map)(e.data,"y")),t.sortX&&i.x.sort(b),t.sortY&&i.y.sort(b),t.reverseX&&i.x.reverse(),t.reverseY&&i.y.reverse();for(var o=Object(r.max)(Object(r.map)(e.data,"zVal")),s={x:[],y:[],mode:"text",hoverinfo:"skip",showlegend:!1,text:[],textfont:{color:[]}},l=0;l<i.y.length;l+=1){for(var c=[],u=0;u<i.x.length;u+=1){var d=Object(r.find)(e.data,{x:i.x[u],y:i.y[l]}),p=d?d.zVal:0;c.push(p),isFinite(o)&&t.showDataLabels&&(s.x.push(i.x[u]),s.y.push(i.y[l]),s.text.push(n(p)),t.colorScheme&&"Custom..."===t.colorScheme?s.textfont.color.push("white"):s.textfont.color.push(p/o<.25?"white":"black"))}i.z.push(c)}return isFinite(o)&&t.showDataLabels?[i,s]:[i]})}(e,t)):j(e,t)}function S(e,t,n,a){var i=O(t,n),o=i.cellsInRow,s=i.cellWidth,l=i.cellHeight,c=i.xPadding,u=i.hasY2,d={margin:{l:10,r:10,b:10,t:25,pad:4},width:Math.floor(e.offsetWidth),height:Math.floor(e.offsetHeight),autosize:!0,showlegend:!Object(r.has)(n,"legend")||n.legend.enabled};if("pie"===n.globalSeriesType){var p=/{{\s*@@name\s*}}/.test(n.textFormat);d.annotations=p?[]:Object(r.filter)(Object(r.map)(t,(e,t)=>{var r=t%o*s,a=Math.floor(t/o)*l;return{x:r+(s-c)/2,y:a+l-.015,xanchor:"center",yanchor:"top",text:(n.seriesOptions[e.name]||{}).name||e.name,showarrow:!1}}))}else"box"===n.globalSeriesType&&(d.boxmode="group",d.boxgroupgap=.5),d.xaxis={title:w(n.xAxis),type:v(n.xAxis.type),automargin:!0},n.sortX&&"category"===d.xaxis.type&&(n.reverseX?d.xaxis.categoryorder="category descending":d.xaxis.categoryorder="category ascending"),Object(r.isUndefined)(n.xAxis.labels)||(d.xaxis.showticklabels=n.xAxis.labels.enabled),Object(r.isArray)(n.yAxis)&&(d.yaxis={title:w(n.yAxis[0]),type:v(n.yAxis[0].type),automargin:!0},(Object(r.isNumber)(n.yAxis[0].rangeMin)||Object(r.isNumber)(n.yAxis[0].rangeMax))&&(d.yaxis.range=y(a.filter(e=>"y2"!==!e.yaxis),n.yAxis[0].rangeMin,n.yAxis[0].rangeMax))),u&&!Object(r.isUndefined)(n.yAxis)&&(d.yaxis2={title:w(n.yAxis[1]),type:v(n.yAxis[1].type),overlaying:"y",side:"right",automargin:!0},(Object(r.isNumber)(n.yAxis[1].rangeMin)||Object(r.isNumber)(n.yAxis[1].rangeMax))&&(d.yaxis2.range=y(a.filter(e=>"y2"===e.yaxis),n.yAxis[1].rangeMin,n.yAxis[1].rangeMax))),n.series.stacking&&(d.barmode="relative");return d}function x(e,t){return Object(r.each)(e,e=>{var n=t.seriesOptions[e.name]||{type:t.globalSeriesType};e.text=[],e.hover=[],("pie"===t.globalSeriesType?e.labels:e.x).forEach(a=>{var i={"@@name":e.name},o=e.sourceData.get(a);o&&(i["@@y"]=Object(r.includes)(["bubble","scatter"],n.type)?o.y:e.formatNumber(o.y),void 0!==o.yError&&(i["@@yError"]=e.formatNumber(o.yError)),void 0!==o.size&&(i["@@size"]=e.formatNumber(o.size)),(t.series.percentValues||"pie"===t.globalSeriesType)&&(i["@@yPercent"]=e.formatPercent(Math.abs(o.yPercent))),Object(r.extend)(i,o.raw)),e.text.push(e.formatText(i))})}),e}function P(e,t,n,a){var i=function(e,t){var n=new Set;Object(r.each)(e,e=>{e.sourceData.forEach(e=>{n.add(e.x)})});var a=[];return n.forEach(e=>{a.push(e)}),t?Object(r.sortBy)(a,r.identity):a}(e,n);a=void 0===a?null:a,Object(r.each)(e,e=>{e.x=[],e.y=[],e.error_y.array=[],Object(r.each)(i,n=>{e.x.push(n);var r=e.sourceData.get(n);r?(e.y.push(t.series.percentValues?r.yPercent:r.y),e.error_y.array.push(r.yError)):(e.y.push(a),e.error_y.array.push(null))})})}function k(e,t){if(0===e.length)return e;if("pie"===t.globalSeriesType)return x(e,t),e;if("heatmap"===t.globalSeriesType)return e;!function(e,t){if(t.series.percentValues&&e.length>0){var n=new Map;Object(r.each)(e,e=>{e.sourceData.forEach(e=>{var t=n.get(e.x)||0;n.set(e.x,t+Math.abs(e.y))})}),Object(r.each)(e,e=>{var t=[];e.sourceData.forEach(e=>{var r=n.get(e.x);e.yPercent=Math.sign(e.y)*Math.abs(e.y)/r*100,t.push(e.yPercent)}),e.y=t})}}(e=Object(r.filter)(e,e=>!0===e.visible),t);var n=!0===t.sortX||void 0===t.sortX;if(t.series.stacking){if(["line","area"].indexOf(t.globalSeriesType)>=0){P(e,t,n,0);var a=null;Object(r.each)(e,e=>{a&&(e.y=Object(r.map)(e.y,(e,t)=>a.y[t]+e)),a=e})}}else n&&"category"===t.xAxis.type&&"box"!==t.globalSeriesType&&P(e,t,n);x(e,t)}function $(e,t,n){t.width=Math.floor(e.offsetWidth),t.height=Math.floor(e.offsetHeight);var a=Object(r.find)(["transform","webkitTransform","mozTransform","msTransform","oTransform"],t=>Object(r.has)(e.style,t));if(t.width<=600)t.legend={orientation:"h",y:0,x:0,xanchor:"left",yanchor:"bottom"},function(e){var t=e.querySelector(".legend");if(t)for(var n=t.parentNode;n;){if("svg"===n.tagName.toLowerCase()){n.style.overflow="visible";break}n=n.parentNode}}(e),n(e,Object(r.pick)(t,["width","height","legend"])).then(()=>{var i=e.querySelector(".legend");if(i){var o=Object(r.reduce)(i.querySelectorAll(".traces"),(e,t)=>{var n=t.getBoundingClientRect();return e=e||n,{top:Math.min(e.top,n.top),bottom:Math.max(e.bottom,n.bottom)}},null);t.height=Math.floor(Math.max(t.height/2,t.height-(o.bottom-o.top))),i.style[a]="translate(0, "+t.height+"px)",n(e,Object(r.pick)(t,["height"]))}});else{t.legend={orientation:"v",y:1,x:1,xanchor:"left",yanchor:"top"};var i=e.querySelector(".legend");i&&(i.style[a]=null),n(e,Object(r.pick)(t,["width","height","legend"]))}}},,,,,,function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(22),n(36),n(29),n(15);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(47),l=n.n(s),c=n(37),u=n.n(c),d=n(308),p=n.n(d),m=n(181),f=n.n(m),h=n(21),g=n.n(h),b=n(657),y=n.n(b),v=n(27),w=n.n(v),O=n(2),j=n(30),E=n.n(j),S=n(9),x=n(40),P=n(80);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){D(e,t,n[t])})}return e}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=e=>{var t=e.type,n=e.required,r=e.minLength;return[n&&{required:n,message:"This field is required."},r&&Object(O.includes)(["text","email","password"],t)&&{min:r,message:"This field is too short."},"email"===t&&{type:"email",message:"This field must be a valid email."}].filter(e=>e)},N=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=T(t).call(this,e),n=!a||"object"!==k(a)&&"function"!=typeof a?q(r):a,D(q(n),"setActionInProgress",(e,t)=>{n.setState(n=>({inProgressActions:_({},n.inProgressActions,D({},e,t))}))}),D(q(n),"handleSubmit",e=>{n.setState({isSubmitting:!0}),e.preventDefault(),n.props.form.validateFieldsAndScroll((e,t)=>{e?n.setState({isSubmitting:!1}):n.props.onSubmit(t,e=>{var t=n.props.form,r=t.setFieldsValue,a=t.getFieldsValue;n.setState({isSubmitting:!1}),r(a()),S.default.success(e)},e=>{n.setState({isSubmitting:!1}),S.default.error(e)})})}),D(q(n),"handleAction",e=>{var t=e.target.dataset.action;n.setActionInProgress(t,!0),n.actionCallbacks[t](()=>{n.setActionInProgress(t,!1)})}),D(q(n),"base64File",(e,t)=>{t&&t.fileList[0]&&P.default.getBase64(t.file).then(t=>{n.props.form.setFieldsValue(D({},e,t))})}),n.state={isSubmitting:!1,inProgressActions:[]},n.actionCallbacks=n.props.actions.reduce((e,t)=>_({},e,D({},t.name,t.callback)),null),e.actions.forEach(e=>{n.state.inProgressActions[e.name]=!1}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,a.a.Component),n=t,(r=[{key:"renderUpload",value:function(e,t){var n=this.props.form,r=n.getFieldDecorator,i=n.getFieldValue,o=e.name,s=e.initialValue,l={rules:A(e),initialValue:s,getValueFromEvent:this.base64File.bind(this,o)},c=void 0!==i(o)&&i(o)!==s,u=a.a.createElement(y.a,$({},t,{beforeUpload:()=>!1}),a.a.createElement(g.a,{disabled:c},a.a.createElement(w.a,{type:"upload"})," Click to upload"));return r(o,l)(u)}},{key:"renderSelect",value:function(e,t){var n=this.props.form.getFieldDecorator,r=e.name,i=e.options,o=e.mode,s=e.initialValue,l=e.readOnly,c=e.loading,u=E.a.Option;return n(r,{rules:A(e),initialValue:s})(a.a.createElement(E.a,$({},t,{optionFilterProp:"children",loading:c||!1,mode:o}),i&&i.map(e=>{var t=e.value,n=e.title;return a.a.createElement(u,{key:"".concat(t),value:t,disabled:l},n||t)})))}},{key:"renderField",value:function(e,t){var n=this.props.form.getFieldDecorator,r=e.name,i=e.type,o=e.initialValue,s=e.title||P.default.toHuman(r),l={rules:A(e),valuePropName:"checkbox"===i?"checked":"value",initialValue:o};return"checkbox"===i?n(r,l)(a.a.createElement(f.a,t,s)):"file"===i?this.renderUpload(e,t):"select"===i?this.renderSelect(e,t):"content"===i?e.content:"number"===i?n(r,l)(a.a.createElement(p.a,t)):n(r,l)(a.a.createElement(u.a,t))}},{key:"renderFields",value:function(){return this.props.fields.map(e=>{var t=l.a.Item,n=e.name,r=e.title,i=e.type,o=e.readOnly,s=e.autoFocus,c=e.contentAfter,u=r||P.default.toHuman(n),d=this.props,p=d.feedbackIcons,m=d.form,f={className:"m-b-10",hasFeedback:"checkbox"!==i&&"file"!==i&&p,label:"checkbox"===i?"":u},h=_({},e.props,{className:"w-100",name:n,type:i,readOnly:o,autoFocus:s,placeholder:e.placeholder,"data-test":u});return a.a.createElement(a.a.Fragment,{key:n},a.a.createElement(t,f,this.renderField(e,h)),Object(O.isFunction)(c)?c(m.getFieldValue(n)):c)})}},{key:"renderActions",value:function(){return this.props.actions.map(e=>{var t=this.state.inProgressActions[e.name],n=this.props.form.isFieldsTouched,r={key:e.name,htmlType:"button",className:e.pullRight?"pull-right m-t-10":"m-t-10",type:e.type,disabled:n()&&e.disableWhenDirty,loading:t,onClick:this.handleAction};return a.a.createElement(g.a,$({},r,{"data-action":e.name}),e.name)})}},{key:"render",value:function(){var e={type:"primary",htmlType:"submit",className:"w-100",disabled:this.state.isSubmitting,loading:this.state.isSubmitting},t=this.props,n=t.id,r=t.hideSubmitButton,i=t.saveText,o=!r;return a.a.createElement(l.a,{id:n,layout:"vertical",onSubmit:this.handleSubmit},this.renderFields(),o&&a.a.createElement(g.a,e,i),this.renderActions())}}])&&C(n.prototype,r),i&&C(n,i),t}();D(N,"propTypes",{id:o.a.string,fields:o.a.arrayOf(x.Field),actions:o.a.arrayOf(x.Action),feedbackIcons:o.a.bool,hideSubmitButton:o.a.bool,saveText:o.a.string,onSubmit:o.a.func,form:x.AntdForm.isRequired}),D(N,"defaultProps",{id:null,fields:[],actions:[],feedbackIcons:!1,hideSubmitButton:!1,saveText:"Save",onSubmit:()=>{}}),t.default=l.a.create()(N)},,function(e,t,n){"use strict";n.r(t),n.d(t,"TYPES",function(){return P}),n.d(t,"HelpTrigger",function(){return k}),n.d(t,"default",function(){return $});n(16),n(17),n(29),n(15),n(22),n(36);var r=n(11),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(5),c=n.n(l),u=n(48),d=n.n(u),p=n(660),m=n.n(p),f=n(67),h=n(242);n(1040);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E="https://redash.io",S="/help",x=2e4,P={HOME:["","Help"],VALUE_SOURCE_OPTIONS:["/user-guide/querying/query-parameters#Value-Source-Options","Guide: Value Source Options"],SHARE_DASHBOARD:["/user-guide/dashboards/sharing-dashboards","Guide: Sharing and Embedding Dashboards"],DS_ATHENA:["/data-sources/amazon-athena-setup","Guide: Help Setting up Amazon Athena"],DS_BIGQUERY:["/data-sources/bigquery-setup","Guide: Help Setting up BigQuery"],DS_URL:["/data-sources/querying-urls","Guide: Help Setting up URL"],DS_MONGODB:["/data-sources/mongodb-setup","Guide: Help Setting up MongoDB"],DS_GOOGLE_SPREADSHEETS:["/data-sources/querying-a-google-spreadsheet","Guide: Help Setting up Google Spreadsheets"],DS_GOOGLE_ANALYTICS:["/data-sources/google-analytics-setup","Guide: Help Setting up Google Analytics"],DS_AXIBASETSD:["/data-sources/axibase-time-series-database","Guide: Help Setting up Axibase Time Series"],DS_RESULTS:["/user-guide/querying/query-results-data-source","Guide: Help Setting up Query Results"]},k=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=v(t).call(this,e),n=!a||"object"!==g(a)&&"function"!=typeof a?w(r):a,j(w(n),"iframeRef",null),j(w(n),"iframeLoadingTimeout",null),j(w(n),"state",{visible:!1,loading:!1,error:!1}),j(w(n),"loadIframe",e=>{clearTimeout(n.iframeLoadingTimeout),n.setState({loading:!0,error:!1}),n.iframeRef.current.src=e,n.iframeLoadingTimeout=setTimeout(()=>{n.setState({error:e,loading:!1})},x)}),j(w(n),"onIframeLoaded",()=>{n.setState({loading:!1}),clearTimeout(n.iframeLoadingTimeout)}),j(w(n),"openDrawer",()=>{n.setState({visible:!0});var e=b(P[n.props.type],1)[0],t=E+S+e;setTimeout(()=>n.loadIframe(t),300)}),j(w(n),"closeDrawer",()=>{n.setState({visible:!1})}),n.iframeRef=i.a.createRef(),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentWillUnmount",value:function(){clearTimeout(this.iframeLoadingTimeout)}},{key:"render",value:function(){var e=b(P[this.props.type],2)[1],t=c()("help-trigger",this.props.className);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.a,{title:e},i.a.createElement("a",{href:"javascript: void(0)",onClick:this.openDrawer,className:t},this.props.children)),i.a.createElement(m.a,{placement:"right",onClose:this.closeDrawer,visible:this.state.visible,className:"help-drawer",destroyOnClose:!0,width:400},i.a.createElement("div",{className:"drawer-wrapper"},!this.state.error&&i.a.createElement("iframe",{ref:this.iframeRef,title:"Redash Help",src:"about:blank",className:c()({ready:!this.state.loading}),onLoad:this.onIframeLoaded}),this.state.loading&&i.a.createElement(f.BigMessage,{icon:"fa-spinner fa-2x fa-pulse",message:"Loading...",className:"help-message"}),this.state.error&&i.a.createElement(f.BigMessage,{icon:"fa-exclamation-circle",className:"help-message"},"Something went wrong.",i.a.createElement("br",null),i.a.createElement("a",{href:this.state.error,target:"_blank",rel:"noopener"},"Click here")," ","to open the page in a new window.")),i.a.createElement(h.default,{name:"HelpDrawerExtraContent",onLeave:this.closeDrawer,openPageUrl:this.loadIframe})))}}])&&y(n.prototype,r),a&&y(n,a),t}();function $(e){e.component("helpTrigger",Object(r.react2angular)(k))}j(k,"propTypes",{type:s.a.oneOf(Object.keys(P)).isRequired,className:s.a.string,children:s.a.node}),j(k,"defaultProps",{className:null,children:i.a.createElement("i",{className:"fa fa-question-circle"})}),$.init=!0},,,function(e,t,n){"use strict";n.r(t),n.d(t,"AdditionalColors",function(){return l}),n.d(t,"darkenColor",function(){return c}),n.d(t,"createNumberFormatter",function(){return u}),n.d(t,"prepareData",function(){return d}),n.d(t,"prepareFeatureProperties",function(){return p}),n.d(t,"getValueForFeature",function(){return m}),n.d(t,"getColorByValue",function(){return f}),n.d(t,"createScale",function(){return h}),n.d(t,"inferCountryCodeType",function(){return g});var r=n(320),a=n.n(r),i=n(2),o=n.n(i),s=n(82),l={White:"#ffffff",Black:"#000000","Light Gray":"#dddddd"};function c(e){return a()(e).darken().hex()}function u(e,t){var n=Object(s.a)({displayAs:"number",numberFormat:e});return e=>o.a.isNumber(e)&&isFinite(e)?n(e):t}function d(e,t,n){if(!t||!n)return{};var r={};return o.a.each(e,e=>{if(e[t]){var a=parseFloat(e[n]);r[e[t]]={code:e[t],value:isFinite(a)?a:void 0,item:e}}}),r}function p(e,t,n,r){var a={};o.a.each(e.properties,(e,t)=>{a["@@"+t]=e}),a["@@value"]=t;var i=n[e.properties[r]]||{};return o.a.extend(a,i.item)}function m(e,t,n){var r=e.properties[n];if(o.a.isString(r)&&o.a.isObject(t[r]))return t[r].value}function f(e,t,n,r){if(o.a.isNumber(e)&&isFinite(e))for(var a=0;a<t.length;a+=1)if(e<=t[a])return n[a];return r}function h(e,t,n){var r=o.a.uniq(o.a.filter(o.a.map(e,e=>m(e,t,n.countryCodeType)),o.a.isNumber));if(0===r.length)return{limits:[],colors:[],legend:[]};var i=Math.min(r.length,n.steps);if(1===i)return{limits:r,colors:[n.colors.max],legend:[{color:n.colors.max,limit:o.a.first(r)}]};var s=a.a.limits(r,n.clusteringMode,i-1),l=a.a.scale([n.colors.min,n.colors.max]).colors(s.length),c=o.a.map(l,(e,t)=>({color:e,limit:s[t]})).reverse();return{limits:s,colors:l,legend:c}}function g(e,t,n){var r={countries:{iso_a2:/^[a-z]{2}$/i,iso_a3:/^[a-z]{3}$/i,iso_n3:/^[0-9]{3}$/i},subdiv_japan:{name:/^[a-z]+$/i,name_local:/^[\u3400-\u9FFF\uF900-\uFAFF]|[\uD840-\uD87F][\uDC00-\uDFFF]+$/i,iso_3166_2:/^JP-[0-9]{2}$/i}}[e],a=o.a.mapValues(r,()=>0),i=o.a.chain(t).reduce((e,t)=>{var a=t[n];return o.a.isString(a)&&o.a.each(r,(t,n)=>{e[n]+=t.test(a)?1:0}),e},a).toPairs().reduce((e,t)=>t[1]>e[1]?t:e).value();return i[1]/t.length>=.9?i[0]:null}},,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(42);var r=n(0),a=n.n(r),i=n(67);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){return a.a.createElement("div",{className:"text-center"},a.a.createElement(i.BigMessage,o({icon:"fa-search",message:"Sorry, we couldn't find anything."},e)))}},,function(e,t,n){"use strict";n.r(t),n.d(t,"PageHeader",function(){return l}),n.d(t,"default",function(){return c});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11);function l(e){var t=e.title;return a.a.createElement("div",{className:"page-header-wrapper row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0"},a.a.createElement("div",{className:"col-sm-9 p-l-0 p-r-0"},a.a.createElement("h3",null,t)))}function c(e){e.component("pageHeader",Object(s.react2angular)(l))}l.propTypes={title:o.a.string.isRequired},c.init=!0},function(e,t,n){"use strict";n.r(t);var r=n(25);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.objectCounters={}}var t,n,i;return t=e,(n=[{key:"refresh",value:function(){return r.$http.get("api/organization/status").then(e=>{var t=e.data;return this.objectCounters=t.object_counters,this})}}])&&a(t.prototype,n),i&&a(t,i),e}();t.default=new i},function(e,t,n){"use strict";n.r(t),n.d(t,"Dashboard",function(){return o}),n.d(t,"collectDashboardFilters",function(){return s}),n.d(t,"default",function(){return u});n(36),n(106),n(22),n(15);var r=n(2),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}c.$inject=["$resource","$http","$location","currentUser","Widget","dashboardGridOptions"];var o=null;function s(e,t,n){var r={};return t.forEach(t=>{t.getFilters().forEach(t=>{var o=a.a.has(n,t.name);if(o||e.dashboard_filters_enabled){o&&(t.current=n[t.name]);var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}({},t);a.a.has(r,t.name)?r[s.name].values=a.a.union(r[s.name].values,s.values):r[s.name]=s}})}),a.a.values(r)}function l(e){var t=Math.max(a.a.chain(e).map(e=>e.options.position.sizeY).max().value(),20)+5;return a.a.chain(e).sortBy(e=>e.options.position.row).groupBy(e=>e.options.position.row).reduce((e,n)=>{var r=1;return a.a.each(n,n=>{r=Math.max(r,n.options.position.autoHeight?t:n.options.position.sizeY),n.options.position.row=e,n.options.position.sizeY<1&&(n.options.position.sizeY=t)}),e+r},0).value(),e=a.a.sortBy(e,e=>e.options.position.col),e=a.a.sortBy(e,e=>e.options.position.row)}function c(e,t,n,r,i,o){function s(e){return l(a.a.map(e,e=>new i(e)))}function c(e){e.widgets&&(e.widgets=s(e.widgets)),e.publicAccessEnabled=void 0!==e.public_url}var u=t.defaults.transformResponse.concat(e=>(e.results?e.results.forEach(c):c(e),e)),d=e("api/dashboards/:slug",{slug:"@slug"},{get:{method:"GET",transformResponse:u},save:{method:"POST",transformResponse:u},query:{method:"GET",isArray:!1,transformResponse:u},recent:{method:"get",isArray:!0,url:"api/dashboards/recent",transformResponse:u},favorites:{method:"get",isArray:!1,url:"api/dashboards/favorites"},favorite:{method:"post",isArray:!1,url:"api/dashboards/:slug/favorite",transformRequest:[()=>""]},unfavorite:{method:"delete",isArray:!1,url:"api/dashboards/:slug/favorite",transformRequest:[()=>""]}});return d.prototype.canEdit=function(){return r.canEdit(this)||this.can_edit},d.prototype.calculateNewWidgetPosition=function(e){var t=a.a.extend({sizeX:o.defaultSizeX},a.a.extend({},e.options).position).sizeX,n=a.a.chain(this.widgets).map(e=>{var t=a.a.extend({},e.options),n=a.a.extend({row:0,sizeY:0},t.position);return{left:n.col,top:n.row,right:n.col+n.sizeX,bottom:n.row+n.sizeY,width:n.sizeX,height:n.sizeY}}).reduce((e,t)=>{for(var n=Math.max(t.left,0),r=Math.min(t.right,e.length+1),a=n;a<r;a+=1)e[a]=Math.max(e[a],t.bottom);return e},a.a.map(new Array(o.columns),a.a.constant(0))).value();return a.a.chain(a.a.range(0,o.columns-t+1)).map(e=>({col:e,row:a.a.chain(n).slice(e,e+t).max().value()})).sortBy("row").first().value()},d.prepareDashboardWidgets=s,d.prepareWidgetsForDashboard=l,d.prototype.getParametersDefs=function(){var e={},t=n.search();return a.a.each(this.widgets,t=>{if(t.getQuery()){var n=t.getParameterMappings();t.getQuery().getParametersDefs().forEach(t=>{var r=n[t.name];r.type===i.MappingType.DashboardLevel&&(e[r.mapTo]||(e[r.mapTo]=t.clone(),e[r.mapTo].name=r.mapTo,e[r.mapTo].title=r.title||t.title,e[r.mapTo].locals=[]),e[r.mapTo].locals.push(t))})}}),a.a.values(a.a.each(e,e=>{e.fromUrlParams(t)}))},d}function u(e){e.factory("Dashboard",c),e.run(["$injector",e=>{o=e.get("Dashboard")}])}u.init=!0},,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});n(16),n(17),n(42),n(29);var r=n(0),a=n.n(r),i=n(37),o=n.n(i),s=n(27),l=n.n(s),c=n(48),u=n.n(c);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(e){var n,r,i,o,s,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=f(t).call(this,e),n=!i||"object"!==d(i)&&"function"!=typeof i?h(r):i,o=h(n),l=(()=>{n.ref.current.select();try{if(!document.execCommand("copy"))throw new Error;n.setState({copied:"Copied!"})}catch(e){n.setState({copied:"Copy failed"})}n.resetCopyState=setTimeout(()=>n.setState({copied:null}),2e3)}),(s="copy")in o?Object.defineProperty(o,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[s]=l,n.state={copied:null},n.ref=a.a.createRef(),n.copyFeatureSupported=document.queryCommandSupported("copy"),n.resetCopyState=null,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentWillUnmount",value:function(){this.resetCopyState&&clearTimeout(this.resetCopyState)}},{key:"render",value:function(){var e=a.a.createElement(u.a,{title:this.state.copied||"Copy"},a.a.createElement(l.a,{type:"copy",style:{cursor:"pointer"},onClick:this.copy}));return a.a.createElement(o.a,p({},this.props,{ref:this.ref,addonAfter:this.copyFeatureSupported&&e}))}}])&&m(n.prototype,r),i&&m(n,i),t}()},function(e,t,n){"use strict";n.r(t),n.d(t,"TimeAgo",function(){return h}),n.d(t,"default",function(){return g});var r=n(12),a=n.n(r),i=n(2),o=n(0),s=n.n(o),l=n(13),c=n.n(l),u=n(1),d=n.n(u),p=n(40),m=n(14),f=n(313);function h(e){var t=e.date,n=e.placeholder,r=e.autoUpdate,l=function(e){return(e=Object(i.isNil)(e)?null:a()(e))&&e.isValid()?e:null}(t),c=l?l.fromNow():n,u=l?l.format(m.clientConfig.dateTimeFormat):"",d=Object(f.a)();return Object(o.useEffect)(()=>{if(r){var e=setInterval(d,3e4);return()=>clearInterval(e)}},[r]),s.a.createElement("span",{title:u,"data-test":"TimeAgo"},c)}function g(e){e.directive("amTimeAgo",()=>({link:function(e,t,n){var r=n.amTimeAgo;e.$watch(r,e=>{c.a.render(s.a.createElement(h,{date:e}),t[0])}),e.$on("$destroy",()=>{c.a.unmountComponentAtNode(t[0])})}})),e.component("rdTimeAgo",{bindings:{value:"="},controller:["$scope","$element",function(e,t){e.$watch("$ctrl.value",()=>{c.a.render(s.a.createElement(h,{date:this.value,placeholder:"-"}),t[0])}),e.$on("$destroy",()=>{c.a.unmountComponentAtNode(t[0])})}]})}h.propTypes={date:d.a.oneOfType([d.a.string,d.a.number,d.a.instanceOf(Date),p.Moment]),placeholder:d.a.string,autoUpdate:d.a.bool},h.defaultProps={date:null,placeholder:"",autoUpdate:!0},g.init=!0},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"FilterType",function(){return b}),n.d(t,"FiltersType",function(){return y}),n.d(t,"filterData",function(){return w}),n.d(t,"Filters",function(){return O}),n.d(t,"default",function(){return j});n(36),n(61),n(104),n(105),n(16),n(17),n(15),n(22);var r=n(2),a=n(12),i=n.n(a),o=n(0),s=n.n(o),l=n(1),c=n.n(l),u=n(11),d=n(30),p=n.n(d);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var h="###Redash::Filters::SelectAll###",g="###Redash::Filters::Clear###",b=c.a.shape({name:c.a.string.isRequired,friendlyName:c.a.string.isRequired,multiple:c.a.bool,current:c.a.oneOfType([c.a.any,c.a.arrayOf(c.a.any)]).isRequired,values:c.a.arrayOf(c.a.any).isRequired}),y=c.a.arrayOf(b);function v(e,t){return(n,a)=>{n.multiple&&Object(r.includes)(a,h)&&(a=f(n.values)),n.multiple&&Object(r.includes)(a,g)&&(a=[]),e=Object(r.map)(e,e=>e.name===n.name?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}({},n,{current:a}):e),t(e)}}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!Object(r.isArray)(e))return[];var n=e;return Object(r.isArray)(t)&&t.length>0&&(n=n.filter(e=>Object(r.every)(t,t=>{var n=e[t.name],a=Object(r.isArray)(t.current)?t.current:[t.current];return Object(r.some)(a,e=>i.a.isMoment(n)?n.isSame(e):e===n||String(n)===e)}))),n}function O(e){var t=e.filters,n=e.onChange;return 0===t.length?null:(n=v(t,n),s.a.createElement("div",{className:"filters-wrapper"},s.a.createElement("div",{className:"parameter-container container bg-white"},s.a.createElement("div",{className:"row"},Object(r.map)(t,e=>{var t=Object(r.map)(e.values,e=>s.a.createElement(p.a.Option,{key:e},e));return s.a.createElement("div",{key:e.name,className:"col-sm-6 p-l-0 filter-container"},s.a.createElement("label",null,e.friendlyName),s.a.createElement(p.a,{className:"w-100",mode:e.multiple?"multiple":"default",value:e.current,allowClear:e.multiple,showSearch:!0,onChange:t=>n(e,t)},!e.multiple&&t,e.multiple&&[s.a.createElement(p.a.Option,{key:g},s.a.createElement("i",{className:"fa fa-square-o m-r-5"}),"Clear"),s.a.createElement(p.a.Option,{key:h},s.a.createElement("i",{className:"fa fa-check-square-o m-r-5"}),"Select All"),s.a.createElement(p.a.OptGroup,{key:"Values",title:"Values"},t)]))})))))}function j(e){e.component("filters",Object(u.react2angular)(O))}O.propTypes={filters:y.isRequired,onChange:c.a.func},O.defaultProps={onChange:()=>{}},j.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"CounterCard",function(){return b}),n.d(t,"QueuesTable",function(){return E}),n.d(t,"QueriesTable",function(){return S}),n.d(t,"OtherTasksTable",function(){return x});var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(113),c=n.n(l),u=n(192),d=n.n(u),p=n(208),m=n.n(p),f=n(454),h=n.n(f),g=n(23);function b(e){var t=e.title,n=e.value,r=e.loading;return i.a.createElement(m.a,{spinning:r},i.a.createElement(d.a,null,t,i.a.createElement("div",{className:"f-20"},n)))}b.propTypes={title:s.a.string.isRequired,value:s.a.oneOfType([s.a.number,s.a.string]),loading:s.a.bool.isRequired},b.defaultProps={value:""};var y=[{title:"Worker Name",dataIndex:"worker"},{title:"PID",dataIndex:"worker_pid"},{title:"Queue",dataIndex:"queue"},g.Columns.custom(e=>"active"===e?i.a.createElement("span",null,i.a.createElement(h.a,{status:"processing"})," Active"):i.a.createElement("span",null,i.a.createElement(h.a,{status:"warning"})," ",e),{title:"State",dataIndex:"state"}),g.Columns.timeAgo({title:"Start Time",dataIndex:"start_time"})],v=y.concat([g.Columns.timeAgo({title:"Enqueue Time",dataIndex:"enqueue_time"}),{title:"Query ID",dataIndex:"query_id"},{title:"Org ID",dataIndex:"org_id"},{title:"Data Source ID",dataIndex:"data_source_id"},{title:"User ID",dataIndex:"user_id"},{title:"Scheduled",dataIndex:"scheduled"}]),w=y.concat([{title:"Task Name",dataIndex:"task_name"}]),O=Object(r.map)(["Name","Active","Reserved","Waiting"],e=>({title:e,dataIndex:e.toLowerCase()})),j={loading:s.a.bool.isRequired,items:s.a.arrayOf(s.a.object).isRequired};function E(e){var t=e.loading,n=e.items;return i.a.createElement(c.a,{loading:t,columns:O,rowKey:"name",dataSource:n})}function S(e){var t=e.loading,n=e.items;return i.a.createElement(c.a,{loading:t,columns:v,rowKey:"task_id",dataSource:n})}function x(e){var t=e.loading,n=e.items;return i.a.createElement(c.a,{loading:t,columns:w,rowKey:"task_id",dataSource:n})}E.propTypes=j,S.propTypes=j,x.propTypes=j},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"images/redash_icon_small.png"},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(25);function a(e){return r.$http.get(e).then(e=>(function(e){return e.tags||[]})(e.data))}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(125),l=n.n(s),c=n(143);n(1141);function u(e){var t=e.activeTab,n=e.children;return a.a.createElement("div",{className:"container admin-page-layout"},a.a.createElement(c.PageHeader,{title:"Admin"}),a.a.createElement("div",{className:"bg-white tiled"},a.a.createElement(l.a,{className:"admin-page-layout-tabs",defaultActiveKey:t,animated:!1},a.a.createElement(l.a.TabPane,{key:"system_status",tab:a.a.createElement("a",{href:"admin/status"},"System Status")},"system_status"===t?n:null),a.a.createElement(l.a.TabPane,{key:"tasks",tab:a.a.createElement("a",{href:"admin/queries/tasks"},"Celery Status")},"tasks"===t?n:null),a.a.createElement(l.a.TabPane,{key:"outdated_queries",tab:a.a.createElement("a",{href:"admin/queries/outdated"},"Outdated Queries")},"outdated_queries"===t?n:null))))}u.propTypes={activeTab:o.a.string,children:o.a.node},u.defaultProps={activeTab:"system_status",children:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"EmptyState",function(){return g}),n.d(t,"default",function(){return b});var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(5),u=n.n(c),d=n(25),p=n(14),m=n(144);n(1167);function f(){d.$uibModal.open({component:"editDashboardDialog",resolve:{dashboard:()=>({name:null,layout:null})}})}function h(e){var t=e.show,n=e.completed,r=e.text,a=e.url,o=e.urlText,s=e.onClick;return t?i.a.createElement("li",{className:u()({done:n})},i.a.createElement("a",{href:a||"javascript:void(0)",onClick:s},o)," ",r):null}function g(e){var t=e.icon,n=e.title,a=e.description,o=e.illustration,s=e.helpLink,l=e.onboardingMode,c={dataSource:!0,query:!0,alert:e.showAlertStep,dashboard:e.showDashboardStep,inviteUsers:e.showInviteStep},u={dataSource:m.default.objectCounters.data_sources>0,query:m.default.objectCounters.queries>0,alert:m.default.objectCounters.alerts>0,dashboard:m.default.objectCounters.dashboards>0,inviteUsers:m.default.objectCounters.users>1};return!l||Object(r.some)(Object(r.keys)(c),e=>c[e]&&!u[e])?i.a.createElement("div",{className:"empty-state bg-white tiled"},i.a.createElement("div",{className:"empty-state__summary"},n&&i.a.createElement("h4",null,n),i.a.createElement("h2",null,i.a.createElement("i",{className:t})),i.a.createElement("p",null,a),i.a.createElement("img",{src:"/static/images/illustrations/"+o+".svg",alt:o+" Illustration",width:"75%"})),i.a.createElement("div",{className:"empty-state__steps"},i.a.createElement("h4",null,"Let's get started"),i.a.createElement("ol",null,p.currentUser.isAdmin&&i.a.createElement(h,{show:c.dataSource,completed:u.dataSource,url:"data_sources/new",urlText:"Connect",text:"a Data Source"}),!p.currentUser.isAdmin&&i.a.createElement(h,{show:c.dataSource,completed:u.dataSource,text:"Ask an account admin to connect a data source"}),i.a.createElement(h,{show:c.query,completed:u.query,url:"queries/new",urlText:"Create",text:"your first Query"}),i.a.createElement(h,{show:c.alert,completed:u.alert,url:"alerts/new",urlText:"Create",text:"your first Alert"}),i.a.createElement(h,{show:c.dashboard,completed:u.dashboard,onClick:f,urlText:"Create",text:"your first Dashboard"}),i.a.createElement(h,{show:c.inviteUsers,completed:u.inviteUsers,url:"users/new",urlText:"Invite",text:"your team members"})),i.a.createElement("p",null,"Need more support?"," ",i.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer"},"See our Help",i.a.createElement("i",{className:"fa fa-external-link m-l-5","aria-hidden":"true"}))))):null}function b(e){e.component("emptyState",Object(l.react2angular)(g))}h.propTypes={show:s.a.bool.isRequired,completed:s.a.bool.isRequired,text:s.a.string.isRequired,url:s.a.string,urlText:s.a.string,onClick:s.a.func},h.defaultProps={url:null,urlText:null,onClick:null},g.propTypes={icon:s.a.string,title:s.a.string,description:s.a.string.isRequired,illustration:s.a.string.isRequired,helpLink:s.a.string.isRequired,onboardingMode:s.a.bool,showAlertStep:s.a.bool,showDashboardStep:s.a.bool,showInviteStep:s.a.bool},g.defaultProps={icon:null,title:null,onboardingMode:!1,showAlertStep:!1,showDashboardStep:!1,showInviteStep:!1},b.init=!0},,,function(e,t,n){"use strict";n.r(t),n.d(t,"compile",function(){return l}),n.d(t,"parse",function(){return c}),n.d(t,"default",function(){return u});n(205);var r=n(2);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s="-";function l(e,t){return e?t?s+e:e:null}function c(e){var t=(e=Object(r.isString)(e)?e:"").startsWith(s);return t&&(e=e.substring(1)),{field:""!==e?e:null,reverse:t}}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.orderByField,r=t.orderByReverse;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"field",null),o(this,"reverse",!1),this.setField(n),this.setReverse(r)}return i(e,[{key:"setField",value:function(e){this.field=Object(r.isString)(e)&&""!==e?e:null}},{key:"setReverse",value:function(e){this.reverse=!!e}},{key:"compiled",get:function(){return l(this.field,this.reverse)},set:function(e){var t=c(e),n=t.field,r=t.reverse;this.field=n,this.reverse=r}}]),i(e,[{key:"toggleField",value:function(e){Object(r.isString)(e)&&""!==e&&(e===this.field?this.reverse=!this.reverse:(this.field=e,this.reverse=!1))}},{key:"sort",value:function(e){if(this.field)return e=Object(r.sortBy)(e,this.field),this.reverse&&e.reverse(),e}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(48),l=n.n(s);function c(e){var t=e.isSelected,n=e.isStaged,r=e.alreadyInGroup;return n?a.a.createElement("i",{className:"fa fa-remove"}):r?a.a.createElement(l.a,{title:"Already in this group"},a.a.createElement("i",{className:"fa fa-check"})):t?a.a.createElement("i",{className:"fa fa-check"}):a.a.createElement("i",{className:"fa fa-angle-double-right"})}c.propTypes={isSelected:o.a.bool,isStaged:o.a.bool,alreadyInGroup:o.a.bool},c.defaultProps={isSelected:!1,isStaged:!1,alreadyInGroup:!1}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"General",function(){return m}),n.d(t,"DatabaseMetrics",function(){return f}),n.d(t,"Queues",function(){return h}),n.d(t,"Manager",function(){return g});n(16),n(17),n(15);var r=n(2),a=n(0),i=n.n(a),o=n(74),s=n.n(o),l=n(192),c=n.n(l),u=n(155),d=n(41);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e){var t=e.info;return t=Object(r.toPairs)(t),i.a.createElement(c.a,{title:"General",size:"small"},0===t.length&&i.a.createElement("div",{className:"text-muted text-center"},"No data"),t.length>0&&i.a.createElement(s.a,{size:"small",itemLayout:"vertical",dataSource:t,renderItem:e=>{var t=p(e,2),n=t[0],r=t[1];return i.a.createElement(s.a.Item,{extra:i.a.createElement("span",{className:"badge"},r)},Object(d.toHuman)(n))}}))}function f(e){var t=e.info;return i.a.createElement(c.a,{title:"Redash Database",size:"small"},0===t.length&&i.a.createElement("div",{className:"text-muted text-center"},"No data"),t.length>0&&i.a.createElement(s.a,{size:"small",itemLayout:"vertical",dataSource:t,renderItem:e=>{var t=p(e,2),n=t[0],r=t[1];return i.a.createElement(s.a.Item,{extra:i.a.createElement("span",{className:"badge"},Object(d.prettySize)(r))},n)}}))}function h(e){var t=e.info;return t=Object(r.toPairs)(t),i.a.createElement(c.a,{title:"Queues",size:"small"},0===t.length&&i.a.createElement("div",{className:"text-muted text-center"},"No data"),t.length>0&&i.a.createElement(s.a,{size:"small",itemLayout:"vertical",dataSource:t,renderItem:e=>{var t=p(e,2),n=t[0],r=t[1];return i.a.createElement(s.a.Item,{extra:i.a.createElement("span",{className:"badge"},r.size)},n)}}))}function g(e){var t=e.info,n=t?[i.a.createElement(s.a.Item,{extra:i.a.createElement("span",{className:"badge"},i.a.createElement(u.TimeAgo,{date:t.lastRefreshAt,placeholder:"n/a"}))},"Last Refresh"),i.a.createElement(s.a.Item,{extra:i.a.createElement("span",{className:"badge"},i.a.createElement(u.TimeAgo,{date:t.startedAt,placeholder:"n/a"}))},"Started"),i.a.createElement(s.a.Item,{extra:i.a.createElement("span",{className:"badge"},t.outdatedQueriesCount)},"Outdated Queries Count")]:[];return i.a.createElement(c.a,{title:"Manager",size:"small"},!t&&i.a.createElement("div",{className:"text-muted text-center"},"No data"),t&&i.a.createElement(s.a,{size:"small",itemLayout:"vertical",dataSource:n,renderItem:e=>e}))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(29);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(2),l=n(21),c=n.n(l),u=n(74),d=n.n(u),p=n(39),m=n.n(p),f=n(37),h=n.n(f),g=n(450),b=n.n(g),y=n(35),v=n(107),w=n(141),O=n(121),j=n(80),E=n(123);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=b.a.Step,q=h.a.Search,R={SELECT_TYPE:0,CONFIGURE_IT:1,DONE:2},D=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=k(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==S(a)&&"function"!=typeof a?$(r):a,C($(n),"state",{searchText:"",selectedType:null,savingSource:!1,currentStep:R.SELECT_TYPE}),C($(n),"selectType",e=>{n.setState({selectedType:e,currentStep:R.CONFIGURE_IT})}),C($(n),"resetType",()=>{n.state.currentStep===R.CONFIGURE_IT&&n.setState({searchText:"",selectedType:null,currentStep:R.SELECT_TYPE})}),C($(n),"createSource",(e,t,r)=>{var a=n.state,i=a.selectedType;a.savingSource||(n.setState({savingSource:!0,currentStep:R.DONE}),n.props.onCreate(i,e).then(e=>{t("Saved."),n.props.dialog.close({success:!0,data:e})}).catch(e=>{n.setState({savingSource:!1,currentStep:R.CONFIGURE_IT}),r(e.message)}))}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,a.a.Component),n=t,(r=[{key:"renderTypeSelector",value:function(){var e=this.props.types,t=this.state.searchText,n=e.filter(e=>Object(s.isEmpty)(t)||Object(s.includes)(e.name.toLowerCase(),t.toLowerCase()));return a.a.createElement("div",{className:"m-t-10"},a.a.createElement(q,{placeholder:"Search...",onChange:e=>this.setState({searchText:e.target.value}),autoFocus:!0,"data-test":"SearchSource"}),a.a.createElement("div",{className:"scrollbox p-5 m-t-10",style:{minHeight:"30vh",maxHeight:"40vh"}},Object(s.isEmpty)(n)?a.a.createElement(w.default,{className:""}):a.a.createElement(d.a,{size:"small",dataSource:n,renderItem:e=>this.renderItem(e)})))}},{key:"renderForm",value:function(){var e=this.props,t=e.imageFolder,n=e.helpTriggerPrefix,r=this.state.selectedType,i=j.default.getFields(r),o="".concat(n).concat(Object(s.toUpper)(r.type));return a.a.createElement("div",{className:"p-5"},a.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},a.a.createElement("img",{className:"p-5",src:"".concat(t,"/").concat(r.type,".png"),alt:r.name,width:"48"}),a.a.createElement("h4",{className:"m-0"},r.name)),a.a.createElement("div",{className:"text-right"},E.TYPES[o]&&a.a.createElement(E.HelpTrigger,{className:"f-13",type:o},"Setup Instructions ",a.a.createElement("i",{className:"fa fa-question-circle"}))),a.a.createElement(O.default,{id:"sourceForm",fields:i,onSubmit:this.createSource,feedbackIcons:!0,hideSubmitButton:!0}))}},{key:"renderItem",value:function(e){var t=this.props.imageFolder;return a.a.createElement(d.a.Item,{className:"p-l-10 p-r-10 clickable",onClick:()=>this.selectType(e)},a.a.createElement(v.PreviewCard,{title:e.name,imageUrl:"".concat(t,"/").concat(e.type,".png"),roundedImage:!1},a.a.createElement("i",{className:"fa fa-angle-double-right"})))}},{key:"render",value:function(){var e=this.state,t=e.currentStep,n=e.savingSource,r=this.props,i=r.dialog,o=r.sourceType;return a.a.createElement(m.a,x({},i.props,{title:"Create a New ".concat(o),footer:t===R.SELECT_TYPE?[a.a.createElement(c.a,{key:"cancel",onClick:()=>i.dismiss()},"Cancel"),a.a.createElement(c.a,{key:"submit",type:"primary",disabled:!0},"Create")]:[a.a.createElement(c.a,{key:"previous",onClick:this.resetType},"Previous"),a.a.createElement(c.a,{key:"submit",htmlType:"submit",form:"sourceForm",type:"primary",loading:n,"data-test":"CreateSourceButton"},"Create")]}),a.a.createElement("div",{"data-test":"CreateSourceDialog"},a.a.createElement(b.a,{className:"hidden-xs m-b-10",size:"small",current:t,progressDot:!0},t===R.CONFIGURE_IT?a.a.createElement(T,{title:a.a.createElement("a",null,"Type Selection"),className:"clickable",onClick:this.resetType}):a.a.createElement(T,{title:"Type Selection"}),a.a.createElement(T,{title:"Configuration"}),a.a.createElement(T,{title:"Done"})),t===R.SELECT_TYPE&&this.renderTypeSelector(),t!==R.SELECT_TYPE&&this.renderForm()))}}])&&P(n.prototype,r),i&&P(n,i),t}();C(D,"propTypes",{dialog:y.DialogPropType.isRequired,types:o.a.arrayOf(o.a.object),sourceType:o.a.string.isRequired,imageFolder:o.a.string.isRequired,helpTriggerPrefix:o.a.string,onCreate:o.a.func.isRequired}),C(D,"defaultProps",{types:[],helpTriggerPrefix:null}),t.default=Object(y.wrap)(D)},,function(e,t,n){"use strict";n.r(t),n.d(t,"registerComponent",function(){return b}),n.d(t,"unregisterComponent",function(){return y}),n.d(t,"default",function(){return v});n(16),n(17),n(36),n(29),n(223),n(15),n(22),n(61),n(336);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=new Map,g=new Set;function b(e,t){Object(r.isString)(e)&&""!==e&&(h.set(e,Object(r.isFunction)(t)?t:null),g.forEach(t=>{t.props.name===e&&t.forceUpdate()}))}function y(e){b(e,null)}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){g.add(this)}},{key:"componentWillUnmount",value:function(){g.delete(this)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.children,r=c(e,["name","children"]),a=h.get(t);return a?i.a.createElement(a,r,n):null}}])&&u(n.prototype,r),a&&u(n,a),t}();f(v,"propTypes",{name:s.a.string.isRequired,children:s.a.node}),f(v,"defaultProps",{children:null})},function(e,t,n){"use strict";n.r(t);n(22),n(36),n(16),n(17),n(15),n(42);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(39),c=n.n(l),u=n(47),d=n.n(u),p=n(181),m=n.n(p),f=n(21),h=n.n(f),g=n(30),b=n.n(g),y=n(37),v=n.n(y),w=n(189),O=n.n(w),j=n(35),E=n(244),S=n(52);function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){P(e,t,n[t])})}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _=b.a.Option,C={labelCol:{span:6},wrapperCol:{span:16}};function T(e){return Object(r.capitalize)(Object(r.words)(e).join(" "))}function q(e){return/-range/.test(e)}function R(e){var t=e.name,n=e.type,a=e.onChange,o=e.existingNames,s=e.setValidation,l="",c="";return t?Object(r.includes)(o,t)?(l="Parameter with this name already exists",s(!1),c="error"):(q(n)&&(l=i.a.createElement(i.a.Fragment,null,"Appears in query as "," ",i.a.createElement("code",{style:{display:"inline-block",color:"inherit"}},"{{".concat(t,".start}} {{").concat(t,".end}}")))),s(!0)):(l="Choose a keyword for this parameter",s(!1)),i.a.createElement(d.a.Item,$({required:!0,label:"Keyword",help:l,validateStatus:c},C),i.a.createElement(v.a,{onChange:e=>a(e.target.value),autoFocus:!0}))}function D(e){var t,n=k(Object(a.useState)(Object(r.clone)(e.parameter)),2),o=n[0],s=n[1],l=k(Object(a.useState)(!0),2),u=l[0],p=l[1],f=k(Object(a.useState)(),2),g=f[0],y=f[1],w=!e.parameter.name;return Object(a.useEffect)(()=>{var t=e.parameter.queryId;t&&S.Query.get({id:t},e=>{y(e)})},[]),i.a.createElement(c.a,$({},e.dialog.props,{title:w?"Add Parameter":o.name,width:600,footer:[i.a.createElement(h.a,{key:"cancel",onClick:e.dialog.dismiss},"Cancel"),i.a.createElement(h.a,{key:"submit",htmlType:"submit",disabled:!(u&&""!==o.title&&("query"!==o.type||o.queryId)),type:"primary",form:"paramForm","data-test":"SaveParameterSettings"},w?"Add Parameter":"OK")]}),i.a.createElement(d.a,{layout:"horizontal",onSubmit:function(t){o.title||(o.title=T(o.name),s(o)),e.dialog.close(o),t.preventDefault()},id:"paramForm"},w&&i.a.createElement(R,{name:o.name,onChange:e=>s(x({},o,{name:e})),setValidation:p,existingNames:e.existingParams,type:o.type}),i.a.createElement(d.a.Item,$({label:"Title"},C),i.a.createElement(v.a,{value:Object(r.isNull)(o.title)?T(o.name):o.title,onChange:e=>s(x({},o,{title:e.target.value}))})),i.a.createElement(d.a.Item,$({label:"Type"},C),i.a.createElement(b.a,{value:o.type,onChange:e=>s(x({},o,{type:e})),"data-test":"ParameterTypeSelect"},i.a.createElement(_,{value:"text","data-test":"TextParameterTypeOption"},"Text"),i.a.createElement(_,{value:"number","data-test":"NumberParameterTypeOption"},"Number"),i.a.createElement(_,{value:"enum"},"Dropdown List"),i.a.createElement(_,{value:"query"},"Query Based Dropdown List"),i.a.createElement(_,{disabled:!0,key:"dv1"},i.a.createElement(O.a,{className:"select-option-divider"})),i.a.createElement(_,{value:"date"},"Date"),i.a.createElement(_,{value:"datetime-local"},"Date and Time"),i.a.createElement(_,{value:"datetime-with-seconds"},"Date and Time (with seconds)"),i.a.createElement(_,{disabled:!0,key:"dv2"},i.a.createElement(O.a,{className:"select-option-divider"})),i.a.createElement(_,{value:"date-range"},"Date Range"),i.a.createElement(_,{value:"datetime-range"},"Date and Time Range"),i.a.createElement(_,{value:"datetime-range-with-seconds"},"Date and Time Range (with seconds)"))),(t=o.type,Object(r.startsWith)(t,"date")&&!q(t)&&i.a.createElement(d.a.Item,$({label:" ",colon:!1},C),i.a.createElement(m.a,{defaultChecked:o.useCurrentDateTime,onChange:e=>s(x({},o,{useCurrentDateTime:e.target.checked}))},"Default to Today/Now if no other value is set"))),"enum"===o.type&&i.a.createElement(d.a.Item,$({label:"Values",help:"Dropdown list values (newline delimeted)"},C),i.a.createElement(v.a.TextArea,{rows:3,value:o.enumOptions,onChange:e=>s(x({},o,{enumOptions:e.target.value}))})),"query"===o.type&&i.a.createElement(d.a.Item,$({label:"Query",help:"Select query to load dropdown values from"},C),i.a.createElement(E.QuerySelector,{selectedQuery:g,onChange:e=>s(x({},o,{queryId:e&&e.id})),type:"select"}))))}R.propTypes={name:s.a.string.isRequired,onChange:s.a.func.isRequired,existingNames:s.a.arrayOf(s.a.string).isRequired,setValidation:s.a.func.isRequired,type:s.a.string.isRequired},D.propTypes={parameter:s.a.object.isRequired,dialog:j.DialogPropType.isRequired,existingParams:s.a.arrayOf(s.a.string)},D.defaultProps={existingParams:[]},t.default=Object(j.wrap)(D)},function(e,t,n){"use strict";n.r(t),n.d(t,"QuerySelector",function(){return k}),n.d(t,"default",function(){return $});n(15),n(61),n(104),n(551),n(89),n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(5),l=n.n(s),c=n(11),u=n(2),d=n(37),p=n.n(d),m=n(30),f=n.n(m),h=n(52),g=n(9),b=n(111);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}var S=200,x=f.a.Option,P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,O(t).call(this,"stale search"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,E(Error)),t}();function k(e){var t=y(Object(r.useState)(),2),n=t[0],i=t[1],o=y(Object(r.useState)(),2),s=o[0],c=o[1],d=y(Object(r.useState)([]),2),m=d[0],v=d[1],w=y(Object(r.useState)(),2),O=w[0],j=w[1],E=!1,k=Object(u.debounce)(function(e){c(!0),function(e){return e?h.Query.query({q:e}).$promise.then(e=>{var t=e.results;return Promise.resolve(t)}):h.Query.recent().$promise.then(e=>{var t=e.filter(e=>!e.is_draft);return Promise.resolve(t)})}(e).then(T).then(e=>{v(e),c(!1)}).catch(e=>{e instanceof P||c(!1)})},S),$="Search a query by name",_=a.a.createElement("i",{className:"fa fa-times",onClick:()=>q(null)}),C=a.a.createElement("i",{className:l()("fa fa-spinner fa-pulse",{hidden:!s})});function T(e){return E?Promise.reject(new P):Promise.resolve(e)}function q(t){var n=null;t&&((n=Object(u.find)(m,{id:t}))||g.default.error("Something went wrong...","Couldn't select query")),i(n?null:""),j(n),e.onChange(n)}if(Object(r.useEffect)(()=>{e.selectedQuery&&j(e.selectedQuery)},[e.selectedQuery]),Object(r.useEffect)(()=>null===n?(v(null),()=>{}):(k(n),()=>{k.cancel(),E=!0}),[n]),e.disabled)return a.a.createElement(p.a,{value:O&&O.name,placeholder:$,disabled:!0});if("select"===e.type){var R=O?_:null,D=O?O.name:n;return a.a.createElement(f.a,{showSearch:!0,dropdownMatchSelectWidth:!1,placeholder:$,value:D||void 0,onSearch:i,onChange:q,suffixIcon:s?C:R,notFoundContent:null,filterOption:!1,defaultActiveFirstOption:!1},m&&m.map(e=>{var t=e.is_draft;return a.a.createElement(x,{value:e.id,key:e.id,disabled:t},e.name," ",a.a.createElement(b.QueryTagsControl,{isDraft:e.is_draft,tags:e.tags,className:l()("inline-tags-control",{disabled:t})}))}))}return a.a.createElement(a.a.Fragment,null,O?a.a.createElement(p.a,{value:O.name,suffix:_,readOnly:!0}):a.a.createElement(p.a,{placeholder:$,value:n,onChange:e=>i(e.target.value),suffix:C}),a.a.createElement("div",{className:"scrollbox",style:{maxHeight:"50vh",marginTop:15}},m&&(m.length?a.a.createElement("div",{className:"list-group"},m.map(e=>a.a.createElement("a",{href:"javascript:void(0)",className:l()("query-selector-result","list-group-item",{inactive:e.is_draft}),key:e.id,onClick:()=>q(e.id),"data-test":"QueryId".concat(e.id)},e.name," ",a.a.createElement(b.QueryTagsControl,{isDraft:e.is_draft,tags:e.tags,className:"inline-tags-control"})))):a.a.createElement("div",{className:"text-muted"},"No results matching search term."))))}function $(e){e.component("querySelector",Object(c.react2angular)(k))}k.propTypes={onChange:o.a.func.isRequired,selectedQuery:o.a.object,type:o.a.oneOf(["select","default"]),disabled:o.a.bool},k.defaultProps={selectedQuery:null,type:"default",disabled:!1},$.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"NoTaggedObjectsFound",function(){return u}),n.d(t,"default",function(){return d});n(15),n(22),n(223),n(61),n(104);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(67),c=n(111);function u(e){var t=e.objectType,n=e.tags;return a.a.createElement(l.BigMessage,{icon:"fa-tags"},"No ",t," found tagged with",a.a.createElement(c.TagsControl,{className:"inline-tags-control",tags:Array.from(n)}),".")}function d(e){e.component("noTaggedObjectsFound",Object(s.react2angular)(u))}u.propTypes={objectType:o.a.string.isRequired,tags:o.a.oneOfType([o.a.array,o.a.objectOf(Set)]).isRequired},d.init=!0},function(e,t,n){"use strict";n.r(t);n(42),n(61),n(104),n(105),n(16),n(17),n(15),n(29),n(106),n(89);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(5),c=n.n(l),u=n(39),d=n.n(u),p=n(37),m=n.n(p),f=n(74),h=n.n(f),g=n(35),b=n(67),y=n(46),v=n(9);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=this,i=(e=S(t)).call.apply(e,[this].concat(s)),n=!i||"object"!==w(i)&&"function"!=typeof i?x(a):i,k(x(n),"state",{searchTerm:"",loading:!1,items:[],selected:[],saveInProgress:!1}),k(x(n),"loadItems",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n.setState({searchTerm:e,loading:!0},()=>{n.props.searchItems(e).then(t=>{n.state.searchTerm===e&&n.setState({items:t,loading:!1})}).catch(()=>{n.state.searchTerm===e&&n.setState({items:[],loading:!1})})})}),k(x(n),"search",Object(r.debounce)(n.loadItems,200)),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.loadItems()}},{key:"isSelected",value:function(e){var t=this.props.itemKey(e);return!!Object(r.find)(this.state.selected,e=>this.props.itemKey(e)===t)}},{key:"toggleItem",value:function(e){if(this.isSelected(e)){var t=this.props.itemKey(e);this.setState(e=>{var n=e.selected;return{selected:Object(r.filter)(n,e=>this.props.itemKey(e)!==t)}})}else this.setState(t=>{var n=t.selected;return{selected:[].concat(j(n),[e])}})}},{key:"save",value:function(){this.setState({saveInProgress:!0},()=>{var e=this.state.selected;Promise.resolve(this.props.save(e)).then(()=>{this.props.dialog.close(e)}).catch(()=>{this.setState({saveInProgress:!1}),v.default.error("Failed to save some of selected items.")})})}},{key:"renderItem",value:function(e,t){var n=this.props,r=n.renderItem,a=n.renderStagedItem,o=this.isSelected(e),s=(t&&a||r)(e,{isSelected:o}),l=s.content,u=s.className,d=s.isDisabled;return i.a.createElement(h.a.Item,{className:c()("p-l-10","p-r-10",{clickable:!d,disabled:d},u),onClick:d?null:()=>this.toggleItem(e)},l)}},{key:"render",value:function(){var e=this.props,t=e.dialog,n=e.dialogTitle,r=e.inputPlaceholder,a=e.selectedItemsTitle,o=this.state,s=o.loading,l=o.saveInProgress,c=o.items,u=o.selected,p=c.length>0;return i.a.createElement(d.a,O({},t.props,{width:"80%",title:n,okText:"Save",okButtonProps:{loading:l,disabled:0===u.length},onOk:()=>this.save()}),i.a.createElement("div",{className:"d-flex align-items-center m-b-10"},i.a.createElement("div",{className:"w-50 m-r-10"},i.a.createElement(m.a.Search,{defaultValue:this.state.searchTerm,onChange:e=>this.search(e.target.value),placeholder:r,autoFocus:!0})),i.a.createElement("div",{className:"w-50 m-l-10"},i.a.createElement("h5",{className:"m-0"},a))),i.a.createElement("div",{className:"d-flex align-items-stretch",style:{minHeight:"30vh",maxHeight:"50vh"}},i.a.createElement("div",{className:"w-50 m-r-10 scrollbox"},s&&i.a.createElement(y.default,{className:""}),!s&&!p&&i.a.createElement(b.BigMessage,{icon:"fa-search",message:"No items match your search.",className:""}),!s&&p&&i.a.createElement(h.a,{size:"small",dataSource:c,renderItem:e=>this.renderItem(e,!1)})),i.a.createElement("div",{className:"w-50 m-l-10 scrollbox"},u.length>0&&i.a.createElement(h.a,{size:"small",dataSource:u,renderItem:e=>this.renderItem(e,!0)}))))}}])&&E(n.prototype,a),o&&E(n,o),t}();k($,"propTypes",{dialog:g.DialogPropType.isRequired,dialogTitle:s.a.string,inputPlaceholder:s.a.string,selectedItemsTitle:s.a.string,searchItems:s.a.func.isRequired,itemKey:s.a.func,renderItem:s.a.func,renderStagedItem:s.a.func,save:s.a.func}),k($,"defaultProps",{dialogTitle:"Add Items",inputPlaceholder:"Search...",selectedItemsTitle:"Selected items",itemKey:e=>e.id,renderItem:()=>"",renderStagedItem:null,save:e=>e}),t.default=Object(g.wrap)($)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});n(16),n(17),n(22),n(36),n(29),n(15);var r=n(37),a=n.n(r),i=n(2),o=n(1),s=n.n(o),l=n(0),c=n.n(l),u=n(141);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=a.a.Search,y=function(e){function t(e){var n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=m(t).call(this,e),n=!a||"object"!==d(a)&&"function"!=typeof a?f(r):a,g(f(n),"state",{searchText:""}),n.items=[];var i=1;return e.items.forEach(e=>{n.items.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}({id:i},e)),i+=1}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,c.a.Component),n=t,(r=[{key:"renderListItem",value:function(e){return c.a.createElement("a",{key:"card".concat(e.id),className:"visual-card",onClick:e.onClick,href:e.href},c.a.createElement("img",{alt:e.title,src:e.imgSrc}),c.a.createElement("h3",null,e.title))}},{key:"render",value:function(){var e=this.props.showSearch,t=this.state.searchText,n=this.items.filter(e=>Object(i.isEmpty)(t)||Object(i.includes)(e.title.toLowerCase(),t.toLowerCase()));return c.a.createElement("div",{"data-test":"CardsList"},e&&c.a.createElement("div",{className:"row p-10"},c.a.createElement("div",{className:"col-md-4 col-md-offset-4"},c.a.createElement(b,{placeholder:"Search...",onChange:e=>this.setState({searchText:e.target.value}),autoFocus:!0}))),Object(i.isEmpty)(n)?c.a.createElement(u.default,{className:""}):c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-lg-12 d-inline-flex flex-wrap"},n.map(e=>this.renderListItem(e)))))}}])&&p(n.prototype,r),a&&p(n,a),t}();g(y,"propTypes",{items:s.a.arrayOf(s.a.shape({title:s.a.string.isRequired,imgSrc:s.a.string.isRequired,onClick:s.a.func,href:s.a.string})),showSearch:s.a.bool}),g(y,"defaultProps",{items:[],showSearch:!1})},function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(29),n(133);var r=n(255),a=n(2),i=n(0),o=n.n(i),s=n(1),l=n.n(s),c=n(39),u=n.n(c),d=n(37),p=n.n(d),m=n(48),f=n.n(m),h=n(189),g=n.n(h),b=n(35),y=n(9);n(1147);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(e){var n,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,o=j(t).call(this,e),n=!o||"object"!==v(o)&&"function"!=typeof o?E(i):o,x(E(n),"updatePreview",Object(a.debounce)(()=>{var e=n.state.text;n.setState({preview:r.markdown.toHTML(e)})},100)),x(E(n),"onTextChanged",e=>{n.setState({text:e.target.value}),n.updatePreview()});var s=e.text;return n.state={saveInProgress:!1,text:s,preview:r.markdown.toHTML(s)},n}var n,i,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,o.a.Component),n=t,(i=[{key:"saveWidget",value:function(){this.setState({saveInProgress:!0}),this.props.onConfirm(this.state.text).then(()=>{this.props.dialog.close()}).catch(()=>{y.default.error("Widget could not be added")}).finally(()=>{this.setState({saveInProgress:!1})})}},{key:"render",value:function(){var e=this.props.dialog,t=!this.props.text;return o.a.createElement(u.a,w({},e.props,{title:t?"Add Textbox":"Edit Textbox",onOk:()=>this.saveWidget(),okButtonProps:{loading:this.state.saveInProgress,disabled:!this.state.text},okText:t?"Add to Dashboard":"Save",width:500,wrapProps:{"data-test":"TextboxDialog"}}),o.a.createElement("div",{className:"textbox-dialog"},o.a.createElement(p.a.TextArea,{className:"resize-vertical",rows:"5",value:this.state.text,onChange:this.onTextChanged,autoFocus:!0,placeholder:"This is where you write some text"}),o.a.createElement("small",null,"Supports basic"," ",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.markdownguide.org/cheat-sheet/#basic-syntax"},o.a.createElement(f.a,{title:"Markdown guide opens in new window"},"Markdown")),"."),this.state.text&&o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{dashed:!0}),o.a.createElement("strong",{className:"preview-title"},"Preview:"),o.a.createElement("p",{dangerouslySetInnerHTML:{__html:this.state.preview},className:"preview markdown"}))))}}])&&O(n.prototype,i),s&&O(n,s),t}();x(P,"propTypes",{dashboard:l.a.object.isRequired,dialog:b.DialogPropType.isRequired,onConfirm:l.a.func.isRequired,text:l.a.string}),x(P,"defaultProps",{text:""}),t.default=Object(b.wrap)(P)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});n(42),n(15),n(22),n(36);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(21),c=n.n(l),u=n(39),d=n.n(u),p=n(48),m=n.n(p),f=n(9);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e){var t=e.group,n=e.title,a=e.onClick,o=e.children,s=g(e,["group","title","onClick","children"]);if(!t)return null;var l=i.a.createElement(c.a,h({},s,{type:"danger",onClick:e=>(function(e,t,n){d.a.confirm({title:"Delete Group",content:"Are you sure you want to delete this group?",okText:"Yes",okType:"danger",cancelText:"No",onOk:()=>{t.$delete(()=>{f.default.success("Group deleted successfully."),n()})}})})(0,t,a)}),o);return Object(r.isString)(n)&&""!==n?i.a.createElement(m.a,{placement:"top",title:n,mouseLeaveDelay:0},l):l}b.propTypes={group:s.a.object,title:s.a.string,onClick:s.a.func,children:s.a.node},b.defaultProps={group:null,title:null,onClick:()=>{},children:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(21),l=n.n(s),c=n(189),u=n.n(c),d=n(54),p=n(50),m=n(249),f=n(14);function h(e){var t=e.controller,n=e.group,r=e.items,i=e.canAddMembers,o=e.onAddMembersClick,s=e.canAddDataSources,c=e.onAddDataSourcesClick,p=e.onGroupDeleted,h=n&&f.currentUser.isAdmin&&"builtin"!==n.type;return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.Menu,{items:r,selected:t.params.currentPage}),a.a.createElement(d.PageSizeSelect,{className:"m-b-10",options:t.pageSizeOptions,value:t.itemsPerPage,onChange:e=>t.updatePagination({itemsPerPage:e})}),i&&a.a.createElement(l.a,{className:"w-100 m-t-5",type:"primary",onClick:o},a.a.createElement("i",{className:"fa fa-plus m-r-5"}),"Add Members"),s&&a.a.createElement(l.a,{className:"w-100 m-t-5",type:"primary",onClick:c},a.a.createElement("i",{className:"fa fa-plus m-r-5"}),"Add Data Sources"),h&&a.a.createElement(a.a.Fragment,null,a.a.createElement(u.a,{dashed:!0,className:"m-t-10 m-b-10"}),a.a.createElement(m.default,{className:"w-100",group:n,onClick:p},"Delete Group")))}h.propTypes={controller:p.ControllerType.isRequired,group:o.a.object,items:o.a.array.isRequired,canAddMembers:o.a.bool,onAddMembersClick:o.a.func,canAddDataSources:o.a.bool,onAddDataSourcesClick:o.a.func,onGroupDeleted:o.a.func},h.defaultProps={group:null,canAddMembers:!1,onAddMembersClick:null,canAddDataSources:!1,onAddDataSourcesClick:null,onGroupDeleted:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});n(15),n(22),n(36);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(417),l=n(14);function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e){var t=e.group,n=e.onChange,r=c(e,["group","onChange"]);if(!t)return null;var i=l.currentUser.isAdmin&&"builtin"!==t.type;return a.a.createElement("h3",r,a.a.createElement(s.EditInPlace,{className:"edit-in-place",isEditable:i,ignoreBlanks:!0,editor:"input",onDone:e=>(function(e,t,n){e.name=t,e.$save(),n()})(t,e,n),value:t.name}))}u.propTypes={group:o.a.shape({name:o.a.string.isRequired,$save:o.a.func.isRequired}),onChange:o.a.func},u.defaultProps={group:null,onChange:()=>{}}},function(e,t,n){"use strict";n.r(t),n.d(t,"SchedulePhrase",function(){return v}),n.d(t,"default",function(){return w});n(16),n(17),n(15),n(29);var r=n(11),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(48),c=n.n(l),u=n(41),d=n(40);n(565);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,g(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){if(this.props.isNew)return"Never";var e=m(this.content,2),t=e[0],n=e[1],r=n?i.a.createElement(c.a,{title:n},t):t;return this.props.isLink?i.a.createElement("a",{className:"schedule-phrase"},r):r}},{key:"content",get:function(){var e=(this.props.schedule||t.defaultProps.schedule).interval;if(!e)return["Never"];var n=Object(u.durationHumanize)(e,{omitSingleValueNumber:!0}),r="Every ".concat(n),a="Refreshes every ".concat(n),i=this.props.schedule,o=i.time,s=i.day_of_week;return o&&(a+=" at ".concat(Object(u.localizeTime)(o))),s&&(a+=" on ".concat(s)),[r,a]}}])&&f(n.prototype,r),a&&f(n,a),t}();function w(e){e.component("schedulePhrase",Object(r.react2angular)(v))}y(v,"propTypes",{schedule:d.RefreshScheduleType,isNew:s.a.bool.isRequired,isLink:s.a.bool}),y(v,"defaultProps",{schedule:d.RefreshScheduleDefault,isLink:!1}),w.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"absoluteUrl",function(){return r});n(105);function r(e){var t=new URL(e,window.location);return t.protocol=window.location.protocol,t.host=window.location.host,t.toString()}},function(e,t,n){"use strict";n.r(t),n.d(t,"Visualization",function(){return r}),n.d(t,"default",function(){return a});var r=null;function a(e){e.run(["$resource",e=>{r=e("api/visualizations/:id",{id:"@id"})}])}a.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"renderDefault",function(){return s}),n.d(t,"renderImage",function(){return l}),n.d(t,"renderLink",function(){return c});n(92);var r=n(2),a=n(82);function i(e){return e.replace(/^\s+|\s+$/g,"")}function o(e,t,n){return Object(a.b)(e,Object(r.extend)({"@":t[n]},t))}function s(e,t){var n=t[e.name];return Object(r.isFunction)(e.formatFunction)?e.formatFunction(n):n}function l(e,t){var n=i(o(e.imageUrlTemplate,t,e.name)),r=parseInt(o(e.imageWidth,t,e.name),10),a=parseInt(o(e.imageHeight,t,e.name),10),s=i(o(e.imageTitleTemplate,t,e.name)),l=[];return""!==n&&(l.push('<img src="'+n+'"'),isFinite(r)&&r>0&&l.push('width="'+r+'"'),isFinite(a)&&a>0&&l.push('height="'+a+'"'),""!==s&&l.push('title="'+s+'"'),l.push(">")),l.join(" ")}function c(e,t){var n=i(o(e.linkUrlTemplate,t,e.name)),r=i(o(e.linkTitleTemplate,t,e.name)),a=i(o(e.linkTextTemplate,t,e.name)),s=[];return""!==n&&(s.push('<a href="'+n+'"'),""!==r&&s.push('title="'+r+'"'),e.linkOpenInNewTab&&s.push('target="_blank"'),s.push(">"+(""===a?n:a)+"</a>")),s.join(" ")}},function(e,t,n){"use strict";n.r(t),n.d(t,"Alert",function(){return a}),n.d(t,"default",function(){return o});n(42);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}i.$inject=["$resource","$http"];var a=null;function i(e,t){return e("api/alerts/:id",{id:"@id"},{save:{method:"POST",transformRequest:[e=>{var t=r({},e);return void 0===t.query_id&&(t.query_id=t.query.id,t.destination_id=t.destinations,delete t.query,delete t.destinations),t}].concat(t.defaults.transformRequest)}})}function o(e){e.factory("Alert",i),e.run(["$injector",e=>{a=e.get("Alert")}])}o.init=!0},function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(85),i=n.n(a),o=n(73);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=i()("redash:notifications"),c=window.Notification||null;c||l("HTML5 notifications are not supported.");var u=Object(r.find)(["hidden","webkitHidden","mozHidden","msHidden"],e=>e in document),d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getPermissions",value:function(){c&&"default"===c.permission&&c.requestPermission(e=>{c.permission!==e&&(c.permission=e)})}},{key:"showNotification",value:function(e,t){if(c&&!this.pageVisible&&"granted"===c.permission){var n=new c(e,{tag:e+t,body:t,icon:"/images/redash_icon_small.png"});setTimeout(()=>{n.close()},3e3),n.onclick=function(){window.focus(),this.close(),Object(o.default)("click","notification")}}}},{key:"pageVisible",get:function(){return!document[u]}}])&&s(t.prototype,n),r&&s(t,r),e}();t.default=new d},function(e,t){e.exports='<div class="query-page-wrapper">\n  <div class="container">\n    <overlay ng-if="canCreateQuery === false && query.isNew()">\n      You don\'t have permission to create new queries on any of the data sources available to you. You can either\n      <a href="queries">browse existing queries</a>, or ask for additional permissions from your Redash admin.\n    </overlay>\n    <overlay ng-if="noDataSources && currentUser.isAdmin">\n      Looks like no data sources were created yet (or none of them available to the group(s) you\'re member of). Please create one\n      first, and then start querying.\n      <br/>\n      <a href="data_sources/new" class="btn btn-primary">Create Data Source</a>\n      <a href="groups" class="btn btn-default">Manage Group Permissions</a>\n    </overlay>\n    <overlay ng-if="noDataSources && !currentUser.isAdmin">\n      Looks like no data sources were created yet (or none of them available to the group(s) you\'re member of). Please ask your\n      Redash admin to create one first.\n    </overlay>\n\n    <alert-unsaved-changes ng-if="canEdit" is-dirty="isDirty"></alert-unsaved-changes>\n\n    <div class="p-b-10 m-l-0 m-r-0 page-header--new page-header--query">\n      <div class="page-title p-0">\n        <div class="d-flex flex-nowrap align-items-center">\n          <favorites-control ng-if="!query.isNew()" item="query"></favorites-control>\n          <h3>\n            <edit-in-place class="m-r-5" is-editable="canEdit" on-done="saveName"\n              ignore-blanks="true" value="query.name" editor="\'input\'"></edit-in-place>\n            <query-tags-control\n              class="query-tags" ng-class="{\'query-tags__empty\': query.tags.length == 0}"\n              tags="query.tags" is-draft="query.is_draft" is-archived="query.is_archived"\n              can-edit="isQueryOwner" get-available-tags="loadTags" on-edit="saveTags"></query-tags-control>\n          </h3>\n\n          <span class="flex-fill">&nbsp;</span>\n\n          <div class="p-0 source-control text-right text-nowrap align-self-start m-t-5">\n            <button class="btn btn-default btn-publish" ng-click="togglePublished()" ng-if="query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission(\'admin\'))">\n              <span class="fa fa-paper-plane"></span> Publish\n            </button>\n\n            <span ng-show="query.id && canViewSource">\n              <a ng-show="!sourceMode" ng-href="{{query.getUrl(true, selectedTab)}}" class="btn btn-default btn--showhide">\n                <i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit Source</i>\n              </a>\n              <a ng-show="sourceMode" ng-href="{{query.getUrl(false, selectedTab)}}" class="btn btn-default btn--showhide">\n                <i class="fa fa-table" aria-hidden="true"></i> Show Data Only</i>\n              </a>\n            </span>\n\n            <div ng-if="query.id != undefined" class="btn-group query-actions-menu" role="group" uib-dropdown>\n              <button class="btn btn-default dropdown-toggle hidden-xs" uib-dropdown-toggle>\n                <span class="zmdi zmdi-more"></span>\n              </button>\n              <ul class="dropdown-menu pull-right" uib-dropdown-menu>\n                <li ng-class="{\'disabled\': query.id === undefined || !canForkQuery() }">\n                  <a ng-click="duplicateQuery()"> Fork <i class="fa fa-external-link"></i></a>\n                </li>\n                <li class="divider" ng-if="query.is_archived"></li>\n                <li ng-if="!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission(\'admin\'))">\n                  <a ng-click="archiveQuery()">Archive</a>\n                </li>\n                <li ng-if="!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission(\'admin\')) && showPermissionsControl">\n                  <a ng-click="showManagePermissionsModal()">Manage Permissions</a>\n                </li>\n                <li ng-if="!query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission(\'admin\'))">\n                  <a ng-click="togglePublished()">Unpublish</a>\n                </li>\n                <li class="divider" ng-if="!query.is_archived"></li>\n                <li ng-if="query.id != undefined">\n                  <a ng-click="showApiKey()">Show API Key</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        <query-tags-control\n          class="query-tags__mobile" ng-class="{\'query-tags__empty\': query.tags.length == 0}"\n          tags="query.tags" is-draft="query.is_draft" is-archived="query.is_archived"\n          can-edit="isQueryOwner" get-available-tags="loadTags" on-edit="saveTags"></query-tags-control>\n      </div>\n    </div>\n  </div>\n  <main class="query-fullscreen">\n    <nav resizable r-directions="[\'right\']" r-flex="true" resizable-toggle toggle-shortcut="Alt+Shift+D, Alt+D">\n      <div class="editor__left__data-source">\n        <ui-select ng-model="query.data_source_id" remove-selected="false" ng-disabled="!isQueryOwner || !sourceMode"\n          on-select="updateDataSource()" data-test="SelectDataSource">\n          <ui-select-match placeholder="Select Data Source...">{{$select.selected.name}}</ui-select-match>\n          <ui-select-choices repeat="ds.id as ds in dataSources | filter:$select.search">\n            {{ds.name}}\n          </ui-select-choices>\n        </ui-select>\n      </div>\n\n      <div class="editor__left__schema" ng-if="sourceMode">\n        <schema-browser class="schema-container" schema="schema" on-refresh="refreshSchema()"></schema-browser>\n      </div>\n      <div ng-if="!sourceMode" style="flex-grow: 1;">&nbsp;</div>\n\n      <div class="query-metadata query-metadata--description" ng-if="!query.isNew()">\n        <edit-in-place is-editable="canEdit" on-done="saveDescription" editor="\'textarea\'" placeholder="\'Add description\'" ignore-blanks=\'false\'\n          value="query.description" markdown="true">\n        </edit-in-place>\n      </div>\n\n      <div class="query-metadata query-metadata--history" ng-if="!query.isNew()">\n        <table>\n          <tr>\n            <td>\n              <img ng-src="{{ query.user.profile_image_url }}" class="profile__image_thumb" />\n              <strong class="meta__name" ng-class="{\'text-muted\': query.user.is_disabled}">{{query.user.name}}</strong>\n            </td>\n            <td class="text-right">\n              created\n              <strong>\n                <rd-time-ago value="query.created_at"></rd-time-ago>\n              </strong>\n            </td>\n          </tr>\n          <tr>\n            <td>\n              <img ng-src="{{ query.last_modified_by.profile_image_url }}" class="profile__image_thumb" />\n              <strong class="meta__name" ng-class="{\'text-muted\': query.last_modified_by.is_disabled}">{{query.last_modified_by.name}}</strong>\n            </td>\n            <td class="text-right">\n              updated\n              <strong>\n                <rd-time-ago value="query.updated_at"></rd-time-ago>\n              </strong>\n            </td>\n          </tr>\n          <tr>\n            <td class="p-t-15">\n              <span class="query-metadata__property">\n                <span class="zmdi zmdi-refresh"></span> Refresh Schedule</span>\n            </td>\n            <td class="p-t-15 text-right">\n              <schedule-phrase ng-click="editSchedule()" is-link="true" schedule="query.schedule" is-new="query.isNew()" />\n            </td>\n          </tr>\n        </table>\n      </div>\n    </nav>\n\n    <div class="content">\n      <div class="flex-fill p-relative">\n        <div class="p-absolute d-flex flex-column p-l-15 p-r-15" style="left: 0; top: 0; right: 0; bottom: 0; overflow: auto">\n          <div class="row editor" resizable r-directions="[\'bottom\']" r-flex="true" resizable-toggle\n               style="min-height: 11px; max-height: 70vh;" ng-if="sourceMode">\n            <query-editor\n              style="width: 100%; height: 100%;"\n              query-text="query.query"\n              schema="schema"\n              syntax="dataSource.syntax"\n              can-edit="canEdit"\n              is-dirty="isDirty"\n              is-query-owner="isQueryOwner"\n              update-data-source="updateDataSource"\n              execute-query="executeQuery"\n              query-executing="queryExecuting"\n              can-execute-query="canExecuteQuery"\n              listen-for-resize="listenForResize"\n              listen-for-editor-command="listenForEditorCommand"\n              save-query="saveQuery"\n              update-query="updateQuery"\n              update-selected-query="updateSelectedQuery"\n              add-new-parameter="addNewParameter"\n              data-data-source="dataSource"\n              data-data-sources="dataSources"></query-editor>\n          </div>\n\n          <div class="row query-metadata__mobile">\n            <img ng-src="{{ query.user.profile_image_url }}" class="profile__image_thumb">\n            <div class="flex-fill m-r-10">\n              <strong class="meta__name" ng-class="{\'text-muted\': query.user.is_disabled}">{{query.user.name}}</strong>\n              created <rd-time-ago value="query.created_at"></rd-time-ago>\n            </div>\n\n            <img ng-src="{{ query.last_modified_by.profile_image_url }}" class="profile__image_thumb">\n            <div class="flex-fill m-r-10">\n              <strong class="meta__name" ng-class="{\'text-muted\': query.last_modified_by.is_disabled}">{{query.last_modified_by.name}}</strong>\n              updated <rd-time-ago value="query.updated_at"></rd-time-ago>\n            </div>\n\n            <div>\n              <span class="query-metadata__property">Refresh schedule:</span>\n              <schedule-phrase ng-click="editSchedule()" is-link="true" schedule="query.schedule" is-new="query.isNew()" />\n            </div>\n          </div>\n\n          <section class="flex-fill p-relative t-body query-visualizations-wrapper">\n            <div class="d-flex flex-column p-b-15 p-absolute static-position__mobile" style="left: 0; top: 0; right: 0; bottom: 0;">\n              <div class="p-t-15 p-b-5" ng-if="query.hasParameters()">\n                <parameters parameters="query.getParametersDefs()" sync-values="!query.isNew()" editable="sourceMode && canEdit" on-updated="onParametersUpdated"></parameters>\n              </div>\n              \x3c!-- Query Execution Status --\x3e\n\n              <div class="query-alerts">\n                <div class="alert alert-info m-t-15" ng-if="queryResult.getStatus() == \'processing\'">\n                  Executing query&hellip;\n                  <rd-timer from="queryResult.getUpdatedAt()"></rd-timer>\n                  <button type="button" class="btn btn-warning btn-xs pull-right" ng-disabled="cancelling" ng-click="cancelExecution()">Cancel\n                  </button>\n                </div>\n                <div class="alert alert-info m-t-15" ng-if="queryResult.getStatus() == \'loading-result\'">\n                  Loading results&hellip;\n                  <rd-timer from="queryResult.getUpdatedAt()"></rd-timer>\n                </div>\n                <div class="alert alert-info m-t-15" ng-if="queryResult.getStatus() == \'waiting\'">\n                  Query in queue&hellip;\n                  <rd-timer from="queryResult.getUpdatedAt()"></rd-timer>\n                  <button type="button" class="btn btn-warning btn-xs pull-right" ng-disabled="cancelling" ng-click="cancelExecution()">Cancel\n                  </button>\n                </div>\n                <div class="alert alert-danger m-t-15" ng-if="queryResult.getError()">\n                  Error running query:\n                  <strong>{{queryResult.getError()}}</strong>\n                </div>\n              </div>\n              \x3c!-- End of Query Execution Status --\x3e\n\n              \x3c!-- tabs and data --\x3e\n              <div ng-if="showDataset" class="flex-fill p-relative">\n                <div class="d-flex flex-column p-absolute static-position__mobile" style="left: 0; top: 0; right: 0; bottom: 0;">\n                  <div class="p-10" ng-show="showLog">\n                    <p>Log Information:</p>\n                    <p class="query-log-line" ng-repeat="l in queryResult.getLog() track by $index">{{l}}</p>\n                  </div>\n                  <ul class="tab-nav" data-test="QueryPageVisualizationTabs">\n                    <rd-tab ng-if="!query.visualizations.length" tab-id="table" name="Table" base-path="query.getUrl(sourceMode)"></rd-tab>\n                    <rd-tab ng-repeat="vis in query.visualizations | orderBy:\'id\'" tab-id="{{vis.id}}" name="{{vis.name}}" base-path="query.getUrl(sourceMode)">\n                      <span class="remove hidden-xs" ng-click="deleteVisualization($event, vis)" ng-if="canEdit && !($first && (vis.type === \'TABLE\'))">\n                        <i class="zmdi zmdi-close"></i>\n                      </span>\n                    </rd-tab>\n                    <li class="rd-tab tab-new-vis">\n                      <a ng-click="openVisualizationEditor()" class="btn btn-default" ng-if="canEdit" data-test="NewVisualization">\n                        <i class="zmdi zmdi-plus"></i> New Visualization</a>\n                    </li>\n                  </ul>\n                  <div class="query__vis m-t-15 p-b-15 scrollbox" data-test="QueryPageVisualization{{ selectedVisualization.id }}">\n                    <visualization-renderer visualization="selectedVisualization" query-result="queryResult"></visualization-renderer>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n      <div class="bottom-controller-container" ng-if="showDataset">\n        <div class="bottom-controller">\n          <edit-visualization-button\n            ng-if="!query.isNew() && canEdit"\n            open-visualization-editor="openVisualizationEditor"\n            selected-tab="selectedTab">\n          </edit-visualization-button>\n\n          <query-control-dropdown\n            query="query"\n            query-result="queryResult"\n            query-executing="queryExecuting"\n            show-embed-dialog="showEmbedDialog"\n            embed="embed"\n            apiKey="apiKey"\n            selected-tab="selectedTab"\n            open-add-to-dashboard-form="openAddToDashboardForm">\n          </query-control-dropdown>\n\n          <span class="query-metadata__bottom" ng-if="queryResult.getData()">\n            <span class="query-metadata__property">\n              <strong>{{queryResult.getData().length}}</strong>\n              <ng-pluralize count="queryResult.getData().length" when="{\'0\': \' rows\', \'one\': \' row\', \'other\': \' rows\'}"></ng-pluralize>\n            </span>\n            <span class="query-metadata__property">\n              <strong ng-show="!queryExecuting">{{queryResult.getRuntime() | durationHumanize}}</strong>\n              <span ng-show="queryExecuting">Running&hellip;</span>\n              <span class="hidden-xs">runtime</span>\n            </span>\n            <span class="query-metadata__property" ng-if="queryResult.query_result.data.metadata.data_scanned">Data Scanned\n              <strong>{{ queryResult.query_result.data.metadata.data_scanned | prettySize}}</strong>\n            </span>\n          </span>\n\n          <div>\n            <span class="query-metadata__property hidden-xs">\n              <span class="hidden-xs">Updated </span>\n              <rd-time-ago value="queryResult.query_result.retrieved_at"></rd-time-ago>\n            </span>\n\n            <button class="m-l-5 btn btn-primary" ng-click="executeQuery()" ng-disabled="queryExecuting || !canExecuteQuery()" title="Refresh Dataset"\n              ng-if="!sourceMode">\n              <span class="zmdi zmdi-play"></span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</div>\n'},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r=n(12),a=n.n(r),i=n(14);function o(e){if(!e)return"";var t=a()(e);return t.isValid()?t.format(i.clientConfig.dateTimeFormat):"-"}function s(e){e.filter("toMilliseconds",()=>e=>1e3*e),e.filter("dateTime",()=>o)}s.init=!0},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"DateTimeInput",function(){return m}),n.d(t,"default",function(){return f});n(42);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(135),c=n.n(l),u=n(14),d=n(40);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){var t=e.value,n=e.withSeconds,r=e.onSelect,i=e.className,o=(u.clientConfig.dateFormat||"YYYY-MM-DD")+(n?" HH:mm:ss":" HH:mm"),s={};return t&&t.isValid()&&(s.defaultValue=t),a.a.createElement(c.a,p({className:i,showTime:!0},s,{format:o,placeholder:"Select Date and Time",onChange:r}))}function f(e){e.component("dateTimeInput",Object(s.react2angular)(m))}m.propTypes={value:d.Moment,withSeconds:o.a.bool,onSelect:o.a.func,className:o.a.string},m.defaultProps={value:null,withSeconds:!1,onSelect:()=>{},className:""},f.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"DateTimeRangeInput",function(){return h}),n.d(t,"default",function(){return g});n(42);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(135),u=n.n(c),d=n(14),p=n(40);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=u.a.RangePicker;function h(e){var t=e.value,n=e.withSeconds,a=e.onSelect,o=e.className,s=(d.clientConfig.dateFormat||"YYYY-MM-DD")+(n?" HH:mm:ss":" HH:mm"),l={};return Object(r.isArray)(t)&&t[0].isValid()&&t[1].isValid()&&(l.defaultValue=t),i.a.createElement(f,m({className:o,showTime:!0},l,{format:s,onChange:a}))}function g(e){e.component("dateTimeRangeInput",Object(l.react2angular)(h))}h.propTypes={value:s.a.arrayOf(p.Moment),withSeconds:s.a.bool,onSelect:s.a.func,className:s.a.string},h.defaultProps={value:null,withSeconds:!1,onSelect:()=>{},className:""},g.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(0),a=n.n(r),i=n(1),o=n.n(i);function s(e){var t="",n=e.query,r=e.queryResult,i=e.fileType,o=r.getId&&r.getId(),s=r.getData&&r.getData();return o&&s&&n.name&&(t=n.id?"api/queries/".concat(n.id,"/results/").concat(o,".").concat(i).concat(e.embed?"?api_key=".concat(e.apiKey):""):"api/query_results/".concat(o,".").concat(i)),a.a.createElement("a",{target:"_self",disabled:e.disabled,href:t},e.children)}s.propTypes={query:o.a.object.isRequired,queryResult:o.a.object,fileType:o.a.string,disabled:o.a.bool.isRequired,embed:o.a.bool,apiKey:o.a.string,children:o.a.oneOfType([o.a.arrayOf(o.a.node),o.a.node]).isRequired},s.defaultProps={queryResult:{},fileType:"csv",embed:!1,apiKey:""}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(16),n(17),n(15);var r=n(0);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(){var e=a(Object(r.useState)(!1),2)[1];return()=>e(e=>!e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"PlainListFetcher",function(){return h}),n.d(t,"PaginatedListFetcher",function(){return g});n(16),n(17),n(564),n(29),n(89),n(204);var r=n(2);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?o(e):t}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}var f=function(){function e(t){var n=t.getRequest,a=t.doRequest,i=t.processResults;d(this,e),this._originalGetRequest=Object(r.isFunction)(n)?n:r.identity,this._originalDoRequest=a,this._originalProcessResults=Object(r.isFunction)(i)?i:r.identity}return m(e,[{key:"_getRequest",value:function(e,t){return this._originalGetRequest({},t)}},{key:"_processResults",value:function(e,t,n){var r=e.results,a=e.count;return{results:this._originalProcessResults(r,n),count:a}}}]),m(e,[{key:"fetch",value:function(e,t,n){var r=this._getRequest(t,n);return this._originalDoRequest(r,n).then(e=>this._processResults(e,t,n))}}]),e}(),h=function(e){function t(){var e,n,r,a,s;d(this,t);for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return n=i(this,(e=l(t)).call.apply(e,[this].concat(u))),r=o(n),s=[],(a="_allItems")in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,n}return c(t,f),m(t,[{key:"_getRequest",value:function(e,t){var n=e.searchTerm,a=e.selectedTags;return this._originalGetRequest({q:Object(r.isString)(n)&&""!==n?n:void 0,tags:a},t)}},{key:"_processResults",value:function(e,t,n){var r=t.paginator,a=t.sorter;return this._allItems=this._originalProcessResults(e,n),this._allItems=a.sort(this._allItems),{results:r.getItemsForPage(this._allItems),count:this._allItems.length,allResults:this._allItems}}},{key:"fetch",value:function(e,n,a){if(Object(r.isNil)(e)||e.tags||e.sorting)return s(l(t.prototype),"fetch",this).call(this,e,n,a);var i=n.paginator,o=n.sorter;return e.sorting&&(this._allItems=o.sort(this._allItems)),Promise.resolve({results:i.getItemsForPage(this._allItems),count:this._allItems.length,allResults:this._allItems})}}]),t}(),g=function(e){function t(){return d(this,t),i(this,l(t).apply(this,arguments))}return c(t,f),m(t,[{key:"_getRequest",value:function(e,t){var n=e.paginator,a=e.sorter,i=e.searchTerm,o=e.selectedTags;return this._originalGetRequest({page:n.page,page_size:n.itemsPerPage,order:a.compiled,q:Object(r.isString)(i)&&""!==i?i:void 0,tags:o},t)}}]),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(16),n(17),n(15);var r=n(0);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return{columns:e?e.getColumns():[],rows:e?e.getData():[],filters:e?e.getFilters():[]}}function o(e){var t=a(Object(r.useState)(i(e)),2),n=t[0],o=t[1],s=!1;return Object(r.useEffect)(()=>(e?e.toPromise().then(()=>{s||o(i(e))}):o(i(e)),()=>{s=!0}),[e]),n}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});n(116);var r=n(2);function a(e,t,n){void 0===t[n]&&(t[n]={name:n,type:"column",data:[]}),t[n].data.push(e)}function i(e,t){var n={},i=t.columnMapping;return Object(r.each)(e,e=>{var t={$raw:e},o=null,s=0,l={},c=null,u=null,d=null;Object(r.forOwn)(e,(e,n)=>{var r=(n=""+n).split("::")||n.split("__"),a=r[0],p=i?i[n]:r[1],m=e;"unused"!==p&&("x"===p&&(s=m,t[p]=m),"y"===p&&(null==m&&(m=0),l[a]=m,t[p]=m),"yError"===p&&(c=m,t[p]=m),"series"===p&&(o=String(m)),"size"===p&&(t[p]=m,u=m),"zVal"===p&&(t[p]=m,d=m),"multiFilter"!==p&&"multi-filter"!==p||(o=String(m)))}),Object(r.isNil)(o)?Object(r.each)(l,(e,r)=>{t={x:s,y:e,$raw:t.$raw},null!==c&&(t.yError=c),null!==u&&(t.size=u),null!==d&&(t.zVal=d),a(t,n,r)}):a(t,n,o)}),Object(r.sortBy)(Object(r.values)(n),e=>{var n=e.name;return t.seriesOptions[n]?t.seriesOptions[n].zIndex:0})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(0),a=n.n(r),i=n(48),o=n.n(i),s=n(1),l=n.n(s),c=(n(844),n(73));function u(e){var t=e.state,n=e.disabled,r=e.onToggle,i="Live Autocomplete Enabled",s="icon-flash";t||(i="Live Autocomplete Disabled",s="icon-flash-off"),n&&(i="Live Autocomplete Not Available (Use Ctrl+Space to Trigger)",s="icon-flash-off");return a.a.createElement(o.a,{placement:"top",title:i},a.a.createElement("button",{type:"button",className:"btn btn-default m-r-5"+(n?" disabled":""),onClick:()=>(e=>{Object(c.default)("toggle_autocomplete","screen","query_editor",{state:e}),r(e)})(!t),disabled:n},a.a.createElement("i",{className:"icon "+s})))}u.propTypes={state:l.a.bool.isRequired,disabled:l.a.bool.isRequired,onToggle:l.a.func.isRequired}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"DateInput",function(){return m}),n.d(t,"default",function(){return f});n(42);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(135),c=n.n(l),u=n(14),d=n(40);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e){var t=e.value,n=e.onSelect,r=e.className,i=u.clientConfig.dateFormat||"YYYY-MM-DD",o={};return t&&t.isValid()&&(o.defaultValue=t),a.a.createElement(c.a,p({className:r},o,{format:i,placeholder:"Select Date",onChange:n}))}function f(e){e.component("dateInput",Object(s.react2angular)(m))}m.propTypes={value:d.Moment,onSelect:o.a.func,className:o.a.string},m.defaultProps={value:null,onSelect:()=>{},className:""},f.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"DateRangeInput",function(){return h}),n.d(t,"default",function(){return g});n(42);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(135),u=n.n(c),d=n(14),p=n(40);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=u.a.RangePicker;function h(e){var t=e.value,n=e.onSelect,a=e.className,o=d.clientConfig.dateFormat||"YYYY-MM-DD",s={};return Object(r.isArray)(t)&&t[0].isValid()&&t[1].isValid()&&(s.defaultValue=t),i.a.createElement(f,m({className:a},s,{format:o,onChange:n}))}function g(e){e.component("dateRangeInput",Object(l.react2angular)(h))}h.propTypes={value:s.a.arrayOf(p.Moment),onSelect:s.a.func,className:s.a.string},h.defaultProps={value:null,onSelect:()=>{},className:""},g.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"EditInPlace",function(){return h}),n.d(t,"default",function(){return g});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(2);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?p(e):t}(this,d(t).call(this,e)),f(p(n),"startEditing",()=>{n.props.isEditable&&n.setState({editing:!0})}),f(p(n),"stopEditing",()=>{var e=Object(l.trim)(n.inputRef.current.value);n.props.ignoreBlanks&&""===e||e===n.props.value||n.props.onDone(e),n.setState({editing:!1})}),f(p(n),"keyDown",e=>{13!==e.keyCode||e.shiftKey?27===e.keyCode&&n.setState({editing:!1}):(e.preventDefault(),n.stopEditing())}),f(p(n),"renderNormal",()=>a.a.createElement("span",{role:"presentation",onFocus:n.startEditing,onClick:n.startEditing,className:n.props.isEditable?"editable":""},n.props.value||n.props.placeholder)),f(p(n),"renderEdit",()=>a.a.createElement(n.props.editor,{ref:n.inputRef,className:"rd-form-control",defaultValue:n.props.value,onBlur:n.stopEditing,onKeyDown:n.keyDown})),n.state={editing:!1},n.inputRef=a.a.createRef();var r=p(n);return n.componentDidUpdate=((e,t)=>{r.state.editing&&!t.editing&&r.inputRef.current.focus()}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("span",{className:"edit-in-place"+(this.state.editing?" active":"")},this.state.editing?this.renderEdit():this.renderNormal())}}])&&u(n.prototype,r),i&&u(n,i),t}();function g(e){e.component("editInPlace",Object(s.react2angular)(h))}f(h,"propTypes",{ignoreBlanks:o.a.bool,isEditable:o.a.bool,editor:o.a.string.isRequired,placeholder:o.a.string,value:o.a.string,onDone:o.a.func.isRequired}),f(h,"defaultProps",{ignoreBlanks:!1,isEditable:!0,placeholder:"",value:""}),g.init=!0},function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(29);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(30),c=n.n(l),u=n(39),d=n.n(u),p=n(35);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=g(this,b(t).call(this,e))).state={loading:!0,availableTags:[],result:Object(r.uniq)(Object(r.map)(n.props.tags,r.trim))},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.props.getAvailableTags().then(e=>{this.setState({loading:!1,availableTags:Object(r.uniq)(Object(r.compact)(Object(r.map)(e,r.trim)))})})}},{key:"render",value:function(){var e=this.props.dialog,t=this.state,n=t.loading,a=t.availableTags,o=t.result;return i.a.createElement(d.a,f({},e.props,{onOk:()=>e.close(o),title:"Add/Edit Tags",className:"shortModal"}),i.a.createElement(c.a,{mode:"tags",className:"w-100",placeholder:"Add some tags...",defaultValue:o,onChange:e=>this.setState({result:Object(r.compact)(Object(r.map)(e,r.trim))}),autoFocus:!0,disabled:n,loading:n},Object(r.map)(a,e=>i.a.createElement(c.a.Option,{key:e},e))))}}])&&h(n.prototype,a),o&&h(n,o),t}();v(w,"propTypes",{dialog:p.DialogPropType.isRequired,tags:s.a.arrayOf(s.a.string),getAvailableTags:s.a.func.isRequired}),v(w,"defaultProps",{tags:[]}),t.default=Object(p.wrap)(w)},function(e,t,n){"use strict";n.r(t),n.d(t,"EmailSettingsWarning",function(){return c}),n.d(t,"default",function(){return u});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(14);function c(e){var t=e.featureName;return l.clientConfig.mailSettingsMissing&&l.currentUser.isAdmin?a.a.createElement("p",{className:"alert alert-danger"},"It looks like your mail server isn't configured. Make sure to configure it for the ".concat(t," to work.")):null}function u(e){e.component("emailSettingsWarning",Object(s.react2angular)(c))}c.propTypes={featureName:o.a.string.isRequired},u.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"FavoritesControl",function(){return h}),n.d(t,"default",function(){return g});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(25);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,a.a.Component),n=t,(r=[{key:"toggleItem",value:function(e,t,n){var r=t.is_favorite?t.$unfavorite.bind(t):t.$favorite.bind(t),a=t.is_favorite;r().then(()=>{t.is_favorite=!a,this.forceUpdate(),l.$rootScope.$broadcast("reloadFavorites"),n()})}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.onChange,r=t.is_favorite?"fa fa-star":"fa fa-star-o",i=t.is_favorite?"Remove from favorites":"Add to favorites";return a.a.createElement("a",{href:"javascript:void(0)",title:i,className:"btn-favourite",onClick:e=>this.toggleItem(e,t,n)},a.a.createElement("i",{className:r,"aria-hidden":"true"}))}}])&&u(n.prototype,r),i&&u(n,i),t}();function g(e){e.component("favoritesControlImpl",Object(s.react2angular)(h)),e.component("favoritesControl",{template:'\n      <favorites-control-impl \n        ng-if="$ctrl.item" \n        item="$ctrl.item" \n        on-change="$ctrl.onChange"\n        force-update="$ctrl.forceUpdateTag"\n      ></favorites-control-impl>\n    ',bindings:{item:"="},controller:["$scope",function(e){this.forceUpdateTag="force"+Date.now(),e.$on("reloadFavorites",()=>{this.forceUpdateTag="force"+Date.now()}),this.onChange=(()=>{e.$applyAsync()})}]})}f(h,"propTypes",{item:o.a.shape({is_favorite:o.a.bool.isRequired}).isRequired,onChange:o.a.func,forceUpdate:o.a.string}),f(h,"defaultProps",{onChange:()=>{},forceUpdate:""}),g.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"ParameterValueInput",function(){return P}),n.d(t,"default",function(){return k});n(16),n(17),n(29),n(116);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(30),c=n.n(l),u=n(37),d=n.n(u),p=n(308),m=n.n(p),f=n(414),h=n(416),g=n(310),b=n(311),y=n(422);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=c.a.Option,P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,j(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a.a.Component),n=t,(r=[{key:"renderDateTimeWithSecondsInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(g.DateTimeInput,{className:this.props.className,value:t,onSelect:n,withSeconds:!0})}},{key:"renderDateTimeInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(g.DateTimeInput,{className:this.props.className,value:t,onSelect:n})}},{key:"renderDateInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(f.DateInput,{className:this.props.className,value:t,onSelect:n})}},{key:"renderDateTimeRangeWithSecondsInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(b.DateTimeRangeInput,{className:this.props.className,value:t,onSelect:n,withSeconds:!0})}},{key:"renderDateTimeRangeInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(b.DateTimeRangeInput,{className:this.props.className,value:t,onSelect:n})}},{key:"renderDateRangeInput",value:function(){var e=this.props,t=e.value,n=e.onSelect;return a.a.createElement(h.DateRangeInput,{className:this.props.className,value:t,onSelect:n})}},{key:"renderEnumInput",value:function(){var e=this.props,t=e.value,n=e.onSelect,r=e.enumOptions.split("\n").filter(e=>""!==e);return a.a.createElement(c.a,{className:this.props.className,disabled:0===r.length,defaultValue:t,onChange:n,dropdownMatchSelectWidth:!1,dropdownClassName:"ant-dropdown-in-bootstrap-modal"},r.map(e=>a.a.createElement(x,{key:e,value:e},e)))}},{key:"renderQueryBasedInput",value:function(){var e=this.props,t=e.value,n=e.onSelect,r=e.queryId,i=e.parameter;return a.a.createElement(y.QueryBasedParameterInput,{className:this.props.className,parameter:i,value:t,queryId:r,onSelect:n})}},{key:"renderNumberInput",value:function(){var e=this.props,t=e.value,n=e.onSelect,r=e.className;return a.a.createElement(m.a,{className:"form-control "+r,defaultValue:!isNaN(t)&&t||0,onChange:n})}},{key:"renderTextInput",value:function(){var e=this.props,t=e.value,n=e.onSelect,r=e.className;return a.a.createElement(d.a,{className:"form-control "+r,defaultValue:t||"","data-test":"TextParamInput",onChange:e=>n(e.target.value)})}},{key:"render",value:function(){switch(this.props.type){case"datetime-with-seconds":return this.renderDateTimeWithSecondsInput();case"datetime-local":return this.renderDateTimeInput();case"date":return this.renderDateInput();case"datetime-range-with-seconds":return this.renderDateTimeRangeWithSecondsInput();case"datetime-range":return this.renderDateTimeRangeInput();case"date-range":return this.renderDateRangeInput();case"enum":return this.renderEnumInput();case"query":return this.renderQueryBasedInput();case"number":return this.renderNumberInput();default:return this.renderTextInput()}}}])&&w(n.prototype,r),i&&w(n,i),t}();function k(e){e.component("parameterValueInput",{template:'\n      <parameter-value-input-impl\n        type="$ctrl.param.type"\n        value="$ctrl.param.normalizedValue"\n        parameter="$ctrl.param"\n        enum-options="$ctrl.param.enumOptions"\n        query-id="$ctrl.param.queryId"\n        on-select="$ctrl.setValue"\n      ></parameter-value-input-impl>\n    ',bindings:{param:"<"},controller:["$scope",function(e){this.setValue=(t=>{this.param.setValue(t),e.$applyAsync()})}]}),e.component("parameterValueInputImpl",Object(s.react2angular)(P))}S(P,"propTypes",{type:o.a.string,value:o.a.any,enumOptions:o.a.string,queryId:o.a.number,parameter:o.a.any,onSelect:o.a.func,className:o.a.string}),S(P,"defaultProps",{type:"text",value:null,enumOptions:"",queryId:null,parameter:null,onSelect:()=>{},className:""}),k.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryBasedParameterInput",function(){return y}),n.d(t,"default",function(){return v});n(16),n(17),n(29),n(1079);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(30),u=n.n(c);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=u.a.Option,y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,f(t).call(this,e))).state={options:[],loading:!1},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this._loadOptions(this.props.queryId)}},{key:"componentDidUpdate",value:function(e){this.props.queryId!==e.queryId&&this._loadOptions(this.props.queryId)}},{key:"_loadOptions",value:function(e){var t;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||e===this.state.queryId){n.next=6;break}return this.setState({loading:!0}),n.next=4,regeneratorRuntime.awrap(this.props.parameter.loadDropdownValues());case 4:t=n.sent,this.props.queryId===e&&(this.setState({options:t,loading:!1}),!(void 0!==Object(r.find)(t,e=>e.value===this.props.value))&&Object(r.isFunction)(this.props.onSelect)&&this.props.onSelect(t[0].value));case 6:case"end":return n.stop()}},null,this)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.value,a=e.onSelect,o=this.state,s=o.loading,l=o.options;return i.a.createElement("span",null,i.a.createElement(u.a,{className:t,disabled:s||0===l.length,loading:s,value:Object(r.toString)(n),onChange:a,dropdownMatchSelectWidth:!1,dropdownClassName:"ant-dropdown-in-bootstrap-modal"},l.map(e=>i.a.createElement(b,{value:e.value,key:e.value},e.name))))}}])&&p(n.prototype,a),o&&p(n,o),t}();function v(e){e.component("queryBasedParameterInput",Object(l.react2angular)(y))}g(y,"propTypes",{parameter:s.a.any,value:s.a.any,queryId:s.a.number,onSelect:s.a.func,className:s.a.string}),g(y,"defaultProps",{value:null,parameter:null,queryId:null,onSelect:()=>{},className:""}),v.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"QuerySnippet",function(){return r}),n.d(t,"default",function(){return i}),a.$inject=["$resource"];var r=null;function a(e){var t=e("api/query_snippets/:id",{id:"@id"});return t.prototype.getSnippet=function(){var e=this.trigger;return""!==this.description&&(e="".concat(this.trigger,": ").concat(this.description)),{name:e,content:this.snippet,tabTrigger:this.trigger}},t}function i(e){e.factory("QuerySnippet",a),e.run(["$injector",e=>{r=e.get("QuerySnippet")}])}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"KeyboardShortcuts",function(){return s}),n.d(t,"default",function(){return d});n(61),n(104),n(105),n(16),n(17),n(15),n(116);var r=n(2),a=n(453),i=n.n(a);n(1121);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=null,l={};function c(e,t){e.preventDefault(),e.retunValue=!1,Object(r.each)(l[t],e=>e())}function u(){this.modKey=/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"Cmd":"Ctrl",this.bind=function(e){Object(r.each)(e,(e,t)=>{var n=t.toLowerCase().split(",").map(r.trim);Object(r.each)(n,t=>{l[t]=[].concat(o(Object(r.without)(l[t],e)),[e]),i.a.bindGlobal(t,c)})})},this.unbind=function(e){Object(r.each)(e,(e,t)=>{var n=t.toLowerCase().split(",").map(r.trim);Object(r.each)(n,t=>{l[t]=Object(r.without)(l[t],e),0===l[t].length&&(l[t]=void 0,i.a.unbind(t))})})}}function d(e){e.service("KeyboardShortcuts",u),e.run(["$injector",e=>{s=e.get("KeyboardShortcuts")}])}d.init=!0},function(e,t,n){"use strict";n.r(t);n(15);var r=n(2);t.default={buildKeywordsFromSchema:function(e){var t=[],n={},a={};return e.forEach(e=>{t.push({name:e.name,value:e.name,score:100,meta:"Table"}),a[e.name]=function(e){var t=[];return e.columns.forEach(n=>{t.push({caption:n,name:"".concat(e.name,".").concat(n),value:"".concat(e.name,".").concat(n),score:100,meta:"Column",className:"completion"})}),t}(e),e.columns.forEach(e=>{n[e]="Column"})}),{table:t,column:Object(r.map)(n,(e,t)=>({name:t,value:t,score:50,meta:e})),tableColumn:a}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"TagsList",function(){return v}),n.d(t,"default",function(){return w});n(104),n(105),n(16),n(17),n(29),n(15),n(22),n(61),n(223);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(5),u=n.n(c),d=n(185);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h(this,g(t).call(this,e))).state={allTags:[],selectedTags:new Set},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){Object(d.default)(this.props.tagsUrl).then(e=>{this.setState({allTags:e})})}},{key:"toggleTag",value:function(e,t){var n=this.state.selectedTags;e.shiftKey?n.has(t)?n.delete(t):n.add(t):n.has(t)&&1===n.size?n.clear():(n.clear(),n.add(t)),this.forceUpdate(),this.props.onUpdate(m(this.state.selectedTags))}},{key:"render",value:function(){var e=this.state,t=e.allTags,n=e.selectedTags;return t.length>0?i.a.createElement("div",{className:"list-group m-t-10 tags-list tiled"},Object(r.map)(t,e=>i.a.createElement("a",{key:e.name,href:"javascript:void(0)",className:u()("list-group-item","max-character",{active:n.has(e.name)}),onClick:t=>this.toggleTag(t,e.name)},i.a.createElement("span",{className:"badge badge-light"},e.count),i.a.createElement("span",{className:"tags-list__name"},e.name)))):null}}])&&f(n.prototype,a),o&&f(n,o),t}();function w(e){e.component("tagsList",Object(l.react2angular)(v))}y(v,"propTypes",{tagsUrl:s.a.string.isRequired,onUpdate:s.a.func}),y(v,"defaultProps",{onUpdate:()=>{}}),w.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorHandler",function(){return i});var r=n(86);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logToConsole=!0,this.reset()}var t,n,i;return t=e,(n=[{key:"reset",value:function(){this.error=null}},{key:"process",value:function(e){this.reset(),this.logToConsole&&console.error(e),(null===e||e instanceof r.a)&&(this.error=e)}}])&&a(t.prototype,n),i&&a(t,i),e}()},function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(29),n(133);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(30),c=n.n(l),u=n(39),d=n.n(u),p=n(35),m=n(83),f=n(244),h=n(9),g=n(52);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=c.a.Option,x=c.a.OptGroup,P=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,n=!(a=(e=w(t)).call.apply(e,[this].concat(o)))||"object"!==b(a)&&"function"!=typeof a?O(r):a,E(O(n),"state",{saveInProgress:!1,selectedQuery:null,selectedVis:null,parameterMappings:[]}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,i.a.Component),n=t,(a=[{key:"selectQuery",value:function(e){this.setState({selectedQuery:null,selectedVis:null,parameterMappings:[]}),e&&g.Query.get({id:e.id},e=>{if(e){var t=Object(r.map)(this.props.dashboard.getParametersDefs(),e=>e.name);this.setState({selectedQuery:e,parameterMappings:Object(r.map)(e.getParametersDefs(),e=>({name:e.name,type:Object(r.includes)(t,e.name)?m.MappingType.DashboardMapToExisting:m.MappingType.DashboardAddNew,mapTo:e.name,value:e.normalizedValue,title:"",param:e}))}),e.visualizations.length&&this.setState({selectedVis:e.visualizations[0]})}})}},{key:"selectVisualization",value:function(e,t){Object(r.each)(e.visualizations,e=>{if(e.id===t)return this.setState({selectedVis:e}),!1})}},{key:"saveWidget",value:function(){var e=this.state,t=e.selectedVis,n=e.parameterMappings;this.setState({saveInProgress:!0}),this.props.onConfirm(t,n).then(()=>{this.props.dialog.close()}).catch(()=>{h.default.error("Widget could not be added")}).finally(()=>{this.setState({saveInProgress:!1})})}},{key:"updateParamMappings",value:function(e){this.setState({parameterMappings:e})}},{key:"renderVisualizationInput",value:function(){var e={};return this.state.selectedQuery&&Object(r.each)(this.state.selectedQuery.visualizations,t=>{e[t.type]=e[t.type]||[],e[t.type].push(t)}),e=Object(r.values)(e),i.a.createElement("div",null,i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{htmlFor:"choose-visualization"},"Choose Visualization"),i.a.createElement(c.a,{id:"choose-visualization",className:"w-100",defaultValue:Object(r.first)(this.state.selectedQuery.visualizations).id,onChange:e=>this.selectVisualization(this.state.selectedQuery,e),dropdownClassName:"ant-dropdown-in-bootstrap-modal"},e.map(e=>i.a.createElement(x,{label:e[0].type,key:e[0].type},e.map(e=>i.a.createElement(S,{value:e.id,key:e.id},e.name)))))))}},{key:"render",value:function(){var e=this.props.dashboard.getParametersDefs(),t=this.props.dialog;return i.a.createElement(d.a,y({},t.props,{title:"Add Widget",onOk:()=>this.saveWidget(),okButtonProps:{loading:this.state.saveInProgress,disabled:!this.state.selectedQuery},okText:"Add to Dashboard",width:700}),i.a.createElement("div",{"data-test":"AddWidgetDialog"},i.a.createElement(f.QuerySelector,{onChange:e=>this.selectQuery(e)}),this.state.selectedQuery&&this.renderVisualizationInput(),this.state.parameterMappings.length>0&&[i.a.createElement("label",{key:"parameters-title",htmlFor:"parameter-mappings"},"Parameters"),i.a.createElement(m.ParameterMappingListInput,{key:"parameters-list",id:"parameter-mappings",mappings:this.state.parameterMappings,existingParams:e,onChange:e=>this.updateParamMappings(e)})]))}}])&&v(n.prototype,a),o&&v(n,o),t}();E(P,"propTypes",{dashboard:s.a.object.isRequired,dialog:p.DialogPropType.isRequired,onConfirm:s.a.func.isRequired}),t.default=Object(p.wrap)(P)},function(e,t,n){"use strict";n.r(t),n.d(t,"getParamValuesSnapshot",function(){return O});n(42),n(104),n(105),n(16),n(17),n(29),n(89),n(15),n(22),n(61),n(133);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(39),c=n.n(l),u=n(35),d=n(83),p=n(9);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return Object(r.map)(Object(r.sortBy)(e,e=>e.name),e=>{var n;switch(e.type){case d.MappingType.StaticValue:return[e.name,e.value];case d.MappingType.WidgetLevel:return[e.name,e.param.value];case d.MappingType.DashboardAddNew:case d.MappingType.DashboardMapToExisting:return n=Object(r.find)(t,t=>t.name===e.mapTo),[e.name,n?n.value:null]}})}var j=function(e){function t(e){var n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=!(i=b(t).call(this,e))||"object"!==m(i)&&"function"!=typeof i?y(a):i,w(y(n),"originalParamValuesSnapshot",null);var o=Object(d.parameterMappingsToEditableMappings)(e.widget.options.parameterMappings,e.widget.query.getParametersDefs(),Object(r.map)(n.props.dashboard.getParametersDefs(),e=>e.name));return n.originalParamValuesSnapshot=O(o,n.props.dashboard.getParametersDefs()),n.state={saveInProgress:!1,parameterMappings:o},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,i.a.Component),n=t,(a=[{key:"saveWidget",value:function(){var e=this.props.widget;this.setState({saveInProgress:!0});var t=Object(d.editableMappingsToParameterMappings)(this.state.parameterMappings);e.options.parameterMappings=t;var n=!Object(r.isMatch)(this.originalParamValuesSnapshot,O(this.state.parameterMappings,this.props.dashboard.getParametersDefs())),a=[e].concat(h(Object(d.synchronizeWidgetTitles)(e.options.parameterMappings,this.props.dashboard.widgets)));Promise.all(Object(r.map)(a,e=>e.save())).then(()=>{this.props.dialog.close(n)}).catch(()=>{p.default.error("Widget cannot be updated")}).finally(()=>{this.setState({saveInProgress:!1})})}},{key:"updateParamMappings",value:function(e){this.setState({parameterMappings:e})}},{key:"render",value:function(){var e=this.props.dialog;return i.a.createElement(c.a,f({},e.props,{title:"Parameters",onOk:()=>this.saveWidget(),okButtonProps:{loading:this.state.saveInProgress},width:700}),this.state.parameterMappings.length>0&&i.a.createElement(d.ParameterMappingListInput,{mappings:this.state.parameterMappings,existingParams:this.props.dashboard.getParametersDefs(),onChange:e=>this.updateParamMappings(e)}))}}])&&g(n.prototype,a),o&&g(n,o),t}();w(j,"propTypes",{dashboard:s.a.object.isRequired,widget:s.a.object.isRequired,dialog:u.DialogPropType.isRequired}),t.default=Object(u.wrap)(j)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(2),a=n(25),i=n(14);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,s;return t=e,(n=[{key:"refresh",value:function(){return a.$q.resolve(this)}},{key:"canCreateDataSource",value:function(){return i.currentUser.isAdmin}},{key:"isCreateDataSourceEnabled",value:function(){return i.currentUser.isAdmin}},{key:"canCreateDestination",value:function(){return i.currentUser.isAdmin}},{key:"isCreateDestinationEnabled",value:function(){return i.currentUser.isAdmin}},{key:"canCreateDashboard",value:function(){return i.currentUser.hasPermission("create_dashboard")}},{key:"isCreateDashboardEnabled",value:function(){return i.currentUser.hasPermission("create_dashboard")}},{key:"canCreateAlert",value:function(){return!0}},{key:"canCreateUser",value:function(){return i.currentUser.isAdmin}},{key:"isCreateUserEnabled",value:function(){return i.currentUser.isAdmin}},{key:"getDashboardRefreshIntervals",value:function(){var e=i.clientConfig.dashboardRefreshIntervals;return Object(r.isArray)(e)?e:null}},{key:"getQueryRefreshIntervals",value:function(){var e=i.clientConfig.queryRefreshIntervals;return Object(r.isArray)(e)?e:null}}])&&o(t.prototype,n),s&&o(t,s),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});n(168);var r=n(2),a=n(20),i=n.n(a);n(1166);function o(e,t){if(Object(r.isFunction)(t)){var n=!1,a=i()("<i>").addClass("fa fa-caret-right").appendTo(e.empty());t(n),e.on("click",()=>{n=!n,a.toggleClass("fa-caret-right fa-caret-down"),t(n)})}else e.addClass("hidden")}function s(e){return i()("<span>").addClass("jvi-punctuation jvi-comma").text(",").appendTo(e)}function l(e,t,n){return i()("<span>").addClass("jvi-punctuation jvi-string").text('"').appendTo(e),i()("<span>").addClass("jvi-value jvi-string").text(t).appendTo(e),i()("<span>").addClass("jvi-punctuation jvi-string").text('"').appendTo(e),n&&s(e),null}function c(e,t,n){var r=n?t?"[":"{":t?"]":"}";return i()("<span>").addClass("jvi-punctuation jvi-braces").text(r).appendTo(e)}function u(e,t,n,a){var u=a?t.length:Object(r.keys)(t).length,p=null;if(c(e,a,!0),u>0){var m=function(e){var t=i()("<span>").addClass("jvi-punctuation jvi-ellipsis").html("&hellip;").appendTo(e).on("click",()=>{t.parents(".jvi-item").eq(0).find(".jvi-toggle").trigger("click")});return t}(e);p=function(e,t,n,a){return s=>{if(s){t.addClass("hidden"),e.removeClass("hidden").empty();var c=null,u=null;Object(r.each)(n,(t,n)=>{var r=i()("<span>").addClass("jvi-item").appendTo(e);c=c||r,u=r;var s=i()("<span>").addClass("jvi-toggle").appendTo(r);a&&(l(i()("<span>").addClass("jvi-object-key").appendTo(r),n),i()("<span>").addClass("jvi-punctuation").text(": ").appendTo(r)),o(s,d(r,t,!0))}),c&&c.addClass("jvi-nested-first"),u&&u.addClass("jvi-nested-last")}else e.addClass("hidden").empty(),t.removeClass("hidden")}}(i()("<span>").addClass("jvi-block hidden").appendTo(e),m,t,!a)}return c(e,a,!1),n&&s(e),u>0&&(p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=Object(r.filter)(t,r.isFunction),function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];Object(r.each)(t,e=>{e.apply(void 0,n)})}}(function(e,t){var n=" // "+t+" "+(1===t?"item":"items"),r=i()("<span>").addClass("jvi-comment").text(n).appendTo(e);return e=>{e?r.addClass("hidden"):r.removeClass("hidden")}}(e,u),p)),p}function d(e,t,n){return e=i()("<span>").appendTo(e),function(e){return null===e||!1===e||!0===e||Object(r.isNumber)(e)&&isFinite(e)}(t)?function(e,t,n){return i()("<span>").addClass("jvi-value jvi-primitive").text(""+t).appendTo(e),n&&s(e),null}(e,t,n):Object(r.isString)(t)?l(e,t,n):Object(r.isArray)(t)?function(e,t,n){return u(e,t,n,!0)}(e,t,n):Object(r.isObject)(t)?function(e,t,n){return u(e,t,n,!1)}(e,t,n):void 0}function p(e,t){if(e instanceof i.a&&!Object(r.isUndefined)(t)&&!Object(r.isFunction)(t)){var n=i()("<span>").addClass("jvi-item").appendTo(e);o(i()("<span>").addClass("jvi-toggle").appendTo(n),d(n,t))}}},function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(29);var r=n(0),a=n.n(r),i=n(39),o=n.n(i),s=n(37),l=n.n(s),c=n(35),u=n(53);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=f(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==d(a)&&"function"!=typeof a?h(r):a,b(h(n),"state",{name:""}),b(h(n),"save",()=>{n.props.dialog.close(new u.Group({name:n.state.name}))}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.dialog;return a.a.createElement(o.a,p({},e.props,{title:"Create a New Group",okText:"Create",onOk:()=>this.save()}),a.a.createElement(l.a,{className:"form-control",defaultValue:this.state.name,onChange:e=>this.setState({name:e.target.value}),onPressEnter:()=>this.save(),placeholder:"Group Name",autoFocus:!0}))}}])&&m(n.prototype,r),i&&m(n,i),t}();b(y,"propTypes",{dialog:c.DialogPropType.isRequired}),t.default=Object(c.wrap)(y)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(2);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.page,r=t.itemsPerPage,a=t.totalCount,i=t.validate,s=void 0===i||i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"page",1),o(this,"itemsPerPage",20),o(this,"totalCount",0),this.setItemsPerPage(r,s),this.setTotalCount(a,s),this.setPage(n,s)}return i(e,[{key:"setPage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r.isUndefined)(e)||(e=parseInt(e,10)||1,this.page=t?e>=1&&e<=this.totalPages?e:1:e>=1?e:1)}},{key:"setItemsPerPage",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r.isUndefined)(e)||(e=parseInt(e,10)||20,this.itemsPerPage=e>=1?e:1,t&&this.setPage(this.page,t))}},{key:"setTotalCount",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(r.isUndefined)(e)||(e=parseInt(e,10)||0,this.totalCount=e,t&&this.setPage(this.page,t))}},{key:"totalPages",get:function(){return Math.ceil(this.totalCount/this.itemsPerPage)}}]),i(e,[{key:"getItemsForPage",value:function(e){var t=this.itemsPerPage*(this.page-1),n=t+this.itemsPerPage;return e.slice(t,n)}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"TimeEditor",function(){return I});n(16),n(17),n(42),n(29),n(15),n(22),n(36),n(116);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(39),l=n.n(s),c=n(135),u=n.n(c),d=n(415),p=n.n(d),m=n(30),f=n.n(m),h=n(99),g=n.n(h),b=n(2),y=n(12),v=n.n(y),w=n(41),O=n(35),j=n(40);n(565);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var T=v.a.weekdaysShort(),q=v.a.weekdays(),R="YYYY-MM-DD",D="HH:mm",A=f.a.Option,N=f.a.OptGroup;function I(e){var t=C(Object(r.useState)(e.defaultValue),2),n=t[0],i=t[1],o=n&&!n.isUTC();return a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{allowClear:!1,value:n,format:D,minuteStep:5,onChange:function(t){i(t),e.onChange(t)}}),o&&a.a.createElement("span",{className:"utc","data-testid":"utc"},"(",v.a.utc(n).format(D)," UTC)"))}I.propTypes={defaultValue:j.Moment,onChange:o.a.func.isRequired},I.defaultProps={defaultValue:null};var z=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=P(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==E(a)&&"function"!=typeof a?k(r):a,_(k(n),"state",n.getState()),_(k(n),"setTime",e=>{n.newSchedule={time:v()(e).utc().format(D)}}),_(k(n),"setInterval",e=>{var t=n.state.newSchedule,r=Object(w.secondsToInterval)(e).interval;r===w.IntervalEnum.NEVER&&(t.until=null),-1!==[w.IntervalEnum.NEVER,w.IntervalEnum.MINUTES,w.IntervalEnum.HOURS].indexOf(r)&&(t.time=null),r!==w.IntervalEnum.WEEKS&&(t.day_of_week=null),r!==w.IntervalEnum.DAYS&&r!==w.IntervalEnum.WEEKS||n.state.minute&&n.state.hour||(t.time=v()().hour("00").minute("15").utc().format(D)),r!==w.IntervalEnum.WEEKS||n.state.dayOfWeek||(t.day_of_week=q[0]),t.interval=e;var a=C(t.time?Object(w.localizeTime)(t.time).split(":"):[null,null],2),i=a[0],o=a[1];n.setState({interval:r,seconds:e,hour:i,minute:o,dayOfWeek:t.day_of_week?T[q.indexOf(t.day_of_week)]:null}),n.newSchedule=t}),_(k(n),"setScheduleUntil",(e,t)=>{n.newSchedule={until:t}}),_(k(n),"setWeekday",e=>{var t=e.target.value;n.setState({dayOfWeek:t}),n.newSchedule={day_of_week:t?q[T.indexOf(t)]:null}}),_(k(n),"setUntilToggle",e=>{var t=e.target.value?v()().format(R):null;n.setScheduleUntil(null,t)}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,a.a.Component),n=t,(r=[{key:"getState",value:function(){var e=Object(b.clone)(this.props.schedule||t.defaultProps.schedule),n=e.time,r=e.interval,a=e.day_of_week,i=Object(w.secondsToInterval)(r).interval,o=C(n?Object(w.localizeTime)(n).split(":"):[null,null],2);return{hour:o[0],minute:o[1],seconds:r,interval:i,dayOfWeek:a?T[q.indexOf(a)]:null,newSchedule:e}}},{key:"save",value:function(){var e=this.state.newSchedule;Object(b.isEqual)(e,this.props.schedule)||(e.interval?this.props.dialog.close(Object(b.clone)(e)):this.props.dialog.close(null)),this.props.dialog.dismiss()}},{key:"render",value:function(){var e=this.props.dialog,t=this.state,n=t.interval,r=t.minute,i=t.hour,o=t.seconds,s=t.newSchedule.until;return a.a.createElement(l.a,S({},e.props,{title:"Refresh Schedule",className:"schedule",onOk:()=>this.save()}),a.a.createElement("div",{className:"schedule-component"},a.a.createElement("h5",null,"Refresh every"),a.a.createElement("div",{"data-testid":"interval"},a.a.createElement(f.a,{className:"input",value:o,onChange:this.setInterval,dropdownMatchSelectWidth:!1},a.a.createElement(A,{value:null,key:"never"},"Never"),Object.keys(this.intervals).map(e=>a.a.createElement(N,{label:Object(b.capitalize)(Object(w.pluralize)(e)),key:e},this.intervals[e].map(e=>{var t=C(e,2),n=t[0],r=t[1];return a.a.createElement(A,{value:r,key:n},Object(w.durationHumanize)(r))})))))),-1!==[w.IntervalEnum.DAYS,w.IntervalEnum.WEEKS].indexOf(n)?a.a.createElement("div",{className:"schedule-component"},a.a.createElement("h5",null,"On time"),a.a.createElement("div",{"data-testid":"time"},a.a.createElement(I,{defaultValue:i?v()().hour(i).minute(r):null,onChange:this.setTime}))):null,w.IntervalEnum.WEEKS===n?a.a.createElement("div",{className:"schedule-component"},a.a.createElement("h5",null,"On day"),a.a.createElement("div",{"data-testid":"weekday"},a.a.createElement(g.a.Group,{size:"medium",defaultValue:this.state.dayOfWeek,onChange:this.setWeekday},T.map(e=>a.a.createElement(g.a.Button,{value:e,key:e,className:"input"},e[0]))))):null,n!==w.IntervalEnum.NEVER?a.a.createElement("div",{className:"schedule-component"},a.a.createElement("h5",null,"Ends"),a.a.createElement("div",{className:"ends","data-testid":"ends"},a.a.createElement(g.a.Group,{size:"medium",value:!!s,onChange:this.setUntilToggle},a.a.createElement(g.a,{value:!1},"Never"),a.a.createElement(g.a,{value:!0},"On")),s?a.a.createElement(u.a,{size:"small",className:"datepicker",value:v()(s),allowClear:!1,format:R,onChange:this.setScheduleUntil}):null)):null)}},{key:"intervals",get:function(){var e=_({},w.IntervalEnum.NEVER,[]);return this.props.refreshOptions.forEach(t=>{var n=Object(w.secondsToInterval)(t),r=n.count,a=n.interval;a in e||(e[a]=[]),e[a].push([r,t])}),Object.defineProperty(this,"intervals",{value:e}),e}},{key:"newSchedule",set:function(e){this.setState(t=>({newSchedule:S(t.newSchedule,e)}))}}])&&x(n.prototype,r),i&&x(n,i),t}();_(z,"propTypes",{schedule:j.RefreshScheduleType,refreshOptions:o.a.arrayOf(o.a.number).isRequired,dialog:O.DialogPropType.isRequired}),_(z,"defaultProps",{schedule:j.RefreshScheduleDefault}),t.default=Object(O.wrap)(z)},function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(15),n(22),n(36),n(29);var r=n(0),a=n.n(r),i=n(47),o=n.n(i),s=n(39),l=n.n(s),c=n(37),u=n.n(c),d=n(2),p=n(51),m=n(9),f=n(40),h=n(35);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){E(e,t,n[t])})}return e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=w(t).call(this,e),n=!a||"object"!==g(a)&&"function"!=typeof a?O(r):a,E(O(n),"fieldError",(e,t)=>0===t.length?"This field is required.":"currentPassword"!==e&&t.length<6?"This field is too short.":"repeatPassword"===e&&t!==n.state.newPassword.value?"Passwords don't match":null),E(O(n),"validateFields",e=>{var t=n.state,r=t.currentPassword,a=t.newPassword,i=t.repeatPassword,o={currentPassword:n.fieldError("currentPassword",r.value),newPassword:n.fieldError("newPassword",a.value),repeatPassword:n.fieldError("repeatPassword",i.value)};n.setState({currentPassword:y({},r,{error:o.currentPassword}),newPassword:y({},a,{error:o.newPassword}),repeatPassword:y({},i,{error:o.repeatPassword})}),Object(d.isFunction)(e)&&e(o.currentPassword||o.newPassword||o.repeatPassword?o:null)}),E(O(n),"updatePassword",()=>{var e=n.state,t=e.currentPassword,r=e.newPassword;e.updatingPassword||n.validateFields(e=>{if(e)n.setState(e=>({currentPassword:y({},e.currentPassword,{touched:!0}),newPassword:y({},e.newPassword,{touched:!0}),repeatPassword:y({},e.repeatPassword,{touched:!0})}));else{var a={id:n.props.user.id,old_password:t.value,password:r.value};n.setState({updatingPassword:!0}),p.User.save(a,()=>{m.default.success("Saved."),n.props.dialog.close({success:!0})},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.default.error(e.data&&e.data.message||"Failed saving."),n.setState({updatingPassword:!1})})}})}),E(O(n),"handleChange",e=>{var t=e.target,r=t.name,a=t.value,i=n.state[r].error;n.setState(E({},r,{value:a,error:i,touched:!0}),()=>{n.validateFields()})}),n.state={currentPassword:{value:"",error:null,touched:!1},newPassword:{value:"",error:null,touched:!1},repeatPassword:{value:"",error:null,touched:!1},updatingPassword:!1},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.dialog,t=this.state,n=t.currentPassword,r=t.newPassword,i=t.repeatPassword,s=t.updatingPassword,c={className:"m-b-10",required:!0},d={onChange:this.handleChange,onPressEnter:this.updatePassword};return a.a.createElement(l.a,b({},e.props,{okButtonProps:{loading:s},onOk:this.updatePassword,title:"Change Password"}),a.a.createElement(o.a,{layout:"vertical"},a.a.createElement(o.a.Item,b({},c,{validateStatus:n.touched&&n.error?"error":null,help:n.touched?n.error:null,label:"Current Password"}),a.a.createElement(u.a.Password,b({},d,{name:"currentPassword","data-test":"CurrentPassword",autoFocus:!0}))),a.a.createElement(o.a.Item,b({},c,{validateStatus:r.touched&&r.error?"error":null,help:r.touched?r.error:null,label:"New Password"}),a.a.createElement(u.a.Password,b({},d,{name:"newPassword","data-test":"NewPassword"}))),a.a.createElement(o.a.Item,b({},c,{validateStatus:i.touched&&i.error?"error":null,help:i.touched?i.error:null,label:"Repeat New Password"}),a.a.createElement(u.a.Password,b({},d,{name:"repeatPassword","data-test":"RepeatPassword"})))))}}])&&v(n.prototype,r),i&&v(n,i),t}();E(S,"propTypes",{user:f.UserProfile.isRequired,dialog:h.DialogPropType.isRequired}),t.default=Object(h.wrap)(S)},function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(15),n(22),n(36),n(29);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(39),l=n.n(s),c=n(156),u=n.n(c),d=n(121),p=n(35),m=n(73);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=b(t).call(this,e),n=!i||"object"!==f(i)&&"function"!=typeof i?y(r):i,w(y(n),"createUser",()=>{n.form.current.validateFieldsAndScroll((e,t)=>{e||(n.setState({savingUser:!0}),n.props.onCreate(t).then(()=>{n.props.dialog.close()}).catch(e=>{n.setState({savingUser:!1,errorMessage:e.message})}))})}),n.state={savingUser:!1,errorMessage:null},n.form=a.a.createRef(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){Object(m.default)("view","page","users/new")}},{key:"render",value:function(){var e=this.state,t=e.savingUser,n=e.errorMessage,r=[{name:"name",title:"Name",type:"text",autoFocus:!0},{name:"email",title:"Email",type:"email"}].map(e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e})({required:!0,props:{onPressEnter:this.createUser}},e));return a.a.createElement(l.a,h({},this.props.dialog.props,{title:"Create a New User",okText:"Create",okButtonProps:{loading:t},onOk:()=>this.createUser()}),a.a.createElement(d.default,{fields:r,ref:this.form,hideSubmitButton:!0}),n&&a.a.createElement(u.a,{message:n,type:"error",showIcon:!0}))}}])&&g(n.prototype,r),i&&g(n,i),t}();w(O,"propTypes",{dialog:p.DialogPropType.isRequired,onCreate:o.a.func.isRequired}),t.default=Object(p.wrap)(O)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return T});n(16),n(17),n(15),n(22),n(36),n(29),n(133);var r=n(0),a=n.n(r),i=n(2),o=n(156),s=n.n(o),l=n(21),c=n.n(l),u=n(47),d=n.n(u),p=n(39),m=n.n(p),f=n(184),h=n.n(f),g=n(51),b=n(53),y=n(14),v=n(253),w=n(40),O=n(121),j=n(435),E=n(154);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){C(e,t,n[t])})}return e}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=k(t).call(this,e),n=!a||"object"!==S(a)&&"function"!=typeof a?$(r):a,C($(n),"changePassword",()=>{j.default.showModal({user:n.props.user})}),C($(n),"sendPasswordReset",()=>{n.setState({sendingPasswordEmail:!0}),g.User.sendPasswordReset(n.state.user).then(e=>{n.setState({passwordLink:e})}).finally(()=>{n.setState({sendingPasswordEmail:!1})})}),C($(n),"resendInvitation",()=>{n.setState({resendingInvitation:!0}),g.User.resendInvitation(n.state.user).then(e=>{n.setState({passwordLink:e})}).finally(()=>{n.setState({resendingInvitation:!1})})}),C($(n),"regenerateApiKey",()=>{m.a.confirm({title:"Regenerate API Key",content:"Are you sure you want to regenerate?",okText:"Regenerate",onOk:()=>{n.setState({regeneratingApiKey:!0}),g.User.regenerateApiKey(n.state.user).then(e=>{if(e){var t=n.state.user;n.setState({user:x({},t,{apiKey:e})})}}).finally(()=>{n.setState({regeneratingApiKey:!1})})},maskClosable:!0,autoFocusButton:null})}),C($(n),"toggleUser",()=>{var e=n.state.user,t=e.isDisabled?g.User.enableUser:g.User.disableUser;n.setState({togglingUser:!0}),t(e).then(e=>{e&&n.setState({user:g.User.convertUserInfo(e.data)})}).finally(()=>{n.setState({togglingUser:!1})})}),C($(n),"saveUser",(e,t,r)=>{var a=x({id:n.props.user.id},e);g.User.save(a,e=>{t("Saved."),n.setState({user:g.User.convertUserInfo(e)})},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(e.data&&e.data.message||"Failed saving.")})}),n.state={user:n.props.user,groups:[],loadingGroups:!0,regeneratingApiKey:!1,sendingPasswordEmail:!1,resendingInvitation:!1,togglingUser:!1},n}var n,o,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,a.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){b.Group.query(e=>{this.setState({groups:e.map(e=>{return{value:e.id,title:e.name}}),loadingGroups:!1})})}},{key:"renderUserInfoForm",value:function(){var e=this.state,t=e.user,n=e.groups,r=e.loadingGroups,o=[{name:"name",title:"Name",type:"text",initialValue:t.name},{name:"email",title:"Email",type:"email",initialValue:t.email},t.isDisabled||y.currentUser.id===t.id?{name:"group_ids",title:"Groups",type:"content",content:this.renderUserGroups()}:{name:"group_ids",title:"Groups",type:"select",mode:"multiple",options:n,initialValue:n.filter(e=>Object(i.includes)(t.groupIds,e.value)).map(e=>e.value),loading:r,placeholder:r?"Loading...":""}].map(e=>x({readOnly:t.isDisabled,required:!0},e));return a.a.createElement(O.default,{fields:o,onSubmit:this.saveUser,hideSubmitButton:t.isDisabled})}},{key:"renderUserGroups",value:function(){var e=this.state,t=e.user,n=e.groups;return e.loadingGroups?"Loading...":a.a.createElement("div",{"data-test":"Groups"},n.filter(e=>Object(i.includes)(t.groupIds,e.value)).map(e=>a.a.createElement(h.a,{className:"m-b-5 m-r-5",key:e.value},a.a.createElement("a",{href:"groups/".concat(e.value)},e.title))))}},{key:"renderApiKey",value:function(){var e=this.state,t=e.user,n=e.regeneratingApiKey;return a.a.createElement(d.a,{layout:"vertical"},a.a.createElement("hr",null),a.a.createElement(d.a.Item,{label:"API Key",className:"m-b-10"},a.a.createElement(E.default,{id:"apiKey",className:"hide-in-percy",value:t.apiKey,"data-test":"ApiKey",readOnly:!0})),a.a.createElement(c.a,{className:"w-100",onClick:this.regenerateApiKey,loading:n,"data-test":"RegenerateApiKey"},"Regenerate"))}},{key:"renderPasswordLinkAlert",value:function(){var e=this.state,t=e.user,n=e.passwordLink;return a.a.createElement(s.a,{message:"Email not sent!",description:a.a.createElement(r.Fragment,null,a.a.createElement("p",null,"The mail server is not configured, please send the following link to ",a.a.createElement("b",null,t.name),":"),a.a.createElement(E.default,{value:Object(v.absoluteUrl)(n),readOnly:!0})),type:"warning",className:"m-t-20",afterClose:()=>{this.setState({passwordLink:null})},closable:!0})}},{key:"renderResendInvitation",value:function(){return a.a.createElement(c.a,{className:"w-100 m-t-10",onClick:this.resendInvitation,loading:this.state.resendingInvitation},"Resend Invitation")}},{key:"renderSendPasswordReset",value:function(){var e=this.state.sendingPasswordEmail;return a.a.createElement(r.Fragment,null,a.a.createElement(c.a,{className:"w-100 m-t-10",onClick:this.sendPasswordReset,loading:e},"Send Password Reset Email"))}},{key:"rendertoggleUser",value:function(){var e=this.state,t=e.user,n=e.togglingUser;return t.isDisabled?a.a.createElement(c.a,{className:"w-100 m-t-10",type:"primary",onClick:this.toggleUser,loading:n},"Enable User"):a.a.createElement(c.a,{className:"w-100 m-t-10",type:"danger",onClick:this.toggleUser,loading:n},"Disable User")}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.passwordLink;return a.a.createElement("div",{className:"col-md-4 col-md-offset-4"},a.a.createElement("img",{alt:"Profile",src:t.profileImageUrl,className:"profile__image",width:"40"}),a.a.createElement("h3",{className:"profile__h3"},t.name),a.a.createElement("hr",null),this.renderUserInfoForm(),!t.isDisabled&&a.a.createElement(r.Fragment,null,this.renderApiKey(),a.a.createElement("hr",null),a.a.createElement("h5",null,"Password"),t.id===y.currentUser.id&&a.a.createElement(c.a,{className:"w-100 m-t-10",onClick:this.changePassword,"data-test":"ChangePassword"},"Change Password"),y.currentUser.isAdmin&&t.id!==y.currentUser.id&&a.a.createElement(r.Fragment,null,t.isInvitationPending?this.renderResendInvitation():this.renderSendPasswordReset(),n&&this.renderPasswordLinkAlert())),a.a.createElement("hr",null),y.currentUser.isAdmin&&t.id!==y.currentUser.id&&this.rendertoggleUser())}}])&&P(n.prototype,o),l&&P(n,l),t}();C(T,"propTypes",{user:w.UserProfile.isRequired})},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return y});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(2),o=n(184),s=n.n(o),l=n(53),c=n(40);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h,g,b,y=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=p(this,m(t).call(this,e))).state={groups:[],loadingGroups:!0},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){l.Group.query(e=>{this.setState({groups:e,loadingGroups:!1})})}},{key:"renderUserGroups",value:function(){var e=this.props.user.groupIds,t=this.state.groups;return a.a.createElement("div",null,t.filter(t=>Object(i.includes)(e,t.id)).map(e=>a.a.createElement(s.a,{className:"m-t-5 m-r-5",key:e.id},a.a.createElement("a",{href:"groups/".concat(e.id)},e.name))))}},{key:"render",value:function(){var e=this.props.user,t=e.name,n=e.email,r=e.profileImageUrl,i=this.state.loadingGroups;return a.a.createElement("div",{className:"col-md-4 col-md-offset-4 profile__container"},a.a.createElement("img",{alt:"profile",src:r,className:"profile__image",width:"40"}),a.a.createElement("h3",{className:"profile__h3"},t),a.a.createElement("hr",null),a.a.createElement("dl",{className:"profile__dl"},a.a.createElement("dt",null,"Name:"),a.a.createElement("dd",null,t),a.a.createElement("dt",null,"Email:"),a.a.createElement("dd",null,n),a.a.createElement("dt",null,"Groups:"),a.a.createElement("dd",null,i?"Loading...":this.renderUserGroups())))}}])&&d(n.prototype,r),o&&d(n,o),t}();h=y,g="propTypes",b={user:c.UserProfile.isRequired},g in h?Object.defineProperty(h,g,{value:b,enumerable:!0,configurable:!0,writable:!0}):h[g]=b},function(e,t,n){"use strict";n.r(t),n.d(t,"getColumnCleanName",function(){return m}),n.d(t,"default",function(){return g});n(16),n(17),n(22),n(15),n(552),n(92),n(116);var r=n(85),a=n.n(r),i=n(12),o=n.n(i),s=n(2);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}h.$inject=["$resource","$timeout","$q","QueryResultError","Auth"];var u=a()("redash:services:QueryResult"),d=["filter","multi-filter","multiFilter"];function p(e){var t;if(-1!==e.indexOf("::"))t="::";else{if(-1===e.indexOf("__"))return e;t="__"}var n=e.split(t);return""===n[0]&&2===n.length?n[1]:Object(s.includes)(d,n[1])?n[0]:e}function m(e){return p(e)}function f(e){return p(e).replace(/(?:^|\s)\S/g,e=>e.toUpperCase())}function h(e,t,n,r,a){var i=e("api/query_results/:id",{id:"@id"},{post:{method:"POST"}}),p=e("api/jobs/:id",{id:"@id"}),h=e("api/queries/:queryId/jobs/:id",{queryId:"@queryId",id:"@id"}),g={1:"waiting",2:"processing",3:"done",4:"failed"};function b(e,t){403===t.status?e.update(t.data):400===t.status&&"job"in t.data?e.update(t.data):(u("Unknown error",t),e.update({job:{error:t.data.message||"unknown error occurred. Please try again later.",status:4}}))}return function(){function y(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),this.deferred=n.defer(),this.job={},this.query_result={},this.status="waiting",this.updatedAt=o()(),this.isLoadingResult=!1,e&&this.update(e)}var v,w,O;return v=y,O=[{key:"getById",value:function(e){var t=new y;return t.isLoadingResult=!0,i.get({id:e},e=>{t.isLoadingResult=!1,t.update(e)},e=>{t.isLoadingResult=!1,b(t,e)}),t}},{key:"getByQueryId",value:function(t,n,r){var a=new y;return e("api/queries/:id/results",{id:"@id"},{post:{method:"POST"}}).post({id:t,parameters:n,max_age:r},e=>{a.update(e),"job"in e&&a.refreshStatus(t,n)},e=>{b(a,e)}),a}},{key:"get",value:function(e,t,n,r,a){var o=new y,s={data_source_id:e,parameters:n,query:t,max_age:r};return void 0!==a&&(s.query_id=a),i.post(s,e=>{o.update(e),"job"in e&&o.refreshStatus(t,n)},e=>{b(o,e)}),o}}],(w=[{key:"update",value:function(e){if(Object(s.extend)(this,e),"query_result"in e){this.status="done";var t={};Object(s.each)(this.query_result.data.rows,e=>{Object(s.forOwn)(e,(n,r)=>{var a=null;Object(s.isNumber)(n)?a="float":Object(s.isString)(n)&&n.match(/^\d{4}-\d{2}-\d{2}T/)?(e[r]=o.a.utc(n),a="datetime"):Object(s.isString)(n)&&n.match(/^\d{4}-\d{2}-\d{2}$/)?(e[r]=o.a.utc(n),a="date"):"object"===l(n)&&null!==n?e[r]=JSON.stringify(n):a="string",null!==a&&(void 0!==t[r]&&t[r]!==a?t[r]="string":t[r]=a)})}),Object(s.each)(this.query_result.data.columns,e=>{e.name=""+e.name,t[e.name]&&(null!=e.type&&"string"!==e.type||(e.type=t[e.name]))}),this.deferred.resolve(this)}else 3===this.job.status?this.status="processing":4===this.job.status?(this.status=g[this.job.status],this.deferred.reject(new r(this.job.error))):this.status=void 0}},{key:"getId",value:function(){var e=null;return"query_result"in this&&(e=this.query_result.id),e}},{key:"cancelExecution",value:function(){p.delete({id:this.job.id})}},{key:"getStatus",value:function(){return this.isLoadingResult?"loading-result":this.status||g[this.job.status]}},{key:"getError",value:function(){if("None"!==this.job.error)return this.job.error}},{key:"getLog",value:function(){return this.query_result.data&&this.query_result.data.log&&0!==this.query_result.data.log.length?this.query_result.data.log:null}},{key:"getUpdatedAt",value:function(){return this.query_result.retrieved_at||1e3*this.job.updated_at||this.updatedAt}},{key:"getRuntime",value:function(){return this.query_result.runtime}},{key:"getRawData",value:function(){return this.query_result.data?this.query_result.data.rows:null}},{key:"getData",value:function(){return this.query_result.data?this.query_result.data.rows:null}},{key:"isEmpty",value:function(){return null===this.getData()||0===this.getData().length}},{key:"getColumns",value:function(){return void 0===this.columns&&this.query_result.data&&(this.columns=this.query_result.data.columns),this.columns}},{key:"getColumnNames",value:function(){return void 0===this.columnNames&&this.query_result.data&&(this.columnNames=this.query_result.data.columns.map(e=>e.name)),this.columnNames}},{key:"getColumnCleanNames",value:function(){return this.getColumnNames().map(e=>m(e))}},{key:"getColumnFriendlyNames",value:function(){return this.getColumnNames().map(e=>f(e))}},{key:"getFilters",value:function(){if(!this.getColumns())return[];var e=[];return this.getColumns().forEach(t=>{var n=t.name,r=n.split("::")[1]||n.split("__")[1];if(Object(s.includes)(d,r)){var a={name:n,friendlyName:f(n),column:t,values:[],multiple:"multiFilter"===r||"multi-filter"===r};e.push(a)}},this),this.getRawData().forEach(t=>{e.forEach(e=>{e.values.push(t[e.name]),1===e.values.length&&(e.multiple?e.current=[t[e.name]]:e.current=t[e.name])})}),e.forEach(e=>{e.values=Object(s.uniqBy)(e.values,e=>o.a.isMoment(e)?e.unix():e)}),e}},{key:"toPromise",value:function(){return this.deferred.promise}},{key:"loadLatestCachedResult",value:function(t,n){e("api/queries/:id/results",{id:"@queryId"},{post:{method:"POST"}}).post({queryId:t,parameters:n},e=>{this.update(e)},e=>{b(this,e)})}},{key:"loadResult",value:function(e){this.isLoadingResult=!0,i.get({id:this.job.query_result_id},e=>{this.update(e),this.isLoadingResult=!1},n=>{void 0===e&&(e=0),e>3?(u("Connection error while trying to load result",n),this.update({job:{error:"failed communicating with server. Please check your Internet connection and try again.",status:4}}),this.isLoadingResult=!1):t(()=>{this.loadResult(e+1)},1e3*Math.pow(2,e))})}},{key:"refreshStatus",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=a.isAuthenticated()?p:h,o=()=>a.isAuthenticated()?this.loadResult():this.loadLatestCachedResult(e,n);i.get({queryId:e,id:this.job.id},a=>{if(this.update(a),"processing"===this.getStatus()&&this.job.query_result_id&&"None"!==this.job.query_result_id)o();else if("failed"!==this.getStatus()){t(()=>{this.refreshStatus(e,n,r+1)},r>10?3e3:500)}},e=>{u("Connection error",e),this.update({job:{error:"failed communicating with server. Please check your Internet connection and try again.",status:4}})})}},{key:"getLink",value:function(e,t,n){var r="api/queries/".concat(e,"/results/").concat(this.getId(),".").concat(t);return n&&(r="".concat(r,"?api_key=").concat(n)),r}},{key:"getName",value:function(e,t){return"".concat(e.replace(/ /g,"_")+o()(this.getUpdatedAt()).format("_YYYY_MM_DD"),".").concat(t)}}])&&c(v.prototype,w),O&&c(v,O),y}()}function g(e){e.factory("QueryResult",h)}g.init=!0},function(e,t,n){"use strict";n.r(t);n(42),n(16),n(17),n(15),n(89);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(39),c=n.n(l),u=n(30),d=n.n(u),p=n(37),m=n.n(p),f=n(81),h=n(35),g=n(159),b=n(9),y=n(254),v=n(73),w=n(49),O=n(315),j=n(28);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function x(e){var t=e.dialog,n=e.visualization,o=e.query,s=e.queryResult,l=!n,u=Object(O.a)(s),p=S(Object(a.useState)(u.filters),2),h=p[0],x=p[1],P=Object(a.useMemo)(()=>({columns:u.columns,rows:Object(g.filterData)(u.rows,h)}),[u,h]),k=Object(a.useMemo)(()=>{var e=n?j.registeredVisualizations[n.type]:Object(j.getDefaultVisualization)(),t=e.getOptions(l?{}:n.options,u);return{type:e.type,name:l?e.name:n.name,options:t,originalOptions:t}},[n]),$=S(Object(a.useState)(k.type),2),_=$[0],C=$[1],T=S(Object(a.useState)(k.name),2),q=T[0],R=T[1],D=S(Object(a.useState)(!1),2),A=D[0],N=D[1],I=S(Object(a.useState)(k.options),2),z=I[0],M=I[1],F=S(Object(a.useState)(!1),2),U=F[0],L=F[1];function V(e){var t=j.registeredVisualizations[_];M(t.getOptions(e,u))}var Q=j.registeredVisualizations[_],B=Q.Renderer,H=Q.Editor;return i.a.createElement(c.a,E({},t.props,{wrapClassName:"ant-modal-fullscreen",title:"Visualization Editor",okText:"Save",okButtonProps:{loading:U,disabled:U},onOk:function(){L(!0),function(e){return e.id?Object(v.default)("update","visualization",e.id,{type:e.type}):Object(v.default)("create","visualization",null,{type:e.type}),y.Visualization.save(e).$promise.then(e=>(b.default.success("Visualization saved"),e)).catch(e=>(b.default.error("Visualization could not be saved"),Promise.reject(e)))}(Object(r.extend)(Object(j.newVisualization)(_),n,{name:q,options:z,query_id:o.id})).then(e=>{!function(e,t){var n=Object(r.findIndex)(e.visualizations,e=>e.id===t.id);n>-1?e.visualizations[n]=t:e.visualizations.push(t)}(o,e),t.close(e)})},onCancel:function(){var e,n=!Object(r.isEqual)(Object(w.a)(z),k.originalOptions);(e=A||n,new Promise((t,n)=>{e?c.a.confirm({title:"Visualization Editor",content:"Are you sure you want to close the editor without saving?",okText:"Yes",cancelText:"No",onOk:()=>t(),onCancel:()=>n()}):t()})).then(t.dismiss)},wrapProps:{"data-test":"EditVisualizationDialog"}}),i.a.createElement(f.Row,{gutter:24},i.a.createElement(f.Col,{span:24,md:10},i.a.createElement("div",{className:"m-b-15"},i.a.createElement("label",{htmlFor:"visualization-type"},"Visualization Type"),i.a.createElement(d.a,{"data-test":"VisualizationType",id:"visualization-type",className:"w-100",disabled:!l,value:_,onChange:function(e){C(e);var t=j.registeredVisualizations[e];A||R(t.name),M(t.getOptions(l?{}:n.options,u))}},Object(r.map)(j.registeredVisualizations,e=>i.a.createElement(d.a.Option,{key:e.type,"data-test":"VisualizationType."+e.type},e.name)))),i.a.createElement("div",{className:"m-b-15"},i.a.createElement("label",{htmlFor:"visualization-name"},"Visualization Name"),i.a.createElement(m.a,{"data-test":"VisualizationName",id:"visualization-name",className:"w-100",value:q,onChange:e=>(function(e){R(e),N(e!==q)})(e.target.value)})),i.a.createElement("div",{"data-test":"VisualizationEditor"},i.a.createElement(H,{data:u,options:z,visualizationName:q,onOptionsChange:V}))),i.a.createElement(f.Col,{span:24,md:14},i.a.createElement("label",{htmlFor:"visualization-preview",className:"invisible hidden-xs"},"Preview"),i.a.createElement(g.Filters,{filters:h,onChange:x}),i.a.createElement("div",{className:"scrollbox","data-test":"VisualizationPreview"},i.a.createElement(B,{data:P,options:z,visualizationName:q,onOptionsChange:V})))))}x.propTypes={dialog:h.DialogPropType.isRequired,query:s.a.object.isRequired,visualization:j.VisualizationType,queryResult:s.a.object.isRequired},x.defaultProps={visualization:null},t.default=Object(h.wrap)(x)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});n(15),n(22),n(36);var r=n(0),a=n.n(r),i=n(37),o=n.n(i),s=n(28);function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=e.options,n=e.onOptionsChange;return a.a.createElement("div",null,a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{className:"control-label",htmlFor:"box-plot-x-axis-label"},"X Axis Label"),a.a.createElement(o.a,{id:"box-plot-x-axis-label",value:t.xAxisLabel,onChange:e=>(e=>{var r=l({},t,{xAxisLabel:e});n(r)})(e.target.value)})),a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{className:"control-label",htmlFor:"box-plot-y-axis-label"},"Y Axis Label"),a.a.createElement(o.a,{id:"box-plot-y-axis-label",value:t.yAxisLabel,onChange:e=>(e=>{var r=l({},t,{yAxisLabel:e});n(r)})(e.target.value)})))}u.propTypes=s.EditorPropTypes},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return c});var r=n(2),a=n(0),i=n.n(a),o=n(211),s=n.n(o),l=n(28);function c(e){var t=e.options,n=e.onOptionsChange;return i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{className:"d-flex align-items-center",htmlFor:"pivot-show-controls"},i.a.createElement("span",{className:"m-r-10"},"Hide Pivot Controls"),i.a.createElement(s.a,{"data-test":"PivotEditor.HideControls",id:"pivot-show-controls",checked:t.controls.enabled,onChange:e=>(e=>{n(Object(r.merge)({},t,e))})({controls:{enabled:e}})})))}c.propTypes=l.EditorPropTypes},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(0),a=n.n(r);function i(){return a.a.createElement("div",{className:"form-horizontal"},a.a.createElement("div",null,"This visualization expects the query result to have rows in the following format:",a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("strong",null,"stage1")," - stage 1 value"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage2")," - stage 2 value (or null)"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage3")," - stage 3 value (or null)"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage4")," - stage 4 value (or null)"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage5")," - stage 5 value (or null)"),a.a.createElement("li",null,a.a.createElement("strong",null,"value")," - number of times this sequence occurred"))))}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(0),a=n.n(r);function i(){return a.a.createElement("div",{className:"form-horizontal"},a.a.createElement("div",null,"This visualization expects the query result to have rows in one of the following formats:",a.a.createElement("div",{className:"m-t-10"},a.a.createElement("strong",null,"Option 1:"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("strong",null,"sequence")," - sequence id"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage")," - what stage in sequence this is (1, 2, ...)"),a.a.createElement("li",null,a.a.createElement("strong",null,"node")," - stage name"),a.a.createElement("li",null,a.a.createElement("strong",null,"value")," - number of times this sequence occurred"))),a.a.createElement("div",{className:"m-t-10"},a.a.createElement("strong",null,"Option 2:"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement("strong",null,"stage1")," - stage 1 value"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage2")," - stage 2 value (or null)"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage3")," - stage 3 value (or null)"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage4")," - stage 4 value (or null)"),a.a.createElement("li",null,a.a.createElement("strong",null,"stage5")," - stage 5 value (or null)"),a.a.createElement("li",null,a.a.createElement("strong",null,"value")," - number of times this sequence occurred")))))}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return d});n(15),n(22),n(36);var r=n(2),a=n(0),i=n.n(a),o=n(30),s=n.n(o),l=n(28);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=s.a.Option;function d(e){var t=e.options,n=e.data,a=e.onOptionsChange;return i.a.createElement("div",{className:"form-group"},i.a.createElement("label",{className:"control-label",htmlFor:"word-cloud-column"},"Word Cloud Column Name"),i.a.createElement(s.a,{id:"word-cloud-column",className:"w-100",value:t.column,onChange:e=>{var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){c(e,t,n[t])})}return e}({},t,{column:e});a(n)}},Object(r.map)(n.columns,e=>{var t=e.name;return i.a.createElement(u,{key:t},t)})))}d.propTypes=l.EditorPropTypes},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(67),l=n(245),c=n(187);function u(e){var t=e.page,n=e.searchTerm,r=e.selectedTags;if(""!==n)return a.a.createElement(s.BigMessage,{message:"Sorry, we couldn't find anything.",icon:"fa-search"});if(r.length>0)return a.a.createElement(l.NoTaggedObjectsFound,{objectType:"dashboards",tags:r});switch(t){case"favorites":return a.a.createElement(s.BigMessage,{message:"Mark dashboards as Favorite to list them here.",icon:"fa-star"});default:return a.a.createElement(c.EmptyState,{icon:"zmdi zmdi-view-quilt",description:"See the big picture",illustration:"dashboard",helpLink:"https://help.redash.io/category/22-dashboards",showDashboardStep:!0})}}u.propTypes={page:o.a.string.isRequired,searchTerm:o.a.string.isRequired,selectedTags:o.a.array.isRequired}},function(e,t,n){"use strict";n.r(t);n(16),n(17),n(42),n(29),n(133);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(211),c=n.n(l),u=n(39),d=n.n(u),p=n(47),m=n.n(p),f=n(156),h=n.n(f),g=n(25),b=n(9),y=n(35),v=n(154),w=n(123);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $="api/dashboards/{id}/share",_=function(e){function t(e){var n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,i=S(t).call(this,e),n=!i||"object"!==O(i)&&"function"!=typeof i?x(a):i,k(x(n),"formItemProps",{labelCol:{span:8},wrapperCol:{span:16},style:{marginBottom:7}}),k(x(n),"enableAccess",()=>{var e=n.props.dashboard;n.setState({saving:!0}),g.$http.post(n.apiUrl).success(t=>{e.publicAccessEnabled=!0,e.public_url=t.public_url}).error(()=>{b.default.error("Failed to turn on sharing for this dashboard")}).finally(()=>{n.setState({saving:!1})})}),k(x(n),"disableAccess",()=>{var e=n.props.dashboard;n.setState({saving:!0}),g.$http.delete(n.apiUrl).success(()=>{e.publicAccessEnabled=!1,delete e.public_url}).error(()=>{b.default.error("Failed to turn off sharing for this dashboard")}).finally(()=>{n.setState({saving:!1})})}),k(x(n),"onChange",e=>{e?n.enableAccess():n.disableAccess()});var o=n.props.dashboard;return n.state={saving:!1},n.apiUrl=Object(r.replace)($,"{id}",o.id),n.disabled=n.props.hasQueryParams&&!o.publicAccessEnabled,n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,i.a.Component),n=t,o=[{key:"headerContent",get:function(){return i.a.createElement(i.a.Fragment,null,"Share Dashboard",i.a.createElement("div",{className:"modal-header-desc"},"Allow public access to this dashboard with a secret address."," ",i.a.createElement(w.HelpTrigger,{type:"SHARE_DASHBOARD"})))}}],(a=[{key:"render",value:function(){var e=this.props,t=e.dialog,n=e.dashboard;return i.a.createElement(d.a,j({},t.props,{title:this.constructor.headerContent,footer:null}),i.a.createElement(m.a,{layout:"horizontal"},this.props.hasQueryParams&&i.a.createElement(m.a.Item,null,i.a.createElement(h.a,{message:"Sharing is currently not supported for dashboards containing queries with parameters.",type:"error"})),i.a.createElement(m.a.Item,j({label:"Allow public access"},this.formItemProps),i.a.createElement(c.a,{checked:n.publicAccessEnabled,onChange:this.onChange,loading:this.state.saving,disabled:this.disabled})),n.public_url&&i.a.createElement(m.a.Item,j({label:"Secret address"},this.formItemProps),i.a.createElement(v.default,{value:n.public_url}))))}}])&&E(n.prototype,a),o&&E(n,o),t}();k(_,"propTypes",{dashboard:s.a.object.isRequired,hasQueryParams:s.a.bool.isRequired,dialog:y.DialogPropType.isRequired}),t.default=Object(y.wrap)(_)},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(67),l=n(245),c=n(187);function u(e){var t=e.page,n=e.searchTerm,r=e.selectedTags;if(""!==n)return a.a.createElement(s.BigMessage,{message:"Sorry, we couldn't find anything.",icon:"fa-search"});if(r.length>0)return a.a.createElement(l.NoTaggedObjectsFound,{objectType:"queries",tags:r});switch(t){case"favorites":return a.a.createElement(s.BigMessage,{message:"Mark queries as Favorite to list them here.",icon:"fa-star"});case"archive":return a.a.createElement(s.BigMessage,{message:"Archived queries will be listed here.",icon:"fa-archive"});case"my":return a.a.createElement("div",{className:"tiled bg-white p-15"},a.a.createElement("a",{href:"queries/new",className:"btn btn-primary btn-sm"},"Create your first query")," ","to populate My Queries list. Need help? Check out our"," ",a.a.createElement("a",{href:"https://redash.io/help/user-guide/querying/writing-queries"},"query writing documentation"),".");default:return a.a.createElement(c.EmptyState,{icon:"fa fa-code",illustration:"query",description:"Getting the data from your datasources.",helpLink:"https://help.redash.io/category/21-querying"})}}u.propTypes={page:o.a.string.isRequired,searchTerm:o.a.string.isRequired,selectedTags:o.a.array.isRequired}},,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"images/avatar.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(20),a=n.n(r),i=n(2),o=n.n(i),s=(n(562),n(1151),n(1152),n(1154),n(319)),l=n.n(s);function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(t=o.a.filter(t,o.a.isFunction)).length>0?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var a=0;a<t.length;a+=1)t[a].apply(this,n)}:o.a.noop}function u(e){l.a.GridStackDragDropPlugin.call(this,e)}l.a.GridStackDragDropPlugin.registerPlugin(u),u.prototype=Object.create(l.a.GridStackDragDropPlugin.prototype),u.prototype.constructor=u,u.prototype.resizable=function(e,t,n,r){return e=a()(e),"disable"===t||"enable"===t?e.resizable(t):"option"===t?e.resizable(t,n,r):e.resizable(o.a.extend({},this.grid.opts.resizable,{start:c(this.grid.opts.resizable.start,t.start),stop:c(t.stop,this.grid.opts.resizable.stop),resize:c(t.resize,this.grid.opts.resizable.resize)})),this},u.prototype.draggable=function(e,t){return e=a()(e),"disable"===t||"enable"===t?e.draggable(t):e.draggable(o.a.extend({},this.grid.opts.draggable,{containment:this.grid.opts.isNested?this.grid.container.parent():null,start:c(this.grid.opts.draggable.start,t.start),stop:c(t.stop,this.grid.opts.draggable.stop),drag:c(t.drag,this.grid.opts.draggable.drag)})),this},u.prototype.droppable=function(e,t){return e=a()(e),"disable"===t||"enable"===t?e.droppable(t):e.droppable({accept:t.accept}),this},u.prototype.isDroppable=function(e){return Boolean(a()(e).data("droppable"))},u.prototype.on=function(e,t,n){return a()(e).on(t,n),this}},,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports='<div class="p-5">\n  <h4>Notifications</h4>\n\n  <div>\n    <ui-select ng-model="newSubscription.destination" ng-disabled="destinations.length == 0">\n      <ui-select-match><span ng-bind-html="destinationsDisplay($select.selected)"></span></ui-select-match>\n      <ui-select-choices repeat="d in destinations">\n        <span ng-bind-html="destinationsDisplay(d)"></span>\n      </ui-select-choices>\n    </ui-select>\n  </div>\n  <div class="m-t-5">\n    <button class="btn btn-default" ng-click="saveSubscriber()" ng-disabled="destinations.length == 0" style="width:50%;">Add</button>\n    <span class="pull-right m-t-5">\n      <a href="destinations/new" ng-if="currentUser.isAdmin">Create New Destination</a>\n    </span>\n  </div>\n\n  <hr/>\n\n  <div>\n    <div class="list-group-item" ng-repeat="subscriber in subscribers">\n      <span ng-bind-html="destinationsDisplay(subscriber)"></span>\n      <button class="btn btn-xs btn-danger pull-right" ng-click="unsubscribe(subscriber)" ng-if="currentUser.isAdmin || currentUser.id == subscriber.user.id">Remove</button>\n    </div>\n  </div>\n</div>\n'},function(e){e.exports="dev"},function(e,t){e.exports='<nav class="navbar navbar-default app-header" role="navigation">\n  <div class="container">\n    <div class="navbar-header">\n      <button\n        type="button"\n        class="navbar-toggle"\n        ng-click="isNavOpen = !isNavOpen"\n      >\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      \x3c!-- REDASH LOGO --\x3e\n      <a class="navbar-brand" ng-href="{{ $ctrl.basePath }}"\n        ><img ng-src="{{ $ctrl.logoUrl }}"\n      /></a>\n    </div>\n    <div class="collapse navbar-collapse" uib-collapse="!isNavOpen">\n      \x3c!-- Main Left Nav--\x3e\n\n      <ul class="nav navbar-nav nav__main">\n        <li\n          class="dropdown btn-group"\n          ng-show="$ctrl.showDashboardsMenu"\n          uib-dropdown\n        >\n          <a class="btn" href="dashboards">Dashboards</a>\n          <a type="button" class="btn hidden-xs" uib-dropdown-toggle>\n            <span class="caret caret--nav"></span>\n          </a>\n          <ul class="dropdown-menu" uib-dropdown-menu>\n            <li ng-if="$ctrl.dashboards.length == 0">\n              <a>\n                <em>\n                  <span class="btn-favourite">\n                    <i class="fa fa-star" aria-hidden="true"></i>\n                  </span>\n                  Favorite Dashboards will appear here\n                </em>\n              </a>\n            </li>\n            <li ng-repeat="dashboard in $ctrl.dashboards">\n              <a href="dashboard/{{ dashboard.slug }}">\n                {{ dashboard.name }}\n              </a>\n            </li>\n          </ul>\n        </li>\n        <li\n          class="dropdown btn-group"\n          ng-show="$ctrl.showQueriesMenu"\n          uib-dropdown\n        >\n          <a class="btn" href="queries">Queries</a>\n          <a type="button" class="btn hidden-xs" uib-dropdown-toggle>\n            <span class="caret caret--nav"></span>\n          </a>\n          <ul class="dropdown-menu" uib-dropdown-menu>\n            <li ng-if="$ctrl.queries.length == 0">\n              <a>\n                <em>\n                  <span class="btn-favourite">\n                    <i class="fa fa-star" aria-hidden="true"></i>\n                  </span>\n                  Favorite Queries will appear here\n                </em>\n              </a>\n            </li>\n            <li ng-repeat="query in $ctrl.queries">\n              <a href="queries/{{ query.id }}">\n                {{ query.name }}\n              </a>\n            </li>\n          </ul>\n        </li>\n        <li ng-if="$ctrl.showAlertsLink">\n          <a href="alerts">Alerts</a>\n        </li>\n      </ul>\n\n      \x3c!-- Add New Button --\x3e\n      <div\n        class="btn-group navbar-btn navbar-left btn__new hidden-xs"\n        uib-dropdown\n        is-open="status.isopen"\n      >\n        <button\n          id="create-button"\n          data-test="CreateButton"\n          type="button"\n          class="btn btn-primary btn--create"\n          uib-dropdown-toggle\n          ng-disabled="disabled"\n        >\n          Create <span class="caret caret--nav"></span>\n        </button>\n        <ul\n          class="dropdown-menu"\n          uib-dropdown-menu\n          role="menu"\n          aria-labelledby="create-button"\n        >\n          <li role="menuitem" ng-show="$ctrl.showNewQueryMenu">\n            <a href="queries/new">Query</a>\n          </li>\n          <li role="menuitem">\n            <a\n              ng-show="$ctrl.currentUser.hasPermission(\'create_dashboard\')"\n              ng-click="$ctrl.newDashboard()"\n              >Dashboard</a\n            >\n          </li>\n          <li role="menuitem"><a href="alerts/new">Alert</a></li>\n        </ul>\n      </div>\n\n      \x3c!-- Profile --\x3e\n      <ul class="nav navbar-nav navbar-right">\n        <li>\n          <help-trigger\n            type="\'HOME\'"\n            class-name="\'navbar-link-ANGULAR_REMOVE_ME\'"\n          ></help-trigger>\n        </li>\n        <li ng-show="$ctrl.currentUser.isAdmin">\n          <a href="data_sources" title="Settings"\n            ><i class="fa fa-sliders" aria-hidden="true"></i\n          ></a>\n        </li>\n        \x3c!--<li ng-show="$ctrl.showSettingsMenu">--\x3e\n        \x3c!--<a href="users" title="Settings"><i class="fa fa-cog"></i></a>--\x3e\n        \x3c!--</li>--\x3e\n        <li class="dropdown" uib-dropdown>\n          <a\n            href="#"\n            class="dropdown-toggle dropdown--profile"\n            uib-dropdown-toggle\n            data-test="ProfileDropdown"\n          >\n            <img\n              ng-src="{{ $ctrl.currentUser.profile_image_url }}"\n              class="profile__image--navbar"\n              width="20"/>\n            <span\n              class="dropdown--profile__username"\n              ng-bind="$ctrl.currentUser.name"\n            ></span>\n            <span class="caret caret--nav"></span\n          ></a>\n          <ul class="dropdown-menu dropdown-menu--profile">\n            <li>\n              <a ng-href="users/me">Edit Profile</a>\n            </li>\n            <li\n              class="divider"\n              ng-if="$ctrl.currentUser.hasPermission(\'super_admin\')"\n            ></li>\n\n            <li ng-show="$ctrl.currentUser.isAdmin">\n              <a href="data_sources" title="Data Sources">Data Sources</a>\n            </li>\n            <li ng-show="$ctrl.showSettingsMenu">\n              <a href="groups" title="Settings">Groups</a>\n            </li>\n            <li ng-show="$ctrl.showSettingsMenu">\n              <a href="users" title="Settings">Users</a>\n            </li>\n            <li>\n              <a ng-href="query_snippets">Query Snippets</a>\n            </li>\n            <li ng-show="$ctrl.showSettingsMenu">\n              <a href="destinations" title="Settings">Alert Destinations</a>\n            </li>\n\n            <li\n              ng-if="$ctrl.currentUser.hasPermission(\'super_admin\')"\n              class="divider"\n            ></li>\n\n            <li ng-if="$ctrl.currentUser.hasPermission(\'super_admin\')">\n              <a href="admin/status">System Status</a>\n            </li>\n\n            <li class="divider"></li>\n\n            <li>\n              <a ng-click="$ctrl.logout()">Log out</a>\n            </li>\n\n            <li class="divider"></li>\n            <li class="dropdown-menu__version">\n              Version: {{ $ctrl.backendVersion }}\n              <span ng-if="$ctrl.frontendVersion !== $ctrl.backendVersion">\n                ({{ $ctrl.frontendVersion.substring(0, 8) }})\n              </span>\n              <span\n                class="update-available"\n                ng-if="$ctrl.currentUser.hasPermission(\'super_admin\') && $ctrl.newVersionAvailable"\n              >\n                <a href="https://version.redash.io/" target="_blank">\n                  <i class="fa fa-arrow-circle-down"></i>\n                </a>\n              </span>\n            </li>\n          </ul>\n        </li>\n      </ul>\n\n      \x3c!-- Search --\x3e\n      <form\n        class="navbar-form navbar-right"\n        role="search"\n        ng-submit="$ctrl.searchQueries()"\n      >\n        <div class="input-group menu-search">\n          <input\n            type="text"\n            ng-model="$ctrl.searchTerm"\n            class="form-control navbar__search__input"\n            placeholder="Search queries..."\n            data-test="AppHeaderSearch"\n          />\n          <span class="input-group-btn">\n            <button type="submit" class="btn btn-default">\n              <span class="zmdi zmdi-search"></span>\n            </button>\n          </span>\n        </div>\n      </form>\n    </div>\n  </div>\n</nav>\n'},function(e,t){e.exports='<app-header ng-if="$ctrl.layout.showHeader"></app-header>\n<div ng-if="$ctrl.handler.error" class="fixed-container" data-test="ErrorMessage">\n  <div class="container">\n    <div class="col-md-8 col-md-push-2">\n      <div class="error-state bg-white tiled">\n         <div class="error-state__icon">\n           <i class="zmdi zmdi-alert-circle-o"></i>\n         </div>\n         <div class="error-state__details">\n           <h4>{{ $ctrl.handler.error.message }}</h4>\n         </div>\n       </div>\n    </div>\n  </div>\n</div>\n<div id="app-content" ng-if="!$ctrl.handler.error" ng-view></div>\n'},function(e,t){e.exports='<div data-test="EditDashboardDialog">\n  <div class="modal-header">\n    <button type="button" class="close" ng-click="$ctrl.dismiss()" ng-disabled="$ctrl.saveInProgress" aria-hidden="true">&times;</button>\n    <h4 class="modal-title">New Dashboard</h4>\n  </div>\n  <div class="modal-body" ng-if="$ctrl.policy.isCreateDashboardEnabled()">\n    <p>\n      <input type="text" class="form-control" placeholder="Dashboard Name" ng-model="$ctrl.dashboard.name" autofocus ng-keyup="$event.keyCode === 13 && $ctrl.saveDashboard()">\n    </p>\n  </div>\n  <div class="modal-footer" ng-if="$ctrl.policy.isCreateDashboardEnabled()">\n    <button type="button" class="btn btn-default" ng-disabled="$ctrl.saveInProgress" ng-click="$ctrl.dismiss()">Close</button>\n    <button type="button" class="btn btn-primary" ng-disabled="$ctrl.saveInProgress || !$ctrl.isFormValid()" ng-click="$ctrl.saveDashboard()" data-test="DashboardSaveButton">Save</button>\n  </div>\n\n  <div class="modal-body" ng-if="!$ctrl.policy.isCreateDashboardEnabled()">\n    <edit-dashboard-dialog-disabled></edit-dashboard-dialog-disabled>\n  </div>\n</div>'},function(e,t){e.exports='<div class="widget-wrapper">\n  <div class="tile body-container widget-visualization" ng-if="$ctrl.type==\'visualization\'" ng-class="$ctrl.type"\n    ng-switch="$ctrl.widget.getQueryResult().getStatus()">\n    <div class="body-row">\n      <div class="t-header widget clearfix">\n        <div class="dropdown pull-right widget-menu-remove"  ng-if="!$ctrl.public && $ctrl.dashboard.canEdit()">\n          <div class="actions">\n            <a ng-click="$ctrl.deleteWidget()" title="Remove From Dashboard"><i class="zmdi zmdi-close"></i></a>\n          </div>\n        </div>\n        <div class="dropdown pull-right widget-menu-regular" ng-if="!$ctrl.public"\n          uib-dropdown dropdown-append-to-body="true"\n        >\n          <div class="actions">\n            <a data-toggle="dropdown" uib-dropdown-toggle><i class="zmdi zmdi-more-vert"></i></a>\n          </div>\n\n          <ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu>\n            <li ng-class="{\'disabled\': $ctrl.widget.getQueryResult().isEmpty()}"><a ng-href="{{$ctrl.widget.getQueryResult().getLink($ctrl.widget.getQuery().id, \'csv\')}}" download="{{$ctrl.widget.getQueryResult().getName($ctrl.widget.getQuery().name, \'csv\')}}" target="_self">Download as CSV File</a></li>\n            <li ng-class="{\'disabled\': $ctrl.widget.getQueryResult().isEmpty()}"><a ng-href="{{$ctrl.widget.getQueryResult().getLink($ctrl.widget.getQuery().id, \'xlsx\')}}" download="{{$ctrl.widget.getQueryResult().getName($ctrl.widget.getQuery().name, \'xlsx\')}}" target="_self">Download as Excel File</a></li>\n\n            <li ng-if="$ctrl.canViewQuery || ($ctrl.dashboard.canEdit() && $ctrl.hasParameters())" class="divider"></li>\n            <li ng-if="$ctrl.canViewQuery"><a ng-href="{{$ctrl.widget.getQuery().getUrl(true, $ctrl.widget.visualization.id)}}">View Query</a></li>\n            <li ng-if="$ctrl.dashboard.canEdit() && $ctrl.hasParameters()">\n              <li ng-if="$ctrl.dashboard.canEdit() && $ctrl.hasParameters()"><a ng-click="$ctrl.editParameterMappings()">Edit Parameters</a></li>\n            </li>\n\n            <li ng-if="$ctrl.dashboard.canEdit()" class="divider"></li>\n            <li ng-if="$ctrl.dashboard.canEdit()"><a ng-click="$ctrl.deleteWidget()">Remove from Dashboard</a></li>\n          </ul>\n        </div>\n        <div class="th-title">\n          <p>\n            <query-link query="$ctrl.widget.getQuery()" visualization="$ctrl.widget.visualization"\n              readonly="!$ctrl.canViewQuery"></query-link>\n          </p>\n          <div class="text-muted query--description" ng-bind-html="$ctrl.widget.getQuery().description | markdown"></div>\n        </div>\n      </div>\n      <div class="m-b-10" ng-if="$ctrl.localParametersDefs().length > 0">\n        <parameters parameters="$ctrl.localParametersDefs()"></parameters>\n      </div>\n    </div>\n\n    <div ng-switch-when="failed" class="body-row-auto scrollbox">\n      <div class="alert alert-danger m-5" ng-show="$ctrl.widget.getQueryResult().getError()">Error running query: <strong>{{$ctrl.widget.getQueryResult().getError()}}</strong></div>\n    </div>\n    <div ng-switch-when="done" class="body-row-auto scrollbox">\n      <visualization-renderer class="t-body"\n        visualization="$ctrl.widget.visualization"\n        query-result="$ctrl.widget.getQueryResult()"\n        filters="$ctrl.filters"\n      ></visualization-renderer>\n    </div>\n    <div ng-switch-default class="body-row-auto spinner-container">\n      <div class="spinner">\n        <i class="zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x"></i>\n      </div>\n    </div>\n\n    <div class="body-row clearfix tile__bottom-control">\n      <a class="small hidden-print" ng-click="$ctrl.refresh()" ng-if="!$ctrl.public" data-test="RefreshIndicator">\n        <i ng-class=\'{"zmdi-hc-spin": $ctrl.widget.loading}\' class="zmdi zmdi-refresh"></i>\n        <span am-time-ago="$ctrl.widget.getQueryResult().getUpdatedAt()" ng-if="!$ctrl.widget.loading"></span>\n        <rd-timer from="$ctrl.widget.refreshStartedAt" ng-if="$ctrl.widget.loading"></rd-timer>\n      </a>\n      <span class="small hidden-print" ng-if="$ctrl.public">\n        <i class="zmdi zmdi-time-restore"></i> <span am-time-ago="$ctrl.widget.getQueryResult().getUpdatedAt()"></span>\n      </span>\n      <span class="visible-print">\n        <i class="zmdi zmdi-time-restore"></i> {{$ctrl.widget.getQueryResult().getUpdatedAt() | dateTime}}\n      </span>\n\n      <button class="btn btn-sm btn-default pull-right hidden-print btn-transparent btn__refresh" ng-click="$ctrl.refresh()" ng-if="!$ctrl.public"><i class="zmdi zmdi-refresh"></i></button>\n      <button class="btn btn-sm btn-default pull-right hidden-print btn-transparent btn__refresh" ng-click="$ctrl.expandVisualization()"><i class="zmdi zmdi-fullscreen"></i></button>\n    </div>\n  </div>\n\n  <div class="tile body-container widget-restricted" ng-if="$ctrl.type==\'restricted\'" ng-class="$ctrl.type">\n    <div class="t-body body-row-auto scrollbox">\n      <div class="text-center">\n        <h1><span class="zmdi zmdi-lock"></span></h1>\n        <p class="text-muted">\n          This widget requires access to a data source you don\'t have access to.\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div class="tile body-container widget-text" ng-hide="$ctrl.widget.width === 0" ng-if="$ctrl.type==\'textbox\'" ng-class="$ctrl.type">\n    <div class="body-row clearfix t-body">\n      <div class="dropdown pull-right widget-menu-remove" ng-if="!$ctrl.public && $ctrl.dashboard.canEdit()">\n        <div class="dropdown-header">\n          <a class="actions" ng-click="$ctrl.deleteWidget()" title="Remove From Dashboard"><i class="zmdi zmdi-close"></i></a>\n        </div>\n      </div>\n      <div class="dropdown pull-right widget-menu-regular" ng-if="!$ctrl.public && $ctrl.dashboard.canEdit()" uib-dropdown>\n        <div class="dropdown-header">\n          <a data-toggle="dropdown" uib-dropdown-toggle class="actions"><i class="zmdi zmdi-more"></i></a>\n        </div>\n\n        <ul class="dropdown-menu pull-right" uib-dropdown-menu style="z-index:1000000">\n          <li><a ng-show="$ctrl.dashboard.canEdit()" ng-click="$ctrl.editTextBox()">Edit</a></li>\n          <li><a ng-show="$ctrl.dashboard.canEdit()" ng-click="$ctrl.deleteWidget()">Remove From Dashboard</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="body-row-auto scrollbox tiled t-body p-15 markdown" ng-bind-html="$ctrl.widget.text | markdown"></div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="modal-header">\n  <button type="button" class="close" aria-hidden="true" ng-click="$ctrl.dismiss()">&times;</button>\n  <div class="visualization-title">\n    <query-link query="$ctrl.widget.getQuery()" visualization="$ctrl.widget.visualization" readonly="true"></query-link>\n  </div>\n</div>\n<div class="modal-body">\n  <visualization-renderer visualization="$ctrl.widget.visualization" query-result="$ctrl.widget.getQueryResult()" class="t-body"></visualization-renderer>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-default" ng-click="$ctrl.dismiss()">Close</button>\n</div>\n'},function(e,t){e.exports='<td ng-class="\'content-align-\' + column.alignContent + \' display-as-\' + column.displayAs">\n  <div ng-if="allowHTML" ng-bind-html="value"></div>\n  <div ng-if="!allowHTML" ng-bind="value"></div>\n</td>\n'},function(e,t){e.exports='<div class="dynamic-table-container">\n  <table class="table table-condensed table-hover" data-test="DynamicTable">\n    <thead>\n      <tr>\n        <th ng-repeat="column in $ctrl.columns" ng-click="$ctrl.onColumnHeaderClick($event, column)"\n          class="sortable-column" ng-class="\'content-align-\' + column.alignContent + \' display-as-\' + column.displayAs">\n          <span ng-if="($ctrl.orderBy.length > 1) && ($ctrl.orderByColumnsIndex[column.name] > 0)"\n            class="sort-order-indicator">{{ $ctrl.orderByColumnsIndex[column.name] }}</span>\n          <span>{{column.title}}</span>\n          <i ng-if="$ctrl.orderByColumnsIndex[column.name] > 0"\n            ng-class="{\n              \'fa\': true,\n              \'fa-caret-down\': $ctrl.orderByColumnsDirection[column.name] > 0,\n              \'fa-caret-up\': $ctrl.orderByColumnsDirection[column.name] < 0\n            }"></i>\n        </th>\n        <th class="dynamic-table-spacer"></th>\n      </tr>\n    </thead>\n    <thead ng-if="$ctrl.searchColumns.length > 0">\n      <th class="p-t-10 p-b-10 p-l-15 p-r-15" colspan="{{ $ctrl.columns.length + 1 }}">\n        <input type="text" class="form-control" placeholder="Search..."\n          ng-model="$ctrl.searchTerm" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n          ng-change="$ctrl.onSearchTermChanged()">\n      </th>\n    </thead>\n    <tbody>\n      <tr ng-repeat="row in $ctrl.rowsToDisplay"\n        dynamic-table-row columns="$ctrl.columns" row="row"\n        render="$ctrl.renderSingleRow"\n      ></tr>\n    </tbody>\n  </table>\n</div>\n<paginator paginator="$ctrl.paginatorAdapter"></paginator>\n'},function(e,t){e.exports='<td ng-class="\'display-as-\' + column.displayAs">\n  <div ng-if="!isValid" class="json-cell-invalid">{{ value }}</div>\n  <div ng-show="isValid" class="json-cell-valid"></div>\n</td>\n'},function(e,t){e.exports='<div\n  class="parameter-container form-inline bg-white"\n  ng-if="parameters | notEmpty"\n  ui-sortable="{ \'ui-floating\': true, \'disabled\': !editable }"\n  ng-model="parameters"\n>\n  <div\n    class="form-group m-r-10"\n    ng-repeat="param in parameters"\n    data-test="ParameterName{{ param.name }}"\n  >\n    <label class="parameter-label">{{ param.title }}</label>\n    <button\n      class="btn btn-default btn-xs"\n      ng-if="editable"\n      ng-click="showParameterSettings(param, $index)"\n      data-test="ParameterSettings-{{ param.name }}"\n    >\n      <i class="zmdi zmdi-settings"></i>\n    </button>\n    <parameter-value-input param="param"></parameter-value-input>\n  </div>\n  <button\n    class="m-t-20 btn btn-primary hidden-print"\n    ng-if="onRefresh"\n    ng-click="onRefresh()"\n    title="Refresh Dataset"\n  >\n    <span class="zmdi zmdi-play"></span>\n  </button>\n</div>\n'},function(e,t){e.exports='<div class="modal-header">\n    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n    <h4 class="modal-title">Manage Permissions</h4>\n</div>\n<div class="modal-body">\n  <div style="overflow: auto; height: 300px">\n    <ui-select ng-model="$ctrl.newGrantees.selected" on-select="$ctrl.addGrantee($item)">\n       <ui-select-match placeholder="Add New User"></ui-select-match>\n       <ui-select-choices repeat="user in $ctrl.foundUsers | filter:$select.search"\n                         refresh="$ctrl.findUser($select.search)"\n                         refresh-delay="0"\n                         ui-disable-choice="user.alreadyGrantee">\n        <div class="d-flex align-items-center">\n          <img ng-src="{{ user.profile_image_url }}" class="profile__image" height="24px">&nbsp;\n          <span ng-class="{\'text-muted\': user.is_disabled}">{{user.name}}</span>\n          &nbsp;<small ng-if="user.alreadyGrantee">(already has permission)</small>\n        </div>\n       </ui-select-choices>\n    </ui-select>\n      <br>\n      <h5>Who has access</h5>\n       <table class="table table-condensed table-hover table--permission">\n        <thead>\n          <tr>\n            <th></th>\n            <th>User</th>\n            <th>Permission</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <td width="32px"><img ng-src="{{ $ctrl.owner.profile_image_url }}" class="profile__image" height="32px"/></td>\n          <td class="text-muted"> {{ $ctrl.owner.name}}</td>\n          <td class="mp__permission-type">Owner</td>\n          <td></td>\n        </tr>\n        <tr ng-repeat="grantee in $ctrl.grantees" ng-if="grantee.id != $ctrl.owner.id">\n          <td width="32px"><img ng-src="{{ grantee.profile_image_url }}" class="profile__image" height="32px"/></td>\n          <td ng-class="{\'text-muted\': grantee.is_disabled}">{{grantee.name}}</td>\n          <td class="mp__permission-type">{{grantee.access_type}}</td>\n          <td><button class="pull-right btn btn-sm btn-danger" ng-click="$ctrl.removeGrantee(grantee)">Remove</button></td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n'},function(e,t){e.exports='<div class="modal-header">\n  <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n  <h4 class="modal-title">Embed Code</h4>\n</div>\n<div class="modal-body">\n  <h5>IFrame Embed</h5>\n  <div>\n    <code data-test="EmbedIframe">&lt;iframe src="{{ $ctrl.embedUrl }}" width="720" height="391"&gt;&lt;/iframe&gt;</code>\n  </div>\n  <span class="text-muted">(height should be adjusted)</span>\n  <div ng-if="$ctrl.snapshotUrl">\n    <h5>Image Embed</h5>\n    <div>\n      <code style="overflow-wrap:break-word;">{{$ctrl.snapshotUrl}}</code>\n    </div>\n  </div>\n</div>'},function(e,t){e.exports='<div class="schema-container" ng-if="$ctrl.schema">\n  <div class="schema-control">\n    <input type="text" placeholder="Search schema..." class="form-control" ng-model="$ctrl.schemaFilter" ng-model-options="{ debounce: 500 }" ng-disabled="$ctrl.isEmpty()" ng-change="$ctrl.splitFilter($ctrl.schemaFilter);">\n    <button class="btn btn-default"\n            title="Refresh Schema"\n            ng-click="$ctrl.onRefresh()">\n      <span class="zmdi zmdi-refresh"></span>\n    </button>\n  </div>\n\n  <div class="schema-browser" vs-repeat vs-size="$ctrl.getSize(table)">\n    <div ng-repeat="table in $ctrl.schema | filter:$ctrl.schemaFilterObject track by table.name">\n      <div class="table-name" ng-click="$ctrl.showTable(table)">\n        <i class="fa fa-table"></i>\n        <strong>\n          <span title="{{table.name}}">{{table.name}}</span>\n          <span ng-if="table.size !== undefined"> ({{table.size}})</span>\n        </strong>\n        <i class="fa fa-angle-double-right copy-to-editor" aria-hidden="true"\n          ng-click="$ctrl.itemSelected($event, [table.name])"></i>\n      </div>\n      <div uib-collapse="table.collapsed">\n        <div ng-repeat="column in table.columns | filter:$ctrl.schemaFilterColumn track by column" class="table-open">{{column}}\n          <i class="fa fa-angle-double-right copy-to-editor" aria-hidden="true"\n            ng-click="$ctrl.itemSelected($event, [column])"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="tile m-l-10 m-r-10 embed__vis" data-test="VisualizationEmbed">\n  <div class="embed-heading p-t-10 p-b-10 p-r-15 p-l-15">\n    <h3>\n      <img ng-src="{{$ctrl.logoUrl}}" style="height: 24px;"/>\n      <visualization-name visualization="$ctrl.visualization"/>\n      {{$ctrl.query.name}}\n\n      <small ng-if="$ctrl.showQueryDescription">\n        <div class="text-muted" ng-bind-html="$ctrl.query.description | markdown"></div>\n      </small>\n    </h3>\n  </div>\n\n  <div class="col-md-12 query__vis">\n    <div class="p-t-15 p-b-5" ng-if="$ctrl.query.hasParameters()">\n      <parameters parameters="$ctrl.query.getParametersDefs()" on-refresh="$ctrl.refreshQueryResults"></parameters>\n    </div>\n\n    <div ng-if="$ctrl.error">\n      <div class="alert alert-danger" data-test="ErrorMessage">Error: {{$ctrl.error}}</div>\n    </div>\n\n    <visualization-renderer visualization="$ctrl.visualization" query-result="$ctrl.queryResult" class="t-body" ng-if="$ctrl.queryResult">\n    </visualization-renderer>\n  </div>\n\n  <div class="clearfix tile__bottom-control">\n    <div class="row">\n      <div class="col-xs-6">\n        <a class="small hidden-print" ng-click="$ctrl.refreshQueryResults()">\n          <i ng-class=\'{"zmdi-hc-spin": $ctrl.loading}\' class="zmdi zmdi-refresh"></i>\n          <span am-time-ago="$ctrl.queryResult.getUpdatedAt()" ng-if="!$ctrl.loading"></span>\n          <rd-timer from="$ctrl.refreshStartedAt" ng-if="$ctrl.loading"></rd-timer>\n        </a>\n      </div>\n      <span class="small visible-print"><i class="zmdi zmdi-time-restore"></i> {{$ctrl.queryResult.getUpdatedAt() | dateTime}} UTC</span>\n      <div class="col-xs-6 text-right hidden-print">\n        <a class="btn btn-default btn-sm" ng-href="{{$ctrl.query.getUrl()}}" target="_blank" tooltip="Open in Redash">\n          <span class="zmdi zmdi-link"></span>\n        </a>\n\n        <div class="btn-group dropup" uib-dropdown ng-if="!$ctrl.query.hasParameters()">\n          <button type="button" class="btn btn-default btn-sm dropdown-toggle" aria-haspopup="true" uib-dropdown-toggle\n                  aria-expanded="false">\n            Download Dataset <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu pull-right" uib-dropdown-menu>\n            <li>\n              <a ng-href="{{$ctrl.queryResult.getLink($ctrl.query.id, \'csv\', $ctrl.apiKey)}}" download="{{$ctrl.queryResult.getName($ctrl.query.name, \'csv\')}}" target="_self">\n                <span class="fa fa-file-o"></span> Download as CSV File\n              </a>\n            </li>\n            <li>\n              <a ng-href="{{$ctrl.queryResult.getLink($ctrl.query.id, \'xlsx\', $ctrl.apiKey)}}" download="{{$ctrl.queryResult.getName($ctrl.query.name, \'xlsx\')}}"  target="_self">\n                <span class="fa fa-file-excel-o"></span> Download as Excel File\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container">\n  <page-header title="\'Settings\'"></page-header>\n\n  <div class="bg-white tiled">\n    <ul class="tab-nav">\n      <li\n        ng-repeat="menuItem in $ctrl.settingsMenu.items"\n        ng-if="$ctrl.isAvailable(menuItem.permission)"\n        ng-class="{\'active\': $ctrl.isActive(menuItem)}"\n      >\n        <a href="{{menuItem.path}}">{{menuItem.title}}</a>\n      </li>\n\n    </ul>\n    <div class="p-15">\n      <div ng-transclude>\n\n      </div>\n    </div>\n  </div>\n</div>\n'},,function(e,t){e.exports='<div ng-if="$ctrl.options.globalSeriesType != \'custom\'">\n  <plotly-chart options="$ctrl.options" series="$ctrl.chartSeries"></plotly-chart>\n</div>\n<div ng-if="plotlyOptions.globalSeriesType == \'custom\'">\n  <custom-plotly-chart options="$ctrl.options" series="$ctrl.chartSeries"></custom-plotly-chart>\n</div>\n'},function(e,t){e.exports='<div>\n  <ul class="tab-nav">\n    <li ng-class="{active: $ctrl.currentTab == \'general\'}">\n      <a ng-click="$ctrl.setCurrentTab(\'general\')">General</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'xAxis\'}" ng-if="$ctrl.options.globalSeriesType != \'custom\'">\n      <a ng-click="$ctrl.setCurrentTab(\'xAxis\')">X Axis</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'yAxis\'}" ng-if="$ctrl.options.globalSeriesType != \'custom\'">\n      <a ng-click="$ctrl.setCurrentTab(\'yAxis\')">Y Axis</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'series\'}" ng-if="$ctrl.options.globalSeriesType != \'custom\'">\n      <a ng-click="$ctrl.setCurrentTab(\'series\')">Series</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'colors\'}" ng-if="$ctrl.options.globalSeriesType != \'custom\'">\n      <a ng-click="$ctrl.setCurrentTab(\'colors\')">Colors</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'dataLabels\'}" ng-if="$ctrl.options.globalSeriesType != \'custom\'">\n      <a ng-click="$ctrl.setCurrentTab(\'dataLabels\')">Data Labels</a>\n    </li>\n  </ul>\n  <div ng-if="$ctrl.currentTab == \'general\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label class="control-label">Chart Type</label>\n      <div ng-if="$ctrl.chartTypes">\n        \x3c!--the if is a weird workaround--\x3e\n        <ui-select ng-model="$ctrl.options.globalSeriesType" on-select="$ctrl.chartTypeChanged()">\n          <ui-select-match placeholder="Choose chart type...">\n            <div>\n              <i class="fa fa-{{$select.selected.value.icon}}"></i>\n              {{$select.selected.value.name}}\n            </div>\n          </ui-select-match>\n          <ui-select-choices repeat="info.chartType as (chartType, info) in $ctrl.chartTypes">\n            <div>\n              <i class="fa fa-{{info.value.icon}}"></i>\n              <span> </span>\n              <span ng-bind-html="info.value.name | highlight: $select.search"></span>\n            </div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n    </div>\n\n    <div class="form-group" ng-class="{\'has-error\': chartEditor.xAxisColumn.$invalid}">\n      <label class="control-label">X Column</label>\n\n      <ui-select name="xAxisColumn" required ng-model="$ctrl.form.xAxisColumn">\n        <ui-select-match placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.groupby">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    \x3c!-- not using regular validation (chartEditor.yAxisColumns.$invalid) due to a bug in ui-select with multiple choices--\x3e\n    <div class="form-group" ng-class="{\'has-error\': !$ctrl.form.yAxisColumns || $ctrl.form.yAxisColumns.length == 0}">\n      <label class="control-label">Y Columns</label>\n\n      <ui-select multiple name="yAxisColumns" required ng-model="$ctrl.form.yAxisColumns">\n        <ui-select-match placeholder="Choose columns...">{{$item}}</ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.columnNames | remove:$ctrl.form.groupby | remove:$ctrl.form.xAxisColumn">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n\n    </div>\n\n    <div class="form-group" ng-if="[\'custom\', \'heatmap\'].indexOf($ctrl.options.globalSeriesType) == -1">\n      <label class="control-label">Group by</label>\n      <ui-select name="groupby" ng-model="$ctrl.form.groupby" class="clearable">\n        <ui-select-match allow-clear="true" placeholder="Choose column...">\n          {{$select.selected}}\n        </ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.xAxisColumn">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group" ng-if="$ctrl.showSizeColumnPicker()">\n      <label class="control-label">Bubble size column</label>\n\n      <ui-select name="sizeColumn" ng-model="$ctrl.form.sizeColumn">\n        <ui-select-match allow-clear="true" placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.groupby">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group" ng-if="$ctrl.showZColumnPicker()">\n      <label class="control-label">Color Column</label>\n\n      <ui-select name="zValColumn" ng-model="$ctrl.form.zValColumn">\n        <ui-select-match allow-clear="true" placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.groupby">\n          <span ng-bind-html="column | highlight: $select.search"></span><span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group" ng-if="[\'custom\', \'heatmap\'].indexOf($ctrl.options.globalSeriesType) == -1">\n      <label class="control-label">Errors column</label>\n\n      <ui-select name="errorColumn" ng-model="$ctrl.form.errorColumn">\n        <ui-select-match allow-clear="true" placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.groupby">\n          <span ng-bind-html="column | highlight: $select.search"></span>\n          <span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group" ng-if="$ctrl.options.globalSeriesType === \'pie\'">\n      <label class="control-label">Direction</label>\n\n      <ui-select ng-model="$ctrl.options.direction.type">\n        <ui-select-match placeholder="Choose Direction...">{{$select.selected.label}}</ui-select-match>\n        <ui-select-choices repeat="direction.value as direction in $ctrl.directions">\n          <div ng-bind-html="direction.label | highlight: $select.search"></div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="checkbox" ng-if="[\'custom\', \'heatmap\'].indexOf($ctrl.options.globalSeriesType) == -1">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.legend.enabled">\n        <i class="input-helper"></i> Show Legend\n      </label>\n    </div>\n\n    <div class="checkbox" ng-if="$ctrl.options.globalSeriesType == \'box\'">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.showpoints">\n        <i class="input-helper"></i> Show All Points\n      </label>\n    </div>\n\n    <div class="form-group" ng-if="[\'custom\', \'heatmap\'].indexOf($ctrl.options.globalSeriesType) == -1">\n      <label class="control-label">Stacking</label>\n\n      <div ng-if="$ctrl.stackingOptions">\n        \x3c!--the if is a weird workaround--\x3e\n        <ui-select\n          ng-model="$ctrl.options.series.stacking"\n          ng-disabled="[\'line\', \'area\', \'column\'].indexOf($ctrl.options.globalSeriesType) == -1"\n        >\n          <ui-select-match placeholder="Choose stacking...">{{ $select.selected.key }}</ui-select-match>\n          <ui-select-choices repeat="value.value as (key, value) in $ctrl.stackingOptions">\n            <div ng-bind-html="value.key | highlight: $select.search"></div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n\n      <div ng-if="[\'line\', \'area\', \'column\'].indexOf($ctrl.options.globalSeriesType) >= 0" class="checkbox">\n        <label class="control-label">\n          <input type="checkbox" ng-model="$ctrl.options.series.percentValues"> Normalize values to percentage\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.options.globalSeriesType == \'custom\'">\n    <div class="form-group">\n      <label class="control-label">Custom code</label>\n      <textarea ng-model="$ctrl.options.customCode" class="form-control v-resizable" rows="10">\n      </textarea>\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.enableConsoleLogs">\n        <i class="input-helper"></i> Show errors in the console\n      </label>\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.autoRedraw">\n        <i class="input-helper"></i> Auto update graph\n      </label>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.currentTab == \'xAxis\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label class="control-label">Scale</label>\n      <ui-select ng-model="$ctrl.options.xAxis.type">\n        <ui-select-match placeholder="Choose Scale...">{{$select.selected.label}}</ui-select-match>\n        <ui-select-choices repeat="scaleType.value as scaleType in $ctrl.xAxisScales">\n          <div ng-bind-html="scaleType.label | highlight: $select.search"></div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label">Name</label>\n      <input ng-model="$ctrl.options.xAxis.title.text" type="text" class="form-control">\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.sortX">\n        <i class="input-helper"></i> Sort Values\n      </label>\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.reverseX">\n        <i class="input-helper"></i> Reverse Order\n      </label>\n    </div>\n\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.xAxis.labels.enabled">\n        <i class="input-helper"></i> Show Labels\n      </label>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.currentTab == \'yAxis\'" class="m-t-10 m-b-10">\n    <div ng-repeat="yAxis in $ctrl.options.yAxis">\n      <h4>{{$index == 0 ? \'Left\' : \'Right\'}} Y Axis</h4>\n\n      <div class="form-group">\n        <label class="control-label">Scale</label>\n        <ui-select ng-model="yAxis.type">\n          <ui-select-match placeholder="Choose Scale...">{{$select.selected | capitalize}}</ui-select-match>\n          <ui-select-choices repeat="scaleType in $ctrl.yAxisScales">\n            <div ng-bind-html="scaleType | capitalize | highlight: $select.search"></div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n      <div class="form-group">\n        <label class="control-label">Name</label>\n        <input ng-model="yAxis.title.text" type="text" class="form-control">\n      </div>\n      <div class="form-group">\n        <label class="control-label">Min Value</label>\n        <input ng-model="yAxis.rangeMin" type="number" step="any" placeholder="Auto" class="form-control">\n      </div>\n      <div class="form-group">\n        <label class="control-label">Max Value</label>\n        <input ng-model="yAxis.rangeMax" type="number" step="any" placeholder="Auto" class="form-control">\n      </div>\n\n      <div class="checkbox" ng-if="$ctrl.options.globalSeriesType == \'heatmap\'">\n        <label>\n          <input type="checkbox" ng-model="$ctrl.options.sortY">\n          <i class="input-helper"></i> Sort Values\n        </label>\n      </div>\n\n      <div class="checkbox">\n        <label>\n          <input type="checkbox" ng-model="$ctrl.options.reverseY">\n          <i class="input-helper"></i> Reverse Order\n        </label>\n      </div>\n\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.currentTab == \'series\'" class="m-t-10 m-b-10">\n    <table class="table table-condensed col-table">\n      <thead>\n        <th style="width: 1%;">zIndex</th>\n        <th ng-if="$ctrl.options.globalSeriesType != \'pie\'">Left Y Axis</th>\n        <th ng-if="$ctrl.options.globalSeriesType != \'pie\'">Right Y Axis</th>\n        <th>Label</th>\n        <th ng-if="$ctrl.options.globalSeriesType != \'pie\'">Type</th>\n      </thead>\n      <tbody ui-sortable ng-model="$ctrl.form.seriesList">\n        <tr ng-repeat="name in $ctrl.form.seriesList">\n          <td style="width: 1%; cursor: move;">\n            <i class="fa fa-arrows-v"></i>\n            <span ng-bind="$ctrl.options.seriesOptions[name].zIndex + 1"></span>\n          </td>\n          <td ng-if="$ctrl.options.globalSeriesType != \'pie\'">\n            <input type="radio" ng-value="0" ng-model="$ctrl.options.seriesOptions[name].yAxis">\n          </td>\n          <td ng-if="$ctrl.options.globalSeriesType != \'pie\'">\n            <input type="radio" ng-value="1" ng-model="$ctrl.options.seriesOptions[name].yAxis">\n          </td>\n          <td style="padding: 3px; width: 140px;">\n            <input\n              placeholder="{{name}}"\n              class="form-control input-sm super-small-input" type="text"\n              ng-model="$ctrl.options.seriesOptions[name].name"\n            >\n          </td>\n          <td ng-if="$ctrl.options.globalSeriesType != \'pie\'" style="padding: 3px; width: 105px;">\n            <ui-select ng-model="$ctrl.options.seriesOptions[name].type">\n              <ui-select-match placeholder="Chart Type">\n                <div>\n                  <i class="fa fa-{{$select.selected.value.icon}}"></i>\n                  {{$select.selected.value.name}}\n                </div>\n              </ui-select-match>\n              <ui-select-choices repeat="info.chartType as (chartType, info) in $ctrl.chartTypes">\n                <div>\n                  <i class="fa fa-{{info.value.icon}}"></i>\n                  <span> </span>\n                  <span ng-bind-html="info.value.name | highlight: $select.search"></span>\n                </div>\n              </ui-select-choices>\n            </ui-select>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div ng-if="($ctrl.currentTab == \'colors\') && ([\'pie\', \'heatmap\'].indexOf($ctrl.options.globalSeriesType) == -1)" class="m-t-10 m-b-10">\n    <table class="table table-condensed col-table">\n      <tbody>\n      <tr ng-repeat="name in $ctrl.form.seriesList">\n        <td style="padding: 3px; width: 140px;">\n          <div>{{ name }}</div>\n        </td>\n        <td style="padding: 3px; width: 35px;">\n          <ui-select ng-model="$ctrl.options.seriesOptions[name].color">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div ng-if="($ctrl.currentTab == \'colors\') && ($ctrl.options.globalSeriesType == \'heatmap\')" class="m-t-10 m-b-10">\n    <div class="form-group" ng-if="$ctrl.options.globalSeriesType == \'heatmap\'">\n      <label class="control-label">Color Scheme</label>\n\n      <ui-select ng-model="$ctrl.options.colorScheme">\n        <ui-select-match allow-clear="true" placeholder="Choose Color Scheme...">{{$select.selected | capitalize}}</ui-select-match>\n        <ui-select-choices repeat="value in $ctrl.colorScheme">\n          <div ng-bind-html="value | highlight: $select.search"></div>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group" ng-if="$ctrl.options.colorScheme == \'Custom...\'">\n          <label class="control-label">Min Color</label>\n          <ui-select ng-model="$ctrl.options.heatMinColor">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <div class="form-group" ng-if="$ctrl.options.colorScheme == \'Custom...\'">\n          <label class="control-label">Max Color</label>\n          <ui-select ng-model="$ctrl.options.heatMaxColor">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="($ctrl.currentTab == \'colors\') && ($ctrl.options.globalSeriesType == \'pie\')" class="m-t-10 m-b-10">\n    <table class="table table-condensed col-table">\n      <tbody>\n      <tr ng-repeat="name in $ctrl.form.valuesList">\n        <td style="padding: 3px; width: 140px;">\n          <div>{{ name }}</div>\n        </td>\n        <td style="padding: 3px; width: 35px;">\n          <ui-select ng-model="$ctrl.options.valuesOptions[name].color">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div ng-if="$ctrl.currentTab == \'dataLabels\'" class="m-t-10 m-b-10">\n    <div ng-if="[\'line\', \'area\', \'column\', \'scatter\', \'pie\', \'heatmap\'].indexOf($ctrl.options.globalSeriesType) >= 0" class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.showDataLabels"> Show Data Labels</label>\n    </div>\n\n    <div class="form-group">\n      <label for="chart-editor-number-format">\n        Number Values Format\n        <span class="m-l-5" uib-popover-html="\'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>\'"\n          popover-trigger="\'click outsideClick\'">\n          <i class="fa fa-question-circle"></i>\n        </span>\n      </label>\n      <input\n        class="form-control" ng-model="$ctrl.options.numberFormat"\n        ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-number-format"\n      >\n    </div>\n\n    <div class="form-group">\n      <label for="chart-editor-percent-format">\n        Percent Values Format\n        <span class="m-l-5" uib-popover-html="\'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>\'"\n          popover-trigger="\'click outsideClick\'">\n          <i class="fa fa-question-circle"></i>\n        </span>\n      </label>\n      <input\n        class="form-control" ng-model="$ctrl.options.percentFormat"\n        ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-percent-format"\n      >\n    </div>\n\n    <div class="form-group">\n      <label for="chart-editor-datetime-format">\n        Date/Time Values Format\n        <span class="m-l-5" uib-popover-html="\'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>\'"\n          popover-trigger="\'click outsideClick\'">\n          <i class="fa fa-question-circle"></i>\n        </span>\n      </label>\n      <input\n        class="form-control" ng-model="$ctrl.options.dateTimeFormat"\n        ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-datetime-format"\n      >\n    </div>\n\n    <div class="form-group">\n      <label for="chart-editor-text">\n        Data Labels\n        <i class="fa fa-question-circle m-l-5" uib-popover-html="$ctrl.templateHint"\n          popover-trigger="\'click outsideClick\'" popover-placement="top-left"></i>\n      </label>\n      <input class="form-control" ng-model="$ctrl.options.textFormat"\n        ng-model-options="{ allowInvalid: true, debounce: 200 }" id="chart-editor-text"\n        placeholder="(auto)"\n      >\n    </div>\n  </div>\n</div>\n'},,,,,,function(e,t){e.exports='<div class="map-visualization-container">\n  <div resize-event="handleResize()" ng-style="{ background: $ctrl.options.colors.background }"></div>\n  <div ng-if="$ctrl.options.legend.visible && ($ctrl.legendItems.length > 0)"\n    class="leaflet-bar map-custom-control" ng-class="$ctrl.options.legend.position"\n  >\n    <div ng-repeat="item in $ctrl.legendItems" class="d-flex align-items-center">\n      <color-box color="item.color" class="m-0" style="line-height: 1px"></color-box>\n      <div class="flex-fill text-{{ $ctrl.options.legend.alignText }}">{{ $ctrl.formatValue(item.limit) }}</div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div>\n  <ul class="tab-nav">\n    <li ng-class="{active: $ctrl.currentTab == \'general\'}">\n      <a ng-click="$ctrl.setCurrentTab(\'general\')">General</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'colors\'}">\n      <a ng-click="$ctrl.setCurrentTab(\'colors\')">Colors</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'bounds\'}">\n      <a ng-click="$ctrl.setCurrentTab(\'bounds\')">Bounds</a>\n    </li>\n  </ul>\n  <div ng-if="$ctrl.currentTab == \'general\'" class="m-t-10 m-b-10">\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Map Type</label>\n          <select ng-options="key as value for (key, value) in $ctrl.mapTypes"\n            ng-model="$ctrl.options.mapType" class="form-control"></select>\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Key column</label>\n          <select ng-options="col.name as col.name for col in $ctrl.data.columns"\n            ng-model="$ctrl.options.countryCodeColumn" class="form-control"></select>\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Key type</label>\n          <select ng-options="key as value for (key, value) in $ctrl.countryCodeTypes"\n            ng-model="$ctrl.options.countryCodeType" class="form-control"></select>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Value column</label>\n          <select ng-options="col.name as col.name for col in $ctrl.data.columns"\n            ng-model="$ctrl.options.valueColumn" class="form-control"></select>\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label for="legend-value-format">\n            Value format\n            <span class="m-l-5"\n              uib-popover-html="\'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>\'"\n              popover-trigger="\'click outsideClick\'"><i class="fa fa-question-circle"></i></span>\n          </label>\n          <input class="form-control" id="legend-value-format"\n            ng-model="$ctrl.options.valueFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label for="legend-value-placeholder">Value placeholder</label>\n          <input class="form-control" id="legend-value-placeholder"\n            ng-model="$ctrl.options.noValuePlaceholder" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label><input type="checkbox" ng-model="$ctrl.options.legend.visible"> Show legend</label>\n    </div>\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label for="legend-position">Legend position</label>\n          <select class="form-control" id="legend-position"\n            ng-options="key as value for (key, value) in $ctrl.legendPositions"\n            ng-model="$ctrl.options.legend.position"\n            ng-disabled="!$ctrl.options.legend.visible"\n          ></select>\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label for="legend-position">Legend text alignment</label>\n          <div class="btn-group d-flex">\n            <button type="button" class="btn btn-default btn-md flex-fill"\n              ng-click="$ctrl.options.legend.alignText = \'left\'"\n              ng-class="{active: $ctrl.options.legend.alignText == \'left\'}"><i class="fa fa-align-left"></i></button>\n            <button type="button" class="btn btn-default btn-md flex-fill"\n              ng-click="$ctrl.options.legend.alignText = \'center\'"\n              ng-class="{active: $ctrl.options.legend.alignText == \'center\'}"><i class="fa fa-align-center"></i></button>\n            <button type="button" class="btn btn-default btn-md flex-fill"\n              ng-click="$ctrl.options.legend.alignText = \'right\'"\n              ng-class="{active: $ctrl.options.legend.alignText == \'right\'}"><i class="fa fa-align-right"></i></button>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <label><input type="checkbox" ng-model="$ctrl.options.tooltip.enabled"> Show tooltip</label>\n    <div class="form-group">\n      <label for="tooltip-template">Tooltip template</label>\n      <input class="form-control" id="tooltip-template"\n        ng-model="$ctrl.options.tooltip.template" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n        ng-disabled="!$ctrl.options.tooltip.enabled">\n    </div>\n\n    <label><input type="checkbox" ng-model="$ctrl.options.popup.enabled"> Show popup</label>\n    <div class="form-group">\n      <label for="popup-template">Popup template</label>\n      <textarea class="form-control resize-vertical" id="popup-template" rows="3"\n        ng-model="$ctrl.options.popup.template" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n        ng-disabled="!$ctrl.options.popup.enabled"></textarea>\n    </div>\n\n    <div class="form-group">\n      <label class="ui-sortable-bypass text-muted" style="font-weight: normal; cursor: pointer;"\n        uib-popover-html="$ctrl.templateHint"\n        popover-trigger="\'click outsideClick\'" popover-placement="top-left">\n        Format specs <i class="fa fa-question-circle m-l-5"></i>\n      </label>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.currentTab == \'colors\'" class="m-t-10 m-b-10">\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Steps</label>\n          <input type="number" min="3" max="11" class="form-control"\n            ng-model="$ctrl.options.steps">\n        </div>\n      </div>\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Clustering mode</label>\n          <select ng-options="key as value for (key, value) in $ctrl.clusteringModes"\n            ng-model="$ctrl.options.clusteringMode" class="form-control"></select>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Min color</label>\n          <ui-select ng-model="$ctrl.options.colors.min">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Max color</label>\n          <ui-select ng-model="$ctrl.options.colors.max">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>No value color</label>\n          <ui-select ng-model="$ctrl.options.colors.noValue">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Background color</label>\n          <ui-select ng-model="$ctrl.options.colors.background">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n\n      <div class="col-xs-6">\n        <div class="form-group">\n          <label>Borders color</label>\n          <ui-select ng-model="$ctrl.options.colors.borders">\n            <ui-select-match>\n              <color-box color="$select.selected.value"></color-box>\n              <span ng-bind-html="$select.selected.key | capitalize"></span>\n            </ui-select-match>\n            <ui-select-choices repeat="color.value as (key, color) in $ctrl.colors">\n              <color-box color="color.value"></color-box>\n              <span ng-bind-html="color.key | capitalize | highlight: $select.search"></span>\n            </ui-select-choices>\n          </ui-select>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.currentTab == \'bounds\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label>North-East latitude and longitude</label>\n      <div class="row">\n        <div class="col-xs-6">\n          <input class="form-control" type="text"\n            ng-model="$ctrl.options.bounds[1][0]" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n        <div class="col-xs-6">\n          <input class="form-control" type="text"\n            ng-model="$ctrl.options.bounds[1][1]" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n    </div>\n\n    <div class="form-group">\n      <label>South-West latitude and longitude</label>\n      <div class="row">\n        <div class="col-xs-6">\n          <input class="form-control" type="text"\n            ng-model="$ctrl.options.bounds[0][0]" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n        <div class="col-xs-6">\n          <input class="form-control" type="text"\n            ng-model="$ctrl.options.bounds[0][1]" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t,n){e.exports=n.p+"data/0962607.countries.geo.json"},function(e,t,n){e.exports=n.p+"data/650f3ee.japan.prefectures.geo.json"},function(e,t){e.exports='<ul class="tab-nav">\n  <li ng-class="{active: $ctrl.currentTab == \'columns\'}">\n    <a ng-click="$ctrl.setCurrentTab(\'columns\')">Columns</a>\n  </li>\n  <li ng-class="{active: $ctrl.currentTab == \'options\'}">\n    <a ng-click="$ctrl.setCurrentTab(\'options\')">Options</a>\n  </li>\n</ul>\n\n<div ng-if="$ctrl.currentTab == \'options\'" class="m-t-10 m-b-10">\n  <div class="form-group">\n    <label class="control-label">Time Interval</label>\n    <select class="form-control" ng-model="$ctrl.options.timeInterval">\n      <option value="daily">Daily</option>\n      <option value="weekly">Weekly</option>\n      <option value="monthly">Monthly</option>\n    </select>\n  </div>\n\n  <div class="form-group">\n    <label class="control-label">Mode</label>\n    <select class="form-control" ng-model="$ctrl.options.mode">\n      <option value="diagonal">Fill gaps with zeros</option>\n      <option value="simple">Show data as is</option>\n    </select>\n  </div>\n</div>\n\n<div ng-if="$ctrl.currentTab == \'columns\'" class="m-t-10 m-b-10">\n  <div class="form-group">\n    <label class="control-label">Date (Bucket)</label>\n    <select class="form-control" ng-model="$ctrl.options.dateColumn"\n      ng-options="col.name as col.name for col in $ctrl.data.columns"></select>\n  </div>\n\n  <div class="form-group">\n    <label class="control-label">Stage</label>\n    <select class="form-control" ng-model="$ctrl.options.stageColumn"\n      ng-options="col.name as col.name for col in $ctrl.data.columns"></select>\n  </div>\n\n  <div class="form-group">\n    <label class="control-label">Bucket Population Size</label>\n    <select class="form-control" ng-model="$ctrl.options.totalColumn"\n      ng-options="col.name as col.name for col in $ctrl.data.columns"></select>\n  </div>\n\n  <div class="form-group">\n    <label class="control-label">Stage Value</label>\n    <select class="form-control" ng-model="$ctrl.options.valueColumn"\n      ng-options="col.name as col.name for col in $ctrl.data.columns"></select>\n  </div>\n</div>\n'},,function(e,t){e.exports="<counter\n  ng-class=\"{'positive': targetValue && trendPositive, 'negative': targetValue && !trendPositive}\"\n  resize-event=\"handleResize()\"\n>\n  <div ng-style=\"{\n    '-o-transform': 'scale(' + scale + ')',\n    '-ms-transform': 'scale(' + scale + ')',\n    '-moz-transform': 'scale(' + scale + ')',\n    '-webkit-transform': 'scale(' + scale + ')',\n    'transform': 'scale(' + scale + ')'\n  }\">\n    <value ng-if=\"isNumber\">{{stringPrefix}}{{counterValue | number}}{{stringSuffix}}</value>\n    <value ng-if=\"!isNumber\">{{stringPrefix}}{{counterValue}}{{stringSuffix}}</value>\n    <counter-target ng-if=\"targetValue\" title=\"({{targetValue | number}})\">({{targetValue | number}})</counter-target>\n    <counter-name>{{counterLabel}}</counter-name>\n  </div>\n</counter>\n"},function(e,t){e.exports='<div class="form-horizontal">\n  <ul class="tab-nav">\n    <li ng-class="{active: $ctrl.currentTab == \'general\'}">\n      <a ng-click="$ctrl.changeTab(\'general\')">General</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'format\'}">\n      <a ng-click="$ctrl.changeTab(\'format\')">Format</a>\n    </li>\n  </ul>\n  <div ng-show="$ctrl.currentTab == \'general\'" class="m-t-10 m-b-10">\n      <div class="form-group">\n          <label class="col-lg-6">Counter Label</label>\n          <div class="col-lg-6">\n            <input type="text" ng-model="$ctrl.options.counterLabel" placeholder="{{$ctrl.visualizationName}}"\n              class="form-control" ng-trim="false">\n          </div>\n        </div>\n    <div class="form-group">\n      <label class="col-lg-6">Counter Value Column Name</label>\n      <div class="col-lg-6">\n        <select ng-options="col.name as col.name for col in $ctrl.data.columns" ng-model="$ctrl.options.counterColName"\n          class="form-control" ng-disabled="$ctrl.options.countRow"></select>\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Counter Value Row Number</label>\n      <div class="col-lg-6">\n        <input type="number" ng-model="$ctrl.options.rowNumber" class="form-control" ng-disabled="$ctrl.options.countRow">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Target Value Column Name</label>\n      <div class="col-lg-6">\n        <select ng-options="col.name as col.name for col in $ctrl.data.columns" ng-model="$ctrl.options.targetColName" class="form-control">\n          <option value="">No target value</option>\n        </select>\n      </div>\n    </div>\n    <div class="form-group" ng-if="$ctrl.options.targetColName">\n      <label class="col-lg-6">Target Value Row Number</label>\n      <div class="col-lg-6">\n        <input type="number" ng-model="$ctrl.options.targetRowNumber" class="form-control">\n      </div>\n    </div>\n    <div class="form-group">\n      <div class="col-lg-6">\n        <label>\n          <input type="checkbox" ng-model="$ctrl.options.countRow">\n          Count Rows\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <div ng-show="$ctrl.currentTab == \'format\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label class="col-lg-6">Formatting Decimal Place</label>\n      <div class="col-lg-6">\n        <input type="number" ng-model="$ctrl.options.stringDecimal" class="form-control" ng-disabled="!$ctrl.isValueNumber()">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Formatting Decimal Character</label>\n      <div class="col-lg-6">\n        <input type="text" ng-model="$ctrl.options.stringDecChar" class="form-control" ng-disabled="!$ctrl.isValueNumber()">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Formatting Thousands Separator</label>\n      <div class="col-lg-6">\n        <input type="text" ng-model="$ctrl.options.stringThouSep" class="form-control" ng-disabled="!$ctrl.isValueNumber()" ng-trim="false">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Formatting String Prefix</label>\n      <div class="col-lg-6">\n        <input type="text" ng-model="$ctrl.options.stringPrefix" class="form-control" ng-disabled="!$ctrl.isValueNumber()" ng-trim="false">\n      </div>\n    </div>\n    <div class="form-group">\n      <label class="col-lg-6">Formatting String Suffix</label>\n      <div class="col-lg-6">\n        <input type="text" ng-model="$ctrl.options.stringSuffix" class="form-control" ng-disabled="!$ctrl.isValueNumber()" ng-trim="false">\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="form-horizontal">\n  <div style="margin-bottom: 20px;">\n    This visualization constructs funnel chart. Please notice that value column only accept number for values.\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Step Column Name</label>\n    <div class="col-lg-6">\n      <select ng-options="col.name as col.name for col in $ctrl.data.columns"\n        ng-model="$ctrl.options.stepCol.colName" class="form-control"></select>\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Step Column Display Name</label>\n    <div class="col-lg-6">\n      <input type="text" ng-model="$ctrl.options.stepCol.displayAs" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Funnel Value Column Name</label>\n    <div class="col-lg-6">\n      <select ng-options="col.name as col.name for col in $ctrl.data.columns"\n        ng-model="$ctrl.options.valueCol.colName" class="form-control"></select>\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Funnel Value Column Display Name</label>\n    <div class="col-lg-6">\n      <input type="text" ng-model="$ctrl.options.valueCol.displayAs" class="form-control">\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="col-lg-6">Auto Sort Record By Value</label>\n    <div class="col-lg-6">\n      <input type="checkbox" ng-model="$ctrl.options.autoSort">\n    </div>\n  </div>\n  <div ng-show="!$ctrl.options.autoSort">\n    <div class="form-group">\n      <label class="col-lg-6">Funnel Value Columns Name</label>\n      <div class="col-lg-6">\n        <select ng-options="col.name as col.name for col in $ctrl.data.columns"\n          ng-model="$ctrl.options.sortKeyCol.colName" class="form-control"></select>\n      </div>\n    </div>\n  </div>\n</div>\n'},,,,function(e,t){e.exports='<div class="map-visualization-container">\n  <div resize-event="handleResize()"></div>\n</div>\n'},function(e,t){e.exports='<div>\n  <ul class="tab-nav">\n    <li ng-class="{active: $ctrl.currentTab == \'general\'}"><a ng-click="$ctrl.setCurrentTab(\'general\')">General</a></li>\n    <li ng-class="{active: $ctrl.currentTab == \'groups\'}"><a ng-click="$ctrl.setCurrentTab(\'groups\')">Groups</a></li>\n    <li ng-class="{active: $ctrl.currentTab == \'map\'}"><a ng-click="$ctrl.setCurrentTab(\'map\')">Map Settings</a></li>\n  </ul>\n\n  <div ng-show="$ctrl.currentTab == \'general\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label class="control-label">Latitude Column Name</label>\n      <ui-select name="form-control" required ng-model="$ctrl.options.latColName">\n        <ui-select-match placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.columnNames | remove:$ctrl.options.classify | remove:$ctrl.options.lonColName">\n          <span ng-bind-html="column | highlight: $select.search"></span><span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label">Longitude Column Name</label>\n      <ui-select name="form-control" required ng-model="$ctrl.options.lonColName">\n        <ui-select-match placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.columnNames | remove:$ctrl.options.classify | remove:$ctrl.options.latColName">\n          <span ng-bind-html="column | highlight: $select.search"></span><span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label">Group By</label>\n      <ui-select name="form-control" required ng-model="$ctrl.options.classify">\n        <ui-select-match placeholder="Choose column...">{{$select.selected}}</ui-select-match>\n        <ui-select-choices repeat="column in $ctrl.classifyColumns | remove:$ctrl.options.lonColName | remove:$ctrl.options.latColName">\n          <span ng-bind-html="column | highlight: $select.search"></span><span> </span>\n          <small class="text-muted" ng-bind="$ctrl.columns[column].type"></small>\n        </ui-select-choices>\n      </ui-select>\n    </div>\n  </div>\n\n  <div ng-show="$ctrl.currentTab == \'groups\'" class="m-b-10">\n    <table class="table table-condensed col-table">\n      <thead>\n      <th>Name</th>\n      <th>Color</th>\n      </thead>\n      <tbody>\n      <tr ng-repeat="(name, options) in $ctrl.options.groups">\n        <td>{{name}}</td>\n        <td>\n          <input class="form-control" type="color" ng-model="options.color"/>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n\n  <div ng-show="$ctrl.currentTab == \'map\'" class="m-t-10 m-b-10">\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="$ctrl.options.clusterMarkers">\n        <i class="input-helper"></i> Cluster Markers\n      </label>\n    </div>\n\n    <div class="form-group">\n      <label class="control-label">Map Tiles</label>\n      <select ng-options="tile.url as tile.name for tile in $ctrl.mapTiles"\n        ng-model="$ctrl.options.mapTileUrl" class="form-control"></select>\n    </div>\n  </div>\n\n</div>\n'},function(e,t){e.exports='<dynamic-table rows="$ctrl.gridRows" columns="$ctrl.gridColumns" items-per-page="$ctrl.options.itemsPerPage"></dynamic-table>\n'},function(e,t){e.exports='<div class="table-editor-container">\n  <ul class="tab-nav">\n    <li ng-class="{active: $ctrl.currentTab == \'columns\'}" ng-if="$ctrl.options.globalSeriesType != \'custom\'">\n      <a ng-click="$ctrl.setCurrentTab(\'columns\')">Columns</a>\n    </li>\n    <li ng-class="{active: $ctrl.currentTab == \'grid\'}">\n      <a ng-click="$ctrl.setCurrentTab(\'grid\')">Grid</a>\n    </li>\n  </ul>\n\n  <div ng-if="$ctrl.currentTab == \'grid\'" class="m-t-10 m-b-10">\n    <div class="form-group">\n      <label>Items per page</label>\n      <select ng-options="value for value in $ctrl.allowedItemsPerPage"\n        ng-model="$ctrl.options.itemsPerPage" class="form-control">\n      </select>\n    </div>\n  </div>\n\n  <div ng-if="$ctrl.currentTab == \'columns\'" class="table-editor-query-columns m-t-10 m-b-10"\n    ui-sortable ng-model="$ctrl.options.columns">\n    <div ng-repeat="column in $ctrl.options.columns">\n      <div class="table-editor-column-header form-group">\n        <div class="input-group">\n          <span class="input-group-addon"><input type="checkbox" ng-model="column.visible"></span>\n          <input class="form-control" ng-model="column.title" ng-model-options="{ allowInvalid: true, debounce: 200 }">\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="btn-group btn-group-justified">\n          <button type="button" class="btn btn-default btn-xs"\n            ng-click="column.alignContent = \'left\'"\n            ng-class="{active: column.alignContent == \'left\'}"><i class="fa fa-align-left"></i></button>\n          <button type="button" class="btn btn-default btn-xs"\n            ng-click="column.alignContent = \'center\'"\n            ng-class="{active: column.alignContent == \'center\'}"><i class="fa fa-align-center"></i></button>\n          <button type="button" class="btn btn-default btn-xs"\n            ng-click="column.alignContent = \'right\'"\n            ng-class="{active: column.alignContent == \'right\'}"><i class="fa fa-align-right"></i></button>\n        </div>\n      </div>\n\n      <div class="form-group">\n        <label class="ui-sortable-bypass"><input type="checkbox" ng-model="column.allowSearch"> Use for search</label>\n      </div>\n\n      <div class="form-group">\n        <label>Display as:</label>\n        <select ng-options="item.value as item.name for item in $ctrl.displayAsOptions"\n          ng-model="column.displayAs" class="form-control">\n        </select>\n      </div>\n\n      <div ng-if="column.displayAs == \'string\'">\n        <div class="form-group">\n          <label class="ui-sortable-bypass"><input type="checkbox" ng-model="column.allowHTML"> Allow HTML content</label>\n        </div>\n        <div ng-if="column.allowHTML" class="form-group">\n          <label class="ui-sortable-bypass"><input type="checkbox" ng-model="column.highlightLinks"> Highlight links</label>\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'number\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-number-format">\n            Number format\n            <span class="m-l-5"\n              uib-popover-html="\'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>\'"\n              popover-trigger="\'click outsideClick\'"><i class="fa fa-question-circle"></i></span>\n          </label>\n          <input class="form-control" ng-model="column.numberFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-number-format">\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'datetime\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-datetime-format">\n            Date/Time format\n            <span class="m-l-5"\n              uib-popover-html="\'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>\'"\n              popover-trigger="\'click outsideClick\'"><i class="fa fa-question-circle"></i></span>\n          </label>\n          <input class="form-control" ng-model="column.dateTimeFormat" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-datetime-format">\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'boolean\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-boolean-false">Value for <code>false</code></label>\n          <input class="form-control" ng-model="column.booleanValues[0]" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-boolean-false">\n        </div>\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-boolean-true">Value for <code>true</code></label>\n          <input class="form-control" ng-model="column.booleanValues[1]" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-boolean-true">\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'image\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-image-url-template">URL template</label>\n          <input class="form-control" ng-model="column.imageUrlTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-image-url-template">\n        </div>\n\n        <div class="form-group">\n          <label>\n            Size\n            <span class="m-l-5"\n              uib-popover-html="\'Any positive integer value that specifies size in pixels. Leave empty to use default value.\'"\n              popover-trigger="\'click outsideClick\'" popover-placement="top-left"><i class="fa fa-question-circle"></i></span>\n          </label>\n          <div class="d-flex">\n            <input class="form-control" ng-model="column.imageWidth" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n              placeholder="Width">\n            <span class="form-control-static m-l-5 m-r-5">&times;</span>\n            <input class="form-control" ng-model="column.imageHeight" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n              placeholder="Height">\n          </div>\n        </div>\n\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-image-title-template">Title template</label>\n          <input class="form-control" ng-model="column.imageTitleTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-image-title-template">\n        </div>\n\n        <div class="form-group">\n          <label class="ui-sortable-bypass text-muted" style="font-weight: normal; cursor: pointer;"\n            uib-popover-html="templateHint"\n            popover-trigger="\'click outsideClick\'" popover-placement="top-left">\n            Format specs <i class="fa fa-question-circle m-l-5"></i>\n          </label>\n        </div>\n      </div>\n\n      <div ng-if="column.displayAs == \'link\'">\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-link-url-template">URL template</label>\n          <input class="form-control" ng-model="column.linkUrlTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-link-url-template">\n        </div>\n\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-link-text-template">Text template</label>\n          <input class="form-control" ng-model="column.linkTextTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-link-text-template">\n        </div>\n\n        <div class="form-group">\n          <label for="table-editor-{{ column.name }}-link-title-template">Title template</label>\n          <input class="form-control" ng-model="column.linkTitleTemplate" ng-model-options="{ allowInvalid: true, debounce: 200 }"\n            id="table-editor-{{ column.name }}-link-title-template">\n        </div>\n\n        <div class="form-group">\n          <label class="ui-sortable-bypass"><input type="checkbox" ng-model="column.linkOpenInNewTab"> Open in new tab</label>\n        </div>\n\n        <div class="form-group">\n          <label class="ui-sortable-bypass text-muted" style="font-weight: normal; cursor: pointer;"\n            uib-popover-html="templateHint"\n            popover-trigger="\'click outsideClick\'" popover-placement="top-left">\n            Format specs <i class="fa fa-question-circle m-l-5"></i>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},,function(e,t){e.exports='<div class="container">\n  <page-header title="$ctrl.alert.name || $ctrl.getDefaultName() || \'New Alert\'"></page-header>\n\n  <email-settings-warning feature-name="\'alert emails\'"></email-settings-warning>\n\n  <div class="container">\n    <div class="row bg-white tiled p-10">\n      <div class="col-md-8">\n        <form name="alertForm" class="form">\n          <div class="form-group">\n            <label>Query</label>\n            <query-selector type="\'select\'" selected-query="$ctrl.alert.query" on-change="$ctrl.onQuerySelected" disabled="!$ctrl.canEdit" />\n          </div>\n\n          <div class="form-group" ng-show="$ctrl.selectedQuery">\n            <label>Name</label>\n            <input type="string" placeholder="{{$ctrl.getDefaultName()}}" class="form-control" ng-model="$ctrl.alert.name" ng-disabled="!$ctrl.canEdit">\n          </div>\n\n          <div ng-show="$ctrl.queryResult" class="form-horizontal">\n            <div class="form-group">\n              <label class="control-label col-md-2">Value column</label>\n              <div class="col-md-4">\n                <select ng-options="name for name in $ctrl.queryResult.getColumnNames()" ng-model="$ctrl.alert.options.column"\n                        class="form-control" ng-disabled="!$ctrl.canEdit"></select>\n              </div>\n              <label class="control-label col-md-2">Value</label>\n              <div class="col-md-4">\n                <p class="form-control-static">{{$ctrl.queryResult.getData()[0][$ctrl.alert.options.column]}}</p>\n              </div>\n            </div>\n            <div class="form-group">\n              <label class="control-label col-md-2">Op</label>\n              <div class="col-md-4">\n                <select ng-options="name for name in $ctrl.ops" ng-model="$ctrl.alert.options.op" class="form-control" ng-disabled="!$ctrl.canEdit"></select>\n              </div>\n              <label class="control-label col-md-2">Reference</label>\n              <div class="col-md-4">\n                <input type="number" step="any" class="form-control" ng-model="$ctrl.alert.options.value" placeholder="reference value" ng-disabled="!$ctrl.canEdit"\n                       required/>\n              </div>\n            </div>\n            <div class="form-group">\n              <label class="control-label col-md-2">Rearm seconds</label>\n              <div class="col-md-4">\n                <input type="number" class="form-control" ng-model="$ctrl.alert.rearm" ng-disabled="!$ctrl.canEdit"/>\n              </div>\n            </div>\n          </div>\n\n          <div class="form-group" ng-if="$ctrl.canEdit">\n            <button class="btn btn-primary" ng-disabled="!alertForm.$valid" ng-click="$ctrl.saveChanges()">Save</button>\n            <button class="btn btn-danger" ng-if="$ctrl.alert.id" ng-click="$ctrl.delete()">Delete</button>\n          </div>\n        </form>\n      </div>\n      <div class="col-md-4" ng-if="$ctrl.alert.id">\n        <alert-subscriptions alert-id="$ctrl.alert.id"></alert-subscriptions>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container">\n  <div class="row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0 dashboard-header page-header--new">\n    <div class="page-title col-xs-8 col-sm-7 col-lg-7 p-l-0">\n      <favorites-control item="$ctrl.dashboard"></favorites-control>\n      <h3>\n        <edit-in-place class="edit-in-place" is-editable="$ctrl.layoutEditing" on-done="$ctrl.saveName" ignore-blanks="true" value="$ctrl.dashboard.name" editor="\'input\'"></edit-in-place>\n      </h3>\n\n      <img ng-src="{{$ctrl.dashboard.user.profile_image_url}}" class="profile__image_thumb--dashboard" alt="{{$ctrl.dashboard.user.name}}">\n\n      <dashboard-tags-control class="hidden-xs"\n        tags="$ctrl.dashboard.tags" is-draft="$ctrl.dashboard.is_draft" is-archived="$ctrl.dashboard.is_archived"\n        can-edit="$ctrl.isDashboardOwner" get-available-tags="$ctrl.loadTags" on-edit="$ctrl.saveTags"></dashboard-tags-control>\n\n    </div>\n    <div class="col-xs-4 col-sm-5 col-lg-5 text-right dashboard__control p-r-0">\n      <span ng-if="!$ctrl.dashboard.is_archived && !public" class="hidden-print">\n          <div ng-if="$ctrl.layoutEditing" ng-switch="$ctrl.isLayoutDirty">\n            <span ng-switch-when="true" ng-switch="$ctrl.saveInProgress || $ctrl.saveDelay">\n                <span ng-switch-when="true">\n                  <span class="save-status" data-saving>Saving</span>\n                  <button class="btn btn-primary btn-sm" ng-disabled="$ctrl.editBtnClickedWhileSaving" ng-click="$ctrl.editBtnClickedWhileSaving = true">\n                    <i class="fa fa-check" ng-class="{\'fa-spinner fa-pulse\': $ctrl.editBtnClickedWhileSaving}"></i> Done Editing\n                  </button>\n                </span>\n                <span ng-switch-default>\n                  <span class="save-status" data-error>Saving Failed</span>\n                  <button class="btn btn-primary btn-sm" ng-click="$ctrl.saveDashboardLayout()">\n                    Retry\n                  </button>\n                </span>\n            </span>\n            <span ng-switch-default>\n              <span class="save-status">Saved</span>\n              <button class="btn btn-primary btn-sm"\n                ng-disabled="$ctrl.isGridDisabled"\n                ng-click="$ctrl.editLayout(false)">\n                <i class="fa fa-check"></i> Done Editing\n              </button>\n            </span>\n          </div>\n\n          <button type="button" class="btn btn-default btn-sm" ng-click="$ctrl.togglePublished()" tooltip="Publish Dashboard" ng-if="$ctrl.dashboard.is_draft && !$ctrl.layoutEditing">\n            <span class="fa fa-paper-plane"></span> Publish\n          </button>\n\n          <div class="btn-group" uib-dropdown ng-if="!$ctrl.layoutEditing">\n            <button id="split-button" type="button"\n                    ng-class="{\'btn-default btn-sm\': $ctrl.refreshRate === null,\'btn-primary btn-sm\':$ctrl.refreshRate !== null}"\n                    class="btn btn-sm" ng-click="$ctrl.refreshDashboard()">\n              <i class="zmdi zmdi-refresh"></i> {{$ctrl.refreshRate === null ? \'Refresh\' : $ctrl.refreshRate.name}}\n            </button>\n            <button type="button" class="btn hidden-xs" uib-dropdown-toggle\n                    ng-class="{\'btn-default btn-sm\': $ctrl.refreshRate === null,\'btn-primary btn-sm\':$ctrl.refreshRate !== null}">\n              <span class="caret"></span>\n              <span class="sr-only">Split button!</span>\n            </button>\n            <ul class="dropdown-menu pull-right" ng-model="$ctrl.refreshRate" uib-dropdown-menu role="menu" aria-labelledby="split-button">\n              <li role="menuitem" ng-repeat="refreshRate in $ctrl.refreshRates" ng-class="{disabled: !refreshRate.enabled}">\n                <a href="javascript:void(0)" ng-click="$ctrl.setRefreshRate(refreshRate)">{{refreshRate.name}}</a>\n              </li>\n              <li role="menuitem" ng-if="$ctrl.refreshRate !== null">\n                <a href="#" ng-click="$ctrl.setRefreshRate(null)">Stop auto refresh</a>\n              </li>\n            </ul>\n          </div>\n          <button type="button" class="btn btn-sm hidden-xs" ng-class="{\'btn-default\': !$ctrl.isFullscreen, \'btn-primary\': $ctrl.isFullscreen}" tooltip="Enable/Disable Fullscreen display" ng-click="$ctrl.toggleFullscreen()" ng-if="!$ctrl.dashboard.is_draft && !$ctrl.layoutEditing">\n            <span class="zmdi zmdi-fullscreen"></span>\n          </button>\n          <button type="button" class="btn btn-sm hidden-xs" ng-class="{\'btn-default\': !$ctrl.dashboard.publicAccessEnabled, \'btn-primary\': $ctrl.dashboard.publicAccessEnabled}" tooltip="Enable/Disable Share URL" ng-click="$ctrl.openShareForm()" ng-if="($ctrl.dashboard.canEdit() || $ctrl.dashboard.publicAccessEnabled) && !$ctrl.dashboard.is_draft && !$ctrl.layoutEditing">\n            <span class="zmdi zmdi-share"></span>\n          </button>\n      </span>\n\n      <div class="btn-group hidden-print hidden-xs" role="group" ng-show="$ctrl.dashboard.canEdit()" uib-dropdown ng-if="!$ctrl.dashboard.is_archived && !$ctrl.layoutEditing" data-test="DashboardMoreMenu">\n        <button class="btn btn-default btn-sm dropdown-toggle" uib-dropdown-toggle>\n          <span class="zmdi zmdi-more"></span>\n        </button>\n        <ul class="dropdown-menu pull-right" uib-dropdown-menu>\n          <li ng-if="!$ctrl.dashboard.is_archived" ng-class="{hidden: $ctrl.isGridDisabled}"><a ng-click="$ctrl.editLayout(true)">Edit</a></li>\n          <li ng-if="$ctrl.showPermissionsControl"><a ng-click="$ctrl.showManagePermissionsModal()">Manage Permissions</a></li>\n          <li ng-if="!$ctrl.dashboard.is_draft"><a ng-click="$ctrl.togglePublished()">Unpublish</a></li>\n          <li ng-if="!$ctrl.dashboard.is_archived"><a ng-click="$ctrl.archiveDashboard()">Archive</a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n\n  <div class="m-b-10 p-15 bg-white tiled" ng-if="$ctrl.layoutEditing">\n    <label>\n        <input name="input" type="checkbox" ng-model="$ctrl.dashboard.dashboard_filters_enabled" ng-change="$ctrl.updateDashboardFiltersState()">\n        Use Dashboard Level Filters\n    </label>\n  </div>\n\n  <div class="m-b-10 p-15 bg-white tiled" ng-if="$ctrl.globalParameters.length > 0">\n    <parameters parameters="$ctrl.globalParameters"></parameters>\n  </div>\n\n  <div class="m-b-10 p-15 bg-white tiled" ng-if="$ctrl.filters | notEmpty">\n    <filters filters="$ctrl.filters" on-change="$ctrl.filtersOnChange"></filters>\n  </div>\n\n  <div ng-if="$ctrl.dashboard.widgets.length > 0"  id="dashboard-container" ng-class="{\'preview-mode\': !$ctrl.layoutEditing, \'editing-mode\': $ctrl.layoutEditing, \'grid-enabled\': !$ctrl.isGridDisabled}">\n    <div gridstack editing="$ctrl.layoutEditing" on-layout-changed="$ctrl.onLayoutChanged"\n      is-one-column-mode="$ctrl.isGridDisabled" class="dashboard-wrapper">\n      <div class="dashboard-widget-wrapper"\n        ng-repeat="widget in $ctrl.dashboard.widgets track by widget.id"\n        gridstack-item="widget.options.position" gridstack-item-id="{{ widget.id }}" data-test="WidgetId{{ widget.id }}">\n        <div class="grid-stack-item-content">\n          <dashboard-widget widget="widget" dashboard="$ctrl.dashboard" filters="$ctrl.filters"\n            on-delete="$ctrl.removeWidget(widget.id)"></dashboard-widget>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="add-widget-container" ng-if="$ctrl.layoutEditing">\n    <h2>\n      <i class="zmdi zmdi-widgets"></i>\n      <span class="hidden-xs hidden-sm">Widgets are individual query visualizations or text boxes you can place on your dashboard in various arrangements.</span>\n    </h2>\n    <div>\n      <a class="btn btn-default" ng-click="$ctrl.showAddTextboxDialog()">Add Textbox</a>\n      <a class="btn btn-primary m-l-10" ng-click="$ctrl.showAddWidgetDialog()">Add Widget</a>\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="container p-t-10 p-b-20">\n  <page-header title="$ctrl.dashboard.name"></page-header>\n\n  <div class="m-b-5">\n    <filters filters="$ctrl.filters" on-change="$ctrl.filtersOnChange"></filters>\n  </div>\n\n  <div style="padding-bottom: 5px" ng-if="$ctrl.dashboard.widgets.length > 0">\n    <div gridstack editing="false" class="dashboard-wrapper preview-mode">\n      <div class="dashboard-widget-wrapper"\n        ng-repeat="widget in $ctrl.dashboard.widgets"\n        gridstack-item="widget.options.position" gridstack-item-id="{{ widget.id }}">\n        <div class="grid-stack-item-content">\n          <dashboard-widget widget="widget" dashboard="$ctrl.dashboard" filters="$ctrl.filters" public="true"></dashboard-widget>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div id="footer">\n  <div class="text-center">\n    <a href="https://redash.io"><img ng-src="{{$ctrl.logoUrl}}" width="38"/></a>\n  </div>\n  Powered by <a href="https://redash.io/?ref=public-dashboard">Redash</a>\n</div>\n'},function(e,t){e.exports='<div class="container">\n  <div ng-if="$ctrl.messages.includes(\'using-deprecated-embed-feature\')" class="alert alert-warning">\n      You have enabled <code>ALLOW_PARAMETERS_IN_EMBEDS</code>. This setting is now deprecated and should be turned off. Parameters in embeds are supported by default. <a href="https://discuss.redash.io/t/support-for-parameters-in-embedded-visualizations/3337" target="_blank">Read more</a>.\n  </div>\n  <div ng-if="$ctrl.messages.includes(\'email-not-verified\')" class="alert alert-warning">\n      We have sent an email with a confirmation link to your email address. Please follow the link to verify your email address. <a ng-click="$ctrl.verifyEmail()">Resend email</a>.\n  </div>\n  <empty-state\n    title="\'Welcome to Redash \'"\n    description="\'Connect to any data source, easily visualize and share your data\'"\n    illustration="\'dashboard\'"\n    help-link="\'https://redash.io/help/user-guide/getting-started\'"\n    show-dashboard-step="true"\n    show-invite-step="true"\n    onboarding-mode="true"\n  ></empty-state>\n\n  <home-extra></home-extra>\n\n  <div class="tile">\n    <div class="t-body tb-padding">\n      <div class="row">\n        <div class="col-sm-6">\n          <p class="f-500 m-b-20 c-black">Favorite Dashboards</p>\n\n          <p ng-if="$ctrl.noDashboards">\n            <span class="btn-favourite">\n              <i class="fa fa-star" aria-hidden="true"></i>\n            </span>\n            Favorite <a href="dashboards">Dashboards</a> will appear here\n          </p>\n\n          <div class="list-group">\n            <a ng-href="dashboard/{{dashboard.slug}}" class="list-group-item" ng-repeat="dashboard in $ctrl.favoriteDashboards"\n              ng-if="dashboard.is_favorite">\n              <span class="btn-favourite">\n                <i class="fa fa-star" aria-hidden="true"></i>\n              </span>\n              {{dashboard.name}}\n              <span class="label label-default" ng-if="dashboard.is_draft">Unpublished</span>\n            </a>\n          </div>\n        </div>\n\n        <div class="col-sm-6">\n          <p class="f-500 m-b-20 c-black">Favorite Queries</p>\n          <p ng-if="$ctrl.noQueries">\n            <span class="btn-favourite">\n              <i class="fa fa-star" aria-hidden="true"></i>\n            </span>\n            Favorite <a href="queries">Queries</a> will appear here\n          </p>\n          <div class="list-group">\n            <a ng-href="queries/{{query.id}}" class="list-group-item" ng-repeat="query in $ctrl.favoriteQueries" ng-if="query.is_favorite">\n              <span class="btn-favourite">\n                <i class="fa fa-star" aria-hidden="true"></i>\n              </span>\n              {{query.name}}\n              <span class="label label-default" ng-if="query.is_draft">Unpublished</span>\n            </a>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="modal-header">\n    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n    <h4 class="modal-title">Add to Dashboard</h4>\n</div>\n<div class="modal-body">\n    <form name="alertForm" class="form">\n      <div class="form-group">\n        <label>Choose the dashboard to add this query to:</label>\n        <ui-select ng-model="$ctrl.dashboardList" reset-search-input="false" on-select="$ctrl.onDashboardSelected($item)" ng-disabled="$ctrl.saveInProgress">\n          <ui-select-match placeholder="Search a dashboard by name">{{$select.selected.name}}</ui-select-match>\n          <ui-select-choices repeat="q in $ctrl.dashboards"\n                             refresh="$ctrl.searchDashboards($select.search, $ctrl.limitToUsersDashboards)"\n                             refresh-delay="0">\n            <div ng-bind-html="$ctrl.trustAsHtml(q.name | highlight: $select.search)"></div>\n          </ui-select-choices>\n        </ui-select>\n      </div>\n    </form>\n</div>'},function(e,t){e.exports='<settings-screen>\n  <div class="">\n    <form name="snippetForm" class="form">\n      <div class="form-group">\n        <label>Trigger</label>\n        <input type="string" class="form-control" ng-model="$ctrl.snippet.trigger" ng-disabled="!$ctrl.canEdit" required autofocus>\n      </div>\n\n      <div class="form-group">\n        <label>Description</label>\n        <input type="string" class="form-control" ng-model="$ctrl.snippet.description" ng-disabled="!$ctrl.canEdit">\n      </div>\n\n      <div class="form-group">\n        <label>Snippet</label>\n        <pre ng-if="!$ctrl.canEdit">{{$ctrl.snippet.snippet}}</pre>\n        <div ui-ace="$ctrl.editorOptions" ng-model="$ctrl.snippet.snippet" style="height:300px" ng-if="$ctrl.canEdit"></div>\n      </div>\n\n      <div class="form-group" ng-if="$ctrl.canEdit">\n        <button class="btn btn-primary" ng-disabled="!snippetForm.$valid" ng-click="$ctrl.saveChanges()">Save</button>\n        <button class="btn btn-danger" ng-if="$ctrl.snippet.id" ng-click="$ctrl.delete()">Delete</button>\n      </div>\n      <small ng-if="$ctrl.snippet.user">\n        Created by:\n        <img ng-src="{{ $ctrl.snippet.user.profile_image_url }}" class="profile__image_thumb"/>\n        <span ng-class="{\'text-muted\': $ctrl.snippet.user.is_disabled}">{{$ctrl.snippet.user.name}}</span>\n      </small>\n    </form>\n  </div>\n</settings-screen>\n'},function(e,t){e.exports='<settings-screen>\n    <div class="row">\n        <div class="col-md-12">\n          <p>\n            <a href="query_snippets/new" class="btn btn-default"><i class="fa fa-plus"></i> New Snippet</a>\n          </p>\n\n          <table class="table table-border table-hover">\n            <thead>\n              <tr>\n                <th>Trigger</th>\n                <th>Description</th>\n                <th>Snippet</th>\n                <th>Created By</th>\n                <th>Updated At</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="snippet in $ctrl.snippets.getPageRows()">\n                <td>\n                  <a href="query_snippets/{{snippet.id}}">{{snippet.trigger}}</a>\n                </td>\n                <td>\n                  {{snippet.description}}\n                </td>\n                <td>\n                  {{snippet.snippet}}\n                </td>\n                <td>\n                  <img ng-src="{{ snippet.user.profile_image_url }}" class="profile__image_thumb"/>\n                  <span ng-class="{\'text-muted\': snippet.user.is_disabled}">{{snippet.user.name}}</span>\n                </td>\n                <td>\n                  <span am-time-ago="snippet.created_at"></span>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <paginator paginator="$ctrl.snippets"></paginator>\n        </div>\n    </div>\n</settings-screen>\n'},function(e,t){e.exports='<settings-screen>\n    <div class="row" data-test="OrganizationSettings">\n        <div class="col-md-offset-4 col-md-4">\n            <h3 class="m-t-0">General</h3>\n            <p>\n                <label>\n                    Date Format\n                </label>\n                <select class="form-control" ng-model="$ctrl.settings.date_format" ng-change="$ctrl.update(\'date_format\')" data-test="DateFormatSelect">\n                    <option ng-repeat="date_format in $ctrl.dateFormatList" value="{{date_format}}">{{date_format}}</option>\n                </select>\n            </p>\n            <p>\n                <label>\n                    Time Format\n                </label>\n                <select class="form-control" ng-model="$ctrl.settings.time_format" ng-change="$ctrl.update(\'time_format\')" data-test="TimeFormatSelect">\n                    <option ng-repeat="time_format in $ctrl.timeFormatList" value="{{time_format}}">{{time_format}}</option>\n                </select>\n            </p>\n\n            <p>\n                <h4>Feature Flags</h4>\n\n                <label>\n                    <input name="input" type="checkbox" ng-model="$ctrl.settings.feature_show_permissions_control" ng-change="$ctrl.update(\'feature_show_permissions_control\')"\n                        accesskey="tab"> Enable experimental multiple owners support\n                </label>\n            </p>\n            <hr>\n            <h3>Authentication</h3>\n            <p>\n                <label>\n                    <input name="input" type="checkbox" ng-model="$ctrl.settings.auth_password_login_enabled" ng-change="$ctrl.update(\'auth_password_login_enabled\')"\n                        accesskey="tab" ng-disabled="$ctrl.disablePasswordLoginToggle()"> Password Login Enabled\n                    <span uib-popover="Password login can be disabled only if another login method is enabled." popover-trigger="\'mouseenter\'"\n                        ng-if="$ctrl.disablePasswordLoginToggle()">\n                        <i class="fa fa-question-circle"></i>\n                    </span>\n                </label>\n\n                <div class="callout callout-warning" ng-if="!$ctrl.settings.auth_password_login_enabled">\n                    Password based login is currently disabled and users will be able to login only with the enabled SSO options.\n                </div>\n            </p>\n\n            <div ng-if="$ctrl.googleLoginEnabled">\n                <h4>Google Login</h4>\n                <label>\n                    Allowed Google Apps Domains\n                </label>\n                <ui-select multiple tagging tagging-label="false" ng-model="$ctrl.settings.auth_google_apps_domains" tagging-tokens="SPACE|,"\n                    title="Google Apps Domain(s)"\n                    ng-change="$ctrl.update(\'auth_google_apps_domains\')">\n                    <ui-select-match placeholder="Google Apps Domain(s)">{{$item}}</ui-select-match>\n                    \x3c!-- the ui-select-choices is here just to make ui-select work --\x3e\n                    <ui-select-choices repeat="domain in $ctrl.domains">\n                        {{domain}}\n                    </ui-select-choices>\n                </ui-select>\n\n                <div class="callout callout-info m-t-5" ng-if="$ctrl.settings.auth_google_apps_domains | notEmpty">\n                    Any user registered with a <strong>{{$ctrl.settings.auth_google_apps_domains | join}}</strong> Google Apps account will be able to login. If they don\'t have an existing user, a new user will be created and join the <strong>Default</strong> group.\n                </div>\n            </div>\n\n            <h4>SAML</h4>\n            <p>\n                <label>\n                    <input name="input" type="checkbox" ng-model="$ctrl.settings.auth_saml_enabled" ng-change="$ctrl.update(\'auth_saml_enabled\')"\n                        accesskey="tab"> SAML Enabled\n                </label>\n\n                <div ng-show="$ctrl.settings.auth_saml_enabled">\n                    <div class="form-group">\n                        <label>SAML Metadata URL</label>\n                        <input name="input" type="string" class="form-control" ng-model="$ctrl.settings.auth_saml_metadata_url" accesskey="tab" ng-change="$ctrl.update(\'auth_saml_metadata_url\')"\n                            ng-model-options="{ debounce: 200 }">\n                    </div>\n                    <div class="form-group">\n                        <label>SAML Entity ID</label>\n                        <input name="input" type="string" class="form-control" ng-model="$ctrl.settings.auth_saml_entity_id" accesskey="tab" ng-change="$ctrl.update(\'auth_saml_entity_id\')"\n                            ng-model-options="{ debounce: 200 }">\n                    </div>\n                    <div class="form-group">\n                        <label>SAML NameID Format</label>\n                        <input name="input" type="string" class="form-control" ng-model="$ctrl.settings.auth_saml_nameid_format" accesskey="tab"\n                            ng-change="$ctrl.update(\'auth_saml_nameid_format\')" ng-model-options="{ debounce: 200 }">\n                    </div>\n                </div>\n            </p>\n        </div>\n    </div>\n</settings-screen>\n'},function(e,t,n){n(1447),n(1441),e.exports=n(1442)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r={"./en-SG":480,"./en-SG.js":480,"./en-au":481,"./en-au.js":481,"./en-ca":482,"./en-ca.js":482,"./en-gb":483,"./en-gb.js":483,"./en-ie":484,"./en-ie.js":484,"./en-il":485,"./en-il.js":485,"./en-nz":486,"./en-nz.js":486};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=752},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r={"./avatar.svg":468,"./db-logos/Cassandra.png":775,"./db-logos/athena.png":776,"./db-logos/aws_es.png":777,"./db-logos/axibasetsd.png":778,"./db-logos/bigquery.png":779,"./db-logos/clickhouse.png":780,"./db-logos/cockroach.png":781,"./db-logos/couchbase.png":782,"./db-logos/csv.png":783,"./db-logos/databricks.png":784,"./db-logos/db2.png":785,"./db-logos/drill.png":786,"./db-logos/druid.png":787,"./db-logos/dynamodb_sql.png":788,"./db-logos/elasticsearch.png":789,"./db-logos/google_analytics.png":790,"./db-logos/google_spreadsheets.png":791,"./db-logos/graphite.png":792,"./db-logos/hive.png":793,"./db-logos/hive_http.png":794,"./db-logos/impala.png":795,"./db-logos/influxdb.png":796,"./db-logos/jirajql.png":797,"./db-logos/kibana.png":798,"./db-logos/kylin.png":799,"./db-logos/mapd.png":800,"./db-logos/memsql.png":801,"./db-logos/mongodb.png":802,"./db-logos/mssql.png":803,"./db-logos/mysql.png":804,"./db-logos/oracle.png":805,"./db-logos/pg.png":806,"./db-logos/phoenix.png":807,"./db-logos/presto.png":808,"./db-logos/prometheus.png":809,"./db-logos/python.png":810,"./db-logos/qubole.png":811,"./db-logos/rds_mysql.png":812,"./db-logos/redshift.png":813,"./db-logos/results.png":814,"./db-logos/rockset.png":815,"./db-logos/salesforce.png":816,"./db-logos/scylla.png":817,"./db-logos/snowflake.png":818,"./db-logos/sqlite.png":819,"./db-logos/treasuredata.png":820,"./db-logos/uptycs.png":821,"./db-logos/url.png":822,"./db-logos/vertica.png":823,"./db-logos/yandex_appmetrika.png":824,"./db-logos/yandex_metrika.png":825,"./destinations/chatwork.png":826,"./destinations/email.png":827,"./destinations/hangouts_chat.png":828,"./destinations/hipchat.png":829,"./destinations/mattermost.png":830,"./destinations/pagerduty.png":831,"./destinations/slack.png":832,"./destinations/webhook.png":833,"./favicon-16x16.png":834,"./favicon-32x32.png":835,"./favicon-96x96.png":836,"./google_logo.svg":837,"./illustrations/alert.svg":838,"./illustrations/dashboard.svg":839,"./illustrations/query.svg":840,"./logo.png":841,"./logo_white.png":842,"./redash_icon_small.png":183};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=774},function(e,t,n){e.exports=n.p+"images/db-logos/Cassandra.png"},function(e,t,n){e.exports=n.p+"images/db-logos/athena.png"},function(e,t,n){e.exports=n.p+"images/db-logos/aws_es.png"},function(e,t,n){e.exports=n.p+"images/db-logos/axibasetsd.png"},function(e,t,n){e.exports=n.p+"images/db-logos/bigquery.png"},function(e,t,n){e.exports=n.p+"images/db-logos/clickhouse.png"},function(e,t,n){e.exports=n.p+"images/db-logos/cockroach.png"},function(e,t,n){e.exports=n.p+"images/db-logos/couchbase.png"},function(e,t,n){e.exports=n.p+"images/db-logos/csv.png"},function(e,t,n){e.exports=n.p+"images/db-logos/databricks.png"},function(e,t,n){e.exports=n.p+"images/db-logos/db2.png"},function(e,t,n){e.exports=n.p+"images/db-logos/drill.png"},function(e,t,n){e.exports=n.p+"images/db-logos/druid.png"},function(e,t,n){e.exports=n.p+"images/db-logos/dynamodb_sql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/elasticsearch.png"},function(e,t,n){e.exports=n.p+"images/db-logos/google_analytics.png"},function(e,t,n){e.exports=n.p+"images/db-logos/google_spreadsheets.png"},function(e,t,n){e.exports=n.p+"images/db-logos/graphite.png"},function(e,t,n){e.exports=n.p+"images/db-logos/hive.png"},function(e,t,n){e.exports=n.p+"images/db-logos/hive_http.png"},function(e,t,n){e.exports=n.p+"images/db-logos/impala.png"},function(e,t,n){e.exports=n.p+"images/db-logos/influxdb.png"},function(e,t,n){e.exports=n.p+"images/db-logos/jirajql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/kibana.png"},function(e,t,n){e.exports=n.p+"images/db-logos/kylin.png"},function(e,t,n){e.exports=n.p+"images/db-logos/mapd.png"},function(e,t,n){e.exports=n.p+"images/db-logos/memsql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/mongodb.png"},function(e,t,n){e.exports=n.p+"images/db-logos/mssql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/mysql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/oracle.png"},function(e,t,n){e.exports=n.p+"images/db-logos/pg.png"},function(e,t,n){e.exports=n.p+"images/db-logos/phoenix.png"},function(e,t,n){e.exports=n.p+"images/db-logos/presto.png"},function(e,t,n){e.exports=n.p+"images/db-logos/prometheus.png"},function(e,t,n){e.exports=n.p+"images/db-logos/python.png"},function(e,t,n){e.exports=n.p+"images/db-logos/qubole.png"},function(e,t,n){e.exports=n.p+"images/db-logos/rds_mysql.png"},function(e,t,n){e.exports=n.p+"images/db-logos/redshift.png"},function(e,t,n){e.exports=n.p+"images/db-logos/results.png"},function(e,t,n){e.exports=n.p+"images/db-logos/rockset.png"},function(e,t,n){e.exports=n.p+"images/db-logos/salesforce.png"},function(e,t,n){e.exports=n.p+"images/db-logos/scylla.png"},function(e,t,n){e.exports=n.p+"images/db-logos/snowflake.png"},function(e,t,n){e.exports=n.p+"images/db-logos/sqlite.png"},function(e,t,n){e.exports=n.p+"images/db-logos/treasuredata.png"},function(e,t,n){e.exports=n.p+"images/db-logos/uptycs.png"},function(e,t,n){e.exports=n.p+"images/db-logos/url.png"},function(e,t,n){e.exports=n.p+"images/db-logos/vertica.png"},function(e,t,n){e.exports=n.p+"images/db-logos/yandex_appmetrika.png"},function(e,t,n){e.exports=n.p+"images/db-logos/yandex_metrika.png"},function(e,t,n){e.exports=n.p+"images/destinations/chatwork.png"},function(e,t,n){e.exports=n.p+"images/destinations/email.png"},function(e,t,n){e.exports=n.p+"images/destinations/hangouts_chat.png"},function(e,t,n){e.exports=n.p+"images/destinations/hipchat.png"},function(e,t,n){e.exports=n.p+"images/destinations/mattermost.png"},function(e,t,n){e.exports=n.p+"images/destinations/pagerduty.png"},function(e,t,n){e.exports=n.p+"images/destinations/slack.png"},function(e,t,n){e.exports=n.p+"images/destinations/webhook.png"},function(e,t,n){e.exports=n.p+"images/favicon-16x16.png"},function(e,t,n){e.exports=n.p+"images/favicon-32x32.png"},function(e,t,n){e.exports=n.p+"images/favicon-96x96.png"},function(e,t,n){e.exports=n.p+"images/google_logo.svg"},function(e,t,n){e.exports=n.p+"images/illustrations/alert.svg"},function(e,t,n){e.exports=n.p+"images/illustrations/dashboard.svg"},function(e,t,n){e.exports=n.p+"images/illustrations/query.svg"},function(e,t,n){e.exports=n.p+"images/logo.png"},function(e,t,n){e.exports=n.p+"images/logo_white.png"},function(e,t,n){var r={"./AutocompleteToggle.jsx":410,"./BigMessage.jsx":67,"./ColorBox.jsx":960,"./CreateSourceDialog.jsx":240,"./DateInput.jsx":414,"./DateRangeInput.jsx":416,"./DateTimeInput.jsx":310,"./DateTimeRangeInput.jsx":311,"./DialogWrapper.jsx":35,"./DynamicComponent.jsx":242,"./EditInPlace.jsx":417,"./EditParameterSettingsDialog.jsx":243,"./EditVisualizationButton/QueryControlDropdown.jsx":1073,"./EditVisualizationButton/QueryResultsLink.jsx":312,"./EditVisualizationButton/index.jsx":1078,"./EmailSettingsWarning.jsx":419,"./FavoritesControl.jsx":420,"./Filters.jsx":159,"./HelpTrigger.jsx":123,"./InputWithCopy.jsx":154,"./NoTaggedObjectsFound.jsx":245,"./PageHeader.jsx":143,"./Paginator.jsx":77,"./ParameterMappingInput.jsx":83,"./ParameterValueInput.jsx":421,"./PreviewCard.jsx":107,"./QueryBasedParameterInput.jsx":422,"./QueryEditor.jsx":1465,"./QuerySelector.jsx":244,"./SelectItemsDialog.jsx":246,"./SortIcon.jsx":1123,"./TagsList.jsx":426,"./TimeAgo.jsx":155,"./Timer.jsx":1124,"./admin/CeleryStatus.jsx":160,"./admin/Layout.jsx":186,"./admin/StatusBlock.jsx":212,"./alerts/alert-subscriptions/index.js":1142,"./app-header/index.js":1143,"./app-view/error-handler.js":427,"./app-view/index.js":1145,"./cancel-query-button/index.js":1146,"./cards-list/CardsList.jsx":247,"./dashboards/AddWidgetDialog.jsx":428,"./dashboards/EditParameterMappingsDialog.jsx":429,"./dashboards/TextboxDialog.jsx":248,"./dashboards/edit-dashboard-dialog.js":1148,"./dashboards/gridstack/gridstack.js":561,"./dashboards/gridstack/index.js":1155,"./dashboards/widget.js":1157,"./dynamic-form/DynamicForm.jsx":121,"./dynamic-form/dynamicFormHelper.js":80,"./dynamic-table/default-cell/index.js":1160,"./dynamic-table/default-cell/utils.js":256,"./dynamic-table/dynamic-table-row.js":1161,"./dynamic-table/index.js":1162,"./dynamic-table/json-cell/index.js":1165,"./dynamic-table/json-cell/json-view-interactive.js":431,"./empty-state/EmptyState.jsx":187,"./groups/CreateGroupDialog.jsx":432,"./groups/DeleteGroupButton.jsx":249,"./groups/DetailsPageSidebar.jsx":250,"./groups/GroupName.jsx":251,"./groups/ListItemAddon.jsx":191,"./items-list/ItemsList.jsx":50,"./items-list/classes/ItemsFetcher.js":314,"./items-list/classes/ItemsSource.js":78,"./items-list/classes/Paginator.js":433,"./items-list/classes/Sorter.js":190,"./items-list/classes/StateStorage.js":65,"./items-list/components/EmptyState.jsx":141,"./items-list/components/ItemsTable.jsx":23,"./items-list/components/LoadingState.jsx":46,"./items-list/components/Sidebar.jsx":54,"./keywordBuilder.js":425,"./layouts/ContentWithSidebar.jsx":62,"./overlay.js":1169,"./parameters.js":1170,"./permissions-editor/index.js":1171,"./proptypes.js":40,"./queries/ScheduleDialog.jsx":434,"./queries/SchedulePhrase.jsx":252,"./queries/alert-unsaved-changes.js":1172,"./queries/api-key-dialog.js":1173,"./queries/embed-code-dialog.js":1174,"./queries/schema-browser.js":1175,"./queries/visualization-embed.js":1176,"./query-link.js":1177,"./rd-tab/index.js":1178,"./settings-screen.js":1179,"./tab-nav/index.js":1180,"./tags-control/EditTagsDialog.jsx":418,"./tags-control/TagsControl.jsx":111,"./users/ChangePasswordDialog.jsx":435,"./users/CreateUserDialog.jsx":436,"./users/UserEdit.jsx":437,"./users/UserShow.jsx":438};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=843},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"ColorBox",function(){return l}),n.d(t,"default",function(){return c});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11);n(961);function l(e){var t=e.color;return a.a.createElement("span",{style:{backgroundColor:t}})}function c(e){e.component("colorBox",Object(s.react2angular)(l))}l.propTypes={color:o.a.string},l.defaultProps={color:"transparent"},c.init=!0},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"QueryControlDropdown",function(){return b}),n.d(t,"default",function(){return y});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(209),l=n.n(s),c=n(124),u=n.n(c),d=n(21),p=n.n(d),m=n(27),f=n.n(m),h=n(11),g=n(312);function b(e){var t=a.a.createElement(u.a,null,!e.query.isNew()&&(!e.query.is_draft||!e.query.is_archived)&&a.a.createElement(u.a.Item,null,a.a.createElement("a",{target:"_self",onClick:()=>e.openAddToDashboardForm(e.selectedTab)},a.a.createElement(f.a,{type:"plus-circle",theme:"filled"})," Add to Dashboard")),!e.query.isNew()&&a.a.createElement(u.a.Item,null,a.a.createElement("a",{onClick:()=>e.showEmbedDialog(e.query,e.selectedTab),"data-test":"ShowEmbedDialogButton"},a.a.createElement(f.a,{type:"share-alt"})," Embed elsewhere")),a.a.createElement(u.a.Item,null,a.a.createElement(g.default,{disabled:e.queryExecuting||!e.queryResult.getData||!e.queryResult.getData(),query:e.query,queryResult:e.queryResult,embed:e.embed,apiKey:e.apiKey},a.a.createElement(f.a,{type:"file"})," Download as CSV File")),a.a.createElement(u.a.Item,null,a.a.createElement(g.default,{fileType:"xlsx",disabled:e.queryExecuting||!e.queryResult.getData||!e.queryResult.getData(),query:e.query,queryResult:e.queryResult,embed:e.embed,apiKey:e.apiKey},a.a.createElement(f.a,{type:"file-excel"})," Download as Excel File")));return a.a.createElement(l.a,{trigger:["click"],overlay:t},a.a.createElement(p.a,{"data-test":"QueryControlDropdownButton"},a.a.createElement(f.a,{type:"ellipsis",rotate:90})))}function y(e){e.component("queryControlDropdown",Object(h.react2angular)(b))}b.propTypes={query:o.a.object.isRequired,queryResult:o.a.object,queryExecuting:o.a.bool.isRequired,showEmbedDialog:o.a.func.isRequired,embed:o.a.bool,apiKey:o.a.string,selectedTab:o.a.oneOfType([o.a.string,o.a.number]),openAddToDashboardForm:o.a.func.isRequired},b.defaultProps={queryResult:{},embed:!1,apiKey:"",selectedTab:""},y.init=!0},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"EditVisualizationButton",function(){return p}),n.d(t,"default",function(){return m});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(21),l=n.n(s),c=n(27),u=n.n(c),d=n(11);function p(e){return a.a.createElement(l.a,{"data-test":"EditVisualization",className:"edit-visualization",onClick:()=>e.openVisualizationEditor(e.selectedTab)},a.a.createElement(u.a,{type:"form"}),a.a.createElement("span",{className:"hidden-xs hidden-s hidden-m"},"Edit Visualization"))}function m(e){e.component("editVisualizationButton",Object(d.react2angular)(p))}p.propTypes={openVisualizationEditor:o.a.func.isRequired,selectedTab:o.a.oneOfType([o.a.string,o.a.number])},p.defaultProps={selectedTab:""},m.init=!0},,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"SortIcon",function(){return l}),n.d(t,"default",function(){return c});var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11);function l(e){var t=e.column,n=e.sortColumn,r=e.reverse;return t!==n?null:a.a.createElement("span",null,a.a.createElement("i",{className:"fa fa-sort-"+(r?"desc":"asc")}))}function c(e){e.component("sortIcon",Object(s.react2angular)(l))}l.propTypes={column:o.a.string,sortColumn:o.a.string,reverse:o.a.bool},l.defaultProps={column:null,sortColumn:null,reverse:!1},c.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"Timer",function(){return d}),n.d(t,"default",function(){return p});var r=n(12),a=n.n(r),i=n(0),o=n(1),s=n.n(o),l=n(11),c=n(40),u=n(313);function d(e){var t=e.from,n=Object(i.useMemo)(()=>a()(t).valueOf(),[t]),r=Object(u.a)();return Object(i.useEffect)(()=>{var e=setInterval(r,1e3);return()=>clearInterval(e)},[]),a.a.utc(a.a.now()-n).format("HH:mm:ss")}function p(e){e.component("rdTimer",Object(l.react2angular)(d))}d.propTypes={from:s.a.oneOfType([s.a.string,s.a.number,s.a.instanceOf(Date),c.Moment])},d.defaultProps={from:null},p.init=!0},,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(2),a=n(9),i=n(664),o=n.n(i);function s(e,t,n,i,o,s){e.newSubscription={},e.subscribers=[],e.destinations=[],e.currentUser=i,t.all([s.query().$promise,o.query({alertId:e.alertId}).$promise]).then(t=>{var n=t[0],a=t[1],o=Object(r.compact)(a.map(e=>e.destination&&e.destination.id)),s=Object(r.compact)(a.map(e=>!e.destination&&e.user.id));e.destinations=n.filter(e=>!Object(r.includes)(o,e.id)),Object(r.includes)(s,i.id)||e.destinations.unshift({user:{name:i.name}}),e.newSubscription.destination=e.destinations[0],e.subscribers=a}),e.destinationsDisplay=(e=>{if(!e)return"";var t=e;return e.destination?t=t.destination:t.user&&(t={name:"".concat(e.user.name," (Email)"),icon:"fa-envelope",type:"user"}),n.trustAsHtml('<i class="fa '.concat(t.icon,'"></i>&nbsp;').concat(t.name))}),e.saveSubscriber=(()=>{var t=new o({alert_id:e.alertId});e.newSubscription.destination.id&&(t.destination_id=e.newSubscription.destination.id),t.$save(()=>{a.default.success("Subscribed."),e.subscribers.push(t),e.destinations=Object(r.without)(e.destinations,e.newSubscription.destination),e.destinations.length>0?e.newSubscription.destination=e.destinations[0]:e.newSubscription.destination=void 0},()=>{a.default.error("Failed saving subscription.")})}),e.unsubscribe=(t=>{var n=t.destination,o=t.user;t.$delete(()=>{a.default.success("Unsubscribed"),e.subscribers=Object(r.without)(e.subscribers,t),n?e.destinations.push(n):o.id===i.id&&e.destinations.push({user:{name:i.name}}),1===e.destinations.length&&(e.newSubscription.destination=e.destinations[0])},()=>{a.default.error("Failed unsubscribing.")})})}function l(e){e.directive("alertSubscriptions",()=>({restrict:"E",replace:!0,scope:{alertId:"="},template:o.a,controller:s}))}s.$inject=["$scope","$q","$sce","currentUser","AlertSubscription","Destination"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});n(106);var r=n(85),a=n.n(r),i=n(183),o=n.n(i),s=n(665),l=n(666),c=n.n(l);n(1144);d.$inject=["$rootScope","$location","$route","$uibModal","Auth","currentUser","clientConfig","Dashboard","Query"];var u=a()("redash:appHeader");function d(e,t,n,r,a,i,l,c,d){this.logoUrl=o.a,this.basePath=l.basePath,this.currentUser=i,this.showQueriesMenu=i.hasPermission("view_query"),this.showAlertsLink=i.hasPermission("list_alerts"),this.showNewQueryMenu=i.hasPermission("create_query"),this.showSettingsMenu=i.hasPermission("list_users"),this.showDashboardsMenu=i.hasPermission("list_dashboards"),this.frontendVersion=s,this.backendVersion=l.version,this.newVersionAvailable=l.newVersionAvailable&&i.isAdmin,this.reload=(()=>{u("Reloading dashboards and queries."),c.favorites().$promise.then(e=>{this.dashboards=e.results}),d.favorites().$promise.then(e=>{this.queries=e.results})}),this.reload(),e.$on("reloadFavorites",this.reload),this.newDashboard=(()=>{r.open({component:"editDashboardDialog",resolve:{dashboard:()=>({name:null,layout:null})}})}),this.searchQueries=(()=>{t.path("/queries").search({q:this.searchTerm}),n.reload()}),this.logout=(()=>{a.logout()})}function p(e){e.component("appHeader",{template:c.a,controller:d})}p.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});var r=n(85),a=n.n(r),i=n(86),o=n(427),s=n(667),l=n.n(s);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=a()("redash:app-view"),d=new o.ErrorHandler,p={default:{showHeader:!0,bodyClass:!1},fixed:{showHeader:!0,bodyClass:"fixed-layout"},defaultSignedOut:{showHeader:!1}};var m=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$rootScope=t,this.layout=p.defaultSignedOut,this.handler=d,t.$on("$routeChangeStart",(e,t)=>{this.handler.reset();var a=t.$$route||{authenticated:!0};a.authenticated&&(u("Requested authenticated route: ",t),r.isAuthenticated()||(e.preventDefault(),r.requireSession().then(()=>{this.applyLayout(a),n.reload()})))}),t.$on("$routeChangeSuccess",(e,t)=>{var n=t.$$route||{authenticated:!0};this.applyLayout(n)}),t.$on("$routeChangeError",(e,t,n,r)=>{var a=t.$$route||{authenticated:!0};throw this.applyLayout(a),new i.a(r)})}var t,n,r;return e.$inject=["$rootScope","$route","Auth"],t=e,(n=[{key:"applyLayout",value:function(e){this.layout=function(e){var t=p.default;return e.layout?t=p[e.layout]||p.default:e.authenticated||(t=p.defaultSignedOut),t}(e),this.$rootScope.bodyClass=this.layout.bodyClass}}])&&c(t.prototype,n),r&&c(t,r),e}();function f(e){e.factory("$exceptionHandler",()=>(function(e){d.process(e)})),e.component("appView",{template:l.a,controller:m})}f.init=!0},function(e,t,n){"use strict";function r(){return{restrict:"E",scope:{queryId:"=",taskId:"="},transclude:!0,template:'<button class="btn btn-default" ng-disabled="inProgress" ng-click="cancelExecution()"><i class="zmdi zmdi-spinner zmdi-hc-spin" ng-if="inProgress"></i> Cancel</button>',replace:!0,controller:["$scope","$http","currentUser","Events",function(e,t,n,r){e.inProgress=!1,e.cancelExecution=(()=>{t.delete("api/jobs/".concat(e.taskId)).success(()=>{});var n=e.queryId;"adhoc"===e.queryId&&(n=null),r.record("cancel_execute","query",n,{admin:!0}),e.inProgress=!0})}]}}function a(e){e.directive("cancelQueryButton",r)}n.r(t),n.d(t,"default",function(){return a}),a.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(106),n(92);var r=n(2),a=n(57),i=n(668),o={bindings:{resolve:"<",close:"&",dismiss:"&"},template:n.n(i).a,controller:["$location","$http","Events",function(e,t,n){this.dashboard=this.resolve.dashboard,this.policy=a.policy,this.isFormValid=(()=>!Object(r.isEmpty)(this.dashboard.name)),this.saveDashboard=(()=>{this.isFormValid()&&(this.saveInProgress=!0,t.post("api/dashboards",{name:this.dashboard.name}).success(t=>{this.close(),e.path("/dashboard/".concat(t.slug)).search("edit").replace()}),n.record("create","dashboard"))})}]};function s(e){e.component("editDashboardDialog",o)}s.init=!0},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(20),a=n.n(r),i=n(2),o=n.n(i);n(561),n(1156);function s(e,t){t?e.addClass("widget-auto-height-enabled"):e.removeClass("widget-auto-height-enabled")}function l(e,t){return{restrict:"A",replace:!1,scope:{editing:"=",batchUpdate:"=",onLayoutChanged:"=",isOneColumnMode:"="},controller:function(){this.$el=null,this.resizingWidget=null,this.draggingWidget=null,this.grid=(()=>this.$el?this.$el.data("gridstack"):null),this._updateStyles=(()=>{var e=this.grid();if(e){var t=o.a.chain(e.grid.nodes).map(e=>e.y+e.height).max().value();o.a.isObject(e._styles)&&(e._styles._max=0),e._updateStyles(t+10)}}),this.addWidget=((e,t,n)=>{var r=this.grid();r&&(r.addWidget(e,t.col,t.row,t.sizeX,t.sizeY,!1,t.minSizeX,t.maxSizeX,t.minSizeY,t.maxSizeY,n),this._updateStyles())}),this.updateWidget=((e,t)=>{this.update(n=>{n.update(e,t.col,t.row,t.sizeX,t.sizeY),n.minWidth(e,t.minSizeX),n.maxWidth(e,t.maxSizeX),n.minHeight(e,t.minSizeY),n.maxHeight(e,t.maxSizeY)})}),this.removeWidget=(e=>{var t=this.grid();t&&(t.removeWidget(e,!1),this._updateStyles())}),this.getNodeByElement=(e=>{var t=this.grid();if(t&&t.grid)return t.grid.getNodeDataByDOMEl(a()(e))}),this.setWidgetId=((e,t)=>{var n=this.getNodeByElement(e);n&&(n.id=t,e.attr("data-gs-id",o.a.isUndefined(t)?null:t))}),this.setEditing=(e=>{var t=this.grid();t&&(e?t.enable():t.disable())}),this.update=(e=>{var t=this.grid();if(t){t.batchUpdate();try{o.a.isFunction(e)&&e(t)}finally{t.commit(),this._updateStyles()}}})},link:(n,r,i,s)=>{var l=o.a.isFunction(e(i.onLayoutChanged).assign),c=!0;r.addClass("grid-stack"),r.gridstack({auto:!1,verticalMargin:t.margins,cellHeight:t.rowHeight-t.margins,width:t.columns,height:0,animate:!0,float:!1,minWidth:t.mobileBreakPoint,resizable:{handles:"e, se, s, sw, w",start:(e,t)=>{s.resizingWidget=t.element,a()(t.element).trigger("gridstack.resize-start",s.getNodeByElement(t.element))},stop:(e,t)=>{s.resizingWidget=null,a()(t.element).trigger("gridstack.resize-end",s.getNodeByElement(t.element)),s.update()}},draggable:{start:(e,t)=>{s.draggingWidget=t.helper,a()(t.helper).trigger("gridstack.drag-start",s.getNodeByElement(t.helper))},stop:(e,t)=>{s.draggingWidget=null,a()(t.helper).trigger("gridstack.drag-end",s.getNodeByElement(t.helper)),s.update()}}}),s.$el=r;var u={},d=o.a.debounce(()=>{o.a.each(u,e=>{e.el&&a()(e.el).trigger("gridstack.changed",e)}),n.onLayoutChanged&&n.onLayoutChanged(),u={}});r.on("change",(e,t)=>{t=o.a.isArray(t)?t:[],o.a.each(t,e=>{u[e.id]=e}),d()}),n.$watch("editing",e=>{s.setEditing(!!e)}),n.$on("$destroy",()=>{c=!1,s.$el=null}),l&&function e(){var t=s.grid();if(t){var a=r.hasClass(t.opts.oneColumnModeClass);n.isOneColumnMode!==a&&(n.isOneColumnMode=a,n.$applyAsync())}c&&setTimeout(e,150)}()}}}function c(e){return{restrict:"A",replace:!1,require:"^gridstack",scope:{gridstackItem:"=",gridstackItemId:"@"},link:(t,n,r,a)=>{var i=!0,l=null;a.addWidget(n,t.gridstackItem,t.gridstackItemId),n.on("gridstack.resize-start",()=>{var e=a.getNodeByElement(n);l=o.a.isObject(e)?e.height:null}),n.on("gridstack.resize-end",(e,r)=>{var a=t.gridstackItem;o.a.isObject(r)&&o.a.isObject(a)&&r.height!==l&&null!==l&&(a.autoHeight=!1,s(n,a.autoHeight),t.$applyAsync())}),n.on("gridstack.changed",(e,n)=>{var r=t.gridstackItem;if(o.a.isObject(n)&&o.a.isObject(r)){var a=!1;n.x!==r.col&&(r.col=n.x,a=!0),n.y!==r.row&&(r.row=n.y,a=!0),n.width!==r.sizeX&&(r.sizeX=n.width,a=!0),n.height!==r.sizeY&&(r.sizeY=n.height,a=!0),a&&t.$applyAsync()}}),t.$watch("gridstackItem.autoHeight",()=>{var e=t.gridstackItem;o.a.isObject(e)?s(n,e.autoHeight):s(n,!1)}),t.$watch("gridstackItemId",()=>{a.setWidgetId(n,t.gridstackItemId)}),t.$on("$destroy",()=>{i=!1,e(()=>{a.removeWidget(n)})}),function e(){if(!a.resizingWidget&&!a.draggingWidget){var r=t.gridstackItem,s=a.grid();if(s&&o.a.isObject(r)&&r.autoHeight){var l=function(e,t,n,r,a){var i=e[0],s=i.querySelector(".scrollbox, .spinner-container"),l=o.a.isObject(n)?n.height:1;if(s){var c=o.a.chain(s.children).map(e=>{var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return{top:t.top-parseFloat(n.marginTop),bottom:t.bottom+parseFloat(n.marginBottom)}}).reduce((e,t)=>({top:Math.min(e.top,t.top),bottom:Math.max(e.bottom,t.bottom)})).value()||{top:0,bottom:0},u=i.querySelector(".body-container");if(u){var d=window.getComputedStyle(s),p=o.a.chain(u.children).filter(e=>e!==s).reduce((e,t)=>{var n=t.getBoundingClientRect();return e+(n.bottom-n.top)},0).value(),m=t.opts.verticalMargin+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+(s.scrollWidth>s.offsetWidth?16:0),f=c.bottom-c.top,h=t.cellHeight()+t.opts.verticalMargin;l=Math.ceil(Math.round(p+f+m)/h)}}return Math.min(Math.max(r,l),a)}(n,s,a.getNodeByElement(n),r.minSizeY,r.maxSizeY);l!==r.sizeY&&(r.sizeY=l,a.updateWidget(n,{sizeY:l}),t.$applyAsync())}}i&&setTimeout(e,150)}()}}}function u(e){e.directive("gridstack",l),e.directive("gridstackItem",c)}c.$inject=["$timeout"],l.$inject=["$parse","dashboardGridOptions"],u.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return p});n(106);var r=n(2),a=n(669),i=n.n(a),o=n(248),s=n(670),l=n.n(s),c=n(429);n(1158),n(1159);d.$inject=["$scope","$location","$uibModal","$window","$rootScope","$timeout","Events","currentUser"];var u={template:l.a,bindings:{resolve:"<",close:"&",dismiss:"&"},controller:function(){this.widget=this.resolve.widget}};function d(e,t,n,a,i,s,l,u){var d=this;this.canViewQuery=u.hasPermission("view_query"),this.editTextBox=(()=>{o.default.showModal({dashboard:this.dashboard,text:this.widget.text,onConfirm:e=>(this.widget.text=e,this.widget.save())})}),this.expandVisualization=(()=>{n.open({component:"widgetDialog",resolve:{widget:this.widget},size:"lg"})}),this.hasParameters=(()=>this.widget.query.getParametersDefs().length>0),this.editParameterMappings=(()=>{c.default.showModal({dashboard:this.dashboard,widget:this.widget}).result.then(t=>{this.localParameters=null,t&&s(()=>this.refresh()),e.$applyAsync(),i.$broadcast("dashboard.update-parameters")})}),this.localParametersDefs=(()=>(this.localParameters||(this.localParameters=Object(r.filter)(this.widget.getParametersDefs(),e=>!this.widget.isStaticParam(e))),this.localParameters)),this.deleteWidget=(()=>{a.confirm('Are you sure you want to remove "'.concat(this.widget.getName(),'" from the dashboard?'))&&this.widget.delete().then(()=>{this.deleted&&this.deleted({})})}),l.record("view","widget",this.widget.id),this.load=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.search().maxAge;d.widget.load(e,n)},this.refresh=(()=>{this.load(!0)}),this.widget.visualization?(l.record("view","query",this.widget.visualization.query.id,{dashboard:!0}),l.record("view","visualization",this.widget.visualization.id,{dashboard:!0}),this.type="visualization",this.load()):this.widget.restricted?this.type="restricted":this.type="textbox"}function p(e){e.component("widgetDialog",u),e.component("dashboardWidget",{template:i.a,controller:d,bindings:{widget:"<",public:"<",dashboard:"<",filters:"<",deleted:"&onDelete"}})}p.init=!0},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(2),a=n(256),i=n(671),o=n.n(i),s={image:a.renderImage,link:a.renderLink};function l(e){e.directive("dynamicTableDefaultCell",["$sanitize",e=>({template:o.a,restrict:"E",replace:!0,scope:{column:"=",row:"="},link:t=>{"string"===t.column.displayAs?t.allowHTML=t.column.allowHTML:t.allowHTML=Object(r.includes)(["image","link"],t.column.displayAs);var n=t.allowHTML?e:r.identity,i=s[t.column.displayAs]||a.renderDefault;t.value=n(i(t.column,t.row)),t.$watch("row",(e,r)=>{e!==r&&(t.value=n(i(t.column,t.row)))})}})])}l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(2);function a(e){e.directive("dynamicTableRow",()=>({template:"",restrict:"A",replace:!1,scope:{columns:"=",row:"=",render:"="},link:(e,t)=>{e.$watch("render",()=>{Object(r.isFunction)(e.render)&&e.render(e,e=>{t.empty().append(e).append("<td></td>")})})}}))}a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return m});n(204);var r=n(2),a=n(672),i=n.n(a);n(1164);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return null==e}function l(e,t,n){return""===t||0===n.length||0===e.length?e:(t=t.toUpperCase(),Object(r.filter)(e,e=>{for(var r=0;r<n.length;r+=1){var a=n[r].name,i=n[r].formatFunction;if(void 0!==e[a]){var o=i?i(e[a]):e[a];if((o=(""+o).toUpperCase()).indexOf(t)>=0)return!0}}return!1}))}function c(e,t){return 0===t.length||0===e.length?e:[].concat(e).sort((e,n)=>{for(var r,a,i=0;i<t.length;i+=1){if(r=e[t[i].name],a=n[t[i].name],s(r)||r<a)return-1*t[i].direction;if(r>a||s(a))return 1*t[i].direction}return 0})}function u(e,t){return t=t||25,(e=parseInt(e,10)||t)>0?e:t}p.$inject=["$scope","$compile"];var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$ctrl=t}var t,n,r;return t=e,(n=[{key:"setPage",value:function(e){this.$ctrl.onPageChanged(e)}},{key:"page",get:function(){return this.$ctrl.currentPage}},{key:"itemsPerPage",get:function(){return this.$ctrl.itemsPerPage}},{key:"totalCount",get:function(){return this.$ctrl.preparedRows.length}}])&&o(t.prototype,n),r&&o(t,r),e}();function p(e,t){this.paginatorAdapter=new d(this),this.itemsPerPage=u(this.itemsPerPage),this.currentPage=1,this.searchTerm="",this.columns=[],this.rows=[],this.preparedRows=[],this.rowsToDisplay=[],this.orderBy=[],this.orderByColumnsIndex={},this.orderByColumnsDirection={},this.searchColumns=[];var n=()=>{this.orderByColumnsIndex={},this.orderByColumnsDirection={},Object(r.each)(this.orderBy,(e,t)=>{this.orderByColumnsIndex[e.name]=t+1,this.orderByColumnsDirection[e.name]=e.direction})},a=e=>{e&&(this.preparedRows=c(l(this.rows,this.searchTerm,this.searchColumns),this.orderBy));var t=(this.currentPage-1)*this.itemsPerPage,n=t+this.itemsPerPage;this.rowsToDisplay=this.preparedRows.slice(t,n)},i=e=>{this.columns=e,n(),this.orderBy=[],this.currentPage=1,this.searchTerm="",this.searchColumns=Object(r.filter)(this.columns,"allowSearch"),this.renderSingleRow=function(e,t){return t(Object(r.map)(e,(e,t)=>{switch(e.displayAs){case"json":return'\n          <dynamic-table-json-cell column="columns['.concat(t,']" \n            value="row[columns[').concat(t,'].name]"></dynamic-table-json-cell>\n        ');default:return'\n          <dynamic-table-default-cell column="columns['.concat(t,']" \n            row="row"></dynamic-table-default-cell>\n        ')}}).join(""))}(this.columns,t),a(!0)},o=e=>{this.rows=e,this.currentPage=1,a(!0)};this.renderSingleRow=null,this.onColumnHeaderClick=((e,t)=>{var i=Object(r.find)(this.orderBy,e=>e.name===t.name);i?1===i.direction?(i.direction=-1,e.shiftKey||(this.orderBy=[i])):e.shiftKey?this.orderBy=Object(r.filter)(this.orderBy,e=>e.name!==t.name):this.orderBy=[]:(e.shiftKey||(this.orderBy=[]),this.orderBy.push({name:t.name,direction:1})),n(),a(!0),e.shiftKey&&document.getSelection().removeAllRanges()}),this.onPageChanged=(t=>{this.currentPage=t,a(!1),e.$applyAsync()}),this.onSearchTermChanged=(()=>{this.preparedRows=c(l(this.rows,this.searchTerm,this.searchColumns),this.orderBy),this.currentPage=1,a(!0)}),this.$onChanges=(e=>{e.columns&&(e.rows&&(this.rows=[]),i(e.columns.currentValue)),e.rows&&o(e.rows.currentValue),e.itemsPerPage&&(this.itemsPerPage=u(this.itemsPerPage),this.currentPage=1,a(!1))})}function m(e){e.component("dynamicTable",{template:i.a,controller:p,bindings:{rows:"<",columns:"<",itemsPerPage:"<"}})}m.init=!0},,function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});n(168);var r=n(2),a=n(431),i=n(673),o=n.n(i);function s(e){return{template:o.a,restrict:"E",replace:!0,scope:{column:"=",value:"="},link:(t,n)=>{var i=n.find(".json-cell-valid");t.isValid=!1,t.parsedValue=null,t.$watch("value",()=>{t.parsedValue=function(e,t){if(Object(r.isString)(e)&&e.length<=t.tableCellMaxJSONSize)try{return JSON.parse(e)}catch(e){return}}(t.value,e),t.isValid=!Object(r.isUndefined)(t.parsedValue),i.empty(),Object(a.default)(i,t.parsedValue)})}}}function l(e){e.directive("dynamicTableJsonCell",s)}s.$inject=["clientConfig"],l.init=!0},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r={template:'\n  <div>\n    <div class="overlay"></div>\n    <div style="width: 100%; position:absolute; top:50px; z-index:2000">\n      <div class="well well-lg" style="width: 70%; margin: auto;" ng-transclude>\n      </div>\n    </div>\n  </div>\n  ',transclude:!0};function a(e){e.component("overlay",r)}a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});n(15),n(106);var r=n(2),a=n(674),i=n.n(a),o=n(243);function s(e){return{restrict:"E",transclude:!0,scope:{parameters:"=",syncValues:"=?",editable:"=?",changed:"&onChange",onUpdated:"=",onRefresh:"="},template:i.a,link:function(t){!1!==t.syncValues&&t.$watch("parameters",()=>{t.changed&&t.changed({});var n=Object(r.extend)({},e.search());t.parameters.forEach(e=>{Object(r.extend)(n,e.toUrlParams())}),e.search(n)},!0),t.showParameterSettings=((e,n)=>{o.default.showModal({parameter:e}).result.then(a=>{t.parameters[n]=Object(r.extend)(e,a),t.onUpdated()})})}}}function l(e){e.directive("parameters",s)}s.$inject=["$location"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(15);var r=n(2),a=n(9),i=n(675),o={template:n.n(i).a,bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["$http","User",function(e,t){this.grantees=[],this.newGrantees={},this.aclUrl=this.resolve.aclUrl.url,this.owner=this.resolve.owner;var n=()=>{e.get(this.aclUrl).success(e=>{this.grantees=[],Object(r.each)(e,(e,t)=>{e.forEach(e=>{e.access_type=t,this.grantees.push(e)})})})};n(),this.findUser=(e=>{""!==e?t.query({q:e},e=>{var t=Object(r.filter)(e.results,e=>e.id!==this.owner.id),n=this.grantees.map(e=>e.id);t.forEach(e=>{e.alreadyGrantee=Object(r.includes)(n,e.id)}),this.foundUsers=t}):this.foundUsers=[]}),this.addGrantee=(t=>{this.newGrantees={};var r={access_type:"modify",user_id:t.id};e.post(this.aclUrl,r).success(()=>{t.alreadyGrantee=!0,n()}).catch(e=>{403===e.status?a.default.error("You cannot add a user to this dashboard.","Ask the dashboard owner to grant them permissions."):a.default.error("Something went wrong.")})}),this.removeGrantee=(t=>{var n={access_type:"modify",user_id:t.id};e({url:this.aclUrl,method:"DELETE",data:n,headers:{"Content-Type":"application/json"}}).success(()=>{this.grantees=this.grantees.filter(e=>e!==t),this.foundUsers&&this.foundUsers.forEach(e=>{e.id===t.id&&(e.alreadyGrantee=!1)})})})}]};function s(e){e.component("permissionsEditor",o)}s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});n(116);function r(e){return{restrict:"E",replace:!0,scope:{isDirty:"="},link:function(t){var n="".concat("You will lose your changes if you leave","\n\nAre you sure you want to leave this page?"),r=e.onbeforeunload;e.onbeforeunload=function(){return t.isDirty?"You will lose your changes if you leave":null},t.$on("$locationChangeStart",(r,a,i)=>{a.split("?")[0]!==i.split("?")[0]&&a.split("#")[0]!==i.split("#")[0]&&t.isDirty&&!e.confirm(n)&&r.preventDefault()}),t.$on("$destroy",()=>{e.onbeforeunload=r})}}}function a(e){e.directive("alertUnsavedChanges",r)}r.$inject=["$window"],a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r={template:'<div class="modal-header">\n    <button type="button" class="close" aria-label="Close" ng-click="$ctrl.close()"><span aria-hidden="true">&times;</span></button>\n</div>\n<div class="modal-body">\n    <h5>API Key</h5>\n    <pre>{{$ctrl.apiKey}}</pre>\n\n    <h5>Example API Calls:</h5>\n\n    <div>\n        Results in CSV format:\n\n        <pre>{{$ctrl.csvUrl}}</pre>\n\n        Results in JSON format:\n\n        <pre>{{$ctrl.jsonUrl}}</pre>\n    </div>\n</div>',controller:["clientConfig",function(e){this.apiKey=this.resolve.query.api_key,this.csvUrl="".concat(e.basePath,"api/queries/").concat(this.resolve.query.id,"/results.csv?api_key=").concat(this.apiKey),this.jsonUrl="".concat(e.basePath,"api/queries/").concat(this.resolve.query.id,"/results.json?api_key=").concat(this.apiKey)}],bindings:{resolve:"<",close:"&",dismiss:"&"}};function a(e){e.component("apiKeyDialog",r)}a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(676),a={controller:["clientConfig",function(e){this.query=this.resolve.query,this.visualization=this.resolve.visualization,this.embedUrl="".concat(e.basePath,"embed/query/").concat(this.query.id,"/visualization/").concat(this.visualization.id,"?api_key=").concat(this.query.api_key,"&").concat(this.query.getParameters().toUrlParams()),window.snapshotUrlBuilder&&(this.snapshotUrl=window.snapshotUrlBuilder(this.query,this.visualization))}],bindings:{resolve:"<",close:"&",dismiss:"&"},template:n.n(r).a};function i(e){e.component("embedCodeDialog",a)}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(116),n(225),n(226),n(92);var r=n(677),a=n.n(r);function i(e,t){this.showTable=(e=>{e.collapsed=!e.collapsed,t.$broadcast("vsRepeatTrigger")}),this.getSize=(e=>{var t=22;return e.collapsed||(t+=18*e.columns.length),t}),this.isEmpty=function(){return void 0===this.schema||0===this.schema.length},this.itemSelected=((t,n)=>{e.$broadcast("query-editor.command","paste",n.join(".")),t.preventDefault(),t.stopPropagation()}),this.splitFilter=(e=>{if((e=e.replace(/ {2}/g," ")).includes(" ")){var t=e.split(" ");this.schemaFilterObject={name:t[0],columns:t[1]},this.schemaFilterColumn=t[1]}else this.schemaFilterObject=e,this.schemaFilterColumn=""})}i.$inject=["$rootScope","$scope"];var o={bindings:{schema:"<",onRefresh:"&"},controller:i,template:a.a};function s(e){e.component("schemaBrowser",o)}s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});var r=n(2),a=n(12),i=n.n(a),o=n(183),s=n.n(o),l=n(678),c={template:n.n(l).a,bindings:{query:"<"},controller:["$routeParams",function(e){this.refreshQueryResults=(()=>{this.loading=!0,this.error=null,this.refreshStartedAt=i()(),this.query.getQueryResultPromise().then(e=>{this.loading=!1,this.queryResult=e}).catch(e=>{this.loading=!1,this.error=e.getError()})});var t=parseInt(e.visualizationId,10);this.visualization=Object(r.find)(this.query.visualizations,e=>e.id===t),this.showQueryDescription=e.showDescription,this.logoUrl=s.a,document.querySelector("body").classList.add("headless"),this.query.is_safe?this.refreshQueryResults():this.error="Can't embed queries with text parameters."}]};function u(e){function t(e,t,n){return function(e,t){var n=e.current.params.api_key;return t.setApiKey(n),t.loadConfig()}(e,t).then(()=>n.get({id:e.current.params.queryId}).$promise)}t.$inject=["$route","Auth","Query"],e.component("visualizationEmbed",c),e.config(["$routeProvider",e=>{e.when("/embed/query/:queryId/visualization/:visualizationId",{resolve:{query:t},reloadOnSearch:!1,template:'<visualization-embed query="$resolve.query"></visualization-embed>'})}])}u.init=!0},function(e,t,n){"use strict";function r(e){e.component("queryLink",{bindings:{query:"<",visualization:"<",readonly:"<"},template:'\n      <a ng-href="{{$ctrl.readonly ? undefined : $ctrl.getUrl()}}" class="query-link">\n        <visualization-name visualization="$ctrl.visualization"/>\n        <span>{{$ctrl.query.name}}</span>\n      </a>\n    ',controller:function(){this.getUrl=(()=>{var e=null;return this.visualization&&(e="TABLE"===this.visualization.type?"table":this.visualization.id),this.query.getUrl(!1,e)})}})}n.r(t),n.d(t,"default",function(){return r}),r.init=!0},function(e,t,n){"use strict";function r(e){return{restrict:"E",scope:{tabId:"@",name:"@",basePath:"=?"},transclude:!0,template:'<li class="rd-tab" ng-class="{active: tabId==selectedTab}"><a href="{{basePath}}#{{tabId}}">{{name}}<span ng-transclude></span></a></li>',replace:!0,link:function(t){t.basePath=t.basePath||e.path().substring(1),t.$watch(()=>t.$parent.selectedTab,e=>{t.selectedTab=e})}}}function a(e){e.directive("rdTab",r)}n.r(t),n.d(t,"default",function(){return a}),r.$inject=["$location"],a.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return o});var r=n(79),a=n(679),i=n.n(a);function o(e){e.component("settingsScreen",{transclude:!0,template:i.a,controller:["$location","currentUser",function(e,t){this.settingsMenu=r.default,this.isActive=(t=>t.isActive(e.path())),this.isAvailable=(e=>void 0===e||t.hasPermission(e))}]})}o.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});n(205),n(15);function r(e){this.tabs.forEach(t=>{t.isActive?t.active=t.isActive(e.path()):t.active=e.path().startsWith("/".concat(t.path))})}function a(e){e.component("tabNav",{template:'<ul class="tab-nav bg-white"><li ng-repeat="tab in $ctrl.tabs" ng-class="{\'active\': tab.active }"><a ng-href="{{tab.path}}">{{tab.name}}</a></li></ul>',controller:r,bindings:{tabs:"<"}})}r.$inject=["$location"],a.init=!0},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1181},function(e,t,n){var r={"./alert-dialog.js":1183,"./alert-subscription.js":1184,"./alert.js":257,"./auth.js":14,"./dashboard.js":145,"./data-source.js":68,"./destination.js":114,"./events.js":1185,"./getTags.js":185,"./group.js":53,"./keyboard-shortcuts.js":424,"./navigateTo.js":66,"./ng.js":25,"./notification.js":9,"./notifications.js":258,"./offline-listener.js":1186,"./organizationStatus.js":144,"./policy/DefaultPolicy.js":430,"./policy/index.js":57,"./query-result.js":439,"./query-snippet.js":423,"./query-string.js":1187,"./query.js":52,"./recordEvent.js":73,"./settingsMenu.js":79,"./user.js":51,"./utils.js":253,"./visualization.js":254,"./widget.js":100};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1182},function(e,t,n){"use strict";n.r(t),n.d(t,"AlertDialog",function(){return a}),n.d(t,"default",function(){return s});n(42);function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}o.$inject=["$uibModal"];var a=null,i={template:'\n<div class="modal-header">\n    <h4 class="modal-title" ng-if="$ctrl.title">{{$ctrl.title}}</h4>\n</div>\n<div class="modal-body">\n  <p ng-bind-html="$ctrl.message"></p>\n</div>\n<div class="modal-footer">\n  <button class="btn btn-default" ng-click="$ctrl.dismiss()">Cancel</button>\n  <button class="btn" ng-class="$ctrl.confirm.class" ng-click="$ctrl.close()" ng-if="$ctrl.confirm.show">{{$ctrl.confirm.title}}</button>\n</div>\n  ',bindings:{close:"&",dismiss:"&",resolve:"<"},controller:function(){this.title=this.resolve.title,this.message=this.resolve.message,this.confirm=r({},{class:"btn-sucess",show:!0,title:"OK"},this.resolve.confirm)}};function o(e){return{open:function(t,n,r){return e.open({component:"alertDialog",resolve:{title:()=>t,message:()=>n,confirm:()=>r}}).result}}}function s(e){e.component("alertDialog",i),e.factory("AlertDialog",o),e.run(["$injector",e=>{a=e.get("AlertDialog")}])}s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"AlertSubscription",function(){return r}),n.d(t,"default",function(){return i}),a.$inject=["$resource"];var r=null;function a(e){return e("api/alerts/:alertId/subscriptions/:subscriberId",{alertId:"@alert_id",subscriberId:"@id"})}function i(e){e.factory("AlertSubscription",a),e.run(["$injector",e=>{r=e.get("AlertSubscription")}])}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(73);function a(){this.record=r.default}function i(e){e.service("Events",a)}i.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return a});var r=n(9);function a(e){e.run(()=>{window.addEventListener("offline",()=>{r.default.warning("Please check your Internet connection.",null,{key:"connectionNotification",duration:null}),function(e){window.addEventListener("online",function t(){r.default.close(e),window.removeEventListener("online",t)})}("connectionNotification")})})}a.init=!0},function(e,t,n){"use strict";n.r(t);n(42),n(16),n(17),n(106),n(15),n(22),n(1188),n(205);var r=n(680),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var s=e=>{return o(e,1)[0].startsWith("p_")},l=e=>{var t=o(e,2),n=t[0],r=t[1];return[n.slice(2),r]},c=(e,t)=>{var n=o(t,2);return i(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n[0],n[1]))};t.default=(()=>Object.entries((e=>a.a.parse(e,{allowDots:!0,ignoreQueryPrefix:!0}))(location.search)).filter(s).map(l).reduce(c,{}))},,,,,function(e,t,n){var r={"./ColorPalette.js":112,"./EditVisualizationDialog.jsx":440,"./VisualizationName.jsx":1193,"./VisualizationRenderer.jsx":1194,"./box-plot/Editor.jsx":441,"./box-plot/index.js":1462,"./chart/getChartData.js":316,"./chart/index.js":1199,"./chart/plotly/index.js":1200,"./chart/plotly/utils.js":115,"./choropleth/index.js":1388,"./choropleth/utils.js":126,"./cohort/index.js":1389,"./counter/index.js":1392,"./funnel/index.js":1393,"./index.js":28,"./map/index.js":1395,"./pivot/Editor.jsx":443,"./pivot/index.js":1401,"./sankey/Editor.jsx":444,"./sankey/index.js":1463,"./sunburst/Editor.jsx":445,"./sunburst/index.js":1464,"./table/index.js":1407,"./word-cloud/Editor.jsx":446,"./word-cloud/index.js":1409};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1192},function(e,t,n){"use strict";n.r(t),n.d(t,"VisualizationName",function(){return i}),n.d(t,"default",function(){return o});var r=n(11),a=n(28);function i(e){var t=e.visualization,n=a.registeredVisualizations[t.type];return n&&t.name!==n.name?t.name:null}function o(e){e.component("visualizationName",Object(r.react2angular)(i))}i.propTypes={visualization:a.VisualizationType.isRequired},o.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"VisualizationRenderer",function(){return h}),n.d(t,"default",function(){return g});n(16),n(17),n(15),n(22),n(36);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(315),u=n(159),d=n(28);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return 0===e.length||0===t.length?e:Object(r.map)(e,e=>{var n=Object(r.find)(t,t=>t.name===e.name);return n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}({},e,{current:n.current}):e})}function h(e){var t=Object(c.a)(e.queryResult),n=p(Object(a.useState)(t.filters),2),r=n[0],o=n[1];Object(a.useEffect)(()=>{o(f(t.filters,e.filters))},[t]),Object(a.useEffect)(()=>{o(f(r,e.filters))},[e.filters]);var s=Object(a.useMemo)(()=>({columns:t.columns,rows:Object(u.filterData)(t.rows,r)}),[t,r]),l=e.showFilters,m=e.visualization,h=d.registeredVisualizations[m.type],g=h.Renderer,b=(0,h.getOptions)(m.options,t);return i.a.createElement(i.a.Fragment,null,l&&i.a.createElement(u.Filters,{filters:r,onChange:o}),i.a.createElement("div",null,i.a.createElement(g,{options:b,data:s,visualizationName:m.name})))}function g(e){e.component("visualizationRenderer",Object(l.react2angular)(h))}h.propTypes={visualization:d.VisualizationType.isRequired,queryResult:s.a.object.isRequired,filters:u.FiltersType,showFilters:s.a.bool},h.defaultProps={filters:[],showFilters:!0},g.init=!0},,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});n(36),n(22),n(61),n(223),n(15);var r=n(2),a=n(44),i=n(28),o=n(14),s=n(112),l=n(316),c=n(681),u=n.n(c),d=n(682),p=n.n(d);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={globalSeriesType:"column",sortX:!0,legend:{enabled:!0},yAxis:[{type:"linear"},{type:"linear",opposite:!0}],xAxis:{type:"-",labels:{enabled:!0}},error_y:{type:"data",visible:!0},series:{stacking:null,error_y:{type:"data",visible:!0}},seriesOptions:{},valuesOptions:{},columnMapping:{},direction:{type:"counterclockwise"},numberFormat:"0,0[.]00000",percentFormat:"0[.]00%",textFormat:""};var h={template:u.a,bindings:{data:"<",options:"<"},controller:["$scope",function(e){this.chartSeries=[];var t=()=>{this.data&&(this.chartSeries=Object(l.default)(this.data.rows,this.options))};e.$watch("$ctrl.data",t),e.$watch("$ctrl.options",t,!0)}]},g={template:p.a,bindings:{data:"<",options:"<",onOptionsChange:"<"},controller:["$scope",function(e){var t,n,a,i;this.currentTab="general",this.setCurrentTab=(e=>{this.currentTab=e}),this.colors=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){m(e,t,n[t])})}return e}({Automatic:null},s.default),this.stackingOptions={Disabled:null,Stack:"stack"},this.chartTypes={line:{name:"Line",icon:"line-chart"},column:{name:"Bar",icon:"bar-chart"},area:{name:"Area",icon:"area-chart"},pie:{name:"Pie",icon:"pie-chart"},scatter:{name:"Scatter",icon:"circle-o"},bubble:{name:"Bubble",icon:"circle-o"},heatmap:{name:"Heatmap",icon:"th"},box:{name:"Box",icon:"square-o"}},o.clientConfig.allowCustomJSVisualizations&&(this.chartTypes.custom={name:"Custom",icon:"code"}),this.directions=[{label:"Counterclockwise",value:"counterclockwise"},{label:"Clockwise",value:"clockwise"}],this.xAxisScales=[{label:"Auto Detect",value:"-"},{label:"Datetime",value:"datetime"},{label:"Linear",value:"linear"},{label:"Logarithmic",value:"logarithmic"},{label:"Category",value:"category"}],this.yAxisScales=["linear","logarithmic","datetime","category"],this.colorScheme=["Blackbody","Bluered","Blues","Earth","Electric","Greens","Greys","Hot","Jet","Picnic","Portland","Rainbow","RdBu","Reds","Viridis","YlGnBu","YlOrRd","Custom..."],this.chartTypeChanged=(()=>{Object(r.keys)(this.options.seriesOptions).forEach(e=>{this.options.seriesOptions[e].type=this.options.globalSeriesType}),this.options.showDataLabels="pie"===this.options.globalSeriesType,e.$applyAsync()}),this.showSizeColumnPicker=(()=>Object(r.some)(this.options.seriesOptions,e=>"bubble"===e.type)),this.showZColumnPicker=(()=>Object(r.some)(this.options.seriesOptions,e=>"heatmap"===e.type)),Object(r.isNil)(this.options.customCode)&&(this.options.customCode=Object(r.trim)("\n// Available variables are x, ys, element, and Plotly\n// Type console.log(x, ys); for more info about x and ys\n// To plot your graph call Plotly.plot(element, ...)\n// Plotly examples and docs: https://plot.ly/javascript/\n      ")),this.form=(t=this.options,n=this.data.columns,a={yAxisColumns:[],seriesList:Object(r.sortBy)(Object(r.keys)(t.seriesOptions),e=>t.seriesOptions[e].zIndex),valuesList:Object(r.keys)(t.valuesOptions)},i=Object(r.pick)(t.columnMapping,Object(r.map)(n,e=>e.name)),Object(r.each)(i,(e,t)=>{switch(e){case"x":a.xAxisColumn=t;break;case"y":a.yAxisColumns.push(t);break;case"series":a.groupby=t;break;case"yError":a.errorColumn=t;break;case"size":a.sizeColumn=t;break;case"zVal":a.zValColumn=t}}),a);var c=()=>{this.columns=this.data.columns,this.columnNames=Object(r.map)(this.columns,e=>e.name),this.columnNames.length>0&&Object(r.each)(Object(r.difference)(Object(r.keys)(this.options.columnMapping),this.columnNames),e=>{delete this.options.columnMapping[e]})},u=()=>{c();var e=this.data;e&&e.columns.length>0&&e.rows.length>0&&(this.form.yAxisColumns=Object(r.intersection)(this.form.yAxisColumns,this.columnNames),Object(r.includes)(this.columnNames,this.form.xAxisColumn)||(this.form.xAxisColumn=void 0),Object(r.includes)(this.columnNames,this.form.groupby)||(this.form.groupby=void 0))},d=()=>{var e=Object(l.default)(this.data.rows,this.options),t=Object(r.map)(e,e=>e.name),n=Object(r.keys)(this.options.seriesOptions);if(Object(r.each)(Object(r.difference)(t,n),e=>{this.options.seriesOptions[e]={type:this.options.globalSeriesType,yAxis:0},this.form.seriesList.push(e)}),Object(r.each)(Object(r.difference)(n,t),e=>{this.form.seriesList=Object(r.without)(this.form.seriesList,e),delete this.options.seriesOptions[e]}),"pie"===this.options.globalSeriesType){var a=new Set;Object(r.each)(e,e=>{Object(r.each)(e.data,e=>{a.add(e.x)})});var i=[];a.forEach(e=>i.push(e));var o=Object(r.difference)(i,Object(r.keys)(this.options.valuesOptions));Object(r.each)(o,e=>{this.options.valuesOptions[e]={},this.form.valuesList.push(e)}),Object(r.each)(Object(r.keys)(this.options.valuesOptions),e=>{-1===i.indexOf(e)&&delete this.options.valuesOptions[e]}),this.form.valuesList=Object(r.intersection)(this.form.valuesList,i)}},p=(e,t)=>{this.options.columnMapping[t]=e},f=e=>p("unused",e);c(),e.$watch("$ctrl.options.columnMapping",d,!0),e.$watch("$ctrl.data",()=>{u(),d()}),e.$watchCollection("$ctrl.form.seriesList",e=>{Object(r.each)(e,(e,t)=>{this.options.seriesOptions[e].zIndex=t,this.options.seriesOptions[e].index=0})}),e.$watchCollection("$ctrl.form.yAxisColumns",(e,t)=>{Object(r.each)(t,f),Object(r.each)(e,Object(r.partial)(p,"y"))}),e.$watch("$ctrl.form.xAxisColumn",(e,t)=>{void 0!==t&&f(t),void 0!==e&&p("x",e)}),e.$watch("$ctrl.form.errorColumn",(e,t)=>{void 0!==t&&f(t),void 0!==e&&p("yError",e)}),e.$watch("$ctrl.form.sizeColumn",(e,t)=>{void 0!==t&&f(t),void 0!==e&&p("size",e)}),e.$watch("$ctrl.form.zValColumn",(e,t)=>{void 0!==t&&f(t),void 0!==e&&p("zVal",e)}),e.$watch("$ctrl.form.groupby",(e,t)=>{void 0!==t&&f(t),void 0!==e&&p("series",e)}),e.$watch("$ctrl.options",e=>{this.onOptionsChange(e)},!0),this.templateHint='\n      <div class="p-b-5">Use special names to access additional properties:</div>\n      <div><code>{{ @@name }}</code> series name;</div>\n      <div><code>{{ @@x }}</code> x-value;</div>\n      <div><code>{{ @@y }}</code> y-value;</div>\n      <div><code>{{ @@yPercent }}</code> relative y-value;</div>\n      <div><code>{{ @@yError }}</code> y deviation;</div>\n      <div><code>{{ @@size }}</code> bubble size;</div>\n      <div class="p-t-5">Also, all query result columns can be referenced using\n        <code class="text-nowrap">{{ column_name }}</code> syntax.</div>\n    '}]};function b(e){e.component("chartRenderer",h),e.component("chartEditor",g),e.run(["$injector",e=>{Object(i.registerVisualization)({type:"CHART",name:"Chart",getOptions:e=>Object(r.merge)({},f,{showDataLabels:"pie"===e.globalSeriesType,dateTimeFormat:o.clientConfig.dateTimeFormat},e),Renderer:Object(a.angular2react)("chartRenderer",h,e),Editor:Object(a.angular2react)("chartEditor",g,e),defaultColumns:3,defaultRows:8,minColumns:1,minRows:5})}])}b.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(2),a=n(146),i=n.n(a),o=n(683),s=n.n(o),l=n(684),c=n.n(l),u=n(685),d=n.n(u),p=n(686),m=n.n(p),f=n(687),h=n.n(f),g=n(115);i.a.register([s.a,c.a,d.a,m.a,h.a]),i.a.setPlotConfig({modeBarButtonsToRemove:["sendDataToCloud"]});var b=()=>({restrict:"E",template:'<div class="plotly-chart-container" resize-event="handleResize()"></div>',scope:{options:"=",series:"="},link:function(e,t){var n=t[0].querySelector(".plotly-chart-container"),a={showLink:!1,displaylogo:!1},o={},s=[];function l(){["normal","percent"].indexOf(e.options.series.stacking)>=0&&(e.options.series.percentValues="percent"===e.options.series.stacking,e.options.series.stacking="stack"),s=Object(g.prepareData)(e.series,e.options),Object(g.updateData)(s,e.options),o=Object(g.prepareLayout)(n,e.series,e.options,s),i.a.newPlot(n,s,o,a).then(()=>{Object(g.updateLayout)(n,o,(e,t)=>i.a.relayout(e,t))}),n.on("plotly_restyle",t=>{Object(r.isArray)(t)&&Object(r.isObject)(t[0])&&t[0].visible&&(Object(g.updateData)(s,e.options),i.a.relayout(n,o))})}l(),e.$watch("series",(e,t)=>{e!==t&&l()}),e.$watch("options",(e,t)=>{e!==t&&l()},!0),e.handleResize=Object(r.debounce)(()=>{Object(g.updateLayout)(n,o,(e,t)=>i.a.relayout(e,t))},50)}}),y=e=>({restrict:"E",template:'<div class="plotly-chart-container" resize-event="handleResize()"></div>',scope:{series:"=",options:"="},link:function(t,n){if(e.allowCustomJSVisualizations){var a=()=>{i.a.newPlot(n[0].firstChild);try{new Function("x, ys, element, Plotly",t.options.customCode)(t.x,t.ys,n[0].children[0],i.a)}catch(e){t.options.enableConsoleLogs&&console.log("Error while executing custom graph: ".concat(e))}};t.handleResize=(()=>{a()}),t.$watch("[options.customCode, options.autoRedraw]",()=>{a()},!0),t.$watch("series",()=>{t.x=[],t.ys={},Object(r.each)(t.series,e=>{t.ys[e.name]=[],Object(r.each)(e.data,n=>{t.x.push(Object(g.normalizeValue)(n.x)),t.ys[e.name].push(Object(g.normalizeValue)(n.y))})}),a()},!0)}}});function v(e){e.directive("plotlyChart",b),e.directive("customPlotlyChart",y)}y.$inject=["clientConfig"],v.init=!0},,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"ChoroplethPalette",function(){return w}),n.d(t,"default",function(){return x});var r=n(2),a=n.n(r),i=n(88),o=n.n(i),s=(n(639),n(82)),l=(n(640),n(641),n(44)),c=n(28),u=n(112),d=n(126),p=n(688),m=n.n(p),f=n(689),h=n.n(f),g=n(690),b=n.n(g),y=n(691),v=n.n(y),w=a.a.extend({},d.AdditionalColors,u.default),O={mapType:"countries",countryCodeColumn:"",countryCodeType:"iso_a3",valueColumn:"",clusteringMode:"e",steps:5,valueFormat:"0,0.00",noValuePlaceholder:"N/A",colors:{min:w["Light Blue"],max:w["Dark Blue"],background:w.White,borders:w.White,noValue:w["Light Gray"]},legend:{visible:!0,position:"bottom-left",alignText:"right"},tooltip:{enabled:!0,template:"<b>{{ @@name }}</b>: {{ @@value }}"},popup:{enabled:!0,template:"Country: <b>{{ @@name_long }} ({{ @@iso_a2 }})</b>\n<br>\nValue: <b>{{ @@value }}</b>"}},j=a.a.bind(function(e,t){return this[t]||(this[t]=e.get(t).then(e=>e.data)),this[t]},{}),E={template:m.a,bindings:{data:"<",options:"<",onOptionsChange:"<"},controller:["$scope","$element","$sanitize","$http",function(e,t,n,r){var i=this,l=null,c=null,u=null,p=!1,m=()=>{p=!0},f=()=>{var t=c.getBounds();this.options.bounds=[[t._southWest.lat,t._southWest.lng],[t._northEast.lat,t._northEast.lng]],this.onOptionsChange&&this.onOptionsChange(this.options),e.$applyAsync(()=>{p=!1})},h=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableAnimation,t=void 0!==e&&e;if(!p&&c&&u){var n=i.options.bounds||u.getBounds(),r=t?{animate:!1,duration:0}:null;c.fitBounds(n,r)}},g=e=>{switch(e){case"countries":return b.a;case"subdiv_japan":return v.a;default:return""}},y=g(this.options.mapType),w=()=>{if(c&&(c.remove(),c=null,u=null),l){this.formatValue=Object(d.createNumberFormatter)(this.options.valueFormat,this.options.noValuePlaceholder);var e=Object(d.prepareData)(this.data.rows,this.options.countryCodeColumn,this.options.valueColumn),r=Object(d.createScale)(l.features,e,this.options),a=r.limits,i=r.colors,p=r.legend;this.legendItems=p;var g=(u=o.a.geoJson(l,{onEachFeature:(t,r)=>{var o=Object(d.getValueForFeature)(t,e,this.options.countryCodeType),l=this.formatValue(o),c=Object(d.prepareFeatureProperties)(t,l,e,this.options.countryCodeType),u=Object(d.getColorByValue)(o,a,i,this.options.colors.noValue);r.setStyle({color:this.options.colors.borders,weight:1,fillColor:u,fillOpacity:1}),this.options.tooltip.enabled&&r.bindTooltip(n(Object(s.b)(this.options.tooltip.template,c)),{sticky:!0}),this.options.popup.enabled&&r.bindPopup(n(Object(s.b)(this.options.popup.template,c))),r.on("mouseover",()=>{r.setStyle({weight:2,fillColor:Object(d.darkenColor)(u)})}),r.on("mouseout",()=>{r.setStyle({weight:1,fillColor:u})})}})).getBounds();(c=o.a.map(t[0].children[0].children[0],{center:g.getCenter(),zoom:1,zoomSnap:0,layers:[u],scrollWheelZoom:!1,maxBounds:g,maxBoundsViscosity:1,attributionControl:!1,fullscreenControl:!0})).on("focus",()=>{c.on("movestart",m),c.on("moveend",f)}),c.on("blur",()=>{c.off("movestart",m),c.off("moveend",f)}),h({disableAnimation:!0})}},O=()=>{j(r,y).then(e=>{a.a.isObject(e)&&(l=e,w())})};O(),e.handleResize=a.a.debounce(()=>{c&&(c.invalidateSize(!1),h({disableAnimation:!0}))},50),e.$watch("$ctrl.data",w),e.$watch(()=>a.a.omit(this.options,"bounds","mapType"),w,!0),e.$watch("$ctrl.options.bounds",h,!0),e.$watch("$ctrl.options.mapType",()=>{y=g(this.options.mapType),O()},!0)}]},S={template:h.a,bindings:{data:"<",options:"<",onOptionsChange:"<"},controller:["$scope",function(e){this.currentTab="general",this.setCurrentTab=(e=>{this.currentTab=e}),this.colors=w,this.mapTypes={countries:"Countries",subdiv_japan:"Japan/Prefectures"},this.clusteringModes={q:"quantile",e:"equidistant",k:"k-means"},this.legendPositions={"top-left":"top / left","top-right":"top / right","bottom-left":"bottom / left","bottom-right":"bottom / right"},this.countryCodeTypes={},this.templateHintFormatter=(e=>'\n      <div class="p-b-5">All query result columns can be referenced using <code>{{ column_name }}</code> syntax.</div>\n      <div class="p-b-5">Use special names to access additional properties:</div>\n      <div><code>{{ @@value }}</code> formatted value;</div>\n      '.concat(e,'\n      <div class="p-t-5">This syntax is applicable to tooltip and popup templates.</div>\n    '));var t=()=>{this.options.countryCodeType=Object(d.inferCountryCodeType)(this.options.mapType,this.data?this.data.rows:[],this.options.countryCodeColumn)||this.options.countryCodeType};e.$watch("$ctrl.options.mapType",()=>{var e="";switch(this.options.mapType){case"subdiv_japan":e="\n            <div><code>{{ @@name }}</code> Prefecture name in English;</div>\n            <div><code>{{ @@name_local }}</code> Prefecture name in Kanji;</div>\n            <div><code>{{ @@iso_3166_2 }}</code> five-letter ISO subdivision code (JP-xx);</div>\n          ",this.countryCodeTypes={name:"Name",name_local:"Name (local)",iso_3166_2:"ISO-3166-2"};break;case"countries":e="\n           <div><code>{{ @@name }}</code> short country name;</div>\n             <div><code>{{ @@name_long }}</code> full country name;</div>\n             <div><code>{{ @@abbrev }}</code> abbreviated country name;</div>\n             <div><code>{{ @@iso_a2 }}</code> two-letter ISO country code;</div>\n             <div><code>{{ @@iso_a3 }}</code> three-letter ISO country code;</div>\n             <div><code>{{ @@iso_n3 }}</code> three-digit ISO country code.</div>\n          ",this.countryCodeTypes={name:"Short name",name_long:"Full name",abbrev:"Abbreviated name",iso_a2:"ISO code (2 letters)",iso_a3:"ISO code (3 letters)",iso_n3:"ISO code (3 digits)"};break;default:this.countryCodeTypes={}}this.templateHint=this.templateHintFormatter(e)}),e.$watch("$ctrl.options.countryCodeColumn",t),e.$watch("$ctrl.data",t),e.$watch("$ctrl.options",e=>{this.onOptionsChange(e)},!0)}]};function x(e){e.component("choroplethRenderer",E),e.component("choroplethEditor",S),e.run(["$injector",e=>{Object(c.registerVisualization)({type:"CHOROPLETH",name:"Map (Choropleth)",getOptions:e=>a.a.merge({},O,e),Renderer:Object(l.angular2react)("choroplethRenderer",E,e),Editor:Object(l.angular2react)("choroplethEditor",S,e),defaultColumns:3,defaultRows:8,minColumns:2})}])}x.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});n(36),n(225),n(226),n(15),n(22);var r=n(2),a=n.n(r),i=n(12),o=n.n(i),s=(n(1390),n(1391),n(44)),l=n(28),c=n(692);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={weekly:"weeks",daily:"days",monthly:"months"},p={timeInterval:"daily",mode:"diagonal",dateColumn:"date",stageColumn:"day_number",totalColumn:"total",valueColumn:"value"};function m(e){var t={};return a.a.each(e,e=>{var n=e.date+0;t[n]=t[n]||{date:o()(e.date),total:parseInt(e.total,10),values:{}},t[n].values[e.stage]=parseInt(e.value,10)}),a.a.values(t)}function f(e,t){e=a.a.map(e,e=>({date:e[t.dateColumn],stage:parseInt(e[t.stageColumn],10),total:parseFloat(e[t.totalColumn]),value:parseFloat(e[t.valueColumn])}));var n,r=a.a.sortBy(e,e=>e.date+e.stage),i=o()(r[0].date).toDate();switch(t.mode){case"simple":n=function(e,t){var n=t.timeInterval,r=m(e),i=a.a.map(e,e=>e.stage),o=a.a.min(i),s=a.a.max(i),l=null,c=[];return a.a.each(r,e=>{if(null!==l)for(var t=Math.abs(l.diff(e.date,d[n]));t>1;)c.push([0]),t-=1;l=e.date;for(var r=[e.total],a=o;a<=s;a+=1)r.push(e.values[a]);c.push(r)}),c}(r,t);break;default:n=function(e,t){var n=t.timeInterval,r=m(e),i=a.a.min(a.a.map(e,e=>e.stage)),s=o()(a.a.last(r).date).diff(a.a.first(r).date,d[n]),l=i+s,c=null,u=[];return a.a.each(r,e=>{if(null!==c)for(var t=Math.abs(c.diff(e.date,d[n]));t>1;){for(var r=[0],a=i;a<=l;a+=1)r.push(e.values[a]||0);u.push(r),l-=1,t-=1}c=e.date;for(var o=[e.total],s=i;s<=l;s+=1)o.push(e.values[s]||0);l-=1,u.push(o)}),u}(r,t)}return{data:n,initialDate:i}}var h={bindings:{data:"<",options:"<"},template:"",replace:!1,controller:["$scope","$element",function(e,t){e.options=a.a.extend({},p,e.options);var n=()=>{if(t.empty(),0!==this.data.rows.length){var e=this.options,n=a.a.map(this.data.columns,e=>e.name);if(a.a.includes(n,e.dateColumn)&&a.a.includes(n,e.stageColumn)&&a.a.includes(n,e.totalColumn)&&a.a.includes(n,e.valueColumn)){var r=f(this.data.rows,e),i=r.data,o=r.initialDate;Cornelius.draw({initialDate:o,container:t[0],cohort:i,title:null,timeInterval:e.timeInterval,labels:{time:"Time",people:"Users",weekOf:"Week of"}})}}};e.$watch("$ctrl.data",n),e.$watch("$ctrl.options",n,!0)}]},g={template:n.n(c).a,bindings:{data:"<",options:"<",onOptionsChange:"<"},controller:["$scope",function(e){this.currentTab="columns",this.setCurrentTab=(e=>{this.currentTab=e}),e.$watch("$ctrl.options",e=>{this.onOptionsChange(e)},!0)}]};function b(e){e.component("cohortRenderer",h),e.component("cohortEditor",g),e.run(["$injector",e=>{Object(l.registerVisualization)({type:"COHORT",name:"Cohort",getOptions:e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e})({},p,e),Renderer:Object(s.angular2react)("cohortRenderer",h,e),Editor:Object(s.angular2react)("cohortEditor",g,e),autoHeight:!0,defaultRows:8})}])}b.init=!0},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});n(15),n(22),n(36);var r=n(693),a=n.n(r),i=n(2),o=n(44),s=n(28),l=n(694),c=n.n(l),u=n(695),d=n.n(u);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={counterLabel:"",counterColName:"counter",rowNumber:1,targetRowNumber:1,stringDecimal:0,stringDecChar:".",stringThouSep:","};function f(e,t){return e>=0?e-1:(Math.abs(e)>t&&(e%=t),t+e)}var h={template:c.a,bindings:{data:"<",options:"<",visualizationName:"<"},controller:["$scope","$element","$timeout",function(e,t,n){e.fontSize="1em",e.scale=1;var r=t[0].querySelector("counter"),o=t[0].querySelector("counter > div");e.handleResize=(()=>{var t=Math.min(r.offsetWidth/o.offsetWidth,r.offsetHeight/o.offsetHeight);e.scale=Math.floor(100*t)/100});var s=()=>{var t=this.options,r=this.data.rows;if(r.length>0){var o=f(t.rowNumber,r.length),s=f(t.targetRowNumber,r.length),l=t.counterColName,c=t.targetColName,u=t.counterLabel;if(e.counterLabel=u||this.visualizationName,t.countRow?e.counterValue=r.length:l&&(e.counterValue=r[o][l]),c?(e.targetValue=r[s][c],e.targetValue&&(e.delta=e.counterValue-e.targetValue,e.trendPositive=e.delta>=0)):e.targetValue=null,e.isNumber=Object(i.isNumber)(e.counterValue),e.isNumber){e.stringPrefix=t.stringPrefix,e.stringSuffix=t.stringSuffix;var d=t.stringDecimal,p=t.stringDecChar,m=t.stringThouSep;(d||p||m)&&(e.counterValue=a()(e.counterValue,d,p,m),e.isNumber=!1)}else e.stringPrefix=null,e.stringSuffix=null}n(()=>{e.handleResize()})};e.$watch("$ctrl.data",s),e.$watch("$ctrl.options",s,!0)}]},g={template:d.a,bindings:{data:"<",options:"<",visualizationName:"<",onOptionsChange:"<"},controller:["$scope",function(e){this.currentTab="general",this.changeTab=(e=>{this.currentTab=e}),this.isValueNumber=(()=>{var e=this.options,t=this.data.rows;if(t.length>0){var n=f(e.rowNumber,t.length),r=e.counterColName;e.countRow?this.counterValue=t.length:r&&(this.counterValue=t[n][r])}return Object(i.isNumber)(this.counterValue)}),e.$watch("$ctrl.options",e=>{this.onOptionsChange(e)},!0)}]};function b(e){e.component("counterRenderer",h),e.component("counterEditor",g),e.run(["$injector",e=>{Object(s.registerVisualization)({type:"COUNTER",name:"Counter",getOptions:e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e})({},m,e),Renderer:Object(o.angular2react)("counterRenderer",h,e),Editor:Object(o.angular2react)("counterEditor",g,e),defaultColumns:2,defaultRows:5})}])}b.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});n(15),n(568);var r=n(2),a=n(10),i=n.n(a),o=n(59),s=n.n(o),l=n(44),c=n(28),u=n(115),d=n(112),p=n(696),m=n.n(p),f=(n(1394),{stepCol:{colName:"",displayAs:"Steps"},valueCol:{colName:"",displayAs:"Value"},sortKeyCol:{colName:""},autoSort:!0});function h(e){return e<.01?"<0.01%":e>1e3?">1000%":e.toFixed(2)+"%"}function g(e,t){this.element=t,this.watches=[];var n=i.a.select(t),a=e.$ctrl.options;function o(e){!function(e){var t=i.a.max(e,e=>e.pctPrevious),r=n.append("table").attr("class","table table-condensed table-hover table-borderless"),o=r.append("thead").append("tr");o.append("th").text(a.stepCol.displayAs),o.append("th").attr("class","text-center").text(a.valueCol.displayAs),o.append("th").attr("class","text-center").text("% Max"),o.append("th").attr("class","text-center").text("% Previous");var s=r.append("tbody").selectAll("tr").data(e).enter().append("tr");s.append("td").attr("class","col-xs-3 step").attr("title",e=>e.step).text(e=>e.step);var l=s.append("td").attr("class","col-xs-5").append("div").attr("class","container");l.append("div").attr("class","bar centered").style("background-color",d.default.Cyan).style("width",e=>e.pctMax+"%"),l.append("div").attr("class","value").text(e=>e.value.toLocaleString()),s.append("td").attr("class","col-xs-2 text-center").text(e=>h(e.pctMax));var c=s.append("td").attr("class","col-xs-2").append("div").attr("class","container");c.append("div").attr("class","bar").style("background-color",d.default.Gray).style("opacity","0.2").style("width",e=>e.pctPrevious/t*100+"%"),c.append("div").attr("class","value").text(e=>h(e.pctPrevious))}(e)}function s(){if(n.selectAll("table").remove(),t=Object(r.map)(e.$ctrl.data.columns,e=>e.name),s=[a.stepCol.colName,a.valueCol.colName],a.autoSort||s.push(a.sortKeyCol.colName),!(Object(r.difference)(s,t).length>0)){var t,s,l=function(e){if(0===e.length)return[];var t,n=e.map(e=>({step:Object(u.normalizeValue)(e[a.stepCol.colName]),value:Number(e[a.valueCol.colName]),sortVal:a.autoSort?"":e[a.sortKeyCol.colName]}),[]);if(0!==(t=a.autoSort?Object(r.sortBy)(n,"value").reverse():Object(r.sortBy)(n,"sortVal"))[0].value&&Object(r.every)(t,e=>Object(r.isFinite)(e.value))){var o=i.a.max(n,e=>e.value);return t.forEach((e,n)=>{e.pctMax=e.value/o*100,e.pctPrevious=0===n?100:e.value/t[n-1].value*100}),t.slice(0,100)}}(e.$ctrl.data.rows);l.length>0&&o(l)}}s(),this.watches.push(e.$watch("$ctrl.data",s)),this.watches.push(e.$watch("$ctrl.options",s,!0))}g.prototype.remove=function(){this.watches.forEach(e=>{e()}),s.a.element(this.element).empty()};var b={template:'<div class="funnel-visualization-container" resize-event="handleResize()"></div>',bindings:{data:"<",options:"<"},controller:["$scope","$element",function(e,t){var n=t[0].querySelector(".funnel-visualization-container"),a=new g(e,n),i=()=>{a.remove(),a=new g(e,n)};e.handleResize=Object(r.debounce)(i,50),e.$watch("$ctrl.data",i),e.$watch("$ctrl.options",i,!0)}]},y={template:m.a,bindings:{data:"<",options:"<",onOptionsChange:"<"},controller:["$scope",function(e){e.$watch("$ctrl.options",e=>{this.onOptionsChange(e)},!0)}]};function v(e){e.component("funnelRenderer",b),e.component("funnelEditor",y),e.run(["$injector",e=>{Object(c.registerVisualization)({type:"FUNNEL",name:"Funnel",getOptions:e=>Object(r.merge)({},f,e),Renderer:Object(l.angular2react)("funnelRenderer",b,e),Editor:Object(l.angular2react)("funnelEditor",y,e),defaultRows:10})}])}v.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return P});n(61),n(104),n(105),n(16),n(17),n(15),n(22);var r=n(2),a=n.n(r),i=n(10),o=n.n(i),s=n(88),l=n.n(s),c=(n(1396),n(639),n(1397),n(1398),n(697)),u=n.n(c),d=n(698),p=n.n(d),m=n(699),f=n.n(m),h=(n(640),n(641),n(44)),g=n(28),b=n(700),y=n.n(b),v=n(701),w=n.n(v);function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}l.a.Icon.Default.mergeOptions({iconUrl:u.a,iconRetinaUrl:p.a,shadowUrl:f.a}),delete l.a.Icon.Default.prototype._getIconUrl;var j=[{name:"OpenStreetMap",url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"OpenStreetMap BW",url:"//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"},{name:"OpenStreetMap DE",url:"//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png"},{name:"OpenStreetMap FR",url:"//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png"},{name:"OpenStreetMap Hot",url:"//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"},{name:"Thunderforest",url:"//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png"},{name:"Thunderforest Spinal",url:"//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png"},{name:"OpenMapSurfer",url:"//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}"},{name:"Stamen Toner",url:"//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"},{name:"Stamen Toner Background",url:"//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png"},{name:"Stamen Toner Lite",url:"//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png"},{name:"OpenTopoMap",url:"//{s}.tile.opentopomap.org/{z}/{x}/{y}.png"}],E={classify:"none",clusterMarkers:!0};var S={template:y.a,bindings:{data:"<",options:"<",onOptionsChange:"<"},controller:["$scope","$element",function(e,t){var n=this,r=o.a.scale.category10(),i=l.a.map(t[0].children[0].children[0],{scrollWheelZoom:!1,fullscreenControl:!0}),s=l.a.control.layers().addTo(i),c={},u=l.a.tileLayer("//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(i),d=!1,p=()=>{d=!0},m=()=>{this.options.bounds=i.getBounds(),this.onOptionsChange&&this.onOptionsChange(this.options)},f=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).disableAnimation,t=void 0!==e&&e;if(!d){var r=n.options.bounds;if(r)i.fitBounds([[r._southWest.lat,r._southWest.lng],[r._northEast.lat,r._northEast.lng]]);else if(c){var o=a.a.flatten(a.a.map(a.a.values(c),e=>e.getLayers()));if(o.length>0){var s=new l.a.featureGroup(o),u=t?{animate:!1,duration:0}:null;i.fitBounds(s.getBounds(),u)}}}};i.on("focus",()=>{i.on("movestart",p),i.on("moveend",m)}),i.on("blur",()=>{i.off("movestart",p),i.off("moveend",m)});var h=(e,t)=>{var n,r=this.options.latColName||"lat",o=this.options.lonColName||"lon",u=this.options.classify;if(this.options.clusterMarkers){var d=this.options.groups[e].color,p={};u&&(p.iconCreateFunction=(e=>{var t=e.getChildCount(),n=" marker-cluster-";n+=t<10?"small":t<100?"medium":"large",n="";var r="color: white; background-color: ".concat(d,";");return l.a.divIcon({html:'<div style="'.concat(r,'"><span>').concat(t,"</span></div>"),className:"marker-cluster".concat(n),iconSize:new l.a.Point(40,40)})})),n=l.a.markerClusterGroup(p)}else n=l.a.layerGroup();a.a.each(t,t=>{var i,s=t[r],c=t[o];if(null!==s&&null!==c){if(u&&"none"!==u)i=function(e,t,n){var r={fillColor:n,fillOpacity:.9,stroke:!1};return l.a.circleMarker([e,t],r)}(s,c,this.options.groups[e].color);else i=((e,t)=>l.a.marker([e,t]))(s,c);i.bindPopup(function(e,t,n){var r=n[e],i=n[t],o='<ul style="list-style-type: none;padding-left: 0">';return o+="<li><strong>".concat(r,", ").concat(i,"</strong>"),a.a.each(n,(n,r)=>{r!==e&&r!==t&&(o+="<li>".concat(r,": ").concat(n,"</li>"))}),o}(r,o,t)),n.addLayer(i)}}),n.addTo(i),c[e]=n,s.addOverlay(n,e)},g=()=>{var e=this.options.classify;if(u.setUrl(this.options.mapTileUrl||"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),void 0===this.options.clusterMarkers&&(this.options.clusterMarkers=!0),this.data){var t;t=e&&"none"!==e?a.a.groupBy(this.data.rows,e):{All:this.data.rows};var n=a.a.keys(t),o=a.a.map(n,e=>this.options.groups&&this.options.groups[e]?this.options.groups[e]:{color:r(e)});this.options.groups=a.a.zipObject(n,o),a.a.each(c,e=>{(e=>{e&&(s.removeLayer(e),i.removeLayer(e))})(e)}),a.a.each(t,(e,t)=>{h(t,e)}),f({disableAnimation:!0})}};e.handleResize=(()=>{i&&(i.invalidateSize(!1),f({disableAnimation:!0}))}),e.$watch("$ctrl.data",g),e.$watch(()=>a.a.omit(this.options,"bounds"),g,!0),e.$watch("$ctrl.options.bounds",f,!0)}]},x={template:w.a,bindings:{data:"<",options:"<",onOptionsChange:"<"},controller:["$scope",function(e){this.currentTab="general",this.setCurrentTab=(e=>{this.currentTab=e}),this.mapTiles=j,e.$watch("$ctrl.data.columns",()=>{this.columns=this.data.columns,this.columnNames=a.a.map(this.columns,e=>e.name),this.classifyColumns=[].concat(O(this.columnNames),["none"])}),e.$watch("$ctrl.options",e=>{this.onOptionsChange(e)},!0)}]};function P(e){e.component("mapRenderer",S),e.component("mapEditor",x),e.run(["$injector",e=>{Object(g.registerVisualization)({type:"MAP",name:"Map (Markers)",getOptions:e=>a.a.merge({},E,e),Renderer:Object(h.angular2react)("mapRenderer",S,e),Editor:Object(h.angular2react)("mapEditor",x,e),defaultColumns:3,defaultRows:8,minColumns:2})}])}P.init=!0},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return f});n(15),n(22),n(36);var r=n(2),a=n(59),i=n.n(a),o=n(20),s=n.n(o),l=(n(1402),n(1403),n(44)),c=n(28),u=(n(1404),n(443));function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={controls:{enabled:!1}},m={template:'\n    <div class="pivot-table-renderer" ng-class="{\'hide-controls\': $ctrl.options.controls.enabled}"></div>\n  ',bindings:{data:"<",options:"<",onOptionsChange:"<"},controller:["$scope","$element",function(e,t){var n=()=>{var e=i.a.copy(this.data.rows),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}({renderers:s.a.pivotUtilities.renderers,onRefresh:e=>{this.onOptionsChange&&(e=Object(r.omit)(e,["aggregators","renderers","onRefresh","localeStrings"]),this.onOptionsChange(e))}},this.options);s()(".pivot-table-renderer",t).pivotUI(e,n,!0)};e.$watch("$ctrl.data",n),e.$watch(()=>Object(r.omit)(this.options,"controls"),n,!0)}]};function f(e){e.component("pivotTableRenderer",m),e.run(["$injector",e=>{Object(c.registerVisualization)({type:"PIVOT",name:"Pivot Table",getOptions:e=>Object(r.merge)({},p,e),Renderer:Object(l.angular2react)("pivotTableRenderer",m,e),Editor:u.default,defaultRows:10,defaultColumns:3,minColumns:2})}])}f.init=!0},,,function(e,t,n){},,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return S});n(15),n(22),n(36),n(225),n(226);var r=n(2),a=n.n(r),i=n(44),o=n(439),s=n(14),l=n(82),c=n(28),u=n(702),d=n.n(u),p=n(703),m=n.n(p);n(1408);function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=[5,10,15,20,25,50,100,150,200,250],b=[{name:"Text",value:"string"},{name:"Number",value:"number"},{name:"Date/Time",value:"datetime"},{name:"Boolean",value:"boolean"},{name:"JSON",value:"json"},{name:"Image",value:"image"},{name:"Link",value:"link"}],y={itemsPerPage:25};function v(e){return["integer","float","boolean","date","datetime"].indexOf(e)>=0?"right":"left"}function w(e){var t={date:s.clientConfig.dateFormat||"DD/MM/YYYY",datetime:s.clientConfig.dateTimeFormat||"DD/MM/YYYY HH:mm"},n={integer:s.clientConfig.integerFormat||"0,0",float:s.clientConfig.floatFormat||"0,0.00"};return{dateTimeFormat:t[e.type],numberFormat:n[e.type],booleanValues:s.clientConfig.booleanValues||["false","true"],imageUrlTemplate:"{{ @ }}",imageTitleTemplate:"{{ @ }}",imageWidth:"",imageHeight:"",linkUrlTemplate:"{{ @ }}",linkTextTemplate:"{{ @ }}",linkTitleTemplate:"{{ @ }}",linkOpenInNewTab:!0}}function O(e,t){var n=function(e){var t={integer:"number",float:"number",boolean:"boolean",date:"datetime",datetime:"datetime"};return a.a.map(e,(e,n)=>({name:e.name,type:e.type,displayAs:t[e.type]||"string",visible:!0,order:1e5+n,title:Object(o.getColumnCleanName)(e.name),allowSearch:!1,alignContent:v(e.type),allowHTML:!0,highlightLinks:!1}))}(e);return t=function(e,t){e=a.a.map(e,e=>e.name),t=a.a.map(t,e=>e.name),t=a.a.filter(t,t=>a.a.includes(e,t)),e=a.a.filter(e,e=>a.a.includes(t,e));for(var n=0;n<e.length;n+=1)if(t[n]!==e[n])return!0;return!1}(e,t)?a.a.fromPairs(a.a.map(t,(e,t)=>[e.name,a.a.extend({},e,{order:t})])):a.a.fromPairs(a.a.map(t,e=>[e.name,a.a.omit(e,"order")])),a.a.each(n,e=>a.a.extend(e,t[e.name])),a.a.sortBy(n,"order")}var j={bindings:{data:"<",options:"<"},template:d.a,controller:["$scope",function(e){var t=()=>{this.gridColumns=[],this.gridRows=[],this.data&&(this.gridColumns=function(e,t){e=a.a.fromPairs(a.a.map(e,e=>[e.name,e]));var n=a.a.map(t,t=>a.a.extend(w(t),t,e[t.name]));return n=a.a.map(n,e=>a.a.extend(e,{formatFunction:Object(l.a)(e)})),a.a.sortBy(a.a.filter(n,"visible"),"order")}(this.data.columns,this.options.columns),this.gridRows=this.data.rows)};t(),e.$watch("$ctrl.data",t),e.$watch("$ctrl.options",t,!0)}]},E={bindings:{data:"<",options:"<",onOptionsChange:"<"},template:m.a,controller:["$scope",function(e){this.allowedItemsPerPage=g,this.displayAsOptions=b,this.currentTab="columns",this.setCurrentTab=(e=>{this.currentTab=e}),e.$watch("$ctrl.options",e=>{this.onOptionsChange(e)},!0),this.templateHint="\n      All columns can be referenced using <code>{{ column_name }}</code> syntax.\n      Use <code>{{ @ }}</code> to reference current (this) column.\n      This syntax is applicable to URL, Title and Size options.\n    "}]};function S(e){e.component("gridRenderer",j),e.component("gridEditor",E),e.run(["$injector",e=>{Object(c.registerVisualization)({type:"TABLE",name:"Table",getOptions:(e,t)=>{var n=t.columns;return(e=f({},y,e)).columns=a.a.map(O(n,e.columns),e=>f({},w(e),e)),e},Renderer:Object(i.angular2react)("gridRenderer",j,e),Editor:Object(i.angular2react)("gridEditor",E,e),autoHeight:!0,defaultRows:14,defaultColumns:3,minColumns:2})}])}S.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return h});n(22),n(36),n(105),n(116),n(15);var r=n(10),a=n.n(r),i=n(704),o=n.n(i),s=n(2),l=n(44),c=n(28),u=n(446);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=10,m=100;var f={restrict:"E",bindings:{data:"<",options:"<"},controller:["$scope","$element",function(e,t){t[0].style.display="block";var n=()=>{var e=this.data.rows,n=this.options,r={};n.column&&(r=function(e,t){var n={};return e.forEach(e=>{e[t].toString().split(" ").forEach(e=>{e in n?n[e]+=1:n[e]=1})}),n}(e,n.column));var i=function(e){e=Object(s.values)(e);var t=Object(s.min)(e),n=Object(s.max)(e);if(t===n)return()=>(m+p)/2;var r=n-t,a=m-p;return e=>(e-t)/r*a+p}(r),l=Object(s.map)(r,(e,t)=>({text:t,size:i(e)})),c=a.a.scale.category20(),u=o()().size([500,500]).words(l).padding(5).rotate(()=>90*Math.floor(2*Math.random())).font("Impact").fontSize(e=>e.size);u.on("end",function(e){a.a.select(t[0]).selectAll("*").remove(),a.a.select(t[0]).append("svg").attr("width",u.size()[0]).attr("height",u.size()[1]).append("g").attr("transform","translate(".concat(u.size()[0]/2,",").concat(u.size()[1]/2,")")).selectAll("text").data(e).enter().append("text").style("font-size",e=>"".concat(e.size,"px")).style("font-family","Impact").style("fill",(e,t)=>c(t)).attr("text-anchor","middle").attr("transform",e=>"translate(".concat([e.x,e.y],")rotate(").concat(e.rotate,")")).text(e=>e.text)}),u.start()};e.$watch("$ctrl.data",n),e.$watch("$ctrl.options",n,!0)}]};function h(e){e.component("wordCloudRenderer",f),e.run(["$injector",e=>{Object(c.registerVisualization)({type:"WORD_CLOUD",name:"Word Cloud",getOptions:e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e})({},e),Renderer:Object(l.angular2react)("wordCloudRenderer",f,e),Editor:u.default,defaultRows:8})}])}h.init=!0},function(e,t,n){var r={"./admin/OutdatedQueries.jsx":1411,"./admin/SystemStatus.jsx":1412,"./admin/Tasks.jsx":1414,"./alert/index.js":1415,"./alerts/AlertsList.jsx":1416,"./dashboards/DashboardList.jsx":1417,"./dashboards/DashboardListEmptyState.jsx":447,"./dashboards/ShareDashboardDialog.jsx":448,"./dashboards/dashboard.js":1419,"./dashboards/public-dashboard-page.js":1420,"./data-sources/DataSourcesList.jsx":1421,"./data-sources/EditDataSource.jsx":1422,"./destinations/DestinationsList.jsx":1423,"./destinations/EditDestination.jsx":1424,"./groups/GroupDataSources.jsx":1425,"./groups/GroupMembers.jsx":1426,"./groups/GroupsList.jsx":1427,"./home/index.js":1428,"./queries-list/QueriesList.jsx":1429,"./queries-list/QueriesListEmptyState.jsx":449,"./queries/add-to-dashboard.js":1431,"./queries/source-view.js":1432,"./queries/view.js":1433,"./query-snippets/edit.js":1434,"./query-snippets/list.js":1457,"./settings/organization.js":1436,"./users/UserProfile.jsx":1437,"./users/UsersList.jsx":1439,"./users/index.js":1440};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1410},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return q});n(16),n(17),n(29);var r=n(2),a=n(0),i=n.n(a),o=n(11),s=n(211),l=n.n(s),c=n(81),u=n(77),d=n(111),p=n(252),m=n(155),f=n(186),h=n(50),g=n(78),b=n(65),y=n(46),v=n(54),w=n(23),O=n(25),j=n(52),E=n(73),S=n(49);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return r=this,a=(e=k(t)).call.apply(e,[this].concat(s)),n=!a||"object"!==x(a)&&"function"!=typeof a?$(r):a,C($(n),"listColumns",[{title:"ID",field:"id",width:"1%",align:"right",sorter:!0},w.Columns.custom.sortable((e,t)=>i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{className:"table-main-title",href:"queries/"+t.id},t.name),i.a.createElement(d.QueryTagsControl,{className:"d-block",tags:t.tags,isDraft:t.is_draft,isArchived:t.is_archived})),{title:"Name",field:"name",width:null}),w.Columns.avatar({field:"user",className:"p-l-0 p-r-0"},e=>"Created by ".concat(e)),w.Columns.dateTime.sortable({title:"Created At",field:"created_at"}),w.Columns.duration.sortable({title:"Runtime",field:"runtime"}),w.Columns.dateTime.sortable({title:"Last Executed At",field:"retrieved_at",orderByField:"executed_at"}),w.Columns.custom.sortable((e,t)=>i.a.createElement(p.SchedulePhrase,{schedule:t.schedule,isNew:t.isNew()}),{title:"Update Schedule",field:"schedule"})]),C($(n),"state",{autoUpdate:!0}),C($(n),"_updateTimer",null),C($(n),"update",function(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&n.state.autoUpdate&&n.props.controller.update(),n._updateTimer=setTimeout(n.update,6e4)}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,i.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){Object(E.default)("view","page","admin/queries/outdated"),this.update(!0)}},{key:"componentWillUnmount",value:function(){clearTimeout(this._updateTimer)}},{key:"render",value:function(){var e=this.props.controller;return i.a.createElement(f.default,{activeTab:e.params.currentPage},i.a.createElement(c.Row,{className:"m-15"},i.a.createElement(c.Col,{span:16},i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"auto-update-switch",className:"m-0"},"Auto update"),i.a.createElement(l.a,{id:"auto-update-switch",className:"m-l-10",checked:this.state.autoUpdate,onChange:e=>this.setState({autoUpdate:e})})),e.params.lastUpdatedAt&&i.a.createElement("div",{className:"m-t-5"},"Last updated:"," ",i.a.createElement(m.TimeAgo,{date:1e3*e.params.lastUpdatedAt}))),i.a.createElement(c.Col,{span:8},e.isLoaded&&!e.isEmpty&&i.a.createElement(v.PageSizeSelect,{options:e.pageSizeOptions,value:e.itemsPerPage,onChange:t=>e.updatePagination({itemsPerPage:t})}))),!e.isLoaded&&i.a.createElement(y.default,null),e.isLoaded&&e.isEmpty&&i.a.createElement("div",{className:"text-center p-15"},"There are no outdated queries."),e.isLoaded&&!e.isEmpty&&i.a.createElement("div",{className:"bg-white tiled table-responsive"},i.a.createElement(w.default,{items:e.pageItems,columns:this.listColumns,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),i.a.createElement(u.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:t=>e.updatePagination({page:t})})))}}])&&P(n.prototype,r),a&&P(n,a),t}();function q(e){return e.component("pageOutdatedQueries",Object(o.react2angular)(Object(h.wrap)(T,new g.ItemsSource({doRequest:function(e,t){return O.$http.get("/api/admin/queries/outdated").then(e=>{var n=e.data,r=n.queries,a=n.updated_at;return t.setCustomParams({lastUpdatedAt:parseFloat(a)}),r})},processResults:function(e){return Object(r.map)(e,e=>new j.Query(e))},isPlainList:!0}),new b.StateStorage({orderByField:"created_at",orderByReverse:!0})))),Object(S.b)([{path:"/admin/queries/outdated",title:"Outdated Queries",key:"outdated_queries"}],{template:'<page-outdated-queries on-error="handleError"></page-outdated-queries>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}C(T,"propTypes",{controller:h.ControllerType.isRequired}),q.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return j});n(16),n(17),n(29);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(186),u=n(212),d=n(25),p=n(73),m=n(86),f=n(49);n(1413);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function t(){var e,n,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=this,i=(e=b(t)).call.apply(e,[this].concat(s)),n=!i||"object"!==h(i)&&"function"!=typeof i?y(a):i,w(y(n),"state",{queues:[],manager:null,databaseMetrics:{},status:{}}),w(y(n),"_refreshTimer",null),w(y(n),"refresh",()=>{d.$http.get("/status.json").then(e=>{var t=e.data;n.setState({queues:t.manager.queues,manager:{startedAt:1e3*t.manager.started_at,lastRefreshAt:1e3*t.manager.last_refresh_at,outdatedQueriesCount:t.manager.outdated_queries_count},databaseMetrics:t.database_metrics.metrics||[],status:Object(r.omit)(t,["workers","manager","database_metrics"])})}).catch(e=>{e.status&&e.data&&(e=new m.a(e)),n.props.onError(e)}),n._refreshTimer=setTimeout(n.refresh,6e4)}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){Object(p.default)("view","page","admin/status"),this.refresh()}},{key:"componentWillUnmount",value:function(){clearTimeout(this._refreshTimer)}},{key:"render",value:function(){return i.a.createElement(c.default,{activeTab:"system_status"},i.a.createElement("div",{className:"system-status-page"},i.a.createElement("div",{className:"system-status-page-blocks"},i.a.createElement("div",{className:"system-status-page-block"},i.a.createElement(u.General,{info:this.state.status})),i.a.createElement("div",{className:"system-status-page-block"},i.a.createElement(u.Manager,{info:this.state.manager})),i.a.createElement("div",{className:"system-status-page-block"},i.a.createElement(u.Queues,{info:this.state.queues})),i.a.createElement("div",{className:"system-status-page-block"},i.a.createElement(u.DatabaseMetrics,{info:this.state.databaseMetrics})))))}}])&&g(n.prototype,a),o&&g(n,o),t}();function j(e){return e.component("pageSystemStatus",Object(l.react2angular)(O)),Object(f.b)([{path:"/admin/status",title:"System Status",key:"system_status"}],{template:'<page-system-status on-error="handleError"></page-system-status>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}w(O,"propTypes",{onError:s.a.func}),w(O,"defaultProps",{onError:()=>{}}),j.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return P});n(16),n(17),n(29);var r=n(2),a=n(12),i=n.n(a),o=n(0),s=n.n(o),l=n(11),c=n(156),u=n.n(c),d=n(125),p=n.n(d),m=n(81),f=n(186),h=n(160),g=n(25),b=n(73),y=n(49);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return a=this,o=(e=O(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==v(o)&&"function"!=typeof o?j(a):o,S(j(n),"state",{isLoading:!0,error:null,queues:[],queries:[],otherTasks:[],counters:{active:0,reserved:0,waiting:0}}),S(j(n),"processTasks",e=>{var t={},a=[],o=[],s={active:0,reserved:0,waiting:0};Object(r.each)(e,e=>{t[e.queue]=t[e.queue]||{name:e.queue,active:0,reserved:0,waiting:0},t[e.queue][e.state]+=1,e.enqueue_time&&(e.enqueue_time=i()(1e3*e.enqueue_time)),e.start_time&&(e.start_time=i()(1e3*e.start_time)),s[e.state]+=1,"redash.tasks.execute_query"===e.task_name?a.push(e):o.push(e)}),n.setState({isLoading:!1,queues:Object(r.values)(t),queries:a,otherTasks:o,counters:s})}),S(j(n),"handleError",e=>{n.setState({isLoading:!1,error:e})}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,s.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){Object(b.default)("view","page","admin/tasks"),g.$http.get("/api/admin/queries/tasks").then(e=>{var t=e.data;return this.processTasks(t.tasks)}).catch(e=>this.handleError(e))}},{key:"componentWillUnmount",value:function(){this.processTasks=(()=>{}),this.handleError=(()=>{})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.error,r=e.queues,a=e.queries,i=e.otherTasks,o=e.counters;return s.a.createElement(f.default,{activeTab:"tasks"},s.a.createElement("div",{className:"p-15"},n&&s.a.createElement(u.a,{type:"error",message:"Failed loading status. Please refresh."}),!n&&s.a.createElement(s.a.Fragment,null,s.a.createElement(m.Row,{gutter:15,className:"m-b-15"},s.a.createElement(m.Col,{span:8},s.a.createElement(h.CounterCard,{title:"Active Tasks",value:o.active,loading:t})),s.a.createElement(m.Col,{span:8},s.a.createElement(h.CounterCard,{title:"Reserved Tasks",value:o.reserved,loading:t})),s.a.createElement(m.Col,{span:8},s.a.createElement(h.CounterCard,{title:"Waiting Tasks",value:o.waiting,loading:t}))),s.a.createElement(p.a,{defaultActiveKey:"queues",animated:!1},s.a.createElement(p.a.TabPane,{key:"queues",tab:"Queues"},s.a.createElement(h.QueuesTable,{loading:t,items:r})),s.a.createElement(p.a.TabPane,{key:"queries",tab:"Queries"},s.a.createElement(h.QueriesTable,{loading:t,items:a})),s.a.createElement(p.a.TabPane,{key:"other",tab:"Other Tasks"},s.a.createElement(h.OtherTasksTable,{loading:t,items:i}))))))}}])&&w(n.prototype,a),o&&w(n,o),t}();function P(e){return e.component("pageTasks",Object(l.react2angular)(x)),Object(y.b)([{path:"/admin/queries/tasks",title:"Celery Status",key:"tasks"}],{template:"<page-tasks></page-tasks>"})}P.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});n(92);var r=n(2),a=n(9),i=n(705),o=n.n(i);function s(e,t,n,i,o,s,l,c){this.alertId=t.alertId,"new"===this.alertId&&l.record("view","page","alerts/new"),this.trustAsHtml=(e=>i.trustAsHtml(e)),this.onQuerySelected=(t=>{this.alert.query=t,this.selectedQuery=new s(t),this.selectedQuery.getQueryResultPromise().then(e=>{this.queryResult=e,this.alert.options.column=this.alert.options.column||e.getColumnNames()[0]}),e.$applyAsync()}),"new"===this.alertId?(this.alert=new c({options:{}}),this.canEdit=!0):this.alert=c.get({id:this.alertId},e=>{this.onQuerySelected(e.query),this.canEdit=o.canEdit(this.alert)}),this.ops=["greater than","less than","equals"],this.selectedQuery=null;var u=Object(r.template)("<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>");this.getDefaultName=(()=>{if(this.alert.query)return u(this.alert)}),this.searchQueries=(e=>{!e||e.length<3||s.query({q:e},e=>{this.queries=e.results})}),this.saveChanges=(()=>{void 0!==this.alert.name&&""!==this.alert.name||(this.alert.name=this.getDefaultName()),""!==this.alert.rearm&&0!==this.alert.rearm||(this.alert.rearm=null),this.alert.$save(e=>{a.default.success("Saved."),"new"===this.alertId&&n.path("/alerts/".concat(e.id)).replace()},()=>{a.default.error("Failed saving alert.")})}),this.delete=(()=>{this.alert.$delete(()=>{n.path("/alerts"),a.default.success("Alert deleted.")},()=>{a.default.error("Failed deleting alert.")})})}function l(e){return e.component("alertPage",{template:o.a,controller:s}),{"/alerts/:alertId":{template:"<alert-page></alert-page>",title:"Alerts"}}}s.$inject=["$scope","$routeParams","$location","$sce","currentUser","Query","Events","Alert"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return x});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(11),o=n(2),s=n(143),l=n(77),c=n(187),u=n(50),d=n(78),p=n(65),m=n(46),f=n(23),h=n(257),g=n(49);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E={unknown:"label-warning",ok:"label-success",triggered:"label-danger"},S=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return r=this,n=!(i=(e=v(t)).call.apply(e,[this].concat(l)))||"object"!==b(i)&&"function"!=typeof i?w(r):i,j(w(n),"listColumns",[f.Columns.custom.sortable((e,t)=>a.a.createElement("div",null,a.a.createElement("a",{className:"table-main-title",href:"alerts/"+t.id},t.name)),{title:"Name",field:"name"}),f.Columns.custom.sortable((e,t)=>a.a.createElement("div",null,a.a.createElement("span",{className:"label ".concat(E[t.state])},Object(o.toUpper)(t.state))),{title:"State",field:"state",width:"1%"}),f.Columns.timeAgo.sortable({title:"Last Updated At",field:"updated_at",className:"text-nowrap",width:"1%"}),f.Columns.avatar({field:"user",className:"p-l-0 p-r-0"},e=>"Created by ".concat(e)),f.Columns.dateTime.sortable({title:"Created At",field:"created_at",className:"text-nowrap",width:"1%"})]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.controller;return a.a.createElement("div",{className:"container"},a.a.createElement(s.PageHeader,{title:e.params.title}),a.a.createElement("div",{className:"m-l-15 m-r-15"},!e.isLoaded&&a.a.createElement(m.default,{className:""}),e.isLoaded&&e.isEmpty&&a.a.createElement(c.EmptyState,{icon:"fa fa-bell-o",illustration:"alert",description:"Get notified on certain events",helpLink:"https://redash.io/help/user-guide/alerts/",showAlertStep:!0}),e.isLoaded&&!e.isEmpty&&a.a.createElement("div",{className:"table-responsive bg-white tiled"},a.a.createElement(f.default,{items:e.pageItems,columns:this.listColumns,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),a.a.createElement(l.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:t=>e.updatePagination({page:t})}))))}}])&&y(n.prototype,r),i&&y(n,i),t}();function x(e){return e.component("pageAlertsList",Object(i.react2angular)(Object(u.wrap)(S,new d.ResourceItemsSource({isPlainList:!0,getRequest:function(){return{}},getResource:function(){return h.Alert.query.bind(h.Alert)},getItemProcessor:function(){return e=>new h.Alert(e)}}),new p.StateStorage({orderByField:"created_at",orderByReverse:!0,itemsPerPage:20})))),Object(g.b)([{path:"/alerts",title:"Alerts",key:"alerts"}],{reloadOnSearch:!1,template:'<page-alerts-list on-error="handleError"></page-alerts-list>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}j(S,"propTypes",{controller:u.ControllerType.isRequired}),x.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return P});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(11),o=n(143),s=n(77),l=n(111),c=n(50),u=n(78),d=n(65),p=n(46),m=n(54),f=n(23),h=n(62),g=n(145),b=n(49),y=n(447);n(1418);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return r=this,n=!(i=(e=O(t)).call.apply(e,[this].concat(s)))||"object"!==v(i)&&"function"!=typeof i?j(r):i,S(j(n),"sidebarMenu",[{key:"all",href:"dashboards",title:"All Dashboards"},{key:"favorites",href:"dashboards/favorites",title:"Favorites",icon:()=>a.a.createElement(m.MenuIcon,{icon:"fa fa-star"})}]),S(j(n),"listColumns",[f.Columns.favorites({className:"p-r-0"}),f.Columns.custom.sortable((e,t)=>a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"table-main-title",href:"dashboard/"+t.slug,"data-test":t.slug},t.name),a.a.createElement(l.DashboardTagsControl,{className:"d-block",tags:t.tags,isDraft:t.is_draft,isArchived:t.is_archived})),{title:"Name",field:"name",width:null}),f.Columns.avatar({field:"user",className:"p-l-0 p-r-0"},e=>"Created by ".concat(e)),f.Columns.dateTime.sortable({title:"Created At",field:"created_at",className:"text-nowrap",width:"1%"})]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.controller;return a.a.createElement("div",{className:"container"},a.a.createElement(o.PageHeader,{title:e.params.title}),a.a.createElement(h.default,{className:"m-l-15 m-r-15"},a.a.createElement(h.default.Sidebar,{className:"m-b-0"},a.a.createElement(m.SearchInput,{placeholder:"Search Dashboards...",value:e.searchTerm,onChange:e.updateSearch}),a.a.createElement(m.Menu,{items:this.sidebarMenu,selected:e.params.currentPage}),a.a.createElement(m.Tags,{url:"api/dashboards/tags",onChange:e.updateSelectedTags}),a.a.createElement(m.PageSizeSelect,{className:"m-b-10",options:e.pageSizeOptions,value:e.itemsPerPage,onChange:t=>e.updatePagination({itemsPerPage:t})})),a.a.createElement(h.default.Content,null,e.isLoaded?a.a.createElement("div",{"data-test":"DashboardLayoutContent"},e.isEmpty?a.a.createElement(y.default,{page:e.params.currentPage,searchTerm:e.searchTerm,selectedTags:e.selectedTags}):a.a.createElement("div",{className:"bg-white tiled table-responsive"},a.a.createElement(f.default,{items:e.pageItems,columns:this.listColumns,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),a.a.createElement(s.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:t=>e.updatePagination({page:t})}))):a.a.createElement(p.default,null))))}}])&&w(n.prototype,r),i&&w(n,i),t}();function P(e){return e.component("pageDashboardList",Object(i.react2angular)(Object(c.wrap)(x,new u.ResourceItemsSource({getResource:function(e){var t=e.params.currentPage;return{all:g.Dashboard.query.bind(g.Dashboard),favorites:g.Dashboard.favorites.bind(g.Dashboard)}[t]},getItemProcessor:function(){return e=>new g.Dashboard(e)}}),new d.UrlStateStorage({orderByField:"created_at",orderByReverse:!0})))),Object(b.b)([{path:"/dashboards",title:"Dashboards",key:"all"},{path:"/dashboards/favorites",title:"Favorite Dashboards",key:"favorites"}],{reloadOnSearch:!1,template:'<page-dashboard-list on-error="handleError"></page-dashboard-list>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}S(x,"propTypes",{controller:c.ControllerType.isRequired}),P.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});n(104),n(105),n(16),n(17),n(89),n(61),n(15),n(22),n(106),n(133),n(168);var r=n(2),a=n(86),i=n(185),o=n(57),s=n(100),l=n(83),c=n(145),u=n(41),d=n(706),p=n.n(d),m=n(448),f=n(428),h=n(248),g=n(9);n(642);function b(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e){return r.filter(e,e=>!r.isObject(e.$originalPosition)||function(e,t){var n=["col","row","sizeX","sizeY","autoHeight"];return e=r.pick(e,n),t=r.pick(t,n),!!r.find(n,n=>t[n]!==e[n])}(e.$originalPosition,e.options.position))}function v(e,t,n,d,p,v,w,O,j,E,S,x){var P=this;this.saveInProgress=!1,this.saveDelay=!1,this.saveDashboardLayout=(()=>{if(this.dashboard.canEdit()){this.isLayoutDirty=!0;var e=y(this.dashboard.widgets);return e.length?(this.saveDelay=!1,this.saveInProgress=!0,d.all(r.map(e,e=>e.save())).then(()=>{this.isLayoutDirty=!1,this.editBtnClickedWhileSaving&&(this.layoutEditing=!1)}).catch(()=>{g.default.error("Error saving changes.")}).finally(()=>{this.saveInProgress=!1,this.editBtnClickedWhileSaving=!1})):(this.isLayoutDirty=!1,void v.$applyAsync())}});var k=()=>(this.saveDelay=!0,r.debounce(()=>this.saveDashboardLayout(),2e3)());this.saveDelay=!1,this.editBtnClickedWhileSaving=!1,this.layoutEditing=!1,this.isFullscreen=!1,this.refreshRate=null,this.isGridDisabled=!1,this.updateGridItems=null,this.showPermissionsControl=S.showPermissionsControl,this.globalParameters=[],this.isDashboardOwner=!1,this.isLayoutDirty=!1,this.filters=[],this.refreshRates=S.dashboardRefreshIntervals.map(e=>({name:Object(u.durationHumanize)(e),rate:e,enabled:!0}));var $=o.policy.getDashboardRefreshIntervals();r.isArray($)&&r.each(this.refreshRates,e=>{e.enabled=$.indexOf(e.rate)>=0}),this.setRefreshRate=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];P.refreshRate=e,null!==e&&(t&&P.refreshDashboard(),P.autoRefresh())},this.extractGlobalParameters=(()=>{this.globalParameters=this.dashboard.getParametersDefs()}),v.$on("dashboard.update-parameters",()=>{this.extractGlobalParameters()});var _=(e,n)=>{var a=r.compact(this.dashboard.widgets.map(e=>(e.getParametersDefs(),e.load(n))));d.all(a).then(n=>{this.filters=Object(c.collectDashboardFilters)(e,n,t.search()),this.filtersOnChange=(e=>{this.filters=e,v.$applyAsync()})})},C=(e,t)=>{w.set(e.name),this.extractGlobalParameters(),_(e,t)};this.loadDashboard=r.throttle(n=>{j.get({slug:e.dashboardSlug},e=>{if(this.dashboard=e,this.isDashboardOwner=E.id===e.user.id||E.hasPermission("admin"),x.record("view","dashboard",e.id),C(e,n),!0===t.search().edit&&(t.search("edit",null),this.editLayout(!0)),void 0!==t.search().refresh&&null===this.refreshRate){var r=Math.max(30,parseFloat(t.search().refresh));this.setRefreshRate({name:Object(u.durationHumanize)(r),rate:r},!1)}},e=>{if(5!==Math.floor(e.status/100))throw new a.a(e);this.loadDashboard()})},1e3),this.loadDashboard(),this.refreshDashboard=(()=>{C(this.dashboard,!0)}),this.autoRefresh=(()=>{n(()=>{this.refreshDashboard()},1e3*this.refreshRate.rate).then(()=>this.autoRefresh())}),this.archiveDashboard=(()=>{var e='Are you sure you want to archive the "'.concat(this.dashboard.name,'" dashboard?');O.open("Archive Dashboard",e,{class:"btn-warning",title:"Archive"}).then(()=>{x.record("archive","dashboard",this.dashboard.id),this.dashboard.$delete()})}),this.showManagePermissionsModal=(()=>{p.open({component:"permissionsEditor",resolve:{aclUrl:{url:"api/dashboards/".concat(this.dashboard.id,"/acl")},owner:this.dashboard.user}})}),this.onLayoutChanged=(()=>{this.layoutEditing&&(this.isLayoutDirty=!0,k())}),this.editLayout=(e=>{this.layoutEditing=e}),this.loadTags=(()=>Object(i.default)("api/dashboards/tags").then(e=>r.map(e,e=>e.name)));var T=e=>{r.extend(this.dashboard,e),e=r.extend({},e,{slug:this.dashboard.id,version:this.dashboard.version}),j.save(e,t=>{r.extend(this.dashboard,r.pick(t,r.keys(e)))},e=>{403===e.status?g.default.error("Dashboard update failed","Permission Denied."):409===e.status&&g.default.error("It seems like the dashboard has been modified by another user. ","Please copy/backup your changes and reload this page.",{duration:null})})};this.saveName=(e=>{T({name:e})}),this.saveTags=(e=>{T({tags:e})}),this.updateDashboardFiltersState=(()=>{_(this.dashboard,!1),j.save({slug:this.dashboard.id,version:this.dashboard.version,dashboard_filters_enabled:this.dashboard.dashboard_filters_enabled},e=>{this.dashboard=e},e=>{403===e.status?g.default.error("Name update failed","Permission denied."):409===e.status&&g.default.error("It seems like the dashboard has been modified by another user. ","Please copy/backup your changes and reload this page.",{duration:null})})}),this.showAddTextboxDialog=(()=>{h.default.showModal({dashboard:this.dashboard,onConfirm:this.addTextbox})}),this.addTextbox=(e=>{var t=new s.Widget({dashboard_id:this.dashboard.id,options:{isHidden:!1,position:{}},text:e,visualization:null,visualization_id:null}),n=this.dashboard.calculateNewWidgetPosition(t);return t.options.position.col=n.col,t.options.position.row=n.row,t.save().then(()=>{this.dashboard.widgets.push(t),this.onWidgetAdded()})}),this.showAddWidgetDialog=(()=>{f.default.showModal({dashboard:this.dashboard,onConfirm:this.addWidget})}),this.addWidget=((e,t)=>{var n=new s.Widget({visualization_id:e&&e.id,dashboard_id:this.dashboard.id,options:{isHidden:!1,position:{},parameterMappings:Object(l.editableMappingsToParameterMappings)(t)},visualization:e,text:""}),r=this.dashboard.calculateNewWidgetPosition(n);n.options.position.col=r.col,n.options.position.row=r.row;var a=[n].concat(b(Object(l.synchronizeWidgetTitles)(n.options.parameterMappings,this.dashboard.widgets)));return Promise.all(a.map(e=>e.save())).then(()=>{this.dashboard.widgets.push(n),this.onWidgetAdded()})}),this.onWidgetAdded=(()=>{this.extractGlobalParameters(),_(this.dashboard,!1);var e=r.last(this.dashboard.widgets);if(r.isObject(e))return e.save();v.$applyAsync()}),this.removeWidget=(e=>{this.dashboard.widgets=this.dashboard.widgets.filter(t=>void 0!==t.id&&t.id!==e),this.extractGlobalParameters(),_(this.dashboard,!1),v.$applyAsync(),this.layoutEditing||n(()=>this.saveDashboardLayout(),50)}),this.toggleFullscreen=(()=>{this.isFullscreen=!this.isFullscreen,document.querySelector("body").classList.toggle("headless"),this.isFullscreen?t.search("fullscreen",!0):t.search("fullscreen",null)}),this.togglePublished=(()=>{x.record("toggle_published","dashboard",this.dashboard.id),this.dashboard.is_draft=!this.dashboard.is_draft,this.saveInProgress=!0,j.save({slug:this.dashboard.id,name:this.dashboard.name,is_draft:this.dashboard.is_draft},e=>{this.saveInProgress=!1,this.dashboard.version=e.version})}),r.has(t.search(),"fullscreen")&&this.toggleFullscreen(),this.openShareForm=(()=>{var e=r.some(this.dashboard.widgets,e=>!r.isEmpty(e.getQuery()&&e.getQuery().getParametersDefs()));m.default.showModal({dashboard:this.dashboard,hasQueryParams:e})})}function w(e){return e.component("dashboardPage",{template:p.a,controller:v}),{"/dashboard/:dashboardSlug":{template:"<dashboard-page></dashboard-page>",reloadOnSearch:!1}}}v.$inject=["$routeParams","$location","$timeout","$q","$uibModal","$scope","Title","AlertDialog","Dashboard","currentUser","clientConfig","Events"],w.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return u});n(42),n(106);var r=n(183),a=n.n(r),i=n(707),o=n.n(i);n(642);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){var n=t.current.params.token;return e.get("api/dashboards/public/".concat(n)).then(e=>e.data)}var c={template:o.a,bindings:{dashboard:"<"},controller:["$scope","$timeout","$location","$http","$route","dashboardGridOptions","Dashboard",function(e,t,n,r,i,o,c){this.dashboardGridOptions=s({},o,{resizable:{enabled:!1},draggable:{enabled:!1}}),this.logoUrl=a.a,this.public=!0,this.dashboard.widgets=c.prepareDashboardWidgets(this.dashboard.widgets);var u=Math.max(30,parseFloat(n.search().refresh));if(u){var d=()=>{l(r,i).then(n=>{this.dashboard=n,this.dashboard.widgets=c.prepareDashboardWidgets(this.dashboard.widgets),this.filters=[],this.filtersOnChange=(t=>{this.filters=t,e.$applyAsync()}),t(d,1e3*u)})};t(d,1e3*u)}}]};function u(e){function t(e,t){return l(e,t)}function n(e,t,n){var r=t.current.params.token;return n.setApiKey(r),n.loadConfig()}return n.$inject=["$http","$route","Auth"],t.$inject=["$http","$route"],e.component("publicDashboardPage",c),e.config(["$routeProvider",e=>{e.when("/public/dashboards/:token",{template:'<public-dashboard-page dashboard="$resolve.dashboard"></public-dashboard-page>',reloadOnSearch:!1,resolve:{dashboard:t,session:n}})}]),[]}u.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return P});n(16),n(17),n(29),n(15),n(22),n(61),n(89);var r=n(0),a=n.n(r),i=n(21),o=n.n(i),s=n(11),l=n(2),c=n(79),u=n(68),d=n(57),p=n(66),m=n(25),f=n(49),h=n(247),g=n(46),b=n(240),y=n(80);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=O(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==v(a)&&"function"!=typeof a?j(r):a,S(j(n),"state",{dataSourceTypes:[],dataSources:[],loading:!0}),S(j(n),"createDataSource",(e,t)=>{var r={options:{},type:e.type};return y.default.updateTargetWithValues(r,t),u.DataSource.save(r).$promise.then(e=>(n.setState({loading:!0}),u.DataSource.query(e=>n.setState({dataSources:e,loading:!1})),e)).catch(e=>(e instanceof Error||(e=new Error(Object(l.get)(e,"data.message","Failed saving."))),Promise.reject(e)))}),S(j(n),"showCreateSourceDialog",()=>{b.default.showModal({types:n.state.dataSourceTypes,sourceType:"Data Source",imageFolder:u.IMG_ROOT,helpTriggerPrefix:"DS_",onCreate:n.createDataSource}).result.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.success&&Object(p.default)("data_sources/".concat(e.data.id))})}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){Promise.all([u.DataSource.query().$promise,u.DataSource.types().$promise]).then(e=>this.setState({dataSources:e[0],dataSourceTypes:e[1],loading:!1},()=>{m.$route.current.locals.isNewDataSourcePage&&(d.policy.canCreateDataSource()?this.showCreateSourceDialog():Object(p.default)("/data_sources"))}))}},{key:"renderDataSources",value:function(){var e=this.state.dataSources,t=e.map(e=>({title:e.name,imgSrc:"".concat(u.IMG_ROOT,"/").concat(e.type,".png"),href:"data_sources/".concat(e.id)}));return Object(l.isEmpty)(e)?a.a.createElement("div",{className:"text-center"},"There are no data sources yet.",d.policy.isCreateDataSourceEnabled()&&a.a.createElement("div",{className:"m-t-5"},a.a.createElement("a",{className:"clickable",onClick:this.showCreateSourceDialog},"Click here")," to add one.")):a.a.createElement(h.default,{items:t})}},{key:"render",value:function(){var e={type:"primary",onClick:d.policy.isCreateDataSourceEnabled()?this.showCreateSourceDialog:null,disabled:!d.policy.isCreateDataSourceEnabled()};return a.a.createElement("div",null,a.a.createElement("div",{className:"m-b-15"},a.a.createElement(o.a,e,a.a.createElement("i",{className:"fa fa-plus m-r-5"}),"New Data Source")),this.state.loading?a.a.createElement(g.default,{className:""}):this.renderDataSources())}}])&&w(n.prototype,r),i&&w(n,i),t}();function P(e){return c.default.add({permission:"admin",title:"Data Sources",path:"data_sources",order:1}),e.component("pageDataSourcesList",Object(s.react2angular)(x)),Object(f.b)([{path:"/data_sources",title:"Data Sources",key:"data_sources"},{path:"/data_sources/new",title:"Data Sources",key:"data_sources",isNewDataSourcePage:!0}],{template:"<settings-screen><page-data-sources-list></page-data-sources-list></settings-screen>",controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}P.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return k});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(2),l=n(11),c=n(39),u=n.n(c),d=n(68),p=n(66),m=n(25),f=n(9),h=n(86),g=n(46),b=n(121),y=n(80),v=n(123);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=this,a=(e=j(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==w(a)&&"function"!=typeof a?E(r):a,x(E(n),"state",{dataSource:null,type:null,loading:!0}),x(E(n),"saveDataSource",(e,t,r)=>{var a=n.state.dataSource;y.default.updateTargetWithValues(a,e),a.$save(()=>t("Saved."),e=>{var t=Object(s.get)(e,"data.message","Failed saving.");r(t)})}),x(E(n),"deleteDataSource",e=>{var t=n.state.dataSource;u.a.confirm({title:"Delete Data Source",content:"Are you sure you want to delete this data source?",okText:"Delete",okType:"danger",onOk:()=>{t.$delete(()=>{f.default.success("Data source deleted successfully."),Object(p.default)("/data_sources",!0)},()=>{e()})},onCancel:e,maskClosable:!0,autoFocusButton:null})}),x(E(n),"testConnection",e=>{var t=n.state.dataSource;d.DataSource.test({id:t.id},t=>{t.ok?f.default.success("Success"):f.default.error("Connection Test Failed:",t.message,{duration:10}),e()},()=>{f.default.error("Connection Test Failed:","Unknown error occurred while performing connection test. Please try again later.",{duration:10}),e()})}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){d.DataSource.get({id:m.$route.current.params.dataSourceId}).$promise.then(e=>{var t=e.type;this.setState({dataSource:e}),d.DataSource.types(e=>this.setState({type:Object(s.find)(e,{type:t}),loading:!1}))}).catch(e=>{e.status&&e.data&&(e=new h.a(e)),this.props.onError(e)})}},{key:"renderForm",value:function(){var e=this.state,t=e.dataSource,n=e.type,r=y.default.getFields(n,t),i="DS_".concat(Object(s.toUpper)(n.type)),o={fields:r,type:n,actions:[{name:"Delete",type:"danger",callback:this.deleteDataSource},{name:"Test Connection",pullRight:!0,callback:this.testConnection,disableWhenDirty:!0}],onSubmit:this.saveDataSource,feedbackIcons:!0};return a.a.createElement("div",{className:"row","data-test":"DataSource"},a.a.createElement("div",{className:"text-right m-r-10"},v.TYPES[i]&&a.a.createElement(v.HelpTrigger,{className:"f-13",type:i},"Setup Instructions ",a.a.createElement("i",{className:"fa fa-question-circle"}))),a.a.createElement("div",{className:"text-center m-b-10"},a.a.createElement("img",{className:"p-5",src:"".concat(d.IMG_ROOT,"/").concat(n.type,".png"),alt:n.name,width:"64"}),a.a.createElement("h3",{className:"m-0"},n.name)),a.a.createElement("div",{className:"col-md-4 col-md-offset-4 m-b-10"},a.a.createElement(b.default,o)))}},{key:"render",value:function(){return this.state.loading?a.a.createElement(g.default,{className:""}):this.renderForm()}}])&&O(n.prototype,r),i&&O(n,i),t}();function k(e){return e.component("pageEditDataSource",Object(l.react2angular)(P)),{"/data_sources/:dataSourceId":{template:'<settings-screen><page-edit-data-source on-error="handleError"></page-edit-data-source></settings-screen>',title:"Data Sources",controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]}}}x(P,"propTypes",{onError:o.a.func}),x(P,"defaultProps",{onError:()=>{}}),k.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return P});n(16),n(17),n(29),n(15),n(22),n(61),n(89);var r=n(0),a=n.n(r),i=n(21),o=n.n(i),s=n(11),l=n(2),c=n(79),u=n(114),d=n(57),p=n(66),m=n(25),f=n(49),h=n(247),g=n(46),b=n(240),y=n(80);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=this,a=(e=O(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==v(a)&&"function"!=typeof a?j(r):a,S(j(n),"state",{destinationTypes:[],destinations:[],loading:!0}),S(j(n),"createDestination",(e,t)=>{var r={options:{},type:e.type};return y.default.updateTargetWithValues(r,t),u.Destination.save(r).$promise.then(e=>(n.setState({loading:!0}),u.Destination.query(e=>n.setState({destinations:e,loading:!1})),e)).catch(e=>(e instanceof Error||(e=new Error(Object(l.get)(e,"data.message","Failed saving."))),Promise.reject(e)))}),S(j(n),"showCreateSourceDialog",()=>{b.default.showModal({types:n.state.destinationTypes,sourceType:"Alert Destination",imageFolder:u.IMG_ROOT,onCreate:n.createDestination}).result.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.success&&Object(p.default)("destinations/".concat(e.data.id))})}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){Promise.all([u.Destination.query().$promise,u.Destination.types().$promise]).then(e=>this.setState({destinations:e[0],destinationTypes:e[1],loading:!1},()=>{m.$route.current.locals.isNewDestinationPage&&(d.policy.canCreateDestination()?this.showCreateSourceDialog():Object(p.default)("/destinations"))}))}},{key:"renderDestinations",value:function(){var e=this.state.destinations,t=e.map(e=>({title:e.name,imgSrc:"".concat(u.IMG_ROOT,"/").concat(e.type,".png"),href:"destinations/".concat(e.id)}));return Object(l.isEmpty)(e)?a.a.createElement("div",{className:"text-center"},"There are no alert destinations yet.",d.policy.isCreateDestinationEnabled()&&a.a.createElement("div",{className:"m-t-5"},a.a.createElement("a",{className:"clickable",onClick:this.showCreateSourceDialog},"Click here")," to add one.")):a.a.createElement(h.default,{items:t})}},{key:"render",value:function(){var e={type:"primary",onClick:d.policy.isCreateDestinationEnabled()?this.showCreateSourceDialog:null,disabled:!d.policy.isCreateDestinationEnabled()};return a.a.createElement("div",null,a.a.createElement("div",{className:"m-b-15"},a.a.createElement(o.a,e,a.a.createElement("i",{className:"fa fa-plus m-r-5"}),"New Alert Destination")),this.state.loading?a.a.createElement(g.default,{className:""}):this.renderDestinations())}}])&&w(n.prototype,r),i&&w(n,i),t}();function P(e){return c.default.add({permission:"admin",title:"Alert Destinations",path:"destinations",order:4}),e.component("pageDestinationsList",Object(s.react2angular)(x)),Object(f.b)([{path:"/destinations",title:"Alert Destinations",key:"destinations"},{path:"/destinations/new",title:"Alert Destinations",key:"destinations",isNewDestinationPage:!0}],{template:"<settings-screen><page-destinations-list></page-destinations-list></settings-screen>",controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}P.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return P});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(2),l=n(11),c=n(39),u=n.n(c),d=n(114),p=n(66),m=n(25),f=n(9),h=n(86),g=n(46),b=n(121),y=n(80);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=this,a=(e=O(t)).call.apply(e,[this].concat(o)),n=!a||"object"!==v(a)&&"function"!=typeof a?j(r):a,S(j(n),"state",{destination:null,type:null,loading:!0}),S(j(n),"saveDestination",(e,t,r)=>{var a=n.state.destination;y.default.updateTargetWithValues(a,e),a.$save(()=>t("Saved."),e=>{var t=Object(s.get)(e,"data.message","Failed saving.");r(t)})}),S(j(n),"deleteDestination",e=>{var t=n.state.destination;u.a.confirm({title:"Delete Alert Destination",content:"Are you sure you want to delete this alert destination?",okText:"Delete",okType:"danger",onOk:()=>{t.$delete(()=>{f.default.success("Alert destination deleted successfully."),Object(p.default)("/destinations",!0)},()=>{e()})},onCancel:e,maskClosable:!0,autoFocusButton:null})}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){d.Destination.get({id:m.$route.current.params.destinationId}).$promise.then(e=>{var t=e.type;this.setState({destination:e}),d.Destination.types(e=>this.setState({type:Object(s.find)(e,{type:t}),loading:!1}))}).catch(e=>{e.status&&e.data&&(e=new h.a(e)),this.props.onError(e)})}},{key:"renderForm",value:function(){var e=this.state,t=e.destination,n=e.type,r={fields:y.default.getFields(n,t),type:n,actions:[{name:"Delete",type:"danger",callback:this.deleteDestination}],onSubmit:this.saveDestination,feedbackIcons:!0};return a.a.createElement("div",{className:"row","data-test":"Destination"},a.a.createElement("div",{className:"text-center m-b-10"},a.a.createElement("img",{className:"p-5",src:"".concat(d.IMG_ROOT,"/").concat(n.type,".png"),alt:n.name,width:"64"}),a.a.createElement("h3",{className:"m-0"},n.name)),a.a.createElement("div",{className:"col-md-4 col-md-offset-4 m-b-10"},a.a.createElement(b.default,r)))}},{key:"render",value:function(){return this.state.loading?a.a.createElement(g.default,{className:""}):this.renderForm()}}])&&w(n.prototype,r),i&&w(n,i),t}();function P(e){return e.component("pageEditDestination",Object(l.react2angular)(x)),{"/destinations/:destinationId":{template:'<settings-screen><page-edit-destination on-error="handleError"></page-edit-destination></settings-screen>',title:"Alert Destinations",controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]}}}S(x,"propTypes",{onError:o.a.func}),S(x,"defaultProps",{onError:()=>{}}),P.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return F});n(16),n(17),n(29),n(89),n(15),n(22),n(61),n(225),n(226),n(133);var r=n(2),a=n(0),i=n.n(a),o=n(11),s=n(21),l=n.n(s),c=n(209),u=n.n(c),d=n(124),p=n.n(d),m=n(27),f=n.n(m),h=n(77),g=n(50),b=n(78),y=n(65),v=n(46),w=n(23),O=n(246),j=n(107),E=n(251),S=n(191),x=n(250),P=n(62),k=n(9),$=n(14),_=n(53),C=n(68),T=n(66),q=n(49);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,c=new Array(s),d=0;d<s;d++)c[d]=arguments[d];return a=this,o=(e=A(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==R(o)&&"function"!=typeof o?N(a):o,z(N(n),"groupId",parseInt(n.props.controller.params.groupId,10)),z(N(n),"group",null),z(N(n),"sidebarMenu",[{key:"users",href:"groups/".concat(n.groupId),title:"Members"},{key:"datasources",href:"groups/".concat(n.groupId,"/data_sources"),title:"Data Sources",isAvailable:()=>$.currentUser.isAdmin}]),z(N(n),"listColumns",[w.Columns.custom((e,t)=>i.a.createElement(j.DataSourcePreviewCard,{dataSource:t,withLink:!0}),{title:"Name",field:"name",width:null}),w.Columns.custom((e,t)=>{var r=i.a.createElement(p.a,{selectedKeys:[t.view_only?"viewonly":"full"],onClick:e=>n.setDataSourcePermissions(t,e.key)},i.a.createElement(p.a.Item,{key:"full"},"Full Access"),i.a.createElement(p.a.Item,{key:"viewonly"},"View Only"));return i.a.createElement(u.a,{trigger:["click"],overlay:r},i.a.createElement(l.a,{className:"w-100"},t.view_only?"View Only":"Full Access",i.a.createElement(f.a,{type:"down"})))},{width:"1%",className:"p-r-0",isAvailable:()=>$.currentUser.isAdmin}),w.Columns.custom((e,t)=>i.a.createElement(l.a,{className:"w-100",type:"danger",onClick:()=>n.removeGroupDataSource(t)},"Remove"),{width:"1%",isAvailable:()=>$.currentUser.isAdmin})]),z(N(n),"removeGroupDataSource",e=>{_.Group.removeDataSource({id:n.groupId,dataSourceId:e.id}).$promise.then(()=>{n.props.controller.updatePagination({page:1}),n.props.controller.update()}).catch(()=>{k.default.error("Failed to remove data source from group.")})}),z(N(n),"setDataSourcePermissions",(e,t)=>{var r="full"!==t;_.Group.updateDataSource({id:n.groupId,dataSourceId:e.id},{view_only:r}).$promise.then(()=>{e.view_only=r,n.forceUpdate()}).catch(()=>{k.default.error("Failed change data source permissions.")})}),z(N(n),"addDataSources",()=>{var e=C.DataSource.query().$promise,t=Object(r.map)(n.props.controller.allItems,e=>e.id);O.default.showModal({dialogTitle:"Add Data Sources",inputPlaceholder:"Search data sources...",selectedItemsTitle:"New Data Sources",searchItems:t=>(t=t.toLowerCase(),e.then(e=>Object(r.filter)(e,e=>e.name.toLowerCase().includes(t)))),renderItem:(e,n)=>{var a=n.isSelected,o=Object(r.includes)(t,e.id);return{content:i.a.createElement(j.DataSourcePreviewCard,{dataSource:e},i.a.createElement(S.default,{isSelected:a,alreadyInGroup:o})),isDisabled:o,className:a||o?"selected":""}},renderStagedItem:(e,t)=>{var n=t.isSelected;return{content:i.a.createElement(j.DataSourcePreviewCard,{dataSource:e},i.a.createElement(S.default,{isSelected:n,isStaged:!0}))}},save:e=>{var t=Object(r.map)(e,e=>_.Group.addDataSource({id:n.groupId,data_source_id:e.id}).$promise);return Promise.all(t)}}).result.finally(()=>{n.props.controller.update()})}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){_.Group.get({id:this.groupId}).$promise.then(e=>{this.group=e,this.forceUpdate()}).catch(e=>{this.props.controller.handleError(e)})}},{key:"render",value:function(){var e=this.props.controller;return i.a.createElement("div",{"data-test":"Group"},i.a.createElement(E.default,{className:"d-block m-t-0 m-b-15",group:this.group,onChange:()=>this.forceUpdate()}),i.a.createElement(P.default,null,i.a.createElement(P.default.Sidebar,null,i.a.createElement(x.default,{controller:e,group:this.group,items:this.sidebarMenu,canAddDataSources:$.currentUser.isAdmin,onAddDataSourcesClick:this.addDataSources,onGroupDeleted:()=>Object(T.default)("/groups",!0)})),i.a.createElement(P.default.Content,null,!e.isLoaded&&i.a.createElement(v.default,{className:""}),e.isLoaded&&e.isEmpty&&i.a.createElement("div",{className:"text-center"},"There are no data sources in this group yet.",$.currentUser.isAdmin&&i.a.createElement("div",{className:"m-t-5"},i.a.createElement("a",{href:"javascript:void(0)",onClick:this.addDataSources},"Click here")," "," to add data sources.")),e.isLoaded&&!e.isEmpty&&i.a.createElement("div",{className:"table-responsive"},i.a.createElement(w.default,{items:e.pageItems,columns:this.listColumns,showHeader:!1,context:this.actions,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),i.a.createElement(h.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:t=>e.updatePagination({page:t})})))))}}])&&D(n.prototype,a),o&&D(n,o),t}();function F(e){return e.component("pageGroupDataSources",Object(o.react2angular)(Object(g.wrap)(M,new b.ResourceItemsSource({isPlainList:!0,getRequest:function(e,t){return{id:t.params.groupId}},getResource:function(){return _.Group.dataSources.bind(_.Group)},getItemProcessor:function(){return e=>new C.DataSource(e)}}),new y.StateStorage({orderByField:"name"})))),Object(q.b)([{path:"/groups/:groupId/data_sources",title:"Group Data Sources",key:"datasources"}],{reloadOnSearch:!1,template:'<settings-screen><page-group-data-sources on-error="handleError"></page-group-data-sources></settings-screen>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}z(M,"propTypes",{controller:g.ControllerType.isRequired}),F.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return D});n(16),n(17),n(29),n(89),n(15),n(22),n(61),n(133);var r=n(2),a=n(0),i=n.n(a),o=n(11),s=n(21),l=n.n(s),c=n(77),u=n(50),d=n(78),p=n(65),m=n(46),f=n(23),h=n(246),g=n(107),b=n(251),y=n(191),v=n(250),w=n(62),O=n(9),j=n(14),E=n(53),S=n(51),x=n(66),P=n(49);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return a=this,o=(e=_(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==k(o)&&"function"!=typeof o?C(a):o,q(C(n),"groupId",parseInt(n.props.controller.params.groupId,10)),q(C(n),"group",null),q(C(n),"sidebarMenu",[{key:"users",href:"groups/".concat(n.groupId),title:"Members"},{key:"datasources",href:"groups/".concat(n.groupId,"/data_sources"),title:"Data Sources",isAvailable:()=>j.currentUser.isAdmin}]),q(C(n),"listColumns",[f.Columns.custom((e,t)=>i.a.createElement(g.UserPreviewCard,{user:t,withLink:!0}),{title:"Name",field:"name",width:null}),f.Columns.custom((e,t)=>n.group?"builtin"===n.group.type&&j.currentUser.id===t.id?null:i.a.createElement(l.a,{className:"w-100",type:"danger",onClick:e=>n.removeGroupMember(e,t)},"Remove"):null,{width:"1%",isAvailable:()=>j.currentUser.isAdmin})]),q(C(n),"removeGroupMember",(e,t)=>E.Group.removeMember({id:n.groupId,userId:t.id}).$promise.then(()=>{n.props.controller.updatePagination({page:1}),n.props.controller.update()}).catch(()=>{O.default.error("Failed to remove member from group.")})),q(C(n),"addMembers",()=>{var e=Object(r.map)(n.props.controller.allItems,e=>e.id);h.default.showModal({dialogTitle:"Add Members",inputPlaceholder:"Search users...",selectedItemsTitle:"New Members",searchItems:e=>S.User.query({q:e}).$promise.then(e=>{return e.results}),renderItem:(t,n)=>{var a=n.isSelected,o=Object(r.includes)(e,t.id);return{content:i.a.createElement(g.UserPreviewCard,{user:t},i.a.createElement(y.default,{isSelected:a,alreadyInGroup:o})),isDisabled:o,className:a||o?"selected":""}},renderStagedItem:(e,t)=>{var n=t.isSelected;return{content:i.a.createElement(g.UserPreviewCard,{user:e},i.a.createElement(y.default,{isSelected:n,isStaged:!0}))}},save:e=>{var t=Object(r.map)(e,e=>E.Group.addMember({id:n.groupId},{user_id:e.id}).$promise);return Promise.all(t)}}).result.finally(()=>{n.props.controller.update()})}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){E.Group.get({id:this.groupId}).$promise.then(e=>{this.group=e,this.forceUpdate()}).catch(e=>{this.props.controller.handleError(e)})}},{key:"render",value:function(){var e=this.props.controller;return i.a.createElement("div",{"data-test":"Group"},i.a.createElement(b.default,{className:"d-block m-t-0 m-b-15",group:this.group,onChange:()=>this.forceUpdate()}),i.a.createElement(w.default,null,i.a.createElement(w.default.Sidebar,null,i.a.createElement(v.default,{controller:e,group:this.group,items:this.sidebarMenu,canAddMembers:j.currentUser.isAdmin,onAddMembersClick:this.addMembers,onGroupDeleted:()=>Object(x.default)("/groups",!0)})),i.a.createElement(w.default.Content,null,!e.isLoaded&&i.a.createElement(m.default,{className:""}),e.isLoaded&&e.isEmpty&&i.a.createElement("div",{className:"text-center"},"There are no members in this group yet.",j.currentUser.isAdmin&&i.a.createElement("div",{className:"m-t-5"},i.a.createElement("a",{href:"javascript:void(0)",onClick:this.addMembers},"Click here")," "," to add members.")),e.isLoaded&&!e.isEmpty&&i.a.createElement("div",{className:"table-responsive"},i.a.createElement(f.default,{items:e.pageItems,columns:this.listColumns,showHeader:!1,context:this.actions,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),i.a.createElement(c.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:t=>e.updatePagination({page:t})})))))}}])&&$(n.prototype,a),o&&$(n,o),t}();function D(e){return e.component("pageGroupMembers",Object(o.react2angular)(Object(u.wrap)(R,new d.ResourceItemsSource({isPlainList:!0,getRequest:function(e,t){return{id:t.params.groupId}},getResource:function(){return E.Group.members.bind(E.Group)},getItemProcessor:function(){return e=>new S.User(e)}}),new p.StateStorage({orderByField:"name"})))),Object(P.b)([{path:"/groups/:groupId",title:"Group Members",key:"users"}],{reloadOnSearch:!1,template:'<settings-screen><page-group-members on-error="handleError"></page-group-members></settings-screen>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}q(R,"propTypes",{controller:u.ControllerType.isRequired}),D.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return _});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(11),o=n(21),s=n.n(o),l=n(77),c=n(50),u=n(78),d=n(65),p=n(46),m=n(141),f=n(23),h=n(432),g=n(249),b=n(53),y=n(79),v=n(14),w=n(66),O=n(49);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return r=this,i=(e=S(t)).call.apply(e,[this].concat(l)),n=!i||"object"!==j(i)&&"function"!=typeof i?x(r):i,k(x(n),"listColumns",[f.Columns.custom((e,t)=>a.a.createElement("div",null,a.a.createElement("a",{href:"groups/"+t.id},t.name),"builtin"===t.type&&a.a.createElement("span",{className:"label label-default m-l-10"},"built-in")),{field:"name",width:null}),f.Columns.custom((e,t)=>a.a.createElement(s.a.Group,null,a.a.createElement(s.a,{href:"groups/".concat(t.id)},"Members"),v.currentUser.isAdmin&&a.a.createElement(s.a,{href:"groups/".concat(t.id,"/data_sources")},"Data Sources")),{width:"1%",className:"text-nowrap"}),f.Columns.custom((e,t)=>{var r="builtin"!==t.type;return a.a.createElement(g.default,{className:"w-100",disabled:!r,group:t,title:r?null:"Cannot delete built-in group",onClick:()=>n.onGroupDeleted()},"Delete")},{width:"1%",className:"text-nowrap p-l-0",isAvailable:()=>v.currentUser.isAdmin})]),k(x(n),"createGroup",()=>{h.default.showModal().result.then(e=>{e.$save().then(e=>Object(w.default)("/groups/".concat(e.id)))})}),k(x(n),"onGroupDeleted",()=>{n.props.controller.updatePagination({page:1}),n.props.controller.update()}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.controller;return a.a.createElement("div",{"data-test":"GroupList"},v.currentUser.isAdmin&&a.a.createElement("div",{className:"m-b-15"},a.a.createElement(s.a,{type:"primary",onClick:this.createGroup},a.a.createElement("i",{className:"fa fa-plus m-r-5"}),"New Group")),!e.isLoaded&&a.a.createElement(p.default,{className:""}),e.isLoaded&&e.isEmpty&&a.a.createElement(m.default,{className:""}),e.isLoaded&&!e.isEmpty&&a.a.createElement("div",{className:"table-responsive"},a.a.createElement(f.default,{items:e.pageItems,columns:this.listColumns,showHeader:!1,context:this.actions,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),a.a.createElement(l.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:t=>e.updatePagination({page:t})})))}}])&&E(n.prototype,r),i&&E(n,i),t}();function _(e){return y.default.add({permission:"list_users",title:"Groups",path:"groups",order:3}),e.component("pageGroupsList",Object(i.react2angular)(Object(c.wrap)($,new u.ResourceItemsSource({isPlainList:!0,getRequest:function(){return{}},getResource:function(){return b.Group.query.bind(b.Group)},getItemProcessor:function(){return e=>new b.Group(e)}}),new d.StateStorage({orderByField:"name",itemsPerPage:10})))),Object(O.b)([{path:"/groups",title:"Groups",key:"groups"}],{reloadOnSearch:!1,template:'<settings-screen><page-groups-list on-error="handleError"></page-groups-list></settings-screen>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}k($,"propTypes",{controller:c.ControllerType.isRequired}),_.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});var r=n(708),a=n.n(r),i=n(9);function o(e,t,n,r,a){e.record("view","page","personal_homepage"),this.noDashboards=!1,this.noQueries=!1,this.messages=a,t.favorites().$promise.then(e=>{this.favoriteDashboards=e.results,this.noDashboards=0===e.results.length}),n.favorites().$promise.then(e=>{this.favoriteQueries=e.results,this.noQueries=0===e.results.length}),this.verifyEmail=(()=>{r.post("verification_email/").success(e=>{var t=e.message;i.default.success(t)})})}function s(e){return e.component("homePage",{template:a.a,controller:o}),{"/":{template:"<home-page></home-page>",title:"Redash"}}}o.$inject=["Events","Dashboard","Query","$http","messages"],s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return $});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(11),o=n(143),s=n(77),l=n(111),c=n(252),u=n(50),d=n(78),p=n(65),m=n(46),f=n(54),h=n(23),g=n(62),b=n(52),y=n(14),v=n(49),w=n(449);n(1430);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){function t(){var e,n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return r=this,n=!(i=(e=E(t)).call.apply(e,[this].concat(s)))||"object"!==O(i)&&"function"!=typeof i?S(r):i,P(S(n),"sidebarMenu",[{key:"all",href:"queries",title:"All Queries"},{key:"favorites",href:"queries/favorites",title:"Favorites",icon:()=>a.a.createElement(f.MenuIcon,{icon:"fa fa-star"})},{key:"archive",href:"queries/archive",title:"Archived",icon:()=>a.a.createElement(f.MenuIcon,{icon:"fa fa-archive"})},{key:"my",href:"queries/my",title:"My Queries",icon:()=>a.a.createElement(f.ProfileImage,{user:y.currentUser}),isAvailable:()=>y.currentUser.hasPermission("create_query")}]),P(S(n),"listColumns",[h.Columns.favorites({className:"p-r-0"}),h.Columns.custom.sortable((e,t)=>a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{className:"table-main-title",href:"queries/"+t.id},t.name),a.a.createElement(l.QueryTagsControl,{className:"d-block",tags:t.tags,isDraft:t.is_draft,isArchived:t.is_archived})),{title:"Name",field:"name",width:null}),h.Columns.avatar({field:"user",className:"p-l-0 p-r-0"},e=>"Created by ".concat(e)),h.Columns.dateTime.sortable({title:"Created At",field:"created_at"}),h.Columns.duration.sortable({title:"Runtime",field:"runtime"}),h.Columns.dateTime.sortable({title:"Last Executed At",field:"retrieved_at",orderByField:"executed_at"}),h.Columns.custom.sortable((e,t)=>a.a.createElement(c.SchedulePhrase,{schedule:t.schedule,isNew:t.isNew()}),{title:"Update Schedule",field:"schedule"})]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props.controller;return a.a.createElement("div",{className:"container"},a.a.createElement(o.PageHeader,{title:e.params.title}),a.a.createElement(g.default,{className:"m-l-15 m-r-15"},a.a.createElement(g.default.Sidebar,{className:"m-b-0"},a.a.createElement(f.SearchInput,{placeholder:"Search Queries...",value:e.searchTerm,onChange:e.updateSearch}),a.a.createElement(f.Menu,{items:this.sidebarMenu,selected:e.params.currentPage}),a.a.createElement(f.Tags,{url:"api/queries/tags",onChange:e.updateSelectedTags}),a.a.createElement(f.PageSizeSelect,{className:"m-b-10",options:e.pageSizeOptions,value:e.itemsPerPage,onChange:t=>e.updatePagination({itemsPerPage:t})})),a.a.createElement(g.default.Content,null,!e.isLoaded&&a.a.createElement(m.default,null),e.isLoaded&&e.isEmpty&&a.a.createElement(w.default,{page:e.params.currentPage,searchTerm:e.searchTerm,selectedTags:e.selectedTags}),e.isLoaded&&!e.isEmpty&&a.a.createElement("div",{className:"bg-white tiled table-responsive"},a.a.createElement(h.default,{items:e.pageItems,columns:this.listColumns,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),a.a.createElement(s.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:t=>e.updatePagination({page:t})})))))}}])&&j(n.prototype,r),i&&j(n,i),t}();function $(e){return e.component("pageQueriesList",Object(i.react2angular)(Object(u.wrap)(k,new d.ResourceItemsSource({getResource:function(e){var t=e.params.currentPage;return{all:b.Query.query.bind(b.Query),my:b.Query.myQueries.bind(b.Query),favorites:b.Query.favorites.bind(b.Query),archive:b.Query.archive.bind(b.Query)}[t]},getItemProcessor:function(){return e=>new b.Query(e)}}),new p.UrlStateStorage({orderByField:"created_at",orderByReverse:!0})))),Object(v.b)([{path:"/queries",title:"Queries",key:"all"},{path:"/queries/favorites",title:"Favorite Queries",key:"favorites"},{path:"/queries/archive",title:"Archived Queries",key:"archive"},{path:"/queries/my",title:"My Queries",key:"my"}],{reloadOnSearch:!1,template:'<page-queries-list on-error="handleError"></page-queries-list>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]})}P(k,"propTypes",{controller:u.ControllerType.isRequired}),$.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(133);var r=n(709),a=n.n(r),i=n(9),o={controller:["$sce","Dashboard","currentUser","Widget",function(e,t,n,r){this.vis=this.resolve.vis,this.saveInProgress=!1,this.trustAsHtml=(t=>e.trustAsHtml(t)),this.onDashboardSelected=(e=>{this.saveInProgress=!0,this.selected_query=this.resolve.query.id,new r({visualization_id:this.vis&&this.vis.id,dashboard_id:e.id,options:{},width:1,type:"visualization"}).save().then(()=>{this.close(),i.default.success("Widget added to dashboard.")}).catch(()=>{i.default.error("Widget not added.")}).finally(()=>{this.saveInProgress=!1})}),this.selectedDashboard=null,this.searchDashboards=(e=>{!e||e.length<3||t.get({search_term:e},e=>{this.dashboards=e.results})})}],bindings:{resolve:"<",close:"&",dismiss:"&",vis:"<"},template:a.a};function s(e){e.component("addToDashboardDialog",o)}s.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(2),a=n(259),i=n.n(a),o=n(243);function s(e,t,n,a,i,s,l,c){t("QueryViewCtrl",{$scope:n}),e.record("view_source","query",n.query.id);var u=!n.query.id,d=n.query.query,p=n.saveQuery;n.sourceMode=!0,n.isDirty=!1,n.base_url="".concat(a.protocol(),"://").concat(a.host(),":").concat(a.port()),n.modKey=l.modKey,Object.defineProperty(n,"showDataset",{get:function(){return n.queryResult&&"done"===n.queryResult.getStatus()}});var m={"mod+s":function(){n.canEdit&&n.saveQuery()},"mod+p":()=>{n.addNewParameter()}};l.bind(m),n.$on("$destroy",()=>{l.unbind(m)}),n.canForkQuery=(()=>s.hasPermission("edit_query")&&!n.dataSource.view_only),n.updateQuery=(e=>Object(r.defer)(()=>n.$apply(()=>{n.query.query=e}))),n.saveQuery=((e,t)=>{var r=p(e,t);return r.then(e=>{d=e.query,n.isDirty=n.query.query!==d,n.query.version=e.version,u&&a.path(e.getSourceLink())}),r}),n.addNewParameter=(()=>{o.default.showModal({parameter:{title:null,name:"",type:"text",value:null},existingParams:Object(r.map)(n.query.getParameters().get(),e=>e.name)}).result.then(e=>{e=n.query.getParameters().add(e),c.$broadcast("query-editor.command","paste",e.toQueryTextFragment()),c.$broadcast("query-editor.command","focus")})}),n.onParametersUpdated=(()=>{n.isDirty||n.saveQuery()}),n.listenForEditorCommand=(e=>n.$on("query-editor.command",e)),n.listenForResize=(e=>n.$parent.$on("angular-resizable.resizing",e)),n.$watch("query.query",e=>{n.isDirty=e!==d})}function l(e){return e.controller("QuerySourceCtrl",s),{"/queries/new":{template:i.a,layout:"fixed",controller:"QuerySourceCtrl",reloadOnSearch:!1,resolve:{query:["Query",function(e){return e.newQuery()}],dataSources:["DataSource",function(e){return e.query().$promise}]}},"/queries/:queryId/source":{template:i.a,layout:"fixed",controller:"QuerySourceCtrl",reloadOnSearch:!1,resolve:{query:["Query","$route",(e,t)=>e.get({id:t.current.params.queryId}).$promise]}}}}s.$inject=["Events","$controller","$scope","$location","$uibModal","currentUser","KeyboardShortcuts","$rootScope"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return b});n(42),n(105),n(15),n(106);var r=n(2),a=n(68),i=n(185),o=n(57),s=n(254),l=n(258),c=n(434),u=n(28),d=n(440),p=n(9),m=n(259),f=n.n(m);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t,n,m,f,g,b,y,v,w,O,j,E,S,x){var P=Object(u.newVisualization)("TABLE",{itemsPerPage:50});function k(t,n){void 0===t&&(t=f.search().maxAge),void 0===t&&(t=-1),e.showLog=!1,e.isDirty?e.queryResult=e.query.getQueryResultByText(t,n):e.queryResult=e.query.getQueryResult(t)}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e.schema=[],e.dataSource.getSchema(t).then(t=>{t.schema?(e.schema=t.schema,e.schema.forEach(e=>{e.collapsed=!0})):t.error.code===a.SCHEMA_NOT_SUPPORTED?e.schema=void 0:(t.error.code,a.SCHEMA_LOAD_ERROR,p.default.error("Schema refresh failed.","Please try again later."))})}function _(t){var n;(e.dataSources=t.filter(function(t){return!t.view_only||t.id===e.query.data_source_id}),0!==e.dataSources.length)?(e.query.isNew()&&(e.query.data_source_id=(void 0===(n=e.query.data_source_id)&&(n=parseInt(localStorage.lastSelectedDataSourceId,10)),!isNaN(n)&&Object(r.some)(e.dataSources,e=>e.id===n)||(n=e.dataSources[0].id),n)),e.dataSource=Object(r.find)(t,t=>t.id===e.query.data_source_id),e.canCreateQuery=Object(r.some)(t,e=>!e.view_only),$()):e.noDataSources=!0}P.id="table",e.refreshSchema=(()=>$(!0)),e.updateSelectedQuery=(t=>{e.selectedQueryText=t}),e.executeQuery=(()=>{e.canExecuteQuery()&&e.query.query&&(k(0,e.selectedQueryText),e.lockButton(!0),e.cancelling=!1,t.record("execute","query",e.query.id),l.default.getPermissions())}),e.selectedVisualization=P,e.currentUser=E,e.dataSource={},e.query=n.current.locals.query,e.showPermissionsControl=O.showPermissionsControl,e.$watch("selectedVisualization",()=>{e.selectedTab=e.selectedVisualization.id});var C={"mod+enter":e.executeQuery,"alt+enter":e.executeQuery};function T(t){return Object(r.find)(e.query.visualizations,e=>e.id==t)}y.bind(C),e.$on("$destroy",()=>{y.unbind(C)}),(e.query.hasResult()||e.query.paramsRequired())&&k(),e.queryExecuting=!1,e.isQueryOwner=E.id===e.query.user.id||E.hasPermission("admin"),e.canEdit=E.canEdit(e.query)||e.query.can_edit,e.canViewSource=E.hasPermission("view_source"),e.canExecuteQuery=(()=>e.query.is_safe||E.hasPermission("execute_query")&&!e.dataSource.view_only),e.canForkQuery=(()=>E.hasPermission("edit_query")&&!e.dataSource.view_only),e.canScheduleQuery=E.hasPermission("schedule_query"),n.current.locals.dataSources?(e.dataSources=n.current.locals.dataSources,_(n.current.locals.dataSources)):e.dataSources=x.query(_),e.showDataset=!0,e.showLog=!1,e.lockButton=(t=>{e.queryExecuting=t}),e.showApiKey=(()=>{j.open({component:"apiKeyDialog",resolve:{query:e.query}})}),e.duplicateQuery=(()=>{var t="duplicatedQueryTab"+Math.random().toString();g.open("",t),S.fork({id:e.query.id},e=>{var n=e.getUrl(!0);g.open(n,t)})}),e.saveTags=(t=>{e.query.tags=t,e.saveQuery({},{tags:e.query.tags})}),e.loadTags=(()=>Object(i.default)("api/queries/tags").then(e=>Object(r.map)(e,e=>e.name))),e.saveQuery=((t,n)=>{var a=n;if(a){if(e.query.isNew())return b.reject();a.id=e.query.id,a.version=e.query.version}else a=Object(r.pick)(e.query,["schedule","query","id","description","name","data_source_id","options","latest_query_data_id","version","is_draft"]);var i=h({},{successMessage:"Query saved",errorMessage:"Query could not be saved"},t);function o(){i.force=!0,e.saveQuery(i,n)}return i.force&&delete a.version,S.save(a,t=>{p.default.success(i.successMessage),e.query.version=t.version},t=>{if(409===t.status){var n="It seems like the query has been modified by another user.";if(e.isQueryOwner){w.open("Overwrite Query","It seems like the query has been modified by another user.<br>Are you sure you want to overwrite the query with your version?",{class:"btn-warning",title:"Overwrite"}).then(o)}else p.default.error("Changes not saved",n+" Please copy/backup your changes and reload this page.",{duration:null})}else p.default.error(i.errorMessage)}).$promise}),e.togglePublished=(()=>{t.record("toggle_published","query",e.query.id),e.query.is_draft=!e.query.is_draft,e.saveQuery(void 0,{is_draft:e.query.is_draft})}),e.saveDescription=(n=>{e.query.description=n,t.record("edit_description","query",e.query.id),e.saveQuery(void 0,{description:e.query.description})}),e.saveName=(n=>{e.query.name=n,t.record("edit_name","query",e.query.id),e.query.is_draft&&O.autoPublishNamedQueries&&"New Query"!==e.query.name&&(e.query.is_draft=!1),e.saveQuery(void 0,{name:e.query.name,is_draft:e.query.is_draft})}),e.cancelExecution=(()=>{e.cancelling=!0,e.queryResult.cancelExecution(),t.record("cancel_execute","query",e.query.id)}),e.archiveQuery=(()=>{w.open("Archive Query","Are you sure you want to archive this query?<br/> All alerts and dashboard widgets created with its visualizations will be deleted.",{class:"btn-warning",title:"Archive"}).then(function(){S.delete({id:e.query.id},()=>{e.query.is_archived=!0,e.query.schedule=null},()=>{p.default.error("Query could not be archived.")})})}),e.updateDataSource=(()=>{t.record("update_data_source","query",e.query.id),localStorage.lastSelectedDataSourceId=e.query.data_source_id,e.query.latest_query_data=null,e.query.latest_query_data_id=null,e.query.id&&S.save({id:e.query.id,data_source_id:e.query.data_source_id,latest_query_data_id:null},t=>{e.query.version=t.version}),e.dataSource=Object(r.find)(e.dataSources,t=>t.id===e.query.data_source_id),$(),e.executeQuery()}),e.setVisualizationTab=(t=>{e.selectedVisualization=t,f.hash(t.id)}),e.deleteVisualization=((t,n)=>{t.preventDefault();var r="Are you sure you want to delete ".concat(n.name," ?");w.open(void 0,r,{class:"btn-danger",title:"Delete"}).then(()=>{s.Visualization.delete({id:n.id},()=>{e.selectedVisualization.id===n.id&&(e.selectedVisualization=P,f.hash(e.selectedVisualization.id)),e.query.visualizations=e.query.visualizations.filter(e=>n.id!==e.id)},()=>{p.default.error("Error deleting visualization.","Maybe it's used in a dashboard?")})})}),e.$watch("query.name",()=>{v.set(e.query.name)}),e.$watch("queryResult && queryResult.getStatus()",t=>{if(t){if("done"===t)e.query.query!==e.queryResult.query_result.query||(e.query.latest_query_data_id=e.queryResult.getId(),e.query.queryResult=e.queryResult),l.default.showNotification("Redash","".concat(e.query.name," updated."));else"failed"===t&&l.default.showNotification("Redash","".concat(e.query.name," failed to run: ").concat(e.queryResult.getError()));"done"!==t&&"failed"!==t||e.lockButton(!1),null!=e.queryResult.getLog()&&(e.showLog=!0)}}),e.openVisualizationEditor=(t=>{e.query.isNew()?e.saveQuery().then(e=>{f.path(e.getSourceLink()).hash("add")}):d.default.showModal({query:e.query,visualization:T(t),queryResult:e.queryResult}).result.then(t=>{e.setVisualizationTab(t),e.$applyAsync()})}),"add"===f.hash()&&(f.hash(null),e.openVisualizationEditor());var q=O.queryRefreshIntervals,R=o.policy.getQueryRefreshIntervals();e.refreshOptions=Object(r.isArray)(R)?Object(r.intersection)(q,R):q,e.showScheduleForm=!1,e.editSchedule=(()=>{e.canEdit&&e.canScheduleQuery&&c.default.showModal({schedule:e.query.schedule,refreshOptions:e.refreshOptions}).result.then(t=>{e.query.schedule=t,e.saveQuery()})}),e.closeScheduleForm=(()=>{e.$apply(()=>{e.showScheduleForm=!1})}),e.openAddToDashboardForm=(t=>{var n=T(t);j.open({component:"addToDashboardDialog",size:"sm",resolve:{query:e.query,vis:n}})}),e.showEmbedDialog=((e,t)=>{var n=T(t);j.open({component:"embedCodeDialog",resolve:{query:e,visualization:n}})}),e.$watch(()=>f.hash(),t=>{e.selectedVisualization=Object(r.find)(e.query.visualizations,e=>e.id==t)||Object(r.minBy)(e.query.visualizations,e=>e.id)||P}),e.showManagePermissionsModal=(()=>{j.open({component:"permissionsEditor",resolve:{aclUrl:{url:"api/queries/".concat(m.queryId,"/acl")},owner:e.query.user}})})}function b(e){return e.controller("QueryViewCtrl",g),{"/queries/:queryId":{template:f.a,layout:"fixed",controller:"QueryViewCtrl",reloadOnSearch:!1,resolve:{query:["Query","$route",(e,t)=>e.get({id:t.current.params.queryId}).$promise]}}}}g.$inject=["$scope","Events","$route","$routeParams","$location","$window","$q","KeyboardShortcuts","Title","AlertDialog","clientConfig","$uibModal","currentUser","Query","DataSource"],b.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return s});n(92),n(1435);var r=n(9),a=n(710),i=n.n(a);function o(e,t,n,a,i,o){this.snippetId=e.snippetId,this.editorOptions={mode:"snippets",advanced:{behavioursEnabled:!0,enableSnippets:!1,autoScrollEditorIntoView:!0},onLoad:function(e){e.$blockScrolling=1/0,e.getSession().setUseWrapMode(!0),e.setShowPrintMargin(!1)}},this.saveChanges=(()=>{this.snippet.$save(e=>{r.default.success("Saved."),"new"===this.snippetId&&n.path("/query_snippets/".concat(e.id)).replace()},()=>{r.default.error("Failed saving snippet.")})}),this.delete=(()=>{var e='Are you sure you want to delete the "'.concat(this.snippet.trigger,'" snippet?');i.open("Delete Snippet",e,{class:"btn-warning",title:"Delete"}).then(()=>{this.snippet.$delete(()=>{n.path("/query_snippets"),r.default.success("Query snippet deleted.")},()=>{r.default.error("Failed deleting query snippet.")})})}),"new"===this.snippetId?(this.snippet=new o({description:""}),this.canEdit=!0):this.snippet=o.get({id:this.snippetId},e=>{this.canEdit=a.canEdit(e)})}function s(e){return e.component("snippetPage",{template:i.a,controller:o}),{"/query_snippets/:snippetId":{template:"<snippet-page></snippet-page>",title:"Query Snippets"}}}o.$inject=["$routeParams","$http","$location","currentUser","AlertDialog","QuerySnippet"],s.init=!0},,function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var r=n(79),a=n(9),i=n(712),o=n.n(i);function s(e,t,n){n.record("view","page","org_settings"),this.settings={},e.get("api/settings/organization").then(e=>{this.settings=e.data.settings}),this.update=(t=>{e.post("api/settings/organization",function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,this.settings[t])).then(e=>{this.settings=e.data.settings,a.default.success("Settings changes saved."),this.disablePasswordLoginToggle()&&!1===this.settings.auth_password_login_enabled&&(this.settings.auth_password_login_enabled=!0,this.update("auth_password_login_enabled"))}).catch(()=>{a.default.error("Failed saving changes.")})}),this.dateFormatList=t.dateFormatList,this.timeFormatList=t.timeFormatList,this.googleLoginEnabled=t.googleLoginEnabled,this.disablePasswordLoginToggle=(()=>!1===(t.googleLoginEnabled||this.settings.auth_saml_enabled))}function l(e){return r.default.add({permission:"admin",title:"Settings",path:"settings/organization",order:6}),e.component("organizationSettingsPage",{template:o.a,controller:s}),{"/settings/organization":{template:"<organization-settings-page></organization-settings-page>",title:"Organization Settings"}}}s.$inject=["$http","clientConfig","Events"],l.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return S});n(16),n(17),n(29);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(11),l=n(419),c=n(437),u=n(438),d=n(46),p=n(51),m=n(79),f=n(25),h=n(14),g=n(86);n(1438);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=v(this,w(t).call(this,e))).state={user:null},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){var e=f.$route.current.params.userId||h.currentUser.id;p.User.get({id:e}).$promise.then(e=>this.setState({user:p.User.convertUserInfo(e)})).catch(e=>{e.status&&e.data&&(e=new g.a(e)),this.props.onError(e)})}},{key:"render",value:function(){var e=this.state.user,t=e&&(h.currentUser.isAdmin||h.currentUser.id===e.id)?c.default:u.default;return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.EmailSettingsWarning,{featureName:"invite emails"}),a.a.createElement("div",{className:"row"},e?a.a.createElement(t,{user:e}):a.a.createElement(d.default,{className:""})))}}])&&y(n.prototype,r),i&&y(n,i),t}();function S(e){m.default.add({title:"Account",path:"users/me",order:7}),e.component("pageUserProfile",Object(s.react2angular)(E))}j(E,"propTypes",{onError:o.a.func}),j(E,"defaultProps",{onError:()=>{}}),S.init=!0},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return U});n(205),n(16),n(17),n(29),n(133),n(89);var r=n(2),a=n(0),i=n.n(a),o=n(1),s=n.n(o),l=n(11),c=n(21),u=n.n(c),d=n(39),p=n.n(d),m=n(77),f=n(242),h=n(107),g=n(154),b=n(50),y=n(78),v=n(65),w=n(46),O=n(141),j=n(54),E=n(23),S=n(62),x=n(436),P=n(79),k=n(14),$=n(57),_=n(51),C=n(66),T=n(9),q=n(253);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=e.user,n=e.enableUser,r=e.disableUser,a=e.deleteUser;return t.id===k.currentUser.id?null:t.is_invitation_pending?i.a.createElement(u.a,{type:"danger",className:"w-100",onClick:e=>a(e,t)},"Delete"):t.is_disabled?i.a.createElement(u.a,{type:"primary",className:"w-100",onClick:e=>n(e,t)},"Enable"):i.a.createElement(u.a,{className:"w-100",onClick:e=>r(e,t)},"Disable")}M.propTypes={user:s.a.shape({id:s.a.number,is_invitation_pending:s.a.bool,is_disabled:s.a.bool}).isRequired,enableUser:s.a.func.isRequired,disableUser:s.a.func.isRequired,deleteUser:s.a.func.isRequired};var F=function(e){function t(){var e,n,a,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return a=this,o=(e=A(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==R(o)&&"function"!=typeof o?N(a):o,z(N(n),"sidebarMenu",[{key:"active",href:"users",title:"Active Users"},{key:"pending",href:"users/pending",title:"Pending Invitations"},{key:"disabled",href:"users/disabled",title:"Disabled Users",isAvailable:()=>$.policy.canCreateUser()}]),z(N(n),"listColumns",[E.Columns.custom.sortable((e,t)=>i.a.createElement(h.UserPreviewCard,{user:t,withLink:!0}),{title:"Name",field:"name",width:null}),E.Columns.custom.sortable((e,t)=>Object(r.map)(t.groups,e=>i.a.createElement("a",{key:"group"+e.id,className:"label label-tag",href:"groups/"+e.id},e.name)),{title:"Groups",field:"groups"}),E.Columns.timeAgo.sortable({title:"Joined",field:"created_at",className:"text-nowrap",width:"1%"}),E.Columns.timeAgo.sortable({title:"Last Active At",field:"active_at",className:"text-nowrap",width:"1%"}),E.Columns.custom((e,t)=>i.a.createElement(M,{user:t,enableUser:n.enableUser,disableUser:n.disableUser,deleteUser:n.deleteUser}),{width:"1%",isAvailable:()=>$.policy.canCreateUser()})]),z(N(n),"createUser",e=>_.User.create(e).$promise.then(e=>{T.default.success("Saved."),e.invite_link&&p.a.warning({title:"Email not sent!",content:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"The mail server is not configured, please send the following link to ",i.a.createElement("b",null,e.name),":"),i.a.createElement(g.default,{value:Object(q.absoluteUrl)(e.invite_link),readOnly:!0}))})}).catch(e=>(e instanceof Error||(e=new Error(Object(r.get)(e,"data.message","Failed saving."))),Promise.reject(e)))),z(N(n),"showCreateUserDialog",()=>{$.policy.isCreateUserEnabled()&&x.default.showModal({onCreate:n.createUser}).result.then(()=>n.props.controller.update()).finally(()=>{n.props.controller.params.isNewUserPage&&Object(C.default)("users")})}),z(N(n),"enableUser",(e,t)=>_.User.enableUser(t).then(()=>n.props.controller.update())),z(N(n),"disableUser",(e,t)=>_.User.disableUser(t).then(()=>n.props.controller.update())),z(N(n),"deleteUser",(e,t)=>_.User.deleteUser(t).then(()=>n.props.controller.update())),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.props.controller.params.isNewUserPage&&this.showCreateUserDialog()}},{key:"renderPageHeader",value:function(){return $.policy.canCreateUser()?i.a.createElement("div",{className:"m-b-15"},i.a.createElement(u.a,{type:"primary",disabled:!$.policy.isCreateUserEnabled(),onClick:this.showCreateUserDialog},i.a.createElement("i",{className:"fa fa-plus m-r-5"}),"New User"),i.a.createElement(f.default,{name:"UsersListExtra"})):null}},{key:"render",value:function(){var e=this.props.controller;return i.a.createElement(i.a.Fragment,null,this.renderPageHeader(),i.a.createElement(S.default,null,i.a.createElement(S.default.Sidebar,{className:"m-b-0"},i.a.createElement(j.SearchInput,{value:e.searchTerm,onChange:e.updateSearch}),i.a.createElement(j.Menu,{items:this.sidebarMenu,selected:e.params.currentPage}),i.a.createElement(j.PageSizeSelect,{className:"m-b-10",options:e.pageSizeOptions,value:e.itemsPerPage,onChange:t=>e.updatePagination({itemsPerPage:t})})),i.a.createElement(S.default.Content,null,!e.isLoaded&&i.a.createElement(w.default,{className:""}),e.isLoaded&&e.isEmpty&&i.a.createElement(O.default,{className:""}),e.isLoaded&&!e.isEmpty&&i.a.createElement("div",{className:"table-responsive"},i.a.createElement(E.default,{items:e.pageItems,columns:this.listColumns,context:this.actions,orderByField:e.orderByField,orderByReverse:e.orderByReverse,toggleSorting:e.toggleSorting}),i.a.createElement(m.Paginator,{totalCount:e.totalItemsCount,itemsPerPage:e.itemsPerPage,page:e.page,onChange:t=>e.updatePagination({page:t})})))))}}])&&D(n.prototype,a),o&&D(n,o),t}();function U(e){P.default.add({permission:"list_users",title:"Users",path:"users",isActive:e=>e.startsWith("/users")&&"/users/me"!==e,order:2}),e.component("pageUsersList",Object(l.react2angular)(Object(b.wrap)(F,new y.ResourceItemsSource({getRequest:function(e,t){switch(t.params.currentPage){case"active":e.pending=!1;break;case"pending":e.pending=!0;break;case"disabled":e.disabled=!0}return e},getResource:function(){return _.User.query.bind(_.User)},getItemProcessor:function(){return e=>new _.User(e)}}),new v.UrlStateStorage({orderByField:"created_at",orderByReverse:!0}))))}z(F,"propTypes",{controller:b.ControllerType.isRequired}),U.init=!0},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return i});var r=n(2),a=n(49);function i(){var e=Object(a.b)([{path:"/users",title:"Users",key:"active"},{path:"/users/new",title:"Users",key:"active",isNewUserPage:!0},{path:"/users/pending",title:"Pending Invitations",key:"pending"},{path:"/users/disabled",title:"Disabled Users",key:"disabled"}],{template:'<settings-screen><page-users-list on-error="handleError"></page-users-list></settings-screen>',reloadOnSearch:!1,controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]}),t=Object(a.b)([{path:"/users/me",title:"Account",key:"users"},{path:"/users/:userId",title:"Users",key:"users"}],{reloadOnSearch:!1,template:'<settings-screen><page-user-profile on-error="handleError"></page-user-profile></settings-screen>',controller:["$scope","$exceptionHandler",function(e,t){e.handleError=t}]});return Object(r.extend)(e,t)}i.init=!0},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){"use strict";n.r(t);n(92),n(16),n(17),n(15),n(22),n(116),n(720),n(468);var r=n(646),a=n(85),i=n.n(a),o=n(59),s=n.n(o),l=n(647),c=n.n(l),u=n(648),d=n.n(u),p=n(649),m=n.n(p),f=n(650),h=n.n(f),g=n(651),b=n.n(g),y=n(652),v=n.n(y),w=n(653),O=n.n(w),j=n(654),E=n.n(j),S=(n(182),n(736),n(737),n(2)),x=(n(168),n(20)),P=n.n(x),k=n(655),$=n.n(k);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s.a.module("ui.sortable",[]).value("uiSortableConfig",{items:"> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]",cancel:"input, textarea, button, select, option, .ui-sortable-bypass"}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,t,n){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(r,a,i,o){var l;function c(e,t){var n="function"==typeof t;return"function"==typeof e&&n?function(){e.apply(this,arguments),t.apply(this,arguments)}:n?t:e}function u(e){var t=e.data("ui-sortable");return t&&"object"===_(t)&&"ui-sortable"===t.widgetFullName?t:null}function d(t,n){return y[t]?("stop"===t&&(n=c(n,()=>{r.$apply()}),n=c(n,f)),n=c(y[t],n)):v[t]&&(n=v[t](n)),n||"items"!==t&&"ui-model-items"!==t||(n=e.items),n}function p(e,t,n){s.a.forEach(y,function(e,t){t in g||(g[t]=null)});var r,a=null;t&&s.a.forEach(t,(t,n)=>{if(!(e&&n in e)){if(n in b)return void(g[n]="ui-floating"===n?"auto":d(n,void 0));r||(r=$()().options);var i=r[n];i=d(n,i),a||(a={}),a[n]=i,g[n]=i}});return s.a.forEach(e,(e,t)=>{if(t in b)return"ui-floating"!==t||!1!==e&&!0!==e||!n||(n.floating=e),void(g[t]=d(t,e));e=d(t,e),a||(a={}),a[t]=e,g[t]=e}),a}function m(e,t,n){var r=null;return function(e,t){var n=e.sortable("option","helper");return"clone"===n||"function"==typeof n&&t.item.sortable.isCustomHelperUsed()}(e,t)&&"parent"===e.sortable("option","appendTo")&&(r=n.last()),r}function f(e,t){t.item.sortable._destroy()}function h(e){return e.parent().find(g["ui-model-items"]).index(e)}a=P()(a);var g={},b={"ui-floating":void 0,"ui-model-items":e.items},y={receive:null,remove:null,start:null,stop:null,update:null},v={helper:null};function w(){r.$watchCollection("ngModel",()=>{t(()=>{u(a)&&a.sortable("refresh")},0,!1)}),y.start=function(e,t){if("auto"===g["ui-floating"]){var n=t.item.siblings();u(P()(e.target)).floating=/left|right/.test((r=n).css("float"))||/inline|table-cell/.test(r.css("display"))}var r,a=h(t.item);t.item.sortable={model:o.$modelValue[a],index:a,source:t.item.parent(),sourceModel:o.$modelValue,cancel:function(){t.item.sortable._isCanceled=!0},isCanceled:function(){return t.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!t.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:t.item.sortable._isCustomHelperUsed,_destroy:function(){s.a.forEach(t.item.sortable,(e,n)=>{t.item.sortable[n]=void 0})}}},y.activate=function(e,t){l=a.contents();var n=function(e){var t=e.sortable("option","placeholder");if(t&&t.element&&"function"==typeof t.element){var n=t.element();return n=P()(n)}return null}(a);if(n&&n.length){var i=function(e,t){var n=g["ui-model-items"].replace(/[^,]*>/g,"");return e.find('[class="'.concat(t.attr("class"),'"]:not(').concat(n,")"))}(a,n);l=l.not(i)}var o=t.item.sortable._connectedSortables||[];o.push({element:a,scope:r}),t.item.sortable._connectedSortables=o},y.update=function(e,t){if(!t.item.sortable.received){t.item.sortable.dropindex=h(t.item);var n=t.item.parent();t.item.sortable.droptarget=n;var i=function(e,t){for(var n=null,r=0;r<e.length;r++){var a=e[r];if(a.element[0]===t[0]){n=a.scope;break}}return n}(t.item.sortable._connectedSortables,n);t.item.sortable.droptargetModel=i.ngModel,a.sortable("cancel")}var s=!t.item.sortable.received&&m(a,t,l);s&&s.length&&(l=l.not(s)),l.appendTo(a),t.item.sortable.received&&(l=null),t.item.sortable.received&&!t.item.sortable.isCanceled()&&r.$apply(()=>{o.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},y.stop=function(e,t){if(!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled())r.$apply(()=>{o.$modelValue.splice(t.item.sortable.dropindex,0,o.$modelValue.splice(t.item.sortable.index,1)[0])});else if((!("dropindex"in t.item.sortable)||t.item.sortable.isCanceled())&&!s.a.equals(a.contents(),l)){var n=m(a,t,l);n&&n.length&&(l=l.not(n)),l.appendTo(a)}l=null},y.receive=function(e,t){t.item.sortable.received=!0},y.remove=function(e,t){"dropindex"in t.item.sortable||(a.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||r.$apply(()=>{t.item.sortable.moved=o.$modelValue.splice(t.item.sortable.index,1)[0]})},v.helper=function(e){return e&&"function"==typeof e?function(t,n){var r=n.sortable,a=h(n);n.sortable={model:o.$modelValue[a],index:a,source:n.parent(),sourceModel:o.$modelValue,_restore:function(){s.a.forEach(n.sortable,(e,t)=>{n.sortable[t]=void 0}),n.sortable=r}};var i=e.apply(this,arguments);return n.sortable._restore(),n.sortable._isCustomHelperUsed=n!==i,i}:e},r.$watchCollection("uiSortable",(e,t)=>{var n=u(a);if(n){var r=p(e,t,n);r&&a.sortable("option",r)}},!0),p(g)}function O(){return(!r.uiSortable||!r.uiSortable.disabled)&&(o?w():n.info("ui.sortable: ngModel not provided!",a),a.sortable(g),O.cancelWatcher(),O.cancelWatcher=s.a.noop,!0)}s.a.extend(g,b,e,r.uiSortable),O.cancelWatcher=s.a.noop,O()||(O.cancelWatcher=r.$watch("uiSortable.disabled",O))}}}]);var C=n(35),T=n(144),q=n(41);function R(e){return{link:function(t,n){e(()=>{n[0].focus()})}}}function D(e){e.directive("autofocus",R)}function A(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,t,n,r){var a=t=>{r.$setValidity("compareTo",t===e.otherModelValue)};e.$watch("otherModelValue",()=>{a(r.$modelValue)}),r.$parsers.push(e=>(a(e),e))}}}function N(e){e.directive("compareTo",A)}R.$inject=["$timeout"],D.init=!0,N.init=!0;var I=i()("redash:directives");window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;function z(e){return{title:"Redash",set:function(t){this.title=t,e.$broadcast("$titleChange")},get:function(){return this.title}}}function M(e,t){return{restrict:"E",link:function(n,r){e.$on("$routeChangeSuccess",(e,n)=>{n.title&&t.set(n.title)}),e.$on("$titleChange",function(){var e=t.get();I("Updating title to: %s",e),r.text(e)})}}}function F(e){e.factory("Title",z).directive("title",M)}M.$inject=["$rootScope","Title"],z.$inject=["$rootScope"],F.init=!0;n(61),n(336);var U=new Map;function L(){return{restrict:"A",link:function(e,t,n){var r=t[0];U.has(r)||(U.set(r,{callback:()=>{e.$evalAsync(n.resizeEvent)}}),e.$on("$destroy",()=>{var e=Object(S.findIndex)(U,e=>e.node===r);e>=0&&U.splice(e,1)}))}}}function V(e){e.directive("resizeEvent",L)}!function e(){U.forEach((e,t)=>{var n=t.offsetWidth,r=t.offsetHeight;e.offsetWidth===n&&e.offsetHeight===r||(e.offsetWidth=n,e.offsetHeight=r,e.callback(t))}),setTimeout(e,50)}(),V.init=!0;n(42);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){return isNaN(e)&&isNaN(t)||e===t}Y.$inject=["KeyboardShortcuts"];var G=Object(S.find)(["flexBasis","webkitFlexBasis","msFlexPreferredSize"],e=>e in document.documentElement.style)||"flexBasis",W=5;function Y(e){return{link:function(t,n,r){if("false"!==r.resizable){var a=!1,i=null,o=!0,s=!0,l=n.width(),c=n.height(),u=t.$eval(r.rFlex),d=B({},r.toggleShortcut,()=>{n.find(".rg-left, .rg-right, .rg-top, .rg-bottom").click()});e.bind(d),t.$on("$destroy",()=>{e.unbind(d)}),t.$on("angular-resizable.resizeStart",(e,t)=>{a||(i=Q({},t))}),t.$on("angular-resizable.resizeEnd",(e,t)=>{a||(o=!0,!1!==t.width&&(o=H(t.width,i.width)),s=!0,!1!==t.height&&(s=H(t.height,i.height)))}),n.on("click",".rg-left, .rg-right",()=>{if(o){var e=parseFloat(n.css("min-width"))+W,t=n.width(),r=u?G:"width";t<=e?n.animate(B({},r,l+"px"),300,()=>{p(l,!1)}):(l=t,n.css(B({},r,t+"px")).animate(B({},r,0),300,()=>{p(0,!1)}))}}),n.on("click",".rg-top, .rg-bottom",()=>{if(s){var e=parseFloat(n.css("min-height"))+W,t=n.height(),r=u?G:"height";t<=e?n.animate(B({},r,c+"px"),300,()=>{p(!1,c)}):(c=t,n.css(B({},r,t+"px")).animate(B({},r,0),300,()=>{p(!1,0)}))}})}function p(e,r){a=!0;var i={width:e,height:r,id:n.attr("id"),evt:null};t.$emit("angular-resizable.resizeStart",i),t.$emit("angular-resizable.resizing",i),t.$emit("angular-resizable.resizeEnd",i),a=!1}}}}function K(e){e.directive("resizableToggle",Y)}function X(e){D(e),N(e),F(e),V(e),K(e)}K.init=!0,X.init=!0;var J=n(255);function Z(e){e.filter("markdown",["$sce","clientConfig",(e,t)=>(function(n){if(!n)return"";var r=J.markdown.toHTML(String(n));return t.allowScriptsInUserInput&&(r=e.trustAsHtml(r)),r})])}Z.init=!0;var ee=n(305),te={columns:6,rowHeight:50,margins:15,mobileBreakPoint:800,defaultSizeX:3,defaultSizeY:3,minSizeX:1,maxSizeX:6,minSizeY:1,maxSizeY:1e3};function ne(e){e.constant("dashboardGridOptions",te)}ne.init=!0;var re=n(0),ae=n.n(re),ie=n(208);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.n(ie).a.setDefaultIndicator(ae.a.createElement("i",{className:"fa fa-spinner fa-pulse"}));var se=i()("redash:config");r.options.shouldHandlePushState=((e,t)=>{return oe(e.split("?"),1)[0]!==oe(t.split("?"),1)[0]});var le,ce=[d.a,m.a,c.a,h.a,v.a,b.a,"ui.ace",O.a,"angularResizable",E.a,"ui.sortable"],ue=s.a.module("app",ce);function de(e){return e.keys().map(e).map(e=>e.default).filter(S.isFunction).filter(e=>e.init).map(e=>e(ue))}ne(ue),(le=n(774)).keys().forEach(le),X(ue),de(n(1182)),Object(S.each)(q,(e,t)=>{ue.filter(t,()=>e)}),Z(ue),Object(ee.a)(ue),de(n(843)),de(n(1410)).forEach(e=>{ue.config(["$routeProvider",t=>{Object(S.each)(e,(e,n)=>{se("Registering route: %s",n),e.authenticated=!0,e.resolve=Object(S.extend)({__organizationStatus:()=>T.default.refresh()},e.resolve),t.when(n,e)})}])}),ue.config(["$routeProvider",e=>{e.otherwise({resolve:{error:()=>{throw{status:404}}}})}]),de(n(1181)),de(n(1192)),ue.run(["$q",e=>{C.default.Promise=e}]);var pe=ue;pe.config(["$locationProvider","$compileProvider","uiSelectConfig",(e,t,n)=>{t.debugInfoEnabled(!1),t.aHrefSanitizationWhitelist(/^\s*(https?|data|tel|sms|mailto):/),e.html5Mode(!0),n.theme="bootstrap"}]),pe.run(["$templateCache",e=>{var t=e.get("bootstrap/match.tpl.html");t=t.replace("glyphicon glyphicon-remove","fa fa-remove"),e.put("bootstrap/match.tpl.html",t)}]);t.default=pe},,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(79),a=n(2);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.page,a=void 0===r?1:r,i=n.itemsPerPage,o=void 0===i?20:i,s=n.totalCount,l=void 0===s?void 0:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.page=a,this.itemsPerPage=o,this.updateRows(t,l),this.orderByField=void 0,this.orderByReverse=!1}var t,n,r;return t=e,(n=[{key:"setPage",value:function(e){this.page=e}},{key:"getPageRows",value:function(){var e=this.itemsPerPage*(this.page-1),t=this.itemsPerPage*this.page;return this.rows.slice(e,t)}},{key:"updateRows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.rows=e,this.rows?this.totalCount=t||e.length:this.totalCount=0}},{key:"orderBy",value:function(e){e===this.orderByField?this.orderByReverse=!this.orderByReverse:(this.orderByField=e,this.orderByReverse=!1),this.orderByField&&(this.rows=Object(a.sortBy)(this.rows,this.orderByField),this.orderByReverse&&(this.rows=this.rows.reverse()))}}])&&i(t.prototype,n),r&&i(t,r),e}(),s=n(711),l=n.n(s);function c(e,t,n){this.snippets=new o([],{itemsPerPage:20}),n.query(e=>{this.snippets.updateRows(e)})}function u(e){return r.default.add({permission:"create_query",title:"Query Snippets",path:"query_snippets",order:5}),e.component("snippetsListPage",{template:l.a,controller:c}),{"/query_snippets":{template:"<snippets-list-page></snippets-list-page>",title:"Query Snippets"}}}n.d(t,"default",function(){return u}),c.$inject=["$location","currentUser","QuerySnippet"],u.init=!0},,,,,function(e,t,n){"use strict";n.r(t);n(22),n(36),n(15);var r=n(2),a=n(10),i=n.n(a),o=n(44);n(204),n(568);function s(e){return[0,e.length-1]}function l(e){return[d3.quantile(e,.25),d3.quantile(e,.5),d3.quantile(e,.75)]}var c=function(){var e=1,t=1,n=0,r=null,a=Number,i=s,o=l,c=null;function u(s){s.each(function(s,l){s=s.map(a).sort(d3.ascending);var u=d3.select(this),d=s.length,p=s[0],m=s[d-1],f=s.quartiles=o(s),h=i&&i.call(this,s,l),g=h&&h.map(e=>s[e]),b=h?d3.range(0,h[0]).concat(d3.range(h[1]+1,d)):d3.range(d),y=d3.scale.linear().domain(r&&r.call(this,s,l)||[p,m]).range([t,0]),v=this.__chart__||d3.scale.linear().domain([0,1/0]).range(y.range());this.__chart__=y;var w=u.selectAll("line.center").data(g?[g]:[]);w.enter().insert("line","rect").attr("class","center").attr("x1",e/2).attr("y1",e=>v(e[0])).attr("x2",e/2).attr("y2",e=>v(e[1])).style("opacity",1e-6).transition().duration(n).style("opacity",1).attr("y1",e=>y(e[0])).attr("y2",e=>y(e[1])),w.transition().duration(n).style("opacity",1).attr("y1",e=>y(e[0])).attr("y2",e=>y(e[1])),w.exit().transition().duration(n).style("opacity",1e-6).attr("y1",e=>y(e[0])).attr("y2",e=>y(e[1])).remove();var O=u.selectAll("rect.box").data([f]);O.enter().append("rect").attr("class","box").attr("x",0).attr("y",e=>v(e[2])).attr("width",e).attr("height",e=>v(e[0])-v(e[2])).transition().duration(n).attr("y",e=>y(e[2])).attr("height",e=>y(e[0])-y(e[2])),O.transition().duration(n).attr("y",e=>y(e[2])).attr("height",e=>y(e[0])-y(e[2])),O.exit().remove();var j=u.selectAll("line.median").data([f[1]]);j.enter().append("line").attr("class","median").attr("x1",0).attr("y1",v).attr("x2",e).attr("y2",v).transition().duration(n).attr("y1",y).attr("y2",y),j.transition().duration(n).attr("y1",y).attr("y2",y),j.exit().remove();var E=u.selectAll("line.whisker").data(g||[]);E.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",v).attr("x2",e).attr("y2",v).style("opacity",1e-6).transition().duration(n).attr("y1",y).attr("y2",y).style("opacity",1),E.transition().duration(n).attr("y1",y).attr("y2",y).style("opacity",1),E.exit().transition().duration(n).attr("y1",y).attr("y2",y).style("opacity",1e-6).remove();var S=u.selectAll("circle.outlier").data(b,Number);S.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",e/2).attr("cy",e=>v(s[e])).style("opacity",1e-6).transition().duration(n).attr("cy",e=>y(s[e])).style("opacity",1),S.transition().duration(n).attr("cy",e=>y(s[e])).style("opacity",1),S.exit().transition().duration(n).attr("cy",e=>y(s[e])).style("opacity",1e-6).remove();var x=c||y.tickFormat(8),P=u.selectAll("text.box").data(f);P.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",(e,t)=>1&t?6:-6).attr("x",(t,n)=>1&n?e:0).attr("y",v).attr("text-anchor",(e,t)=>1&t?"start":"end").text(x).transition().duration(n).attr("y",y),P.transition().duration(n).text(x).attr("y",y),P.exit().remove();var k=u.selectAll("text.whisker").data(g||[]);k.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",e).attr("y",v).text(x).style("opacity",1e-6).transition().duration(n).attr("y",y).style("opacity",1),k.transition().duration(n).text(x).attr("y",y).style("opacity",1),k.exit().transition().duration(n).attr("y",y).style("opacity",1e-6).remove()}),d3.timer.flush()}return u.width=function(t){return arguments.length?(e=t,u):e},u.height=function(e){return arguments.length?(t=e,u):t},u.tickFormat=function(e){return arguments.length?(c=e,u):c},u.duration=function(e){return arguments.length?(n=e,u):n},u.domain=function(e){return arguments.length?(r=null==e?e:d3.functor(e),u):r},u.value=function(e){return arguments.length?(a=e,u):a},u.whiskers=function(e){return arguments.length?(i=e,u):i},u.quartiles=function(e){return arguments.length?(o=e,u):o},u},u=n(28),d=n(441);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return f});var m={template:'<div resize-event="handleResize()"></div>',bindings:{data:"<",options:"<"},controller:["$scope","$element",function(e,t){var n=t[0].querySelector("div");var a=()=>{var e,t=this.data.rows,a=n.offsetWidth,o={top:10,right:50,bottom:40,left:50,inner:25},s=a-o.right-o.left,l=500-o.top-o.bottom,u=1/0,d=-1/0,p=[],m=0,f=[],h=this.options.xAxisLabel,g=this.options.yAxisLabel,b=Object(r.map)(this.data.columns,e=>e.name),y=i.a.scale.ordinal().domain(b).rangeBands([0,a-o.left-o.right]);e=b.length>1?Math.min(y(b[1]),120):120,o.inner=e/3,b.forEach((e,n)=>{f=p[n]=[],t.forEach(t=>{m=t[e],f.push(m),m>d&&(d=Math.ceil(m)),m<u&&(u=Math.floor(m))})});var v=i.a.scale.linear().domain([.99*u,1.01*d]).range([l,0]),w=c().whiskers(function(e){return t=>{for(var n=t.quartiles[0],r=t.quartiles[2],a=(r-n)*e,i=-1,o=t.length;t[++i]<n-a;);for(;t[--o]>r+a;);return[i,o]}}(1.5)).width(e-2*o.inner).height(l).domain([.99*u,1.01*d]),O=i.a.svg.axis().scale(y).orient("bottom"),j=i.a.svg.axis().scale(v).orient("left"),E=i.a.svg.axis().scale(y).tickSize(l).orient("bottom"),S=i.a.svg.axis().scale(v).tickSize(s).orient("right");i.a.select(n).selectAll("*").remove();var x=i.a.select(n).append("svg").attr("width",a).attr("height",l+o.bottom+o.top),P=x.append("g").attr("width",a-o.left-o.right).attr("transform","translate(".concat(o.left,",").concat(o.top,")"));x.append("text").attr("class","box").attr("x",a/2).attr("text-anchor","middle").attr("y",l+o.bottom).text(h),x.append("text").attr("class","box").attr("transform","translate(10,".concat((l+o.top+o.bottom)/2,")rotate(-90)")).attr("text-anchor","middle").text(g),P.append("rect").attr("class","grid-background").attr("width",s).attr("height",l),P.append("g").attr("class","grid").call(S),P.append("g").attr("class","grid").call(E),P.append("g").attr("class","x axis").attr("transform","translate(0,".concat(l,")")).call(O),P.append("g").attr("class","y axis").call(j),P.selectAll(".box").data(p).enter().append("g").attr("class","box").attr("width",e).attr("height",l).attr("transform",(e,t)=>"translate(".concat(function(e){return y(b[e])+(y(b[1])-o.inner)/2}(t),",",0,")")).call(w)};e.handleResize=a,e.$watch("$ctrl.data",a),e.$watch("$ctrl.options",a,!0)}]};function f(e){e.component("boxplotRenderer",m),e.run(["$injector",e=>{Object(u.registerVisualization)({type:"BOXPLOT",name:"Boxplot (Deprecated)",isDeprecated:!0,getOptions:e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){p(e,t,n[t])})}return e})({},e),Renderer:Object(o.angular2react)("boxplotRenderer",m,e),Editor:d.default,defaultRows:8,minRows:5})}])}f.init=!0},function(e,t,n){"use strict";n.r(t);n(36),n(168),n(225),n(226),n(204),n(1405),n(92),n(22),n(15);var r=n(59),a=n.n(r),i=n(2),o=n.n(i),s=n(10),l=n.n(s),c=n(44),u=n(28);function d(e){return e.y+e.dy/2}function p(e){return e.value}var m=function(){var e={},t=24,n=8,r=[1,1],a=[],i=[];function o(){var e,n,i=a,o=0;function s(n){n.x=o,n.dx=t,n.sourceLinks.forEach(t=>{e.indexOf(t.target)<0&&e.push(t.target)})}for(;i.length;)e=[],i.forEach(s),i=e,o+=1;!function(e){a.forEach(t=>{t.sourceLinks.length||(t.x=e-1)})}(o),n=(r[0]-t)/(o-1),a.forEach(e=>{e.x*=n})}function s(){function e(e,t){return e.source.y-t.source.y}function t(e,t){return e.target.y-t.target.y}a.forEach(n=>{n.sourceLinks.sort(t),n.targetLinks.sort(e)}),a.forEach(e=>{var t=0,n=0;e.sourceLinks.forEach(e=>{e.sy=t,t+=e.dy}),e.targetLinks.forEach(e=>{e.ty=n,n+=e.dy})})}return e.nodeWidth=function(n){return arguments.length?(t=+n,e):t},e.nodePadding=function(t){return arguments.length?(n=+t,e):n},e.nodes=function(t){return arguments.length?(a=t,e):a},e.links=function(t){return arguments.length?(i=t,e):i},e.size=function(t){return arguments.length?(r=t,e):r},e.layout=function(t){return a.forEach(e=>{e.sourceLinks=[],e.targetLinks=[]}),i.forEach(e=>{var t=e.source,n=e.target;"number"==typeof t&&(t=e.source=a[e.source]),"number"==typeof n&&(n=e.target=a[e.target]),t.sourceLinks.push(e),n.targetLinks.push(e)}),a.forEach(e=>{e.value=Math.max(l.a.sum(e.sourceLinks,p),l.a.sum(e.targetLinks,p))}),o(),function(e){var t,o=l.a.nest().key(e=>e.x).sortKeys(l.a.ascending).entries(a).map(e=>e.values);function s(e){function t(e){return d(e.source)*e.value}o.forEach(n=>{n.forEach(n=>{if(n.targetLinks.length){var r=l.a.sum(n.targetLinks,t)/l.a.sum(n.targetLinks,p);n.y+=(r-d(n))*e}})})}function c(){o.forEach(e=>{var t,a,i,o=e.length,s=0;for(e.sort(f),i=0;i<o;++i)(a=s-(t=e[i]).y)>0&&(t.y+=a),s=t.y+t.dy+n;if((a=s-n-r[1])>0)for(s=t.y-=a,i=o-2;i>=0;--i)(a=(t=e[i]).y+t.dy+n-s)>0&&(t.y-=a),s=t.y})}function c(){o.forEach(e=>{var t,a,i,o=0,s=e.length;for(e.sort(f),i=0;i<s;++i)(a=o-(t=e[i]).y)>0&&(t.y+=a),o=t.y+t.dy+n;if((a=o-n-r[1])>0)for(o=t.y-=a,i=s-2;i>=0;--i)(a=(t=e[i]).y+t.dy+n-o)>0&&(t.y-=a),o=t.y})}t=l.a.min(o,e=>(r[1]-(e.length-1)*n)/l.a.sum(e,p)),o.forEach(e=>{e.forEach((e,n)=>{e.y=n,e.dy=e.value*t})}),i.forEach(e=>{e.dy=e.value*t}),c();for(var u=1;e>0;e-=1)m(u*=.99),c(),s(u),c();function m(e){function t(e){return d(e.target)*e.value}o.slice().reverse().forEach(n=>{n.forEach(n=>{if(n.sourceLinks.length){var r=l.a.sum(n.sourceLinks,t)/l.a.sum(n.sourceLinks,p);n.y+=(r-d(n))*e}})})}function f(e,t){return e.y-t.y}}(t),s(),e},e.relayout=function(){return s(),e},e.link=function(){var e=.5;function t(t){var n=t.source.x+t.source.dx,r=t.target.x,a=l.a.interpolateNumber(n,r),i=a(e),o=a(1-e),s=t.source.y+t.sy+t.dy/2,c=t.target.y+t.ty+t.dy/2;return"M".concat(n,",").concat(s,"C").concat(i,",").concat(s," ").concat(o,",").concat(c," ").concat(r,",").concat(c)}return t.curvature=(n=>arguments.length?(e=+n,t):e),t},e},f=n(444);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t={},n={},r=[],a=o.a.sortBy(o.a.filter(o.a.keys(e[0]),e=>"value"!==e&&0!==e.indexOf("$$")),o.a.identity);function i(e,n){e=function(e){return o.a.isNil(e)?"Exit":""+e}(e);var a="".concat(e,":").concat(String(n)),i=t[a];return i||((i={name:e}).id=r.push(i)-1,t[a]=i),i}function s(e,t,r,a){if(""!==e&&e||!(a>1)){var o=i(e,a),s=i(t,a+1);(function(e,t){var r=n[[e,t]];return r||(r={target:t,source:e,value:0},n[[e,t]]=r),r}(o.id,s.id)).value+=parseInt(r,10)}}return e.forEach(e=>{s(e[a[0]],e[a[1]],e.value||0,1),s(e[a[1]],e[a[2]],e.value||0,2),s(e[a[2]],e[a[3]],e.value||0,3),s(e[a[3]],e[a[4]],e.value||0,4)}),{nodes:r,links:o.a.values(n)}}function b(e,t){var n=10,r=10,a=10,i=10,s=e.offsetWidth-i-r,c=e.offsetHeight-n-a;if(!(s<=0||c<=0)){var u=e=>l.a.format(",.0f")(e),d=l.a.scale.category20();(t=g(t)).nodes=o.a.map(t.nodes,e=>o.a.extend(e,{color:d(e.name.replace(/ .*/,""))}));var p=l.a.select(e).append("svg").attr("class","sankey").attr("width",s+i+r).attr("height",c+n+a).append("g").attr("transform","translate(".concat(i,",").concat(n,")")),f=m().nodeWidth(15).nodePadding(10).size([s,c]),h=f.link();f.nodes(t.nodes).links(t.links).layout(0),function(e,t){l.a.nest().key(e=>e.x).entries(t.nodes).map(e=>e.values).forEach(t=>{t=o.a.filter(o.a.sortBy(t,e=>-e.value),e=>"Exit"!==e.name);var n=l.a.sum(t,e=>e.dy),r=(e-n)/t.length;o.a.reduce(t,(e,t)=>(t.y=e,e+t.dy+r),0)})}(c,t),f.relayout();var b=p.append("g").selectAll(".link").data(t.links).enter().append("path").filter(e=>"Exit"!==e.target.name).attr("class","link").attr("d",h).style("stroke-width",e=>Math.max(1,e.dy)).sort((e,t)=>t.dy-e.dy);b.append("title").text(e=>"".concat(e.source.name,"  ").concat(e.target.name,"\n").concat(u(e.value)));var y=p.append("g").selectAll(".node").data(t.nodes).enter().append("g").filter(e=>"Exit"!==e.name).attr("class","node").attr("transform",e=>"translate(".concat(e.x,",").concat(e.y,")"));y.on("mouseover",function(e){var t=function(e){var t=[];return e.sourceLinks.forEach(e=>{t.push(e.target)}),e.targetLinks.forEach(e=>{t.push(e.source)}),t}(e);t=o.a.map(t,e=>e.id),y.filter(n=>n!==e&&!o.a.includes(t,n.id)).style("opacity",.2),b.filter(t=>!(o.a.includes(e.sourceLinks,t)||o.a.includes(e.targetLinks,t))).style("opacity",.2)}).on("mouseout",function(){y.style("opacity",1),b.style("opacity",1)}),y.append("rect").attr("height",e=>e.dy).attr("width",f.nodeWidth()).style("fill",e=>e.color).style("stroke",e=>l.a.rgb(e.color).darker(2)).append("title").text(e=>"".concat(e.name,"\n").concat(u(e.value))),y.append("text").attr("x",-6).attr("y",e=>e.dy/2).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(e=>e.name).filter(e=>e.x<s/2).attr("x",6+f.nodeWidth()).attr("text-anchor","start")}}n.d(t,"default",function(){return v});var y={template:'<div class="sankey-visualization-container" resize-event="handleResize()"></div>',bindings:{data:"<",options:"<"},controller:["$scope","$element",function(e,t){var n=t[0].querySelector(".sankey-visualization-container"),r=()=>{this.data&&(a.a.element(n).empty(),function(e){return o.a.find(e.columns,e=>"value"===e.name)}(this.data)&&b(n,this.data.rows))};e.handleResize=o.a.debounce(r,50),e.$watch("$ctrl.data",r),e.$watch("$ctrl.options",r,!0)}]};function v(e){e.component("sankeyRenderer",y),e.run(["$injector",e=>{Object(u.registerVisualization)({type:"SANKEY",name:"Sankey",getOptions:e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){h(e,t,n[t])})}return e})({},e),Renderer:Object(c.angular2react)("sankeyRenderer",y,e),Editor:f.default,defaultRows:7})}])}v.init=!0},function(e,t,n){"use strict";n.r(t);n(15),n(22),n(36);var r=n(2),a=n.n(r),i=(n(168),n(10)),o=n(59),s=n.n(o),l="<<<Exit>>>",c=i.scale.category10();function u(e){return c(e.name)}function d(e,t){this.element=t,this.watches=[];var n=t.clientWidth,r=t.offsetHeight,o={w:n/6,h:30,s:3,t:10},s=Math.min(n-o.h,r-o.h)/2-5;if(!(s<=0)){var d={top:s,bottom:50,left:s,right:0},p=0,m=i.layout.partition().size([2*Math.PI,s*s]).value(e=>e.size),f=i.svg.arc().startAngle(e=>e.x).endAngle(e=>e.x+e.dx).innerRadius(e=>Math.sqrt(e.y)).outerRadius(e=>Math.sqrt(e.y+e.dy)),h=i.select(t),g=h.append("div").classed("breadcrumbs-container",!0).append("svg").attr("width",n).attr("height",o.h).attr("fill","white").attr("font-weight",600),b=h.append("div"),y=b.append("div").classed("summary-container",!0),v=b.append("div").classed("sunburst-container",!0).append("svg").attr("width",2*s).attr("height",2*s).append("g").attr("transform","translate(".concat(d.left,",").concat(d.top,")")),w=g.append("text").classed("lastCrumb",!0);k(),this.watches.push(e.$watch("$ctrl.data",k)),this.watches.push(e.$watch("$ctrl.options",k,!0))}function O(e,t){var n=[];return n.push("0,0"),n.push("".concat(o.w,",0")),n.push("".concat(o.w+o.t,",").concat(o.h/2)),n.push("".concat(o.w,",").concat(o.h)),n.push("0,".concat(o.h)),t>0&&n.push("".concat(o.t,",").concat(o.h/2)),n.join(" ")}function j(e){var t=(100*e.value/p).toPrecision(3),n="".concat(t,"%");t<1&&(n="< 1.0%");var r=function(e){for(var t=[],n=e;n.parent;)t.unshift(n),n=n.parent;return t}(e);!function(e,t){var n=g.selectAll("g").data(e,e=>e.name+e.depth),r=n.enter().append("g");r.append("polygon").classed("breadcrumbs-shape",!0).attr("points",O).attr("fill",u),r.append("text").classed("breadcrumbs-text",!0).attr("x",(o.w+o.t)/2).attr("y",o.h/2).attr("dy","0.35em").attr("font-size","10px").attr("text-anchor","middle").text(e=>e.name),n.attr("transform",(e,t)=>"translate(".concat(t*(o.w+o.s),", 0)")),n.exit().remove(),w.attr("x",(e.length+.5)*(o.w+o.s)).attr("y",o.h/2).attr("dy","0.35em").attr("text-anchor","middle").attr("fill","black").attr("font-weight",600).text(t)}(r,n),v.selectAll("path").attr("opacity",.3),v.selectAll("path").filter(e=>r.indexOf(e)>=0).attr("opacity",1),y.html("\n      <span>Stage: ".concat(e.depth,"</span>\n      <span class='percentage' style='font-size: 2em;'>").concat(n,"</span>\n      <span>").concat(e.value," of ").concat(p,"</span>\n    ")),y.style("visibility",""),g.style("visibility","")}function E(){v.selectAll("path").on("mouseover",null),v.selectAll("path").transition().duration(1e3).attr("opacity",1).each("end",function(){i.select(this).on("mouseover",j)}),g.style("visibility","hidden"),y.style("visibility","hidden")}function S(e){!function(e){var t,n=m.nodes(e).filter(e=>e.dx>.005&&e.name!==l),r=(t=[],n.forEach(e=>{-1===t.indexOf(e.name)&&t.push(e.name)}),t);c.domain(r);var a=v.data([e]).selectAll("path").data(n).enter().append("path").classed("nodePath",!0).attr("display",e=>e.depth?null:"none").attr("d",f).attr("fill",u).attr("opacity",1).attr("stroke","white").on("mouseover",j);h.on("click",E),p=a.node().__data__.value}(e)}function x(e){var t=function(e){var t;if(a.a.has(e[0],"sequence")&&a.a.has(e[0],"stage")&&a.a.has(e[0],"node")&&a.a.has(e[0],"value")){var n=a.a.groupBy(e,"sequence");t=a.a.map(n,e=>{var t=a.a.sortBy(e,"stage");return{size:e[0].value||0,sequence:e[0].sequence,nodes:a.a.map(t,e=>e.node)}})}else{var r=a.a.sortBy(a.a.filter(a.a.keys(e[0]),e=>"value"!==e&&0!==e.indexOf("$$")),a.a.identity);t=a.a.map(e,(e,t)=>({size:e.value||0,sequence:t,nodes:a.a.compact(a.a.map(r,t=>e[t]))}))}return t}(e),n={name:"root",children:[]};return t.forEach(e=>{for(var t=e.nodes,r=parseInt(e.size,10),i=n,o=function(e){var n=i.children,o=t[e],s=e+1===t.length;n||(i.children=n=[],n.push({name:l,size:i.size}));var c=a.a.find(n,e=>e.name===o);s&&c?(c.children=c.children||[],c.children.push({name:l,size:r})):s?n.push({name:o,size:r}):(c||(c={name:o,children:[]},n.push(c)),i=c)},s=0;s<t.length;s+=1)o(s)}),n}function P(e){var t=x(e);v.selectAll(".nodePath").remove(),S(t)}function k(){e.$ctrl.data&&P(e.$ctrl.data.rows)}}d.prototype.remove=function(){this.watches.forEach(e=>{e()}),s.a.element(this.element).empty(".vis-container")};var p=d,m=n(44),f=n(28),h=n(445);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return y});var b={template:'<div class="sunburst-visualization-container" resize-event="handleResize()"></div>',bindings:{data:"<",options:"<"},controller:["$scope","$element",function(e,t){var n=t[0].querySelector(".sunburst-visualization-container"),a=new p(e,n);e.handleResize=Object(r.debounce)(function(){a.remove(),a=new p(e,n)},50)}]};function y(e){e.component("sunburstSequenceRenderer",b),e.run(["$injector",e=>{Object(f.registerVisualization)({type:"SUNBURST_SEQUENCE",name:"Sunburst Sequence",getOptions:e=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e})({},e),Renderer:Object(m.angular2react)("sunburstSequenceRenderer",b,e),Editor:h.default,defaultRows:7})}])}y.init=!0},function(e,t,n){"use strict";n.r(t);n(16),n(17),n(29),n(92),n(15);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),s=n(48),l=n.n(s),c=n(11),u=n(663),d=n.n(u),p=n(182),m=n.n(p),f=n(9),h=(n(1113),n(1114),n(1116),n(1117),n(1118),n(1119),n(1120),n(52)),g=n(423),b=n(424),y="localOptions:";var v={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=y+e;return n in window.localStorage?JSON.parse(window.localStorage.getItem(n)):t},set:function(e,t){var n=y+e;window.localStorage.setItem(n,JSON.stringify(t))}},w=n(410),O=n(425),j=n(40);n(1122);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",function(){return R});var _=m.a.acequire("ace/ext/language_tools"),C=m.a.acequire("ace/snippets");function T(e){m.a.define("ace/snippets/".concat(e),["require","exports","module"],(t,n)=>{n.snippetText="",n.scope=e})}T("python"),T("sql"),T("json"),T("yaml");var q=function(e){function t(e){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,i=x(t).call(this,e),n=!i||"object"!==E(i)&&"function"!=typeof i?P(r):i,$(P(n),"onLoad",e=>{e.commands.bindKey("Cmd+L",null),e.commands.bindKey("Ctrl+P",null),e.commands.bindKey("Ctrl+L",null),e.commands.bindKey({win:"Ctrl+P",mac:null},null),e.commands.bindKey({win:null,mac:"Ctrl+P"},"golineup"),e.commands.on("afterExec",t=>{"insertstring"===t.command.name&&"."===t.args&&e.completer&&e.completer.showPopup(e)}),g.QuerySnippet.query(e=>{var t=C.snippetManager,n={snippetText:""};n.snippets=t.parseSnippetFile(n.snippetText),e.forEach(e=>{n.snippets.push(e.getSnippet())}),t.register(n.snippets||[],n.scope)}),e.focus(),n.props.listenForResize(()=>e.resize()),n.props.listenForEditorCommand(function(t,r){switch(r){case"focus":e.focus();break;case"paste":for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];var s=i[0];e.session.doc.replace(e.selection.getRange(),s);var l=e.selection.getRange();n.props.updateQuery(e.session.getValue()),e.selection.setRange(l)}})}),$(P(n),"updateSelectedQuery",e=>{var t=n.refEditor.current.editor.getSession().doc.getTextRange(e.getRange()),r=t.length>1?t:null;n.setState({selectedQueryText:r}),n.props.updateSelectedQuery(r)}),$(P(n),"updateQuery",e=>{n.props.updateQuery(e),n.setState({queryText:e})}),$(P(n),"formatQuery",()=>{h.Query.format(n.props.dataSource.syntax||"sql",n.props.queryText).then(n.updateQuery).catch(e=>f.default.error(e))}),$(P(n),"toggleAutocomplete",e=>{n.setState({autocompleteQuery:e}),v.set("liveAutocomplete",e)}),$(P(n),"componentDidUpdate",()=>{n.refEditor.current.editor.resize()}),n.refEditor=a.a.createRef(),n.state={schema:null,keywords:{table:[],column:[],tableColumn:[]},autocompleteQuery:v.get("liveAutocomplete",!0),liveAutocompleteDisabled:!1,queryText:e.queryText,selectedQueryText:null};var o={identifierRegexps:[/[a-zA-Z_0-9.\-\u00A2-\uFFFF]/],getCompletions:(e,t,r,a,i)=>{var o=n.state.keywords.table,s=n.state.keywords.column,l=n.state.keywords.tableColumn;if(0!==a.length&&0!==o.length)if("."!==a[a.length-1])i(null,o.concat(s));else{var c=a.substring(0,a.length-1);i(null,o.concat(l[c]))}else i(null,[])}};return _.setCompleters([_.snippetCompleter,_.keyWordCompleter,_.textCompleter,o]),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,a.a.Component),n=t,i=[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.schema)return{keywords:{table:[],column:[],tableColumn:[]},liveAutocompleteDisabled:!1};if(e.schema!==t.schema){var n=e.schema.reduce((e,t)=>e+t.columns.length,0);return{schema:e.schema,keywords:O.default.buildKeywordsFromSchema(e.schema),liveAutocompleteDisabled:n>5e3}}return null}}],(r=[{key:"render",value:function(){var e=b.KeyboardShortcuts.modKey,t=this.props.queryExecuting||!this.props.canExecuteQuery();return a.a.createElement("section",{style:{height:"100%"},"data-test":"QueryEditor"},a.a.createElement("div",{className:"container p-15 m-b-10",style:{height:"100%"}},a.a.createElement("div",{"data-executing":this.props.queryExecuting,style:{height:"calc(100% - 40px)",marginBottom:"0px"},className:"editor__container"},a.a.createElement(d.a,{ref:this.refEditor,theme:"textmate",mode:this.props.dataSource.syntax||"sql",value:this.state.queryText,editorProps:{$blockScrolling:1/0},width:"100%",height:"100%",setOptions:{behavioursEnabled:!0,enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!this.state.liveAutocompleteDisabled&&this.state.autocompleteQuery,autoScrollEditorIntoView:!0},showPrintMargin:!1,wrapEnabled:!1,onLoad:this.onLoad,onPaste:this.onPaste,onChange:this.updateQuery,onSelectionChange:this.updateSelectedQuery})),a.a.createElement("div",{className:"editor__control"},a.a.createElement("div",{className:"form-inline d-flex"},a.a.createElement(l.a,{placement:"top",title:a.a.createElement("span",null,"Add New Parameter (",a.a.createElement("i",null,e," + P"),")")},a.a.createElement("button",{type:"button",className:"btn btn-default m-r-5",onClick:this.props.addNewParameter},"{{}}")),a.a.createElement(l.a,{placement:"top",title:"Format Query"},a.a.createElement("button",{type:"button",className:"btn btn-default m-r-5",onClick:this.formatQuery},a.a.createElement("span",{className:"zmdi zmdi-format-indent-increase"}))),a.a.createElement(w.default,{state:this.state.autocompleteQuery,onToggle:this.toggleAutocomplete,disabled:this.state.liveAutocompleteDisabled}),a.a.createElement("select",{className:"form-control datasource-small flex-fill w-100",onChange:this.props.updateDataSource,disabled:!this.props.isQueryOwner},this.props.dataSources.map(e=>a.a.createElement("option",{label:e.name,value:e.id,key:"ds-option-".concat(e.id)},e.name))),this.props.canEdit?a.a.createElement(l.a,{placement:"top",title:e+" + S"},a.a.createElement("button",{type:"button",className:"btn btn-default m-l-5",onClick:this.props.saveQuery,"data-test":"SaveButton",title:"Save"},a.a.createElement("span",{className:"fa fa-floppy-o"}),a.a.createElement("span",{className:"hidden-xs m-l-5"},"Save"),this.props.isDirty?"*":null)):null,a.a.createElement(l.a,{placement:"top",title:e+" + Enter"},a.a.createElement("button",{type:"button",className:"btn btn-primary m-l-5"+(t?" disabled":""),disabled:t,onClick:this.props.executeQuery,"data-test":"ExecuteButton"},a.a.createElement("span",{className:"zmdi zmdi-play"}),a.a.createElement("span",{className:"hidden-xs m-l-5"},null==this.state.selectedQueryText?"Execute":"Execute Selected")))))))}}])&&S(n.prototype,r),i&&S(n,i),t}();function R(e){e.component("queryEditor",Object(c.react2angular)(q))}$(q,"propTypes",{queryText:o.a.string.isRequired,schema:j.Schema,addNewParameter:o.a.func.isRequired,dataSources:o.a.arrayOf(j.DataSource),dataSource:j.DataSource,canEdit:o.a.bool.isRequired,isDirty:o.a.bool.isRequired,isQueryOwner:o.a.bool.isRequired,updateDataSource:o.a.func.isRequired,canExecuteQuery:o.a.func.isRequired,executeQuery:o.a.func.isRequired,queryExecuting:o.a.bool.isRequired,saveQuery:o.a.func.isRequired,updateQuery:o.a.func.isRequired,updateSelectedQuery:o.a.func.isRequired,listenForResize:o.a.func.isRequired,listenForEditorCommand:o.a.func.isRequired}),$(q,"defaultProps",{schema:null,dataSource:{},dataSources:[]}),R.init=!0}]);
//# sourceMappingURL=app.4dd8d11786519ced9b33.js.map