{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./client/app/services/notification.js","webpack:///./client/app/services/auth.js","webpack:///./client/app/components/items-list/components/ItemsTable.jsx","webpack:///./client/app/services/ng.js","webpack:///./client/app/visualizations/index.js","webpack:///./client/app/components/DialogWrapper.jsx","webpack:///./client/app/components/proptypes.js","webpack:///./client/app/filters/index.js","webpack:///./client/app/components/items-list/components/LoadingState.jsx","webpack:///./client/app/lib/utils.js","webpack:///./client/app/components/items-list/ItemsList.jsx","webpack:///./client/app/services/user.js","webpack:///./client/app/services/query.js","webpack:///./client/app/services/group.js","webpack:///./client/app/components/items-list/components/Sidebar.jsx","webpack:///./client/app/services/policy/index.js","webpack:///./client/app/components/layouts/ContentWithSidebar.jsx","webpack:///./client/app/components/items-list/classes/StateStorage.js","webpack:///./client/app/services/navigateTo.js","webpack:///./client/app/components/BigMessage.jsx","webpack:///./client/app/services/data-source.js","webpack:///./client/app/services/recordEvent.js","webpack:///./client/app/components/Paginator.jsx","webpack:///./client/app/components/items-list/classes/ItemsSource.js","webpack:///./client/app/services/settingsMenu.js","webpack:///./client/app/components/dynamic-form/dynamicFormHelper.js","webpack:///./client/app/lib/value-format.js","webpack:///./client/app/components/ParameterMappingInput.jsx","webpack:///./client/app/lib/promise-rejection-error.js","webpack:///./client/app/services/widget.js","webpack:///./client/app/components/PreviewCard.jsx","webpack:///./client/app/components/tags-control/TagsControl.jsx","webpack:///./client/app/visualizations/ColorPalette.js","webpack:///./client/app/services/destination.js","webpack:///./client/app/visualizations/chart/plotly/utils.js","webpack:///./client/app/components/dynamic-form/DynamicForm.jsx","webpack:///./client/app/components/HelpTrigger.jsx","webpack:///./client/app/visualizations/choropleth/utils.js","webpack:///./client/app/components/items-list/components/EmptyState.jsx","webpack:///./client/app/components/PageHeader.jsx","webpack:///./client/app/services/organizationStatus.js","webpack:///./client/app/services/dashboard.js","webpack:///./client/app/components/InputWithCopy.jsx","webpack:///./client/app/components/TimeAgo.jsx","webpack:///./client/app/components/Filters.jsx","webpack:///./client/app/components/admin/CeleryStatus.jsx","webpack:///./client/app/assets/images/redash_icon_small.png","webpack:///./client/app/services/getTags.js","webpack:///./client/app/components/admin/Layout.jsx","webpack:///./client/app/components/empty-state/EmptyState.jsx","webpack:///./client/app/components/items-list/classes/Sorter.js","webpack:///./client/app/components/groups/ListItemAddon.jsx","webpack:///./client/app/components/admin/StatusBlock.jsx","webpack:///./client/app/components/CreateSourceDialog.jsx","webpack:///./client/app/components/DynamicComponent.jsx","webpack:///./client/app/components/EditParameterSettingsDialog.jsx","webpack:///./client/app/components/QuerySelector.jsx","webpack:///./client/app/components/NoTaggedObjectsFound.jsx","webpack:///./client/app/components/SelectItemsDialog.jsx","webpack:///./client/app/components/cards-list/CardsList.jsx","webpack:///./client/app/components/dashboards/TextboxDialog.jsx","webpack:///./client/app/components/groups/DeleteGroupButton.jsx","webpack:///./client/app/components/groups/DetailsPageSidebar.jsx","webpack:///./client/app/components/groups/GroupName.jsx","webpack:///./client/app/components/queries/SchedulePhrase.jsx","webpack:///./client/app/services/utils.js","webpack:///./client/app/services/visualization.js","webpack:///./client/app/components/dynamic-table/default-cell/utils.js","webpack:///./client/app/services/alert.js","webpack:///./client/app/services/notifications.js","webpack:///./client/app/pages/queries/query.html","webpack:///./client/app/filters/datetime.js","webpack:///./client/app/components/DateTimeInput.jsx","webpack:///./client/app/components/DateTimeRangeInput.jsx","webpack:///./client/app/components/EditVisualizationButton/QueryResultsLink.jsx","webpack:///./client/app/lib/hooks/useForceUpdate.js","webpack:///./client/app/components/items-list/classes/ItemsFetcher.js","webpack:///./client/app/lib/hooks/useQueryResult.js","webpack:///./client/app/visualizations/chart/getChartData.js","webpack:///./client/app/components/AutocompleteToggle.jsx","webpack:///./client/app/components/DateInput.jsx","webpack:///./client/app/components/DateRangeInput.jsx","webpack:///./client/app/components/EditInPlace.jsx","webpack:///./client/app/components/tags-control/EditTagsDialog.jsx","webpack:///./client/app/components/EmailSettingsWarning.jsx","webpack:///./client/app/components/FavoritesControl.jsx","webpack:///./client/app/components/ParameterValueInput.jsx","webpack:///./client/app/components/QueryBasedParameterInput.jsx","webpack:///./client/app/services/query-snippet.js","webpack:///./client/app/services/keyboard-shortcuts.js","webpack:///./client/app/components/keywordBuilder.js","webpack:///./client/app/components/TagsList.jsx","webpack:///./client/app/components/app-view/error-handler.js","webpack:///./client/app/components/dashboards/AddWidgetDialog.jsx","webpack:///./client/app/components/dashboards/EditParameterMappingsDialog.jsx","webpack:///./client/app/services/policy/DefaultPolicy.js","webpack:///./client/app/components/dynamic-table/json-cell/json-view-interactive.js","webpack:///./client/app/components/groups/CreateGroupDialog.jsx","webpack:///./client/app/components/items-list/classes/Paginator.js","webpack:///./client/app/components/queries/ScheduleDialog.jsx","webpack:///./client/app/components/users/ChangePasswordDialog.jsx","webpack:///./client/app/components/users/CreateUserDialog.jsx","webpack:///./client/app/components/users/UserEdit.jsx","webpack:///./client/app/components/users/UserShow.jsx","webpack:///./client/app/services/query-result.js","webpack:///./client/app/visualizations/EditVisualizationDialog.jsx","webpack:///./client/app/visualizations/box-plot/Editor.jsx","webpack:///./client/app/visualizations/pivot/Editor.jsx","webpack:///./client/app/visualizations/sankey/Editor.jsx","webpack:///./client/app/visualizations/sunburst/Editor.jsx","webpack:///./client/app/visualizations/word-cloud/Editor.jsx","webpack:///./client/app/pages/dashboards/DashboardListEmptyState.jsx","webpack:///./client/app/pages/dashboards/ShareDashboardDialog.jsx","webpack:///./client/app/pages/queries-list/QueriesListEmptyState.jsx","webpack:///./client/app/assets/images/avatar.svg","webpack:///./client/app/components/dashboards/gridstack/gridstack.js","webpack:///./client/app/components/alerts/alert-subscriptions/alert-subscriptions.html","webpack:///./client/app/components/app-header/app-header.html","webpack:///./client/app/components/app-view/template.html","webpack:///./client/app/components/dashboards/edit-dashboard-dialog.html","webpack:///./client/app/components/dashboards/widget.html","webpack:///./client/app/components/dashboards/widget-dialog.html","webpack:///./client/app/components/dynamic-table/default-cell/template.html","webpack:///./client/app/components/dynamic-table/dynamic-table.html","webpack:///./client/app/components/dynamic-table/json-cell/template.html","webpack:///./client/app/components/parameters.html","webpack:///./client/app/components/permissions-editor/permissions-editor.html","webpack:///./client/app/components/queries/embed-code-dialog.html","webpack:///./client/app/components/queries/schema-browser.html","webpack:///./client/app/components/queries/visualization-embed.html","webpack:///./client/app/components/settings-screen.html","webpack:///./client/app/visualizations/chart/chart.html","webpack:///./client/app/visualizations/chart/chart-editor.html","webpack:///./client/app/visualizations/choropleth/choropleth.html","webpack:///./client/app/visualizations/choropleth/choropleth-editor.html","webpack:///./client/app/visualizations/choropleth/countries.geo.json","webpack:///./client/app/visualizations/choropleth/japan.prefectures.geo.json","webpack:///./client/app/visualizations/cohort/cohort-editor.html","webpack:///./client/app/visualizations/counter/counter.html","webpack:///./client/app/visualizations/counter/counter-editor.html","webpack:///./client/app/visualizations/funnel/funnel-editor.html","webpack:///./client/app/visualizations/map/map.html","webpack:///./client/app/visualizations/map/map-editor.html","webpack:///./client/app/visualizations/table/table.html","webpack:///./client/app/visualizations/table/table-editor.html","webpack:///./client/app/pages/alert/alert.html","webpack:///./client/app/pages/dashboards/dashboard.html","webpack:///./client/app/pages/dashboards/public-dashboard-page.html","webpack:///./client/app/pages/home/home.html","webpack:///./client/app/pages/queries/add-to-dashboard.html","webpack:///./client/app/pages/query-snippets/edit.html","webpack:///./client/app/pages/query-snippets/list.html","webpack:///./client/app/pages/settings/organization.html","webpack:///./node_modules/moment/locale sync en","webpack:///./client/app/assets/images sync \\.(png|jpe","webpack:///./client/app/assets/images/db-logos/Cassandra.png","webpack:///./client/app/assets/images/db-logos/athena.png","webpack:///./client/app/assets/images/db-logos/aws_es.png","webpack:///./client/app/assets/images/db-logos/axibasetsd.png","webpack:///./client/app/assets/images/db-logos/bigquery.png","webpack:///./client/app/assets/images/db-logos/clickhouse.png","webpack:///./client/app/assets/images/db-logos/cockroach.png","webpack:///./client/app/assets/images/db-logos/couchbase.png","webpack:///./client/app/assets/images/db-logos/csv.png","webpack:///./client/app/assets/images/db-logos/databricks.png","webpack:///./client/app/assets/images/db-logos/db2.png","webpack:///./client/app/assets/images/db-logos/drill.png","webpack:///./client/app/assets/images/db-logos/druid.png","webpack:///./client/app/assets/images/db-logos/dynamodb_sql.png","webpack:///./client/app/assets/images/db-logos/elasticsearch.png","webpack:///./client/app/assets/images/db-logos/google_analytics.png","webpack:///./client/app/assets/images/db-logos/google_spreadsheets.png","webpack:///./client/app/assets/images/db-logos/graphite.png","webpack:///./client/app/assets/images/db-logos/hive.png","webpack:///./client/app/assets/images/db-logos/hive_http.png","webpack:///./client/app/assets/images/db-logos/impala.png","webpack:///./client/app/assets/images/db-logos/influxdb.png","webpack:///./client/app/assets/images/db-logos/jirajql.png","webpack:///./client/app/assets/images/db-logos/kibana.png","webpack:///./client/app/assets/images/db-logos/kylin.png","webpack:///./client/app/assets/images/db-logos/mapd.png","webpack:///./client/app/assets/images/db-logos/memsql.png","webpack:///./client/app/assets/images/db-logos/mongodb.png","webpack:///./client/app/assets/images/db-logos/mssql.png","webpack:///./client/app/assets/images/db-logos/mysql.png","webpack:///./client/app/assets/images/db-logos/oracle.png","webpack:///./client/app/assets/images/db-logos/pg.png","webpack:///./client/app/assets/images/db-logos/phoenix.png","webpack:///./client/app/assets/images/db-logos/presto.png","webpack:///./client/app/assets/images/db-logos/prometheus.png","webpack:///./client/app/assets/images/db-logos/python.png","webpack:///./client/app/assets/images/db-logos/qubole.png","webpack:///./client/app/assets/images/db-logos/rds_mysql.png","webpack:///./client/app/assets/images/db-logos/redshift.png","webpack:///./client/app/assets/images/db-logos/results.png","webpack:///./client/app/assets/images/db-logos/rockset.png","webpack:///./client/app/assets/images/db-logos/salesforce.png","webpack:///./client/app/assets/images/db-logos/scylla.png","webpack:///./client/app/assets/images/db-logos/snowflake.png","webpack:///./client/app/assets/images/db-logos/sqlite.png","webpack:///./client/app/assets/images/db-logos/treasuredata.png","webpack:///./client/app/assets/images/db-logos/uptycs.png","webpack:///./client/app/assets/images/db-logos/url.png","webpack:///./client/app/assets/images/db-logos/vertica.png","webpack:///./client/app/assets/images/db-logos/yandex_appmetrika.png","webpack:///./client/app/assets/images/db-logos/yandex_metrika.png","webpack:///./client/app/assets/images/destinations/chatwork.png","webpack:///./client/app/assets/images/destinations/email.png","webpack:///./client/app/assets/images/destinations/hangouts_chat.png","webpack:///./client/app/assets/images/destinations/hipchat.png","webpack:///./client/app/assets/images/destinations/mattermost.png","webpack:///./client/app/assets/images/destinations/pagerduty.png","webpack:///./client/app/assets/images/destinations/slack.png","webpack:///./client/app/assets/images/destinations/webhook.png","webpack:///./client/app/assets/images/favicon-16x16.png","webpack:///./client/app/assets/images/favicon-32x32.png","webpack:///./client/app/assets/images/favicon-96x96.png","webpack:///./client/app/assets/images/google_logo.svg","webpack:///./client/app/assets/images/illustrations/alert.svg","webpack:///./client/app/assets/images/illustrations/dashboard.svg","webpack:///./client/app/assets/images/illustrations/query.svg","webpack:///./client/app/assets/images/logo.png","webpack:///./client/app/assets/images/logo_white.png","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.jsx?33e3","webpack:///./client/app/components/ColorBox.jsx","webpack:///./client/app/components/EditVisualizationButton/QueryControlDropdown.jsx","webpack:///./client/app/components/EditVisualizationButton/index.jsx","webpack:///./client/app/components/SortIcon.jsx","webpack:///./client/app/components/Timer.jsx","webpack:///./client/app/components/alerts/alert-subscriptions/index.js","webpack:///./client/app/components/app-header/index.js","webpack:///./client/app/components/app-view/index.js","webpack:///./client/app/components/cancel-query-button/index.js","webpack:///./client/app/components/dashboards/edit-dashboard-dialog.js","webpack:///./client/app/components/dashboards/gridstack/index.js","webpack:///./client/app/components/dashboards/widget.js","webpack:///./client/app/components/dynamic-table/default-cell/index.js","webpack:///./client/app/components/dynamic-table/dynamic-table-row.js","webpack:///./client/app/components/dynamic-table/index.js","webpack:///./client/app/components/dynamic-table/json-cell/index.js","webpack:///./client/app/components/overlay.js","webpack:///./client/app/components/parameters.js","webpack:///./client/app/components/permissions-editor/index.js","webpack:///./client/app/components/queries/alert-unsaved-changes.js","webpack:///./client/app/components/queries/api-key-dialog.js","webpack:///./client/app/components/queries/embed-code-dialog.js","webpack:///./client/app/components/queries/schema-browser.js","webpack:///./client/app/components/queries/visualization-embed.js","webpack:///./client/app/components/query-link.js","webpack:///./client/app/components/rd-tab/index.js","webpack:///./client/app/components/settings-screen.js","webpack:///./client/app/components/tab-nav/index.js","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.jsx?d577","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.js$","webpack:///./client/app/services/alert-dialog.js","webpack:///./client/app/services/alert-subscription.js","webpack:///./client/app/services/events.js","webpack:///./client/app/services/offline-listener.js","webpack:///./client/app/services/query-string.js","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.jsx?d376","webpack:///./client/app/visualizations/VisualizationName.jsx","webpack:///./client/app/visualizations/VisualizationRenderer.jsx","webpack:///./client/app/visualizations/chart/index.js","webpack:///./client/app/visualizations/chart/plotly/index.js","webpack:///./client/app/visualizations/choropleth/index.js","webpack:///./client/app/visualizations/cohort/index.js","webpack:///./client/app/visualizations/counter/index.js","webpack:///./client/app/visualizations/funnel/index.js","webpack:///./client/app/visualizations/map/index.js","webpack:///./client/app/visualizations/pivot/index.js","webpack:///./client/app/visualizations/table/index.js","webpack:///./client/app/visualizations/word-cloud/index.js","webpack:///[\\\\\\/.]test[\\\\.\\/]).)*\\.jsx","webpack:///./client/app/pages/admin/OutdatedQueries.jsx","webpack:///./client/app/pages/admin/SystemStatus.jsx","webpack:///./client/app/pages/admin/Tasks.jsx","webpack:///./client/app/pages/alert/index.js","webpack:///./client/app/pages/alerts/AlertsList.jsx","webpack:///./client/app/pages/dashboards/DashboardList.jsx","webpack:///./client/app/pages/dashboards/dashboard.js","webpack:///./client/app/pages/dashboards/public-dashboard-page.js","webpack:///./client/app/pages/data-sources/DataSourcesList.jsx","webpack:///./client/app/pages/data-sources/EditDataSource.jsx","webpack:///./client/app/pages/destinations/DestinationsList.jsx","webpack:///./client/app/pages/destinations/EditDestination.jsx","webpack:///./client/app/pages/groups/GroupDataSources.jsx","webpack:///./client/app/pages/groups/GroupMembers.jsx","webpack:///./client/app/pages/groups/GroupsList.jsx","webpack:///./client/app/pages/home/index.js","webpack:///./client/app/pages/queries-list/QueriesList.jsx","webpack:///./client/app/pages/queries/add-to-dashboard.js","webpack:///./client/app/pages/queries/source-view.js","webpack:///./client/app/pages/queries/view.js","webpack:///./client/app/pages/query-snippets/edit.js","webpack:///./client/app/pages/settings/organization.js","webpack:///./client/app/pages/users/UserProfile.jsx","webpack:///./client/app/pages/users/UsersList.jsx","webpack:///./client/app/pages/users/index.js","webpack:///./client/app/lib/sortable.js","webpack:///./client/app/directives/autofocus.js","webpack:///./client/app/directives/compare-to.js","webpack:///./client/app/directives/utils.js","webpack:///./client/app/directives/title.js","webpack:///./client/app/directives/resize-event.js","webpack:///./client/app/directives/resizable-toggle.js","webpack:///./client/app/directives/index.js","webpack:///./client/app/filters/markdown.js","webpack:///./client/app/config/dashboard-grid-options.js","webpack:///./client/app/config/antd-spinner.jsx","webpack:///./client/app/config/index.js","webpack:///./client/app/index.js","webpack:///./client/app/lib/pagination/paginator.js","webpack:///./client/app/pages/query-snippets/list.js","webpack:///./client/app/lib/visualizations/d3box.js","webpack:///./client/app/visualizations/box-plot/index.js","webpack:///./client/app/lib/visualizations/d3sankey.js","webpack:///./client/app/visualizations/sankey/index.js","webpack:///./client/app/lib/visualizations/sunburst.js","webpack:///./client/app/visualizations/sunburst/index.js","webpack:///./client/app/lib/localOptions.js","webpack:///./client/app/components/QueryEditor.jsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","notification","config","placement","duration","simpleNotification","forEach","action","message","description","arguments","undefined","props","_objectSpread","__webpack_exports__","Auth","currentUser","canEdit","userId","user_id","user","id","this","hasPermission","permission","includes","permissions","isAdmin","clientConfig","messages","logger","debug","session","loaded","updateSession","sessionData","extend","client_config","AuthService","$window","$location","$q","$http","isAuthenticated","login","next","encodeURI","url","location","href","concat","logout","loadSession","resolve","setApiKey","then","response","loadConfig","apiKey","getApiKey","requireSession","when","catch","apiKeyHttpInterceptor","$injector","request","headers","Authorization","init","ngModule","factory","$httpProvider","interceptors","run","sortable","sorter","Columns","favorites","overrides","width","render","text","item","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","_components_FavoritesControl__WEBPACK_IMPORTED_MODULE_8__","avatar","formatTitle","isFunction","identity","src","profile_image_url","className","alt","title","dateTime","formatDateTime","durationHumanize","timeAgo","_components_TimeAgo__WEBPACK_IMPORTED_MODULE_9__","date","custom","ItemsTable","React","Component","_this$props","orderByField","orderByReverse","toggleSorting","orderByDirection","map","filter","columns","column","isAvailable","field","index","onHeaderCell","onClick","row","omit","dataIndex","JSON","stringify","defaultSortOrder","prepareColumns","rows","items","onTableRow","onRowClick","event","showHeader","antd_lib_table__WEBPACK_IMPORTED_MODULE_7___default","classNames","ant-table-headerless","dataSource","rowKey","pagination","onRow","PropTypes","arrayOf","shape","string","func","bool","$sanitize","$route","$routeParams","$rootScope","$uibModal","VisualizationOptions","Data","isRequired","VisualizationType","type","options","RendererPropTypes","visualizationName","onOptionsChange","EditorPropTypes","registeredVisualizations","VisualizationConfig","getOptions","isDeprecated","Renderer","Editor","autoHeight","defaultRows","number","defaultColumns","minRows","maxRows","minColumns","maxColumns","registerVisualization","typeSpecs","values","checkPropTypes","validateVisualizationConfig","Error","getDefaultVisualization","find","visualization","newVisualization","DialogPropType","visible","onOk","onCancel","afterClose","close","dismiss","DialogWrapper","Promise","wrap","openDialog","DialogComponent","dialog","dialogResult","reject","container","document","ReactDOM","react__WEBPACK_IMPORTED_MODULE_6___default","_extends","closeDialog","dismissDialog","reason","body","appendChild","setTimeout","unmountComponentAtNode","removeChild","update","newProps","suppressUnhandledRejections","showModal","DataSource","Table","Schema","RefreshScheduleType","RefreshScheduleDefault","Field","Action","AntdForm","UserProfile","Moment","prop_types__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_0___default","lodash__WEBPACK_IMPORTED_MODULE_1__","moment__WEBPACK_IMPORTED_MODULE_2__","moment__WEBPACK_IMPORTED_MODULE_2___default","syntax","doc","doc_url","type_name","interval","time","day_of_week","until","oneOf","initialValue","oneOfType","content","node","required","readOnly","autoFocus","minLength","placeholder","contentAfter","loading","callback","pullRight","disabledWhenDirty","validateFieldsAndScroll","email","profileImageUrl","isDisabled","checkMoment","propName","componentName","isRequiredValid","isOptionalValid","moment","isMoment","IntervalEnum","NEVER","SECONDS","MINUTES","HOURS","DAYS","WEEKS","localizeTime","_time$split2","_slicedToArray","split","hrs","mins","utc","hour","minute","local","format","secondsToInterval","count","intervalToSeconds","intervalInSeconds","pluralize","ret","_secondsToInterval","rounded","Math","round","omitSingleValueNumber","toHuman","replace","toUpperCase","colWidth","widgetWidth","capitalize","_capitalize","remove","notEquals","Array","other","indexOf","filtered","notEmpty","collection","isEmpty","showError","$touched","$invalid","units","prettySize","bytes","isNaN","parseFloat","isFinite","unit","toFixed","join","arr","LoadingState","react__WEBPACK_IMPORTED_MODULE_1___default","_components_BigMessage__WEBPACK_IMPORTED_MODULE_2__","icon","routesToAngularRoutes","routes","template","each","_ref","path","_objectWithoutProperties","prop","currentPage","cleanAngularProps","omitAngularProps","obj","v","k","startsWith","isObject","cloneDeep","ControllerType","params","isLoaded","searchTerm","updateSearch","selectedTags","array","updateSelectedTags","page","itemsPerPage","totalItemsCount","pageSizeOptions","pageItems","updatePagination","handleError","WrappedComponent","itemsSource","stateStorage","ItemsListWrapper","_React$Component","_this","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","StateStorage","setState","getState","validate","getCallbackContext","state","onBeforeUpdate","onAfterUpdate","onError","error","initialState","debounce","_inherits","totalCount","rest","current","locals","children","controller","react__WEBPACK_IMPORTED_MODULE_7___default","_defineProperty","propTypes","defaultProps","hoistNonReactStatics","User","disableResource","enableUser","userName","delete","success","is_disabled","statusText","isString","disableUser","post","warning","deleteUser","convertUserInfo","api_key","groupIds","groups","isInvitationPending","is_invitation_pending","regenerateApiKey","sendPasswordReset","_ref2","mailSettingsMissing","reset_link","resendInvitation","_ref3","invite_link","UserService","$resource","UserResource","method","save","query","isArray","disable","enable","Mustache","escape","Query","DATETIME_FORMATS","date-range","datetime-local","datetime-range","datetime-with-seconds","datetime-range-with-seconds","normalizeNumericValue","defaultValue","isDateRangeParameter","paramType","Parameter","parameter","parentQueryId","useCurrentDateTime","global","enumOptions","queryId","setValue","configurable","writable","_createClass","constructor","getValue","$$value","start","end","isValid","prefix","urlPrefix","keyStart","keyEnd","has","associatedDropdown","dropdownQueryId","$promise","asDropdown","isNull","normalizedValue","set","param","isUndefined","Parameters","queryString","updateParameters","initFromQueryString","parameters","parts","parse","uniq","collectParams","part","union","e","cachedQueryText","parameterNames","parseQuery","parametersMap","fromUrlParams","parameterDef","zipObject","_toConsumableArray","toUrlParams","keys","encodeURIComponent","QueryResultErrorFactory","QueryResultError","errorMessage","updatedAt","QueryResource","QueryResult","QueryService","recent","archive","myQueries","fork","resultById","favorite","transformRequest","unfavorite","newQuery","schedule","formatted","err","String","getSourceLink","isNew","hasDailySchedule","match","scheduleInLocalTime","hasResult","latest_query_data","latest_query_data_id","paramsRequired","getParameters","hasParameters","getParametersDefs","prepareQueryResultExecution","execute","maxAge","missingParams","getMissing","paramsWord","valuesWord","job","status","queryResult","query_result","getById","data_source_id","getQueryResult","getByQueryId","getValues","getQueryResultByText","selectedQueryText","queryText","getUrl","source","hash","getQueryResultPromise","toPromise","$parameters","search","Group","GroupService","cache","members","addMember","removeMember","dataSources","addDataSource","removeDataSource","updateDataSource","SearchInput","showIcon","onChange","InputControl","Input","Search","target","Menu","selected","active","aria-hidden","MenuIcon","ProfileImage","_ref4","Tags","_ref5","_components_TagsList__WEBPACK_IMPORTED_MODULE_9__","tagsUrl","onUpdate","PageSizeSelect","_ref6","antd_lib_select__WEBPACK_IMPORTED_MODULE_8___default","option","Option","policy","setPolicy","DefaultPolicy","newPolicy","Sidebar","Content","Layout","_state","defaults","pageSize","tags","UrlStateStorage","_StateStorage","defaultState","_get","q","defaultOrderBy","compileOrderBy","_parseOrderBy","parseOrderBy","order","reverse","parseInt","page_size","navigateTo","$applyAsync","BigMessage","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","react2angular__WEBPACK_IMPORTED_MODULE_2__","component","react2angular","SCHEMA_NOT_SUPPORTED","SCHEMA_LOAD_ERROR","IMG_ROOT","DataSourceService","DataSourceResource","types","test","getSchema","refresh","_schema","dataSourceId","fetchSchema","recordEvent","lodash__WEBPACK_IMPORTED_MODULE_0__","_services_ng__WEBPACK_IMPORTED_MODULE_1__","events","eventsToSend","objectType","objectId","additionalProperties","object_type","object_id","timestamp","Date","now","screen_resolution","screen","height","Paginator","antd_lib_pagination__WEBPACK_IMPORTED_MODULE_3__","antd_lib_pagination__WEBPACK_IMPORTED_MODULE_3___default","defaultCurrent","defaultPageSize","total","bindings","paginator","$scope","onPageChanged","setPage","ItemsSource","getRequest","doRequest","processResults","_ref2$isPlainList","isPlainList","_this$_paginator","_paginator","prevPage","prevItemsPerPage","setItemsPerPage","_changed","_sorter","toggleField","_savedOrderByField","sorting","_searchTerm","setField","_selectedTags","PromiseRejectionError","_fetcher","PlainListFetcher","PaginatedListFetcher","_pageItems","_params","changes","customParams","context","setCustomParams","_beforeUpdate","fetch","results","allResults","_allItems","setTotalCount","_afterUpdate","allItems","Sorter","ResourceItemsSource","_ItemsSource","getResource","getItemProcessor","resource","processItem","SettingsMenuItem","menuItem","pathPrefix","isActive","SettingsMenu","sortBy","getFields","configurationSchema","configuration_schema","properties","endsWith","normalizeSchema","default","setDefaultValueForCheckboxes","isNewTarget","targetOptions","inputs","position","input","toString","orderedInputs","updateTargetWithValues","getBase64","file","reader","FileReader","readAsDataURL","onload","substr","onerror","numeral","scalePercentBy100","urlPattern","createFormatter","displayAs","_","createNumberFormatter","numberFormat","createBooleanFormatter","booleanValues","dateTimeFormat","allowHTML","highlightLinks","formatSimpleTemplate","str","Select","MappingType","DashboardAddNew","DashboardMapToExisting","WidgetLevel","StaticValue","parameterMappingsToEditableMappings","mappings","existingParameterNames","mapping","alreadyExists","mapTo","ParameterMappingType","DashboardLevel","clone","editableMappingsToParameterMappings","fromPairs","synchronizeWidgetTitles","sourceMappings","widgets","affectedWidgets","sourceMapping","widget","widgetMappings","parameterMappings","widgetMapping","ParameterMappingInput","_getPrototypeOf2","_len","args","_key","_assertThisInitialized","labelCol","span","wrapperCol","existingParamNames","updateParamMapping","noExisting","react__WEBPACK_IMPORTED_MODULE_9___default","antd_lib_radio__WEBPACK_IMPORTED_MODULE_19___default","updateSourceType","disabled","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_21___default","antd_lib_icon__WEBPACK_IMPORTED_MODULE_16___default","theme","antd_lib_input__WEBPACK_IMPORTED_MODULE_18___default","_this$props2","antd_lib_select__WEBPACK_IMPORTED_MODULE_12___default","dropdownMatchSelectWidth","_components_ParameterValueInput__WEBPACK_IMPORTED_MODULE_22__","onSelect","renderDashboardAddNew","renderDashboardMapToExisting","renderStaticValue","inputError","_this$renderInputBloc2","renderInputBlock","label","help","antd_lib_form__WEBPACK_IMPORTED_MODULE_20___default","layout","Item","formItemProps","renderMappingTypeSelector","style","visibility","validateStatus","any","MappingEditor","_this2","show","hide","_this$state","_components_HelpTrigger__WEBPACK_IMPORTED_MODULE_26__","antd_lib_button__WEBPACK_IMPORTED_MODULE_15___default","antd_lib_popover__WEBPACK_IMPORTED_MODULE_14___default","trigger","renderContent","onVisibleChange","size","TitleEditor","showPopup","_this3","getMappingTitle","newMapping","existingParams","paramTitle","onEditingTitleChange","onPressEnter","maxLength","renderPopover","onPopupVisibleChange","renderEditButton","ParameterMappingListInput","_React$Component4","oldMapping","findIndex","antd_lib_table__WEBPACK_IMPORTED_MODULE_13___default","record","idx","Column","getDefaultValue","existingParamsNames","react__WEBPACK_IMPORTED_MODULE_9__","getSourceTypeLabel","_typeof","getStringValue","mappedTo","antd_lib_tag__WEBPACK_IMPORTED_MODULE_17___default","rejection","Widget","WidgetFactory","dashboardGridOptions","WidgetService","visualizationOptions","sizeX","sizeY","defaultSizeY","minSizeX","maxSizeX","minSizeY","maxSizeY","min","ceil","rowHeight","defaultWidth","defaultHeight","calculatePositionOptions","pick","updateOriginalPosition","$originalPosition","truncate","force","refreshStartedAt","getQuery","getParameterMappings","queryParams","localTypes","removedParams","difference","PreviewCard","imageUrl","roundedImage","profile__image--settings","UserPreviewCard","withLink","DataSourcePreviewCard","TagsControl","getAvailableTags","EditTagsDialog","onEdit","trim","react__WEBPACK_IMPORTED_MODULE_8___default","role","editTags","Fragment","tag","modelTagsControl","archivedTooltip","ModelTagsControl","isDraft","isArchived","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_11___default","QueryTagsControl","DashboardTagsControl","BaseColors","Blue","Red","Green","Purple","Cyan","Orange","Light Blue","Lilac","Light Green","Brown","Black","Gray","Pink","Dark Blue","AdditionalColors","Indian Red","Green 2","Green 3","DarkTurquoise","Dark Violet","Pink 2","ColorPaletteArray","ColorPalette","Destination","DestinationService","cleanNumber","plotlyCleanNumber","defaultFormatSeriesText","defaultFormatSeriesTextForPie","getFontColor","bgcolor","g","b","matches","exec","normalizeValue","axisType","naturalSort","$a","$b","calculateAxisRange","seriesList","minValue","maxValue","isNumber","series","y","max","getScaleType","scale","getTitle","axis","calculateDimensions","cellsInRow","cellWidth","cellHeight","xPadding","yPadding","hasX","columnMapping","hasY2","serie","seriesOptions","globalSeriesType","yAxis","stacking","prepareChartData","sortX","formatNumber","formatPercent","percentFormat","formatText","textFormat","hoverinfo","getHoverInfoPattern","seriesColor","seriesIndex","color","getSeriesColor","x","xAxis","cleanYValue","sourceData","Map","xValues","yValues","yErrorValues","yError","yPercent","raw","$raw","@@x","plotlySeries","error_y","marker","insidetextfont","yaxis","showDataLabels","textposition","fill","setType","boxpoints","showpoints","jitter","pointpos","prepareData","_calculateDimensions","getPieHoverInfoPattern","getDefaultColor","d3","ordinal","domain","range","valuesColors","valuesOptions","xPosition","yPosition","floor","seriesTotal","reduce","abs","labels","hole","colors","textinfo","textfont","direction","preparePieData","flatten","colorScheme","heatMinColor","heatMaxColor","z","colorscale","sort","sortY","reverseX","reverseY","zMax","dataLabels","showlegend","datum","zValue","zVal","prepareHeatmapData","prepareLayout","element","_calculateDimensions2","margin","pad","offsetWidth","offsetHeight","autosize","legend","enabled","hasName","annotations","xanchor","yanchor","showarrow","boxmode","boxgroupgap","xaxis","automargin","categoryorder","showticklabels","rangeMin","rangeMax","yaxis2","overlaying","side","barmode","updateSeriesText","hover","@@name","percentValues","updateUnifiedXAxisValues","sorted","defaultY","unifiedX","Set","add","getUnifiedXAxisValues","updateData","sumOfCorrespondingPoints","sum","sign","updatePercentValues","prevSeries","updateLayout","plotlyElement","updatePlot","transformName","orientation","querySelector","parentNode","tagName","toLowerCase","overflow","fixLegendContainer","bounds","querySelectorAll","getBoundingClientRect","top","bottom","fieldRules","rule","DynamicForm","actionName","inProgress","prevState","inProgressActions","isSubmitting","preventDefault","form","onSubmit","msg","_this$props$form","setFieldsValue","getFieldsValue","dataset","setActionInProgress","actionCallbacks","fieldName","fileList","helper","actions","acc","cur","_this$props$form2","getFieldDecorator","getFieldValue","fileOptions","rules","getValueFromEvent","base64File","upload","antd_lib_upload__WEBPACK_IMPORTED_MODULE_14___default","beforeUpload","antd_lib_button__WEBPACK_IMPORTED_MODULE_13___default","antd_lib_icon__WEBPACK_IMPORTED_MODULE_15___default","antd_lib_select__WEBPACK_IMPORTED_MODULE_17___default","optionFilterProp","fieldLabel","valuePropName","antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_12___default","renderUpload","renderSelect","antd_lib_input_number__WEBPACK_IMPORTED_MODULE_11___default","antd_lib_input__WEBPACK_IMPORTED_MODULE_10___default","fields","FormItem","Form","feedbackIcons","hasFeedback","fieldProps","data-test","renderField","isFieldsTouched","actionProps","htmlType","disableWhenDirty","handleAction","data-action","submitProps","hideSubmitButton","saveText","saveButton","antd_lib_form__WEBPACK_IMPORTED_MODULE_9___default","handleSubmit","renderFields","renderActions","DOMAIN","HELP_PATH","IFRAME_TIMEOUT","TYPES","HOME","VALUE_SOURCE_OPTIONS","SHARE_DASHBOARD","DS_ATHENA","DS_BIGQUERY","DS_URL","DS_MONGODB","DS_GOOGLE_SPREADSHEETS","DS_GOOGLE_ANALYTICS","DS_AXIBASETSD","DS_RESULTS","HelpTrigger","clearTimeout","iframeLoadingTimeout","iframeRef","pagePath","loadIframe","createRef","tooltip","cx","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_10___default","openDrawer","antd_lib_drawer__WEBPACK_IMPORTED_MODULE_11___default","onClose","closeDrawer","destroyOnClose","ref","ready","onLoad","onIframeLoaded","_components_BigMessage__WEBPACK_IMPORTED_MODULE_12__","rel","_components_DynamicComponent__WEBPACK_IMPORTED_MODULE_13__","onLeave","openPageUrl","darkenColor","prepareFeatureProperties","getValueForFeature","getColorByValue","createScale","inferCountryCodeType","chroma_js__WEBPACK_IMPORTED_MODULE_0__","chroma_js__WEBPACK_IMPORTED_MODULE_0___default","lodash__WEBPACK_IMPORTED_MODULE_1___default","_lib_value_format__WEBPACK_IMPORTED_MODULE_2__","White","Light Gray","chroma","darken","hex","formatter","countryCodeField","valueField","code","feature","valueFormatted","countryCodeType","limits","defaultColor","features","steps","limit","first","clusteringMode","mapType","regex","countries","iso_a2","iso_a3","iso_n3","subdiv_japan","name_local","iso_3166_2","initState","mapValues","chain","memo","toPairs","EmptyState","PageHeader","OrganizationStatus","objectCounters","object_counters","Dashboard","collectDashboardFilters","dashboard","queryResults","urlParams","filters","getFilters","queryFilter","hasQueryStringValue","dashboard_filters_enabled","prepareWidgetsForDashboard","defaultWidgetSizeY","w","groupBy","widgetsAtRow","col","DashboardService","prepareDashboardWidgets","transformSingle","publicAccessEnabled","public_url","transform","transformResponse","slug","can_edit","calculateNewWidgetPosition","defaultSizeX","bottomLine","left","right","from","to","constant","globalParams","InputWithCopy","select","execCommand","copied","resetCopyState","copyFeatureSupported","queryCommandSupported","copyButton","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_7___default","antd_lib_icon__WEBPACK_IMPORTED_MODULE_6___default","cursor","copy","antd_lib_input__WEBPACK_IMPORTED_MODULE_5___default","addonAfter","TimeAgo","moment__WEBPACK_IMPORTED_MODULE_0__","moment__WEBPACK_IMPORTED_MODULE_0___default","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","react_dom__WEBPACK_IMPORTED_MODULE_3__","react_dom__WEBPACK_IMPORTED_MODULE_3___default","prop_types__WEBPACK_IMPORTED_MODULE_4__","prop_types__WEBPACK_IMPORTED_MODULE_4___default","_components_proptypes__WEBPACK_IMPORTED_MODULE_5__","_services_auth__WEBPACK_IMPORTED_MODULE_6__","_lib_hooks_useForceUpdate__WEBPACK_IMPORTED_MODULE_7__","autoUpdate","startDate","isNil","toMoment","fromNow","forceUpdate","useForceUpdate","useEffect","timer","setInterval","clearInterval","directive","link","$element","attr","modelName","amTimeAgo","$watch","$on","instanceOf","ALL_VALUES","NONE_VALUES","FilterType","friendlyName","multiple","FiltersType","createFilterChangeHandler","f","filterData","every","rowValue","filterValues","some","filterValue","isSame","Filters","react__WEBPACK_IMPORTED_MODULE_10___default","antd_lib_select__WEBPACK_IMPORTED_MODULE_13___default","allowClear","showSearch","OptGroup","CounterCard","QueuesTable","QueriesTable","OtherTasksTable","react__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_2__","prop_types__WEBPACK_IMPORTED_MODULE_2___default","antd_lib_table__WEBPACK_IMPORTED_MODULE_3__","antd_lib_table__WEBPACK_IMPORTED_MODULE_3___default","antd_lib_card__WEBPACK_IMPORTED_MODULE_4__","antd_lib_card__WEBPACK_IMPORTED_MODULE_4___default","antd_lib_spin__WEBPACK_IMPORTED_MODULE_5__","antd_lib_spin__WEBPACK_IMPORTED_MODULE_5___default","antd_lib_badge__WEBPACK_IMPORTED_MODULE_6__","antd_lib_badge__WEBPACK_IMPORTED_MODULE_6___default","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_7__","spinning","commonColumns","queryColumns","otherTasksColumns","queuesColumns","TablePropTypes","getTags","_services_ng__WEBPACK_IMPORTED_MODULE_0__","processTags","antd_lib_tabs__WEBPACK_IMPORTED_MODULE_2__","antd_lib_tabs__WEBPACK_IMPORTED_MODULE_2___default","_components_PageHeader__WEBPACK_IMPORTED_MODULE_3__","activeTab","defaultActiveKey","animated","TabPane","tab","react2angular__WEBPACK_IMPORTED_MODULE_3__","classnames__WEBPACK_IMPORTED_MODULE_4__","classnames__WEBPACK_IMPORTED_MODULE_4___default","_services_ng__WEBPACK_IMPORTED_MODULE_5__","_services_organizationStatus__WEBPACK_IMPORTED_MODULE_7__","createDashboard","open","Step","completed","urlText","done","illustration","helpLink","onboardingMode","alert","showAlertStep","showDashboardStep","inviteUsers","showInviteStep","isCompleted","organizationStatus","data_sources","queries","alerts","dashboards","users","step","ORDER_BY_REVERSE","compile","compiled","substring","setReverse","_parse","ListItemAddon","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_2__","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_2___default","isSelected","isStaged","alreadyInGroup","General","info","antd_lib_card__WEBPACK_IMPORTED_MODULE_6___default","antd_lib_list__WEBPACK_IMPORTED_MODULE_5___default","itemLayout","renderItem","extra","DatabaseMetrics","Queues","_ref7","_ref8","_ref9","queue","Manager","_ref10","_components_TimeAgo__WEBPACK_IMPORTED_MODULE_7__","lastRefreshAt","startedAt","outdatedQueriesCount","Steps","StepEnum","SELECT_TYPE","CONFIGURE_IT","DONE","CreateSourceDialog","searchText","selectedType","savingSource","currentStep","successCallback","errorCallback","onCreate","filteredTypes","minHeight","maxHeight","_components_items_list_components_EmptyState__WEBPACK_IMPORTED_MODULE_14__","antd_lib_list__WEBPACK_IMPORTED_MODULE_8___default","imageFolder","helpTriggerPrefix","helpTriggerType","toUpper","HELP_TRIGGER_TYPES","_components_HelpTrigger__WEBPACK_IMPORTED_MODULE_17__","_components_dynamic_form_DynamicForm__WEBPACK_IMPORTED_MODULE_15__","createSource","selectType","_components_PreviewCard__WEBPACK_IMPORTED_MODULE_13__","_this$state2","sourceType","antd_lib_modal__WEBPACK_IMPORTED_MODULE_9___default","footer","antd_lib_button__WEBPACK_IMPORTED_MODULE_7___default","resetType","antd_lib_steps__WEBPACK_IMPORTED_MODULE_11___default","progressDot","renderTypeSelector","renderForm","wrapDialog","componentsRegistry","activeInstances","registerComponent","dynamicComponent","unregisterComponent","DynamicComponent","RealComponent","getDefaultTitle","words","isTypeDateRange","NameInput","existingNames","setValidation","helpText","display","antd_lib_form__WEBPACK_IMPORTED_MODULE_10___default","antd_lib_input__WEBPACK_IMPORTED_MODULE_14___default","EditParameterSettingsDialog","_useState2","useState","setParam","_useState4","isNameValid","setIsNameValid","_useState6","initialQuery","setInitialQuery","antd_lib_button__WEBPACK_IMPORTED_MODULE_12___default","antd_lib_divider__WEBPACK_IMPORTED_MODULE_15___default","colon","antd_lib_checkbox__WEBPACK_IMPORTED_MODULE_11___default","defaultChecked","checked","TextArea","_components_QuerySelector__WEBPACK_IMPORTED_MODULE_17__","selectedQuery","SEARCH_DEBOUNCE_DURATION","StaleSearchError","QuerySelector","setSearchTerm","searching","setSearching","searchResults","setSearchResults","_useState8","setSelectedQuery","isStaleSearch","debouncedSearch","term","filteredResults","is_draft","rejectStale","clearIcon","selectQuery","spinIcon","hidden","cancel","antd_lib_input__WEBPACK_IMPORTED_MODULE_13___default","suffixIcon","antd_lib_select__WEBPACK_IMPORTED_MODULE_14___default","onSearch","notFoundContent","filterOption","defaultActiveFirstOption","_components_tags_control_TagsControl__WEBPACK_IMPORTED_MODULE_17__","suffix","marginTop","inactive","NoTaggedObjectsFound","react__WEBPACK_IMPORTED_MODULE_5___default","_components_BigMessage__WEBPACK_IMPORTED_MODULE_8__","_components_tags_control_TagsControl__WEBPACK_IMPORTED_MODULE_9__","objectOf","SelectItemsDialog","saveInProgress","searchItems","loadItems","itemKey","selectedItems","isStagedList","renderStagedItem","_render","react__WEBPACK_IMPORTED_MODULE_11___default","antd_lib_list__WEBPACK_IMPORTED_MODULE_16___default","clickable","toggleItem","dialogTitle","inputPlaceholder","selectedItemsTitle","hasResults","antd_lib_modal__WEBPACK_IMPORTED_MODULE_14___default","okText","okButtonProps","antd_lib_input__WEBPACK_IMPORTED_MODULE_15___default","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_19__","_components_BigMessage__WEBPACK_IMPORTED_MODULE_18__","CardsList","itemId","imgSrc","filteredItems","_components_items_list_components_EmptyState__WEBPACK_IMPORTED_MODULE_10__","renderListItem","TextboxDialog","preview","markdown","toHTML","updatePreview","onConfirm","finally","saveWidget","wrapProps","onTextChanged","antd_lib_divider__WEBPACK_IMPORTED_MODULE_12___default","dashed","dangerouslySetInnerHTML","__html","DeleteGroupButton","group","button","onGroupDeleted","Modal","confirm","okType","cancelText","$delete","deleteGroup","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_9___default","mouseLeaveDelay","DetailsPageSidebar","antd_lib_button__WEBPACK_IMPORTED_MODULE_2__","antd_lib_button__WEBPACK_IMPORTED_MODULE_2___default","antd_lib_divider__WEBPACK_IMPORTED_MODULE_3__","antd_lib_divider__WEBPACK_IMPORTED_MODULE_3___default","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_4__","_components_items_list_ItemsList__WEBPACK_IMPORTED_MODULE_5__","_DeleteGroupButton__WEBPACK_IMPORTED_MODULE_6__","_services_auth__WEBPACK_IMPORTED_MODULE_7__","canAddMembers","onAddMembersClick","canAddDataSources","onAddDataSourcesClick","canRemove","GroupName","react__WEBPACK_IMPORTED_MODULE_3___default","_components_EditInPlace__WEBPACK_IMPORTED_MODULE_5__","isEditable","ignoreBlanks","editor","onDone","$save","updateGroupName","SchedulePhrase","_this$content","short","full","isLink","seconds","humanized","_this$props$schedule","dayOfWeek","absoluteUrl","urlObj","URL","protocol","host","Visualization","defaultColumn","@","renderDefault","formatFunction","renderImage","imageUrlTemplate","imageWidth","imageHeight","imageTitleTemplate","renderLink","linkUrlTemplate","linkTitleTemplate","linkTextTemplate","linkOpenInNewTab","Alert","AlertService","newData","query_id","destination_id","destinations","Notification","NotificationsService","requestPermission","pageVisible","onclick","focus","_services_auth__WEBPACK_IMPORTED_MODULE_1__","parsed","DateTimeInput","withSeconds","dateFormat","additionalAttributes","antd_lib_date_picker__WEBPACK_IMPORTED_MODULE_4___default","showTime","RangePicker","DatePicker","DateTimeRangeInput","QueryResultsLink","fileType","resultId","getId","resultData","getData","embed","ItemsFetcher","_originalGetRequest","_originalDoRequest","_originalProcessResults","_getRequest","_processResults","_ItemsFetcher","getItemsForPage","_ItemsFetcher2","getQueryResultData","getColumns","useQueryResult","setData","isCancelled","addPointToSeries","point","seriesCollection","seriesName","getChartData","xValue","eValue","sizeValue","forOwn","definition","definitionParts","yValue","ySeriesName","zIndex","AutocompleteToggle","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_1__","antd_lib_tooltip__WEBPACK_IMPORTED_MODULE_1___default","_services_recordEvent__WEBPACK_IMPORTED_MODULE_4__","onToggle","tooltipMessage","newState","toggle","DateInput","DateRangeInput","EditInPlace","editing","newValue","inputRef","keyCode","shiftKey","stopEditing","onFocus","startEditing","onBlur","onKeyDown","keyDown","self","componentDidUpdate","prevProps","renderEdit","renderNormal","availableTags","compact","antd_lib_modal__WEBPACK_IMPORTED_MODULE_8___default","antd_lib_select__WEBPACK_IMPORTED_MODULE_7___default","EmailSettingsWarning","_services_auth__WEBPACK_IMPORTED_MODULE_3__","featureName","FavoritesControl","is_favorite","$unfavorite","$favorite","savedIsFavorite","$broadcast","forceUpdateTag","ParameterValueInput","_DateTimeInput__WEBPACK_IMPORTED_MODULE_12__","_this$props3","_DateInput__WEBPACK_IMPORTED_MODULE_10__","_this$props4","_DateTimeRangeInput__WEBPACK_IMPORTED_MODULE_13__","_this$props5","_this$props6","_DateRangeInput__WEBPACK_IMPORTED_MODULE_11__","_this$props7","enumOptionsArray","dropdownClassName","_this$props8","_QueryBasedParameterInput__WEBPACK_IMPORTED_MODULE_14__","_this$props9","antd_lib_input_number__WEBPACK_IMPORTED_MODULE_9___default","_this$props10","antd_lib_input__WEBPACK_IMPORTED_MODULE_8___default","renderDateTimeWithSecondsInput","renderDateTimeInput","renderDateInput","renderDateTimeRangeWithSecondsInput","renderDateTimeRangeInput","renderDateRangeInput","renderEnumInput","renderQueryBasedInput","renderNumberInput","renderTextInput","QueryBasedParameterInput","_loadOptions","regeneratorRuntime","async","_context","prev","awrap","loadDropdownValues","sent","stop","QuerySnippet","QuerySnippetService","getSnippet","snippet","tabTrigger","KeyboardShortcuts","handlers","onShortcut","shortcut","retunValue","fn","KeyboardShortcutsService","modKey","navigator","platform","keymap","without","Mousetrap","bindGlobal","unbind","service","buildKeywordsFromSchema","schema","tableKeywords","columnKeywords","tableColumnKeywords","table","score","meta","keywords","caption","buildTableColumnKeywords","tableColumn","TagsList","allTags","clear","toggleTag","ErrorHandler","logToConsole","reset","console","AddWidgetDialog","selectedVis","visualizations","visualizationId","visualizationGroups","vis","htmlFor","selectVisualization","_components_QuerySelector__WEBPACK_IMPORTED_MODULE_12__","renderVisualizationInput","_components_ParameterMappingInput__WEBPACK_IMPORTED_MODULE_11__","updateParamMappings","getParamValuesSnapshot","dashboardParameters","EditParameterMappingsDialog","originalParamValuesSnapshot","newMappings","valuesChanged","isMatch","widgetsToSave","all","react__WEBPACK_IMPORTED_MODULE_12___default","_components_ParameterMappingInput__WEBPACK_IMPORTED_MODULE_16__","dashboardRefreshIntervals","queryRefreshIntervals","initToggle","toggleBlockFn","$","addClass","appendTo","empty","on","toggleClass","renderComma","renderString","comma","renderBrace","isForArray","isOpening","brace","renderWithNested","valuesIsArray","ellipsis","html","parents","eq","renderEllipsis","block","renderKeys","removeClass","firstItem","lastItem","val","nestedBlock","renderValue","createRenderNestedBlock","functions","_len2","_key2","combine","comment","renderComment","isPrimitive","renderPrimitive","renderArray","renderObject","renderJsonView","CreateGroupDialog","antd_lib_modal__WEBPACK_IMPORTED_MODULE_5___default","antd_lib_input__WEBPACK_IMPORTED_MODULE_6___default","_ref$validate","totalPages","last","WEEKDAYS_SHORT","weekdaysShort","WEEKDAYS_FULL","weekdays","DATE_FORMAT","HOUR_FORMAT","TimeEditor","setTime","showUtc","isUTC","antd_lib_time_picker__WEBPACK_IMPORTED_MODULE_12___default","minuteStep","newTime","data-testid","ScheduleDialog","newSchedule","newSeconds","newInterval","setScheduleUntil","day","isEqual","antd_lib_modal__WEBPACK_IMPORTED_MODULE_10___default","intervals","int","cnt","secs","antd_lib_radio__WEBPACK_IMPORTED_MODULE_14___default","setWeekday","Button","setUntilToggle","antd_lib_date_picker__WEBPACK_IMPORTED_MODULE_11___default","refreshOptions","_secondsToInterval3","ChangePasswordDialog","newPassword","currentPassword","repeatPassword","errors","fieldError","updatingPassword","validateFields","touched","userData","old_password","password","_e$target","_this$state3","inputProps","handleChange","updatePassword","antd_lib_form__WEBPACK_IMPORTED_MODULE_8___default","Password","CreateUserDialog","savingUser","formFields","createUser","_components_dynamic_form_DynamicForm__WEBPACK_IMPORTED_MODULE_11__","antd_lib_alert__WEBPACK_IMPORTED_MODULE_10___default","UserEdit","sendingPasswordEmail","passwordLink","resendingInvitation","regeneratingApiKey","maskClosable","autoFocusButton","toggleUser","togglingUser","loadingGroups","renderUserGroups","_dynamic_form_DynamicForm__WEBPACK_IMPORTED_MODULE_19__","saveUser","antd_lib_tag__WEBPACK_IMPORTED_MODULE_13___default","antd_lib_form__WEBPACK_IMPORTED_MODULE_11___default","_InputWithCopy__WEBPACK_IMPORTED_MODULE_21__","antd_lib_button__WEBPACK_IMPORTED_MODULE_10___default","_this$state4","antd_lib_alert__WEBPACK_IMPORTED_MODULE_9___default","react__WEBPACK_IMPORTED_MODULE_7__","closable","_this$state5","_this$state6","renderUserInfoForm","renderApiKey","changePassword","renderResendInvitation","renderSendPasswordReset","renderPasswordLinkAlert","rendertoggleUser","UserShow","antd_lib_tag__WEBPACK_IMPORTED_MODULE_5___default","_this$props$user","filterTypes","getColumnNameWithoutType","typeSplit","getColumnCleanName","getColumnFriendlyName","QueryResultService","$timeout","QueryResultResource","Job","JobWithApiKey","statuses","1","2","3","4","handleErrorResponse","deferred","defer","isLoadingResult","max_age","refreshStatus","columnTypes","newType","log","retrieved_at","updated_at","runtime","columnNames","getColumnNames","getRawData","uniqBy","unix","promise","tryCount","query_result_id","loadResult","pow","tryNumber","loadLatestCachedResult","jobResponse","getStatus","queryName","getUpdatedAt","EditVisualizationDialog","setFilters","filteredData","useMemo","originalOptions","setName","nameChanged","setNameChanged","_useState10","setOptions","_useState12","setSaveInProgress","onOptionsChanged","newOptions","_registeredVisualizat","wrapClassName","saveVisualization","savedVisualization","updateQueryVisualizations","isDirty","optionsChanged","antd_lib_grid__WEBPACK_IMPORTED_MODULE_11__","gutter","md","antd_lib_select__WEBPACK_IMPORTED_MODULE_9___default","newName","onNameChanged","_components_Filters__WEBPACK_IMPORTED_MODULE_13__","antd_lib_input__WEBPACK_IMPORTED_MODULE_4___default","xAxisLabel","onXAxisLabelChanged","yAxisLabel","onYAxisLabelChanged","antd_lib_switch__WEBPACK_IMPORTED_MODULE_2__","antd_lib_switch__WEBPACK_IMPORTED_MODULE_2___default","_visualizations__WEBPACK_IMPORTED_MODULE_3__","controls","updates","merge","updateOptions","antd_lib_select__WEBPACK_IMPORTED_MODULE_5___default","DashboardListEmptyState","_components_NoTaggedObjectsFound__WEBPACK_IMPORTED_MODULE_3__","_components_empty_state_EmptyState__WEBPACK_IMPORTED_MODULE_4__","API_SHARE_URL","ShareDashboardDialog","marginBottom","saving","apiUrl","enableAccess","disableAccess","hasQueryParams","_components_HelpTrigger__WEBPACK_IMPORTED_MODULE_16__","headerContent","antd_lib_alert__WEBPACK_IMPORTED_MODULE_11___default","antd_lib_switch__WEBPACK_IMPORTED_MODULE_8___default","_components_InputWithCopy__WEBPACK_IMPORTED_MODULE_15__","QueriesListEmptyState","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","gridstack__WEBPACK_IMPORTED_MODULE_6__","gridstack__WEBPACK_IMPORTED_MODULE_6___default","sequence","fns","noop","JQueryUIGridStackDragDropPlugin","grid","gridstack","GridStackDragDropPlugin","registerPlugin","resizable","el","opts","resize","draggable","containment","isNested","parent","drag","droppable","accept","isDroppable","Boolean","eventName","./en-SG","./en-SG.js","./en-au","./en-au.js","./en-ca","./en-ca.js","./en-gb","./en-gb.js","./en-ie","./en-ie.js","./en-il","./en-il.js","./en-nz","./en-nz.js","webpackContext","req","webpackContextResolve","./avatar.svg","./db-logos/Cassandra.png","./db-logos/athena.png","./db-logos/aws_es.png","./db-logos/axibasetsd.png","./db-logos/bigquery.png","./db-logos/clickhouse.png","./db-logos/cockroach.png","./db-logos/couchbase.png","./db-logos/csv.png","./db-logos/databricks.png","./db-logos/db2.png","./db-logos/drill.png","./db-logos/druid.png","./db-logos/dynamodb_sql.png","./db-logos/elasticsearch.png","./db-logos/google_analytics.png","./db-logos/google_spreadsheets.png","./db-logos/graphite.png","./db-logos/hive.png","./db-logos/hive_http.png","./db-logos/impala.png","./db-logos/influxdb.png","./db-logos/jirajql.png","./db-logos/kibana.png","./db-logos/kylin.png","./db-logos/mapd.png","./db-logos/memsql.png","./db-logos/mongodb.png","./db-logos/mssql.png","./db-logos/mysql.png","./db-logos/oracle.png","./db-logos/pg.png","./db-logos/phoenix.png","./db-logos/presto.png","./db-logos/prometheus.png","./db-logos/python.png","./db-logos/qubole.png","./db-logos/rds_mysql.png","./db-logos/redshift.png","./db-logos/results.png","./db-logos/rockset.png","./db-logos/salesforce.png","./db-logos/scylla.png","./db-logos/snowflake.png","./db-logos/sqlite.png","./db-logos/treasuredata.png","./db-logos/uptycs.png","./db-logos/url.png","./db-logos/vertica.png","./db-logos/yandex_appmetrika.png","./db-logos/yandex_metrika.png","./destinations/chatwork.png","./destinations/email.png","./destinations/hangouts_chat.png","./destinations/hipchat.png","./destinations/mattermost.png","./destinations/pagerduty.png","./destinations/slack.png","./destinations/webhook.png","./favicon-16x16.png","./favicon-32x32.png","./favicon-96x96.png","./google_logo.svg","./illustrations/alert.svg","./illustrations/dashboard.svg","./illustrations/query.svg","./logo.png","./logo_white.png","./redash_icon_small.png","./AutocompleteToggle.jsx","./BigMessage.jsx","./ColorBox.jsx","./CreateSourceDialog.jsx","./DateInput.jsx","./DateRangeInput.jsx","./DateTimeInput.jsx","./DateTimeRangeInput.jsx","./DialogWrapper.jsx","./DynamicComponent.jsx","./EditInPlace.jsx","./EditParameterSettingsDialog.jsx","./EditVisualizationButton/QueryControlDropdown.jsx","./EditVisualizationButton/QueryResultsLink.jsx","./EditVisualizationButton/index.jsx","./EmailSettingsWarning.jsx","./FavoritesControl.jsx","./Filters.jsx","./HelpTrigger.jsx","./InputWithCopy.jsx","./NoTaggedObjectsFound.jsx","./PageHeader.jsx","./Paginator.jsx","./ParameterMappingInput.jsx","./ParameterValueInput.jsx","./PreviewCard.jsx","./QueryBasedParameterInput.jsx","./QueryEditor.jsx","./QuerySelector.jsx","./SelectItemsDialog.jsx","./SortIcon.jsx","./TagsList.jsx","./TimeAgo.jsx","./Timer.jsx","./admin/CeleryStatus.jsx","./admin/Layout.jsx","./admin/StatusBlock.jsx","./alerts/alert-subscriptions/index.js","./app-header/index.js","./app-view/error-handler.js","./app-view/index.js","./cancel-query-button/index.js","./cards-list/CardsList.jsx","./dashboards/AddWidgetDialog.jsx","./dashboards/EditParameterMappingsDialog.jsx","./dashboards/TextboxDialog.jsx","./dashboards/edit-dashboard-dialog.js","./dashboards/gridstack/gridstack.js","./dashboards/gridstack/index.js","./dashboards/widget.js","./dynamic-form/DynamicForm.jsx","./dynamic-form/dynamicFormHelper.js","./dynamic-table/default-cell/index.js","./dynamic-table/default-cell/utils.js","./dynamic-table/dynamic-table-row.js","./dynamic-table/index.js","./dynamic-table/json-cell/index.js","./dynamic-table/json-cell/json-view-interactive.js","./empty-state/EmptyState.jsx","./groups/CreateGroupDialog.jsx","./groups/DeleteGroupButton.jsx","./groups/DetailsPageSidebar.jsx","./groups/GroupName.jsx","./groups/ListItemAddon.jsx","./items-list/ItemsList.jsx","./items-list/classes/ItemsFetcher.js","./items-list/classes/ItemsSource.js","./items-list/classes/Paginator.js","./items-list/classes/Sorter.js","./items-list/classes/StateStorage.js","./items-list/components/EmptyState.jsx","./items-list/components/ItemsTable.jsx","./items-list/components/LoadingState.jsx","./items-list/components/Sidebar.jsx","./keywordBuilder.js","./layouts/ContentWithSidebar.jsx","./overlay.js","./parameters.js","./permissions-editor/index.js","./proptypes.js","./queries/ScheduleDialog.jsx","./queries/SchedulePhrase.jsx","./queries/alert-unsaved-changes.js","./queries/api-key-dialog.js","./queries/embed-code-dialog.js","./queries/schema-browser.js","./queries/visualization-embed.js","./query-link.js","./rd-tab/index.js","./settings-screen.js","./tab-nav/index.js","./tags-control/EditTagsDialog.jsx","./tags-control/TagsControl.jsx","./users/ChangePasswordDialog.jsx","./users/CreateUserDialog.jsx","./users/UserEdit.jsx","./users/UserShow.jsx","ColorBox","backgroundColor","QueryControlDropdown","antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_2__","antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_2___default","antd_lib_menu__WEBPACK_IMPORTED_MODULE_3__","antd_lib_menu__WEBPACK_IMPORTED_MODULE_3___default","antd_lib_button__WEBPACK_IMPORTED_MODULE_4__","antd_lib_button__WEBPACK_IMPORTED_MODULE_4___default","antd_lib_icon__WEBPACK_IMPORTED_MODULE_5__","antd_lib_icon__WEBPACK_IMPORTED_MODULE_5___default","react2angular__WEBPACK_IMPORTED_MODULE_6__","_QueryResultsLink__WEBPACK_IMPORTED_MODULE_7__","menu","is_archived","openAddToDashboardForm","selectedTab","showEmbedDialog","queryExecuting","overlay","rotate","EditVisualizationButton","antd_lib_icon__WEBPACK_IMPORTED_MODULE_3__","antd_lib_icon__WEBPACK_IMPORTED_MODULE_3___default","react2angular__WEBPACK_IMPORTED_MODULE_4__","openVisualizationEditor","SortIcon","sortColumn","Timer","_components_proptypes__WEBPACK_IMPORTED_MODULE_4__","_lib_hooks_useForceUpdate__WEBPACK_IMPORTED_MODULE_5__","startTime","valueOf","$sce","AlertSubscription","newSubscription","subscribers","alertId","responses","subscribedDestinations","destination","subscribedUsers","unshift","destinationsDisplay","trustAsHtml","saveSubscriber","sub","alert_id","unsubscribe","subscriber","restrict","scope","logoUrl","basePath","showQueriesMenu","showAlertsLink","showNewQueryMenu","showSettingsMenu","showDashboardsMenu","frontendVersion","backendVersion","version","newVersionAvailable","reload","newDashboard","searchQueries","handler","layouts","bodyClass","fixed","defaultSignedOut","AppViewComponent","route","$$route","authenticated","applyLayout","previous","selectLayout","exception","process","cancelQueryButton","taskId","transclude","Events","cancelExecution","admin","EditDashboardDialog","isFormValid","saveDashboard","toggleAutoHeightClass","isEnabled","$parse","batchUpdate","onLayoutChanged","isOneColumnMode","$el","resizingWidget","draggingWidget","_updateStyles","gridHeight","nodes","_styles","_max","addWidget","updateWidget","minWidth","maxWidth","removeWidget","getNodeByElement","getNodeDataByDOMEl","setWidgetId","setEditing","commit","$attr","isOneColumnModeAssignable","assign","enablePolling","auto","verticalMargin","margins","animate","float","mobileBreakPoint","handles","ui","changedNodes","triggerChange","updateOneColumnMode","hasClass","oneColumnModeClass","gridstackItem","require","gridstackItemId","heightBeforeResize","dirty","wrapper","resultHeight","childrenBounds","child","getComputedStyle","bodyWrapper","elementStyle","controlsHeight","additionalHeight","paddingTop","paddingBottom","scrollWidth","contentsHeight","computeAutoHeight","WidgetDialog","widgetDialogTemplate","DashboardWidgetCtrl","canViewQuery","editTextBox","expandVisualization","editParameterMappings","localParameters","localParametersDefs","isStaticParam","deleteWidget","getName","deleted","load","restricted","public","_utils__WEBPACK_IMPORTED_MODULE_1__","_template_html__WEBPACK_IMPORTED_MODULE_2__","_template_html__WEBPACK_IMPORTED_MODULE_2___default","renderFunctions","image","sanitize","oldValue","clonedElement","append","isNullOrUndefined","filterRows","columnName","sortRows","orderBy","va","vb","validateItemsPerPage","DynamicTablePaginatorAdapter","$ctrl","preparedRows","DynamicTable","$compile","paginatorAdapter","rowsToDisplay","orderByColumnsIndex","orderByColumnsDirection","searchColumns","updateOrderByColumnsInfo","updateRowsToDisplay","performFilterAndSort","setColumns","renderSingleRow","createRowRenderTemplate","setRows","onColumnHeaderClick","$event","getSelection","removeAllRanges","onSearchTermChanged","$onChanges","currentValue","DynamicTableJsonCell","parsedValue","tableCellMaxJSONSize","parseValue","Overlay","ParametersDirective","syncValues","editable","changed","onUpdated","onRefresh","showParameterSettings","updated","PermissionsEditorComponent","grantees","newGrantees","aclUrl","owner","loadGrantees","accessType","grantee","access_type","findUser","u","existingIds","alreadyGrantee","foundUsers","addGrantee","removeGrantee","Content-Type","alertUnsavedChanges","confirmMessage","_onbeforeunload","onbeforeunload","ApiKeyDialog","csvUrl","jsonUrl","_embed_code_dialog_html__WEBPACK_IMPORTED_MODULE_0__","EmbedCodeDialog","embedUrl","snapshotUrlBuilder","snapshotUrl","SchemaBrowserCtrl","showTable","collapsed","getSize","itemSelected","hierarchy","stopPropagation","splitFilter","splitTheFilter","schemaFilterObject","schemaFilterColumn","SchemaBrowser","moment__WEBPACK_IMPORTED_MODULE_1__","moment__WEBPACK_IMPORTED_MODULE_1___default","_assets_images_redash_icon_small_png__WEBPACK_IMPORTED_MODULE_2__","_assets_images_redash_icon_small_png__WEBPACK_IMPORTED_MODULE_2___default","_visualization_embed_html__WEBPACK_IMPORTED_MODULE_3__","VisualizationEmbed","refreshQueryResults","getError","showQueryDescription","showDescription","classList","is_safe","loadQuery","$inject","$routeProvider","reloadOnSearch","readonly","rdTab","tabId","$parent","_services_settingsMenu__WEBPACK_IMPORTED_MODULE_0__","_settings_screen_html__WEBPACK_IMPORTED_MODULE_1__","_settings_screen_html__WEBPACK_IMPORTED_MODULE_1___default","settingsMenu","tabs","webpackEmptyContext","./alert-dialog.js","./alert-subscription.js","./alert.js","./auth.js","./dashboard.js","./data-source.js","./destination.js","./events.js","./getTags.js","./group.js","./keyboard-shortcuts.js","./navigateTo.js","./ng.js","./notification.js","./notifications.js","./offline-listener.js","./organizationStatus.js","./policy/DefaultPolicy.js","./policy/index.js","./query-result.js","./query-snippet.js","./query-string.js","./query.js","./recordEvent.js","./settingsMenu.js","./user.js","./utils.js","./visualization.js","./widget.js","AlertDialog","AlertDialogComponent","class","AlertDialogService","AlertSubscriptionService","subscriberId","_services_recordEvent__WEBPACK_IMPORTED_MODULE_0__","_services_notification__WEBPACK_IMPORTED_MODULE_0__","addEventListener","notificationKey","onlineStateHandler","removeEventListener","addOnlineListener","onlyParameters","removePrefix","toObject","entries","qs","allowDots","ignoreQueryPrefix","./ColorPalette.js","./EditVisualizationDialog.jsx","./VisualizationName.jsx","./VisualizationRenderer.jsx","./box-plot/Editor.jsx","./box-plot/index.js","./chart/getChartData.js","./chart/index.js","./chart/plotly/index.js","./chart/plotly/utils.js","./choropleth/index.js","./choropleth/utils.js","./cohort/index.js","./counter/index.js","./funnel/index.js","./index.js","./map/index.js","./pivot/Editor.jsx","./pivot/index.js","./sankey/Editor.jsx","./sankey/index.js","./sunburst/Editor.jsx","./sunburst/index.js","./table/index.js","./word-cloud/Editor.jsx","./word-cloud/index.js","VisualizationName","react2angular__WEBPACK_IMPORTED_MODULE_0__","_index__WEBPACK_IMPORTED_MODULE_1__","combineFilters","localFilters","globalFilters","localFilter","globalFilter","VisualizationRenderer","showFilters","_components_Filters__WEBPACK_IMPORTED_MODULE_10__","DEFAULT_OPTIONS","opposite","ChartRenderer","chartSeries","ChartEditor","editorTemplate","currentTab","setCurrentTab","Automatic","stackingOptions","Disabled","Stack","chartTypes","line","area","pie","scatter","bubble","heatmap","box","allowCustomJSVisualizations","directions","xAxisScales","yAxisScales","chartTypeChanged","showSizeColumnPicker","showZColumnPicker","customCode","yAxisColumns","valuesList","xAxisColumn","groupby","errorColumn","sizeColumn","zValColumn","refreshColumns","refreshColumnsAndForm","intersection","refreshSeries","chartData","seriesNames","existing","uniqueValuesNames","valuesNames","newValues","setColumnRole","unsetColumn","$watchCollection","old","partial","templateHint","angular2react","plotly_js_lib_core__WEBPACK_IMPORTED_MODULE_1__","plotly_js_lib_core__WEBPACK_IMPORTED_MODULE_1___default","plotly_js_lib_bar__WEBPACK_IMPORTED_MODULE_2__","plotly_js_lib_bar__WEBPACK_IMPORTED_MODULE_2___default","plotly_js_lib_pie__WEBPACK_IMPORTED_MODULE_3__","plotly_js_lib_pie__WEBPACK_IMPORTED_MODULE_3___default","plotly_js_lib_histogram__WEBPACK_IMPORTED_MODULE_4__","plotly_js_lib_histogram__WEBPACK_IMPORTED_MODULE_4___default","plotly_js_lib_box__WEBPACK_IMPORTED_MODULE_5__","plotly_js_lib_box__WEBPACK_IMPORTED_MODULE_5___default","plotly_js_lib_heatmap__WEBPACK_IMPORTED_MODULE_6__","plotly_js_lib_heatmap__WEBPACK_IMPORTED_MODULE_6___default","_utils__WEBPACK_IMPORTED_MODULE_7__","Plotly","register","bar","histogram","setPlotConfig","modeBarButtonsToRemove","PlotlyChart","plotlyOptions","showLink","displaylogo","newPlot","relayout","handleResize","CustomPlotlyChart","firstChild","Function","codeCall","ys","enableConsoleLogs","ChoroplethPalette","lodash__WEBPACK_IMPORTED_MODULE_0___default","leaflet__WEBPACK_IMPORTED_MODULE_1__","leaflet__WEBPACK_IMPORTED_MODULE_1___default","_lib_value_format__WEBPACK_IMPORTED_MODULE_3__","angular2react__WEBPACK_IMPORTED_MODULE_6__","_visualizations__WEBPACK_IMPORTED_MODULE_7__","_visualizations_ColorPalette__WEBPACK_IMPORTED_MODULE_8__","_utils__WEBPACK_IMPORTED_MODULE_9__","_choropleth_html__WEBPACK_IMPORTED_MODULE_10__","_choropleth_html__WEBPACK_IMPORTED_MODULE_10___default","_choropleth_editor_html__WEBPACK_IMPORTED_MODULE_11__","_choropleth_editor_html__WEBPACK_IMPORTED_MODULE_11___default","_countries_geo_json__WEBPACK_IMPORTED_MODULE_12__","_countries_geo_json__WEBPACK_IMPORTED_MODULE_12___default","_japan_prefectures_geo_json__WEBPACK_IMPORTED_MODULE_13__","_japan_prefectures_geo_json__WEBPACK_IMPORTED_MODULE_13___default","countryCodeColumn","valueColumn","valueFormat","noValuePlaceholder","background","borders","noValue","alignText","popup","loadCountriesData","ChoroplethRenderer","countriesData","choropleth","mapMoveLock","onMapMoveStart","onMapMoveEnd","getBounds","_southWest","lat","lng","_northEast","updateBounds","_ref$disableAnimation","disableAnimation","fitBounds","getDataUrl","countriesDataUrl","subdivJapanDataUrl","dataUrl","formatValue","_createScale","legendItems","choroplethBounds","L","geoJson","onEachFeature","layer","featureData","setStyle","weight","fillColor","fillOpacity","bindTooltip","sticky","bindPopup","center","getCenter","zoom","zoomSnap","layers","scrollWheelZoom","maxBounds","maxBoundsViscosity","attributionControl","fullscreenControl","off","invalidateSize","ChoroplethEditor","mapTypes","clusteringModes","legendPositions","top-left","top-right","bottom-left","bottom-right","countryCodeTypes","templateHintFormatter","propDescription","updateCountryCodeType","name_long","abbrev","momentInterval","weekly","daily","monthly","timeInterval","dateColumn","stageColumn","totalColumn","groupData","sortedData","groupKey","stage","rawData","initialDate","toDate","grouped","stages","firstStage","lastStage","previousDate","diff","prepareSimpleData","stageCount","prepareDiagonalData","CohortRenderer","_prepareData","Cornelius","draw","cohort","people","weekOf","CohortEditor","counterLabel","counterColName","rowNumber","targetRowNumber","stringDecimal","stringDecChar","stringThouSep","getRowNumber","CounterRenderer","counterTemplate","fontSize","root","targetColName","countRow","counterValue","targetValue","delta","trendPositive","stringPrefix","stringSuffix","CounterEditor","counterEditorTemplate","changeTab","isValueNumber","stepCol","colName","valueCol","sortKeyCol","autoSort","normalizePercentage","num","Funnel","watches","createVisualization","maxToPrevious","pctPrevious","header","trs","selectAll","enter","valContainers","pctMax","toLocaleString","pctContainers","drawFunnel","colNames","colToCheck","queryData","Number","sortVal","maxVal","unregister","angular","FunnelRenderer","funnel","FunnelEditor","Icon","Default","mergeOptions","iconUrl","markerIcon","iconRetinaUrl","markerIconRetina","shadowUrl","markerShadow","_getIconUrl","MAP_TILES","classify","clusterMarkers","MapRenderer","colorScale","category10","mapControls","control","addTo","tileLayer","attribution","allMarkers","getLayers","featureGroup","addLayer","points","markers","latCol","latColName","lonCol","lonColName","iconCreateFunction","cluster","childCount","getChildCount","divIcon","iconSize","Point","markerClusterGroup","layerGroup","lon","stroke","circleMarker","heatpoint","createMarker","createDescription","addOverlay","setUrl","mapTileUrl","pointGroups","All","groupNames","removeLayer","MapEditor","mapTiles","classifyColumns","PivotTableRenderer","renderers","pivotUtilities","pivotUI","ALLOWED_ITEM_PER_PAGE","DISPLAY_AS_OPTIONS","getColumnContentAlignment","getDefaultFormatOptions","datetime","integer","integerFormat","floatFormat","getColumnsOptions","visualizationColumns","boolean","allowSearch","alignContent","getDefaultColumnsOptions","wereColumnsReordered","GridRenderer","gridColumns","gridRows","getColumnsToDisplay","GridEditor","allowedItemsPerPage","displayAsOptions","MIN_WORD_SIZE","MAX_WORD_SIZE","WordCloudRenderer","wordsHash","findWordFrequencies","scaleValue","wordCounts","minCount","maxCount","sourceScale","targetScale","wordList","category20","cloud","padding","random","font","./admin/OutdatedQueries.jsx","./admin/SystemStatus.jsx","./admin/Tasks.jsx","./alert/index.js","./alerts/AlertsList.jsx","./dashboards/DashboardList.jsx","./dashboards/DashboardListEmptyState.jsx","./dashboards/ShareDashboardDialog.jsx","./dashboards/dashboard.js","./dashboards/public-dashboard-page.js","./data-sources/DataSourcesList.jsx","./data-sources/EditDataSource.jsx","./destinations/DestinationsList.jsx","./destinations/EditDestination.jsx","./groups/GroupDataSources.jsx","./groups/GroupMembers.jsx","./groups/GroupsList.jsx","./home/index.js","./queries-list/QueriesList.jsx","./queries-list/QueriesListEmptyState.jsx","./queries/add-to-dashboard.js","./queries/source-view.js","./queries/view.js","./query-snippets/edit.js","./query-snippets/list.js","./settings/organization.js","./users/UserProfile.jsx","./users/UsersList.jsx","./users/index.js","OutdatedQueries","align","_components_queries_SchedulePhrase__WEBPACK_IMPORTED_MODULE_10__","_updateTimer","_components_admin_Layout__WEBPACK_IMPORTED_MODULE_12__","antd_lib_grid__WEBPACK_IMPORTED_MODULE_7__","antd_lib_switch__WEBPACK_IMPORTED_MODULE_6___default","lastUpdatedAt","_components_TimeAgo__WEBPACK_IMPORTED_MODULE_11__","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_17__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_16__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_18__","listColumns","_components_Paginator__WEBPACK_IMPORTED_MODULE_8__","itemsList","_ref$data","$exceptionHandler","SystemStatus","queues","manager","databaseMetrics","started_at","last_refresh_at","outdated_queries_count","database_metrics","metrics","_refreshTimer","_components_admin_Layout__WEBPACK_IMPORTED_MODULE_7__","_components_admin_StatusBlock__WEBPACK_IMPORTED_MODULE_8__","Tasks","isLoading","otherTasks","counters","reserved","waiting","tasks","task","enqueue_time","start_time","task_name","processTasks","_components_admin_Layout__WEBPACK_IMPORTED_MODULE_10__","antd_lib_alert__WEBPACK_IMPORTED_MODULE_7___default","antd_lib_grid__WEBPACK_IMPORTED_MODULE_9__","_components_admin_CeleryStatus__WEBPACK_IMPORTED_MODULE_11__","antd_lib_tabs__WEBPACK_IMPORTED_MODULE_8___default","AlertCtrl","onQuerySelected","ops","defaultNameBuilder","templateBuilder","getDefaultName","saveChanges","rearm","/alerts/:alertId","STATE_CLASS","unknown","ok","triggered","AlertsList","_components_PageHeader__WEBPACK_IMPORTED_MODULE_6__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_12__","_components_empty_state_EmptyState__WEBPACK_IMPORTED_MODULE_8__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_13__","_components_Paginator__WEBPACK_IMPORTED_MODULE_7__","liveItemsList","DashboardList","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_12__","_components_tags_control_TagsControl__WEBPACK_IMPORTED_MODULE_7__","_components_PageHeader__WEBPACK_IMPORTED_MODULE_5__","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_14__","sidebarMenu","_DashboardListEmptyState__WEBPACK_IMPORTED_MODULE_17__","_components_Paginator__WEBPACK_IMPORTED_MODULE_6__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_11__","getWidgetsWithChangedPositions","oldPosition","newPosition","isWidgetPositionChanged","DashboardCtrl","Title","saveDelay","saveDashboardLayout","isLayoutDirty","changedWidgets","editBtnClickedWhileSaving","layoutEditing","saveDashboardLayoutDebounced","isFullscreen","refreshRate","isGridDisabled","updateGridItems","showPermissionsControl","globalParameters","isDashboardOwner","refreshRates","rate","allowedIntervals","getDashboardRefreshIntervals","setRefreshRate","refreshDashboard","autoRefresh","extractGlobalParameters","collectFilters","forceRefresh","queryResultPromises","filtersOnChange","allFilters","renderDashboard","loadDashboard","dashboardSlug","edit","editLayout","archiveDashboard","showManagePermissionsModal","enableEditing","loadTags","updateDashboard","saveName","saveTags","updateDashboardFiltersState","showAddTextboxDialog","addTextbox","dashboard_id","isHidden","visualization_id","onWidgetAdded","showAddWidgetDialog","widgetId","toggleFullscreen","togglePublished","openShareForm","/dashboard/:dashboardSlug","token","PublicDashboardPage","loadPublicDashboard","DataSourcesList","dataSourceTypes","createDataSource","isNewDataSourcePage","canCreateDataSource","showCreateSourceDialog","isCreateDataSourceEnabled","_components_cards_list_CardsList__WEBPACK_IMPORTED_MODULE_17__","newDataSourceProps","antd_lib_button__WEBPACK_IMPORTED_MODULE_8___default","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_18__","renderDataSources","EditDataSource","httpResponse","formProps","deleteDataSource","testConnection","saveDataSource","_components_dynamic_form_DynamicForm__WEBPACK_IMPORTED_MODULE_14__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_13__","/data_sources/:dataSourceId","DestinationsList","destinationTypes","createDestination","isNewDestinationPage","canCreateDestination","isCreateDestinationEnabled","newDestinationProps","renderDestinations","EditDestination","destinationId","deleteDestination","saveDestination","/destinations/:destinationId","GroupDataSources","groupId","datasource","_components_PreviewCard__WEBPACK_IMPORTED_MODULE_24__","antd_lib_menu__WEBPACK_IMPORTED_MODULE_15___default","selectedKeys","view_only","setDataSourcePermissions","antd_lib_dropdown__WEBPACK_IMPORTED_MODULE_14___default","removeGroupDataSource","viewOnly","allDataSources","alreadyAddedDataSources","ds","_components_groups_ListItemAddon__WEBPACK_IMPORTED_MODULE_26__","promises","_components_groups_GroupName__WEBPACK_IMPORTED_MODULE_25__","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_28__","_components_groups_DetailsPageSidebar__WEBPACK_IMPORTED_MODULE_27__","addDataSources","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_21__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_22__","_components_Paginator__WEBPACK_IMPORTED_MODULE_17__","unused","GroupMembers","_components_PreviewCard__WEBPACK_IMPORTED_MODULE_19__","antd_lib_button__WEBPACK_IMPORTED_MODULE_11___default","removeGroupMember","alreadyAddedUsers","_components_groups_ListItemAddon__WEBPACK_IMPORTED_MODULE_21__","_components_groups_GroupName__WEBPACK_IMPORTED_MODULE_20__","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_23__","_components_groups_DetailsPageSidebar__WEBPACK_IMPORTED_MODULE_22__","addMembers","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_17__","_components_Paginator__WEBPACK_IMPORTED_MODULE_12__","GroupsList","antd_lib_button__WEBPACK_IMPORTED_MODULE_5___default","_components_groups_DeleteGroupButton__WEBPACK_IMPORTED_MODULE_14__","newGroup","createGroup","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_10__","_components_items_list_components_EmptyState__WEBPACK_IMPORTED_MODULE_11__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_12__","HomeCtrl","noDashboards","noQueries","favoriteDashboards","favoriteQueries","verifyEmail","/","QueriesList","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_13__","_components_queries_SchedulePhrase__WEBPACK_IMPORTED_MODULE_8__","_components_layouts_ContentWithSidebar__WEBPACK_IMPORTED_MODULE_15__","_QueriesListEmptyState__WEBPACK_IMPORTED_MODULE_19__","_components_items_list_components_ItemsTable__WEBPACK_IMPORTED_MODULE_14__","my","AddToDashboardForm","onDashboardSelected","dash","selected_query","selectedDashboard","searchDashboards","search_term","QuerySourceCtrl","$controller","isNewQuery","saveQuery","sourceMode","base_url","port","shortcuts","mod+s","mod+p","addNewParameter","canForkQuery","updateQuery","newQueryText","$apply","savePromise","savedQuery","toQueryTextFragment","onParametersUpdated","listenForEditorCommand","listenForResize","/queries/new","/queries/:queryId/source","QueryViewCtrl","DEFAULT_VISUALIZATION","showLog","updateDataSources","localStorage","lastSelectedDataSourceId","canCreateQuery","noDataSources","refreshSchema","updateSelectedQuery","executeQuery","canExecuteQuery","lockButton","cancelling","Notifications","getPermissions","selectedVisualization","mod+enter","alt+enter","getVisualization","visId","isQueryOwner","canViewSource","canScheduleQuery","showDataset","lock","showApiKey","duplicateQuery","tabName","queryUrl","customOptions","successMessage","overwrite","updatedQuery","saveDescription","desc","autoPublishNamedQueries","archiveQuery","setVisualizationTab","deleteVisualization","$e","showNotification","getLog","getQueryRefreshIntervals","showScheduleForm","editSchedule","closeScheduleForm","minBy","viz","/queries/:queryId","SnippetCtrl","snippetId","editorOptions","advanced","behavioursEnabled","enableSnippets","autoScrollEditorIntoView","$blockScrolling","Infinity","getSession","setUseWrapMode","setShowPrintMargin","/query_snippets/:snippetId","OrganizationSettingsCtrl","settings","disablePasswordLoginToggle","auth_password_login_enabled","dateFormatList","timeFormatList","googleLoginEnabled","auth_saml_enabled","/settings/organization","UserComponent","_components_EmailSettingsWarning__WEBPACK_IMPORTED_MODULE_6__","_components_items_list_components_LoadingState__WEBPACK_IMPORTED_MODULE_9__","UsersListActions","UsersList","canCreateUser","_components_PreviewCard__WEBPACK_IMPORTED_MODULE_14__","isCreateUserEnabled","isNewUserPage","showCreateUserDialog","renderPageHeader","_components_items_list_components_Sidebar__WEBPACK_IMPORTED_MODULE_21__","_components_items_list_components_EmptyState__WEBPACK_IMPORTED_MODULE_20__","pending","_lib_utils__WEBPACK_IMPORTED_MODULE_1__","listRoutes","profileRoutes","uiSortableConfig","$log","ngModel","uiSortable","attrs","savedNodes","combineCallbacks","second","secondIsFunc","getSortableWidgetInstance","widgetFullName","patchSortableOption","callbacks","afterStop","wrappers","patchUISortableOptions","newVal","oldVal","sortableWidgetInstance","defaultOptions","optsDiff","directiveOpts","floating","getSortingHelper","helperOption","isCustomHelperUsed","hasSortingHelper","_destroy","getItemIndex","jQuery","ui-floating","ui-model-items","receive","wireUp","siblings","css","model","$modelValue","sourceModel","_isCanceled","isCanceled","_isCustomHelperUsed","activate","contents","getPlaceholderElement","excludes","notCssSelector","getPlaceholderExcludesludes","not","connectedSortables","_connectedSortables","received","dropindex","droptarget","droptargetScope","elementScopes","getElementScope","droptargetModel","sortingHelper","moved","equals","inner","oldItemSortable","_restore","innerResult","initIfEnabled","cancelWatcher","autofocus","compareTo","otherModelValue","attributes","$setValidity","$parsers","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","TitleService","newTitle","resizeEvent","$evalAsync","checkItems","sameNumber","flexBasis","documentElement","threshold","resizableToggle","$attrs","ignoreResizeEvents","resizeStartInfo","allowHClick","allowVClick","lastWidth","lastHeight","isFlex","$eval","rFlex","toggleShortcut","click","minSize","currentSize","animateProp","emulateAngularResizableEvents","evt","$emit","allowScriptsInUserInput","Spin","setDefaultIndicator","react_default","Pace","shouldHandlePushState","prevUrl","newUrl","ctx","requirements","ngRoute","ngResource","ngSanitize","uiBootstrap","ngMessages","uiSelect","ngUpload","vsRepeat","registerAll","registerDirectives","markdownFilter","dateTimeFilter","__organizationStatus","otherwise","$locationProvider","$compileProvider","uiSelectConfig","debugInfoEnabled","aHrefSanitizationWhitelist","html5Mode","$templateCache","put","_ref$page","_ref$itemsPerPage","_ref$totalCount","updateRows","SnippetsCtrl","snippets","/query_snippets","boxWhiskers","boxQuartiles","quantile","whiskers","quartiles","tickFormat","ascending","quartileData","whiskerIndices","whiskerData","outlierIndices","x1","linear","x0","__chart__","insert","transition","exit","medianLine","whisker","outlier","boxTick","whiskerTick","flush","functor","BoxPlotRenderer","boxWidth","parentWidth","mydata","xscale","rangeBands","yscale","chart","q1","q3","iqr","calcIqr","svg","orient","xLines","tickSize","yLines","plot","barOffset","dy","Sankey","sankey","nodeWidth","nodePadding","links","computeNodeBreadths","nextNodes","kx","remainingNodes","assignBreadth","dx","sourceLinks","moveSinksRight","computeLinkDepths","ascendingSourceDepth","ascendingTargetDepth","targetLinks","sy","ty","iterations","ky","nodesByBreadth","nest","sortKeys","relaxLeftToRight","alpha","weightedSource","resolveCollisions","y0","ascendingDepth","relaxRightToLeft","weightedTarget","computeNodeDepths","curvature","xi","interpolateNumber","x2","x3","y1","graph","nodesDict","getNode","level","normalizeName","addLink","sourceName","targetName","depth","getLink","createSankey","d3sankey","spreadNodes","currentNode","getConnectedNodes","rgb","darker","SankeyRenderer","isDataValid","exitNode","colorMap","Sunburst","clientWidth","h","radius","totalSize","partition","PI","arc","startAngle","endAngle","innerRadius","sqrt","outerRadius","breadcrumbs","classed","summary","sunburst","lastCrumb","refreshData","breadcrumbPoints","mouseover","percentage","toPrecision","percentageString","ancestors","getAncestors","breadcrumb","updateBreadcrumbs","json","output","uniqueNames","__data__","drawSunburst","buildHierarchy","csv","buildNodes","_loop","nodeName","isLeaf","childNode","SunburstSequenceRenderer","PREFIX","localOptions","fullKey","getItem","setItem","langTools","ace","acequire","snippetsModule","defineDummySnippets","define","snippetText","QueryEditor","commands","bindKey","win","mac","command","completer","snippetManager","parseSnippetFile","selection","getRange","setRange","rawSelectedQueryText","refEditor","getTextRange","autocompleteQuery","liveAutocompleteDisabled","schemaCompleter","identifierRegexps","getCompletions","pos","tableName","setCompleters","snippetCompleter","keyWordCompleter","textCompleter","nextProps","tokensCount","totalLength","keywordBuilder","isExecuteDisabled","data-executing","lib_default","editorProps","enableBasicAutocompletion","enableLiveAutocompletion","showPrintMargin","wrapEnabled","onPaste","onSelectionChange","tooltip_default","formatQuery","toggleAutocomplete"],"mappings":"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,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,qDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,wDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,2DCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,gDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,4CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,iDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,gDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,+CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,4CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,+CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,6CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,0CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,+CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,iDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,gDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,+CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,+CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,kDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,iDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,oDCAxCzB,EAAAD,QAAiBJ,EAAA8B,EAAuB,8CCAxCzB,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","file":"app.4dd8d11786519ced9b33.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/static/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([713,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import notification from 'antd/lib/notification';\n\nnotification.config({\n  placement: 'bottomRight',\n  duration: 3,\n});\n\nconst simpleNotification = {};\n\n['success', 'error', 'info', 'warning', 'warn'].forEach((action) => {\n  // eslint-disable-next-line arrow-body-style\n  simpleNotification[action] = (message, description = null, props = null) => {\n    return notification[action]({ ...props, message, description });\n  };\n});\n\nexport default { // export Ant's notification and replace actions\n  ...notification,\n  ...simpleNotification,\n};\n","import debug from 'debug';\nimport { includes, extend } from 'lodash';\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let Auth = null;\n\nexport const currentUser = {\n  canEdit(object) {\n    const userId = object.user_id || (object.user && object.user.id);\n    return this.hasPermission('admin') || (userId && userId === this.id);\n  },\n\n  hasPermission(permission) {\n    return includes(this.permissions, permission);\n  },\n\n  get isAdmin() {\n    return this.hasPermission('admin');\n  },\n};\n\nexport const clientConfig = {};\nexport const messages = [];\n\nconst logger = debug('redash:auth');\nconst session = { loaded: false };\n\nfunction updateSession(sessionData) {\n  logger('Updating session to be:', sessionData);\n  extend(session, sessionData, { loaded: true });\n  extend(currentUser, session.user);\n  extend(clientConfig, session.client_config);\n  extend(messages, session.messages);\n}\n\nfunction AuthService($window, $location, $q, $http) {\n  return {\n    isAuthenticated() {\n      return session.loaded && session.user.id;\n    },\n    login() {\n      const next = encodeURI($location.url());\n      logger('Calling login with next = %s', next);\n      window.location.href = `login?next=${next}`;\n    },\n    logout() {\n      logger('Logout.');\n      $window.location.href = 'logout';\n    },\n    loadSession() {\n      logger('Loading session');\n      if (session.loaded && session.user.id) {\n        logger('Resolving with local value.');\n        return $q.resolve(session);\n      }\n\n      this.setApiKey(null);\n      return $http.get('api/session').then((response) => {\n        updateSession(response.data);\n        return session;\n      });\n    },\n    loadConfig() {\n      logger('Loading config');\n      return $http.get('/api/config').then((response) => {\n        updateSession({ client_config: response.data.client_config, user: { permissions: [] }, messages: [] });\n        return response.data;\n      });\n    },\n    setApiKey(apiKey) {\n      logger('Set API key to: %s', apiKey);\n      this.apiKey = apiKey;\n    },\n    getApiKey() {\n      return this.apiKey;\n    },\n    requireSession() {\n      logger('Requested authentication');\n      if (this.isAuthenticated()) {\n        return $q.when(session);\n      }\n      return this.loadSession()\n        .then(() => {\n          if (this.isAuthenticated()) {\n            logger('Loaded session');\n            return session;\n          }\n          logger('Need to login, redirecting');\n          this.login();\n        })\n        .catch(() => {\n          logger('Need to login, redirecting');\n          this.login();\n        });\n    },\n  };\n}\n\nfunction apiKeyHttpInterceptor($injector) {\n  return {\n    request(config) {\n      const apiKey = $injector.get('Auth').getApiKey();\n      if (apiKey) {\n        config.headers.Authorization = `Key ${apiKey}`;\n      }\n\n      return config;\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Auth', AuthService);\n  ngModule.value('currentUser', currentUser);\n  ngModule.value('clientConfig', clientConfig);\n  ngModule.value('messages', messages);\n  ngModule.factory('apiKeyHttpInterceptor', apiKeyHttpInterceptor);\n\n  ngModule.config(($httpProvider) => {\n    $httpProvider.interceptors.push('apiKeyHttpInterceptor');\n  });\n\n  ngModule.run(($injector) => {\n    Auth = $injector.get('Auth');\n  });\n}\n\ninit.init = true;\n","import { isFunction, map, filter, extend, omit, identity } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Table from 'antd/lib/table';\nimport { FavoritesControl } from '@/components/FavoritesControl';\nimport { TimeAgo } from '@/components/TimeAgo';\nimport { durationHumanize } from '@/filters';\nimport { formatDateTime } from '@/filters/datetime';\n\n// `this` refers to previous function in the chain (`Columns.***`).\n// Adds `sorter: true` field to column definition\nfunction sortable(...args) {\n  return extend(this(...args), { sorter: true });\n}\n\nexport const Columns = {\n  favorites(overrides) {\n    return extend({\n      width: '1%',\n      render: (text, item) => <FavoritesControl item={item} />,\n    }, overrides);\n  },\n  avatar(overrides, formatTitle) {\n    formatTitle = isFunction(formatTitle) ? formatTitle : identity;\n    return extend({\n      width: '1%',\n      render: (user, item) => (\n        <img\n          src={item.user.profile_image_url}\n          className=\"profile__image_thumb\"\n          alt={formatTitle(user.name, item)}\n          title={formatTitle(user.name, item)}\n        />\n      ),\n    }, overrides);\n  },\n  dateTime(overrides) {\n    return extend({\n      render: text => formatDateTime(text),\n    }, overrides);\n  },\n  duration(overrides) {\n    return extend({\n      width: '1%',\n      className: 'text-nowrap',\n      render: text => durationHumanize(text),\n    }, overrides);\n  },\n  timeAgo(overrides) {\n    return extend({\n      render: value => <TimeAgo date={value} />,\n    }, overrides);\n  },\n  custom(render, overrides) {\n    return extend({\n      render,\n    }, overrides);\n  },\n};\n\nColumns.dateTime.sortable = sortable;\nColumns.duration.sortable = sortable;\nColumns.timeAgo.sortable = sortable;\nColumns.custom.sortable = sortable;\n\nexport default class ItemsTable extends React.Component {\n  static propTypes = {\n    // eslint-disable-next-line react/forbid-prop-types\n    items: PropTypes.arrayOf(PropTypes.object),\n    columns: PropTypes.arrayOf(PropTypes.shape({\n      field: PropTypes.string, // data field\n      orderByField: PropTypes.string, // field to order by (defaults to `field`)\n      render: PropTypes.func, // (prop, item) => text | node; `prop` is `item[field]`\n      isAvailable: PropTypes.func, // return `true` to show column and `false` to hide; if omitted: show column\n    })),\n    showHeader: PropTypes.bool,\n    onRowClick: PropTypes.func, // (event, item) => void\n\n    orderByField: PropTypes.string,\n    orderByReverse: PropTypes.bool,\n    toggleSorting: PropTypes.func,\n  };\n\n  static defaultProps = {\n    items: [],\n    columns: [],\n    showHeader: true,\n    onRowClick: null,\n\n    orderByField: null,\n    orderByReverse: false,\n    toggleSorting: () => {},\n  };\n\n  prepareColumns() {\n    const { orderByField, orderByReverse, toggleSorting } = this.props;\n    const orderByDirection = orderByReverse ? 'descend' : 'ascend';\n\n    return map(\n      map(\n        filter(this.props.columns, column => (isFunction(column.isAvailable) ? column.isAvailable() : true)),\n        column => extend(column, { orderByField: column.orderByField || column.field }),\n      ),\n      (column, index) => {\n        // Bind click events only to sortable columns\n        const onHeaderCell = column.sorter ? (\n          () => ({ onClick: () => toggleSorting(column.orderByField) })\n        ) : null;\n\n        // Wrap render function to pass correct arguments\n        const render = isFunction(column.render) ? (text, row) => column.render(text, row.item) : identity;\n\n        return extend(\n          omit(column, ['field', 'orderByField', 'render']),\n          {\n            key: 'column' + index,\n            dataIndex: 'item[' + JSON.stringify(column.field) + ']',\n            defaultSortOrder: column.orderByField === orderByField ? orderByDirection : null,\n            onHeaderCell,\n            render,\n          },\n        );\n      },\n    );\n  }\n\n  render() {\n    const columns = this.prepareColumns();\n    const rows = map(\n      this.props.items,\n      (item, index) => ({ key: 'row' + index, item }),\n    );\n\n    // Bind events only if `onRowClick` specified\n    const onTableRow = isFunction(this.props.onRowClick) ? (\n      row => ({\n        onClick: (event) => { this.props.onRowClick(event, row.item); },\n      })\n    ) : null;\n\n    const { showHeader } = this.props;\n\n    return (\n      <Table\n        className={classNames('table-data', { 'ant-table-headerless': !showHeader })}\n        columns={columns}\n        showHeader={showHeader}\n        dataSource={rows}\n        rowKey={row => row.key}\n        pagination={false}\n        onRow={onTableRow}\n      />\n    );\n  }\n}\n","export let $http = null; // eslint-disable-line import/no-mutable-exports\nexport let $sanitize = null; // eslint-disable-line import/no-mutable-exports\nexport let $location = null; // eslint-disable-line import/no-mutable-exports\nexport let $route = null; // eslint-disable-line import/no-mutable-exports\nexport let $routeParams = null; // eslint-disable-line import/no-mutable-exports\nexport let $q = null; // eslint-disable-line import/no-mutable-exports\nexport let $rootScope = null; // eslint-disable-line import/no-mutable-exports\nexport let $uibModal = null; // eslint-disable-line import/no-mutable-exports\n\nexport default function init(ngModule) {\n  ngModule.run(($injector) => {\n    $http = $injector.get('$http');\n    $sanitize = $injector.get('$sanitize');\n    $location = $injector.get('$location');\n    $route = $injector.get('$route');\n    $routeParams = $injector.get('$routeParams');\n    $q = $injector.get('$q');\n    $rootScope = $injector.get('$rootScope');\n    $uibModal = $injector.get('$uibModal');\n  });\n}\n\ninit.init = true;\n","import { find } from 'lodash';\nimport PropTypes from 'prop-types';\n\n/* --------------------------------------------------------\n  Types\n-----------------------------------------------------------*/\n\nconst VisualizationOptions = PropTypes.object; // eslint-disable-line react/forbid-prop-types\n\nconst Data = PropTypes.shape({\n  columns: PropTypes.arrayOf(PropTypes.object).isRequired,\n  rows: PropTypes.arrayOf(PropTypes.object).isRequired,\n});\n\nexport const VisualizationType = PropTypes.shape({\n  type: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  options: VisualizationOptions.isRequired, // eslint-disable-line react/forbid-prop-types\n});\n\n// For each visualization's renderer\nexport const RendererPropTypes = {\n  visualizationName: PropTypes.string,\n  data: Data.isRequired,\n  options: VisualizationOptions.isRequired,\n  onOptionsChange: PropTypes.func, // (newOptions) => void\n};\n\n// For each visualization's editor\nexport const EditorPropTypes = {\n  visualizationName: PropTypes.string,\n  data: Data.isRequired,\n  options: VisualizationOptions.isRequired,\n  onOptionsChange: PropTypes.func.isRequired, // (newOptions) => void\n};\n\n/* --------------------------------------------------------\n  Visualizations registry\n-----------------------------------------------------------*/\n\nexport const registeredVisualizations = {};\n\nconst VisualizationConfig = PropTypes.shape({\n  type: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  getOptions: PropTypes.func.isRequired, // (existingOptions: object, data: { columns[], rows[] }) => object\n  isDeprecated: PropTypes.bool,\n  Renderer: PropTypes.func.isRequired,\n  Editor: PropTypes.func,\n\n  // other config options\n  autoHeight: PropTypes.bool,\n  defaultRows: PropTypes.number,\n  defaultColumns: PropTypes.number,\n  minRows: PropTypes.number,\n  maxRows: PropTypes.number,\n  minColumns: PropTypes.number,\n  maxColumns: PropTypes.number,\n});\n\nfunction validateVisualizationConfig(config) {\n  const typeSpecs = { config: VisualizationConfig };\n  const values = { config };\n  PropTypes.checkPropTypes(typeSpecs, values, 'prop', 'registerVisualization');\n}\n\nexport function registerVisualization(config) {\n  validateVisualizationConfig(config);\n  config = { ...config }; // clone\n\n  if (registeredVisualizations[config.type]) {\n    throw new Error(`Visualization ${config.type} already registered.`);\n  }\n\n  registeredVisualizations[config.type] = config;\n}\n\n/* --------------------------------------------------------\n  Helpers\n-----------------------------------------------------------*/\n\nexport function getDefaultVisualization() {\n  return find(registeredVisualizations, visualization => !visualization.isDeprecated);\n}\n\nexport function newVisualization(type = null, options = {}) {\n  const visualization = type ? registeredVisualizations[type] : getDefaultVisualization();\n  return {\n    type: visualization.type,\n    name: visualization.name,\n    description: '',\n    options,\n  };\n}\n","import { isFunction } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDOM from 'react-dom';\n\n/**\n  Wrapper for dialogs based on Ant's <Modal> component.\n\n\n  Using wrapped dialogs\n  =====================\n\n  Wrapped component is an object with two fields:\n\n    {\n      showModal: (dialogProps) => object({\n          result: Promise,\n          close: (result) => void,\n          dismiss: (reason) => void,\n        }),\n      Component: React.Component, // wrapped dialog component\n    }\n\n  To open dialog, use `showModal` method; optionally you can pass additional properties that\n  will be expanded on wrapped component:\n\n    const dialog = SomeWrappedDialog.showModal()\n\n    const dialog = SomeWrappedDialog.showModal({ greeting: 'Hello' })\n\n  To get result of modal, use `result` property:\n\n    dialog.result\n      .then(...) // pressed OK button or used `close` method; resolved value is a result of dialog\n      .catch(...) // pressed Cancel button or used `dismiss` method; optional argument is a rejection reason.\n\n  Also, dialog has `close` and `dismiss` methods that allows to close dialog by caller. Passed arguments\n  will be used to resolve/reject `dialog.result` promise. `update` methods allows to pass new properties\n  to dialog.\n\n\n  Creating a dialog\n  ================\n\n  1. Add imports:\n\n    import { wrap as wrapDialog, DialogPropType } from 'path/to/DialogWrapper';\n\n  2. define a `dialog` property on your component:\n\n    propTypes = {\n      dialog: DialogPropType.isRequired,\n    };\n\n  `dialog` property is an object:\n\n    {\n      props: object, // properties for <Modal> component;\n      close: (result) => void, // method to confirm dialog; `result` will be returned to caller\n      dismiss: (reason) => void, // method to reject dialog; `reason` will be returned to caller\n    }\n\n  3. expand additional properties on <Modal> component:\n\n    render() {\n      const { dialog } = this.props;\n      return (\n        <Modal {...dialog.props}>\n      );\n    }\n\n  4. wrap your component and export it:\n\n    export default wrapDialog(YourComponent).\n\n  Your component is ready to use. Wrapper will manage <Modal>'s visibility and events.\n  If you want to override behavior of `onOk`/`onCancel` - don't forget to close dialog:\n\n    customOkHandler() {\n      this.saveData().then(() => {\n         this.props.dialog.close({ success: true }); // or dismiss();\n      });\n    }\n\n    render() {\n      const { dialog } = this.props;\n        return (\n          <Modal {...dialog.props} onOk={() => this.customOkHandler()}>\n        );\n    }\n\n\n  Settings\n  ========\n\n  You can setup this wrapper to use custom `Promise` library (for example, Bluebird):\n\n    import DialogWrapper from 'path/to/DialogWrapper';\n    import Promise from 'bluebird';\n\n    DialogWrapper.Promise = Promise;\n\n  It could be useful to avoid `unhandledrejection` exception that would fire with native Promises,\n  or when some custom Promise library is used in application.\n\n*/\n\nexport const DialogPropType = PropTypes.shape({\n  props: PropTypes.shape({\n    visible: PropTypes.bool,\n    onOk: PropTypes.func,\n    onCancel: PropTypes.func,\n    afterClose: PropTypes.func,\n  }).isRequired,\n  close: PropTypes.func.isRequired,\n  dismiss: PropTypes.func.isRequired,\n});\n\n// default export of module\nconst DialogWrapper = {\n  Promise,\n  DialogPropType,\n  wrap() {},\n};\n\nfunction openDialog(DialogComponent, props) {\n  const dialog = {\n    props: {\n      visible: true,\n      onOk: () => {},\n      onCancel: () => {},\n      afterClose: () => {},\n    },\n    close: () => {},\n    dismiss: () => {},\n  };\n\n  const dialogResult = {\n    resolve: () => {},\n    reject: () => {},\n  };\n\n  const container = document.createElement('div');\n  document.body.appendChild(container);\n\n  function render() {\n    ReactDOM.render(<DialogComponent {...props} dialog={dialog} />, container);\n  }\n\n  function destroyDialog() {\n    // Allow calling chain to roll up, and then destroy component\n    setTimeout(() => {\n      ReactDOM.unmountComponentAtNode(container);\n      document.body.removeChild(container);\n    }, 10);\n  }\n\n  function closeDialog(result) {\n    dialogResult.resolve(result);\n    dialog.props.visible = false;\n    render();\n  }\n\n  function dismissDialog(reason) {\n    dialogResult.reject(reason);\n    dialog.props.visible = false;\n    render();\n  }\n\n  dialog.props.onOk = closeDialog;\n  dialog.props.onCancel = dismissDialog;\n  dialog.props.afterClose = destroyDialog;\n  dialog.close = closeDialog;\n  dialog.dismiss = dismissDialog;\n\n  const result = {\n    close: closeDialog,\n    dismiss: dismissDialog,\n    update: (newProps) => {\n      props = { ...props, ...newProps };\n      render();\n    },\n    result: new DialogWrapper.Promise((resolve, reject) => {\n      dialogResult.resolve = resolve;\n      dialogResult.reject = reject;\n    }),\n  };\n\n  render(); // show it only when all structures initialized to avoid unnecessary re-rendering\n\n  // Some known libraries support\n  // Bluebird: http://bluebirdjs.com/docs/api/suppressunhandledrejections.html\n  if (isFunction(result.result.suppressUnhandledRejections)) {\n    result.result.suppressUnhandledRejections();\n  }\n\n  return result;\n}\n\nexport function wrap(DialogComponent) {\n  return {\n    Component: DialogComponent,\n    showModal: props => openDialog(DialogComponent, props),\n  };\n}\n\nDialogWrapper.wrap = wrap;\n\nexport default DialogWrapper;\n","import PropTypes from 'prop-types';\nimport { wrap } from 'lodash';\nimport moment from 'moment';\n\nexport const DataSource = PropTypes.shape({\n  syntax: PropTypes.string,\n  options: PropTypes.shape({\n    doc: PropTypes.string,\n    doc_url: PropTypes.string,\n  }),\n  type_name: PropTypes.string,\n});\n\nexport const Table = PropTypes.shape({\n  columns: PropTypes.arrayOf(PropTypes.string).isRequired,\n});\n\nexport const Schema = PropTypes.arrayOf(Table);\n\nexport const RefreshScheduleType = PropTypes.shape({\n  interval: PropTypes.number,\n  time: PropTypes.string,\n  day_of_week: PropTypes.string,\n  until: PropTypes.string,\n});\n\nexport const RefreshScheduleDefault = {\n  interval: null,\n  time: null,\n  day_of_week: null,\n  until: null,\n};\n\nexport const Field = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  title: PropTypes.string,\n  type: PropTypes.oneOf([\n    'text',\n    'email',\n    'password',\n    'number',\n    'checkbox',\n    'file',\n    'select',\n    'content',\n  ]).isRequired,\n  initialValue: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.bool,\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.arrayOf(PropTypes.number),\n  ]),\n  content: PropTypes.node,\n  mode: PropTypes.string,\n  required: PropTypes.bool,\n  readOnly: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  minLength: PropTypes.number,\n  placeholder: PropTypes.string,\n  contentAfter: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  loading: PropTypes.bool,\n  props: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n});\n\nexport const Action = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  callback: PropTypes.func.isRequired,\n  type: PropTypes.string,\n  pullRight: PropTypes.bool,\n  disabledWhenDirty: PropTypes.bool,\n});\n\nexport const AntdForm = PropTypes.shape({\n  validateFieldsAndScroll: PropTypes.func,\n});\n\nexport const UserProfile = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  name: PropTypes.string.isRequired,\n  email: PropTypes.string.isRequired,\n  profileImageUrl: PropTypes.string,\n  apiKey: PropTypes.string,\n  isDisabled: PropTypes.bool,\n});\n\nfunction checkMoment(isRequired, props, propName, componentName) {\n  const value = props[propName];\n  const isRequiredValid = isRequired && (value !== null);\n  const isOptionalValid = !isRequired && ((value === null) || moment.isMoment(value));\n  if (!isRequiredValid && !isOptionalValid) {\n    return new Error('Prop `' + propName + '` supplied to `' + componentName + '` should be a Moment.js instance.');\n  }\n}\n\nexport const Moment = wrap(false, checkMoment);\nMoment.isRequired = wrap(true, checkMoment);\n","import moment from 'moment';\nimport { capitalize as _capitalize, isEmpty } from 'lodash';\n\nexport const IntervalEnum = {\n  NEVER: 'Never',\n  SECONDS: 'second',\n  MINUTES: 'minute',\n  HOURS: 'hour',\n  DAYS: 'day',\n  WEEKS: 'week',\n};\n\nexport function localizeTime(time) {\n  const [hrs, mins] = time.split(':');\n  return moment\n    .utc()\n    .hour(hrs)\n    .minute(mins)\n    .local()\n    .format('HH:mm');\n}\n\nexport function secondsToInterval(count) {\n  if (!count) {\n    return { interval: IntervalEnum.NEVER };\n  }\n\n  let interval = IntervalEnum.SECONDS;\n  if (count >= 60) {\n    count /= 60;\n    interval = IntervalEnum.MINUTES;\n  }\n  if (count >= 60) {\n    count /= 60;\n    interval = IntervalEnum.HOURS;\n  }\n  if (count >= 24 && interval === IntervalEnum.HOURS) {\n    count /= 24;\n    interval = IntervalEnum.DAYS;\n  }\n  if (count >= 7 && !(count % 7) && interval === IntervalEnum.DAYS) {\n    count /= 7;\n    interval = IntervalEnum.WEEKS;\n  }\n  return { count, interval };\n}\n\nexport function intervalToSeconds(count, interval) {\n  let intervalInSeconds = 0;\n  switch (interval) {\n    case IntervalEnum.MINUTES:\n      intervalInSeconds = 60;\n      break;\n    case IntervalEnum.HOURS:\n      intervalInSeconds = 3600;\n      break;\n    case IntervalEnum.DAYS:\n      intervalInSeconds = 86400;\n      break;\n    case IntervalEnum.WEEKS:\n      intervalInSeconds = 604800;\n      break;\n    default:\n      return null;\n  }\n  return intervalInSeconds * count;\n}\n\nexport function pluralize(text, count) {\n  const should = count !== 1;\n  return text + (should ? 's' : '');\n}\n\nexport function durationHumanize(duration, options = {}) {\n  if (!duration) {\n    return '-';\n  }\n  let ret = '';\n  const { interval, count } = secondsToInterval(duration);\n  const rounded = Math.round(count);\n  if (rounded !== 1 || !options.omitSingleValueNumber) {\n    ret = `${rounded} `;\n  }\n  ret += pluralize(interval, rounded);\n  return ret;\n}\n\nexport function toHuman(text) {\n  return text.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nexport function colWidth(widgetWidth) {\n  if (widgetWidth === 0) {\n    return 0;\n  } else if (widgetWidth === 1) {\n    return 6;\n  } else if (widgetWidth === 2) {\n    return 12;\n  }\n  return widgetWidth;\n}\n\nexport function capitalize(text) {\n  if (text) {\n    return _capitalize(text);\n  }\n\n  return null;\n}\n\nexport function remove(items, item) {\n  if (items === undefined) {\n    return items;\n  }\n\n  let notEquals;\n\n  if (item instanceof Array) {\n    notEquals = other => item.indexOf(other) === -1;\n  } else {\n    notEquals = other => item !== other;\n  }\n\n  const filtered = [];\n\n  for (let i = 0; i < items.length; i += 1) {\n    if (notEquals(items[i])) {\n      filtered.push(items[i]);\n    }\n  }\n\n  return filtered;\n}\n\nexport function notEmpty(collection) {\n  return !isEmpty(collection);\n}\n\nexport function showError(field) {\n  // In case of booleans, we get an undefined here.\n  if (field === undefined) {\n    return false;\n  }\n  return field.$touched && field.$invalid;\n}\n\nconst units = ['bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\nexport function prettySize(bytes) {\n  if (isNaN(parseFloat(bytes)) || !isFinite(bytes)) {\n    return '?';\n  }\n\n  let unit = 0;\n\n  while (bytes >= 1024) {\n    bytes /= 1024;\n    unit += 1;\n  }\n\n  return bytes.toFixed(3) + ' ' + units[unit];\n}\n\nexport function join(arr) {\n  if (arr === undefined || arr === null) {\n    return '';\n  }\n\n  return arr.join(' / ');\n}\n","import React from 'react';\nimport { BigMessage } from '@/components/BigMessage';\n\n// Default \"loading\" message for list pages\nexport default function LoadingState(props) {\n  return (\n    <div className=\"text-center\">\n      <BigMessage icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" {...props} />\n    </div>\n  );\n}\n","import { isObject, cloneDeep, each, extend } from 'lodash';\n\nexport function routesToAngularRoutes(routes, template) {\n  const result = {};\n  template = extend({}, template); // convert to object\n  each(routes, ({ path, title, key, ...resolve }) => {\n    // Convert to functions\n    each(resolve, (value, prop) => {\n      resolve[prop] = () => value;\n    });\n\n    result[path] = {\n      ...template,\n      title,\n      // keep `resolve` from `template` (if exists)\n      resolve: {\n        ...template.resolve,\n        ...resolve,\n        currentPage: () => key,\n      },\n    };\n  });\n  return result;\n}\n\n// ANGULAR_REMOVE_ME\nexport function cleanAngularProps(value) {\n  // remove all props that start with '$$' - that's what `angular.toJson` does\n  const omitAngularProps = (obj) => {\n    each(obj, (v, k) => {\n      if (('' + k).startsWith('$$')) {\n        delete obj[k];\n      } else {\n        obj[k] = isObject(v) ? omitAngularProps(v) : v;\n      }\n    });\n    return obj;\n  };\n\n  const result = cloneDeep(value);\n  return isObject(result) ? omitAngularProps(result) : result;\n}\n","import { omit, debounce } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport hoistNonReactStatics from 'hoist-non-react-statics';\nimport { $route, $routeParams } from '@/services/ng';\nimport { clientConfig } from '@/services/auth';\nimport { StateStorage } from './classes/StateStorage';\n\nexport const ControllerType = PropTypes.shape({\n  // values of props declared by wrapped component, current route's locals (`resolve: { ... }`) and title\n  params: PropTypes.object.isRequired,\n\n  isLoaded: PropTypes.bool.isRequired,\n  isEmpty: PropTypes.bool.isRequired,\n\n  // search\n  searchTerm: PropTypes.string,\n  updateSearch: PropTypes.func.isRequired, // (searchTerm: string) => void\n\n  // tags\n  selectedTags: PropTypes.array.isRequired,\n  updateSelectedTags: PropTypes.func.isRequired, // (selectedTags: array of tags) => void\n\n  // sorting\n  orderByField: PropTypes.string,\n  orderByReverse: PropTypes.bool.isRequired,\n  toggleSorting: PropTypes.func.isRequired, // (orderByField: string) => void\n\n  // pagination\n  page: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  totalItemsCount: PropTypes.number.isRequired,\n  pageSizeOptions: PropTypes.arrayOf(PropTypes.number).isRequired,\n  pageItems: PropTypes.array.isRequired,\n  updatePagination: PropTypes.func.isRequired, // ({ page: number, itemsPerPage: number }) => void\n\n  handleError: PropTypes.func.isRequired, // (error) => void\n});\n\nexport function wrap(WrappedComponent, itemsSource, stateStorage) {\n  class ItemsListWrapper extends React.Component {\n    static propTypes = {\n      ...omit(WrappedComponent.propTypes, ['controller']),\n      onError: PropTypes.func,\n      children: PropTypes.node,\n    };\n\n    static defaultProps = {\n      ...omit(WrappedComponent.defaultProps, ['controller']),\n      onError: (error) => {\n        // Allow calling chain to roll up, and then throw the error in global context\n        setTimeout(() => { throw error; });\n      },\n      children: null,\n    };\n\n    constructor(props) {\n      super(props);\n\n      stateStorage = stateStorage || new StateStorage();\n      itemsSource.setState({ ...stateStorage.getState(), validate: false });\n      itemsSource.getCallbackContext = () => this.state;\n\n      itemsSource.onBeforeUpdate = () => {\n        const state = itemsSource.getState();\n        stateStorage.setState(state);\n        this.setState(this.getState({ ...state, isLoaded: false }));\n      };\n\n      itemsSource.onAfterUpdate = () => {\n        const state = itemsSource.getState();\n        this.setState(this.getState({ ...state, isLoaded: true }));\n      };\n\n      itemsSource.onError = error => this.props.onError(error);\n\n      const initialState = this.getState({ ...itemsSource.getState(), isLoaded: false });\n      const { updatePagination, toggleSorting, updateSearch, updateSelectedTags, update, handleError } = itemsSource;\n      this.state = {\n        ...initialState,\n        toggleSorting, // eslint-disable-line react/no-unused-state\n        updateSearch: debounce(updateSearch, 200), // eslint-disable-line react/no-unused-state\n        updateSelectedTags, // eslint-disable-line react/no-unused-state\n        updatePagination, // eslint-disable-line react/no-unused-state\n        update, // eslint-disable-line react/no-unused-state\n        handleError, // eslint-disable-line react/no-unused-state\n      };\n    }\n\n    componentDidMount() {\n      this.state.update();\n    }\n\n    componentWillUnmount() {\n      itemsSource.onBeforeUpdate = () => {};\n      itemsSource.onAfterUpdate = () => {};\n      itemsSource.onError = () => {};\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getState({ isLoaded, totalCount, pageItems, params, ...rest }) {\n      params = {\n        // Custom params from items source\n        ...params,\n\n        // Add some properties of current route (`$resolve`, title, route params)\n        // ANGULAR_REMOVE_ME Revisit when some React router will be used\n        title: $route.current.title,\n        ...$routeParams,\n        ...omit($route.current.locals, ['$scope', '$template']),\n\n        // Add to params all props except of own ones\n        ...omit(this.props, ['onError', 'children']),\n      };\n      return {\n        ...rest,\n\n        params,\n\n        isLoaded,\n        isEmpty: !isLoaded || (totalCount === 0),\n        totalItemsCount: isLoaded ? totalCount : 0,\n        pageSizeOptions: clientConfig.pageSizeOptions,\n        pageItems: isLoaded ? pageItems : [],\n      };\n    }\n\n    render() {\n      // don't pass own props to wrapped component\n      const { children, onError, ...props } = this.props;\n      props.controller = this.state;\n      return <WrappedComponent {...props}>{ children }</WrappedComponent>;\n    }\n  }\n\n  // Copy static methods from `WrappedComponent`\n  hoistNonReactStatics(ItemsListWrapper, WrappedComponent);\n\n  return ItemsListWrapper;\n}\n","import { isString, get } from 'lodash';\nimport { $http, $sanitize } from '@/services/ng';\nimport notification from '@/services/notification';\nimport { clientConfig } from '@/services/auth';\n\nexport let User = null; // eslint-disable-line import/no-mutable-exports\n\nfunction disableResource(user) {\n  return `api/users/${user.id}/disable`;\n}\n\nfunction enableUser(user) {\n  const userName = $sanitize(user.name);\n\n  return $http\n    .delete(disableResource(user))\n    .then((data) => {\n      notification.success(`User ${userName} is now enabled.`);\n      user.is_disabled = false;\n      user.profile_image_url = data.data.profile_image_url;\n      return data;\n    })\n    .catch((response) => {\n      let message = get(response, 'data.message', response.statusText);\n      if (!isString(message)) {\n        message = 'Unknown error';\n      }\n      notification.error('Cannot enable user', message);\n    });\n}\n\nfunction disableUser(user) {\n  const userName = $sanitize(user.name);\n  return $http\n    .post(disableResource(user))\n    .then((data) => {\n      notification.warning(`User ${userName} is now disabled.`);\n      user.is_disabled = true;\n      user.profile_image_url = data.data.profile_image_url;\n      return data;\n    })\n    .catch((response = {}) => {\n      const message = get(response, 'data.message', response.statusText);\n      notification.error('Cannot disable user', message);\n    });\n}\n\nfunction deleteUser(user) {\n  const userName = $sanitize(user.name);\n  return $http\n    .delete(`api/users/${user.id}`)\n    .then((data) => {\n      notification.warning(`User ${userName} has been deleted.`);\n      return data;\n    })\n    .catch((response = {}) => {\n      const message = get(response, 'data.message', response.statusText);\n      notification.error('Cannot delete user', message);\n    });\n}\n\nfunction convertUserInfo(user) {\n  return {\n    id: user.id,\n    name: user.name,\n    email: user.email,\n    profileImageUrl: user.profile_image_url,\n    apiKey: user.api_key,\n    groupIds: user.groups,\n    isDisabled: user.is_disabled,\n    isInvitationPending: user.is_invitation_pending,\n  };\n}\n\nfunction regenerateApiKey(user) {\n  return $http\n    .post(`api/users/${user.id}/regenerate_api_key`)\n    .then(({ data }) => {\n      notification.success('The API Key has been updated.');\n      return data.api_key;\n    })\n    .catch((response = {}) => {\n      const message = get(response, 'data.message', response.statusText);\n      notification.error('Failed regenerating API Key', message);\n    });\n}\n\nfunction sendPasswordReset(user) {\n  return $http\n    .post(`api/users/${user.id}/reset_password`)\n    .then(({ data }) => {\n      if (clientConfig.mailSettingsMissing) {\n        notification.warning('The mail server is not configured.');\n        return data.reset_link;\n      }\n      notification.success('Password reset email sent.');\n    })\n    .catch((response = {}) => {\n      const message = get(response, 'data.message', response.statusText);\n      notification.error('Failed to send password reset email', message);\n    });\n}\n\nfunction resendInvitation(user) {\n  return $http\n    .post(`api/users/${user.id}/invite`)\n    .then(({ data }) => {\n      if (clientConfig.mailSettingsMissing) {\n        notification.warning('The mail server is not configured.');\n        return data.invite_link;\n      }\n      notification.success('Invitation sent.');\n    })\n    .catch((response = {}) => {\n      const message = get(response, 'data.message', response.statusText);\n\n      notification.error('Failed to resend invitation', message);\n    });\n}\n\nfunction UserService($resource) {\n  const actions = {\n    get: { method: 'GET' },\n    create: { method: 'POST' },\n    save: { method: 'POST' },\n    query: { method: 'GET', isArray: false },\n    delete: { method: 'DELETE' },\n    disable: { method: 'POST', url: 'api/users/:id/disable' },\n    enable: { method: 'DELETE', url: 'api/users/:id/disable' },\n  };\n\n  const UserResource = $resource('api/users/:id', { id: '@id' }, actions);\n\n  UserResource.enableUser = enableUser;\n  UserResource.disableUser = disableUser;\n  UserResource.deleteUser = deleteUser;\n  UserResource.convertUserInfo = convertUserInfo;\n  UserResource.regenerateApiKey = regenerateApiKey;\n  UserResource.sendPasswordReset = sendPasswordReset;\n  UserResource.resendInvitation = resendInvitation;\n\n  return UserResource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('User', UserService);\n\n  ngModule.run(($injector) => {\n    User = $injector.get('User');\n  });\n}\n\ninit.init = true;\n","import moment from 'moment';\nimport debug from 'debug';\nimport Mustache from 'mustache';\nimport {\n  zipObject, isEmpty, map, filter, includes, union, uniq, has,\n  isNull, isUndefined, isArray, isObject, identity, extend, each,\n} from 'lodash';\n\nMustache.escape = identity; // do not html-escape values\n\nexport let Query = null; // eslint-disable-line import/no-mutable-exports\n\nconst logger = debug('redash:services:query');\n\nconst DATETIME_FORMATS = {\n  // eslint-disable-next-line quote-props\n  'date': 'YYYY-MM-DD',\n  'date-range': 'YYYY-MM-DD',\n  'datetime-local': 'YYYY-MM-DD HH:mm',\n  'datetime-range': 'YYYY-MM-DD HH:mm',\n  'datetime-with-seconds': 'YYYY-MM-DD HH:mm:ss',\n  'datetime-range-with-seconds': 'YYYY-MM-DD HH:mm:ss',\n};\n\nfunction normalizeNumericValue(value, defaultValue = null) {\n  const result = parseFloat(value);\n  return isFinite(result) ? result : defaultValue;\n}\n\nfunction collectParams(parts) {\n  let parameters = [];\n\n  parts.forEach((part) => {\n    if (part[0] === 'name' || part[0] === '&') {\n      parameters.push(part[1].split('.')[0]);\n    } else if (part[0] === '#') {\n      parameters = union(parameters, collectParams(part[4]));\n    }\n  });\n\n  return parameters;\n}\n\nfunction isDateParameter(paramType) {\n  return includes(['date', 'datetime-local', 'datetime-with-seconds'], paramType);\n}\n\nfunction isDateRangeParameter(paramType) {\n  return includes(['date-range', 'datetime-range', 'datetime-range-with-seconds'], paramType);\n}\n\nexport class Parameter {\n  constructor(parameter, parentQueryId) {\n    this.title = parameter.title;\n    this.name = parameter.name;\n    this.type = parameter.type;\n    this.useCurrentDateTime = parameter.useCurrentDateTime;\n    this.global = parameter.global; // backward compatibility in Widget service\n    this.enumOptions = parameter.enumOptions;\n    this.queryId = parameter.queryId;\n    this.parentQueryId = parentQueryId;\n\n    // Used for meta-parameters (i.e. dashboard-level params)\n    this.locals = [];\n\n    // validate value and init internal state\n    this.setValue(parameter.value);\n\n    // Used for URL serialization\n    Object.defineProperty(this, 'urlPrefix', {\n      configurable: true,\n      enumerable: false, // don't save it\n      writable: true,\n      value: 'p_',\n    });\n  }\n\n  clone() {\n    return new Parameter(this, this.parentQueryId);\n  }\n\n  get isEmpty() {\n    return isNull(this.getValue());\n  }\n\n  getValue() {\n    return this.constructor.getValue(this);\n  }\n\n  static getValue(param) {\n    const { value, type, useCurrentDateTime } = param;\n    const isEmptyValue = isNull(value) || isUndefined(value) || (value === '');\n    if (isEmptyValue) {\n      if (\n        includes(['date', 'datetime-local', 'datetime-with-seconds'], type) &&\n        useCurrentDateTime\n      ) {\n        return moment().format(DATETIME_FORMATS[type]);\n      }\n      return null; // normalize empty value\n    }\n    if (type === 'number') {\n      return normalizeNumericValue(value, null); // normalize empty value\n    }\n    return value;\n  }\n\n  setValue(value) {\n    if (isDateRangeParameter(this.type)) {\n      this.value = null;\n      this.$$value = null;\n\n      if (isObject(value) && !isArray(value)) {\n        value = [value.start, value.end];\n      }\n\n      if (isArray(value) && (value.length === 2)) {\n        value = [moment(value[0]), moment(value[1])];\n        if (value[0].isValid() && value[1].isValid()) {\n          this.value = {\n            start: value[0].format(DATETIME_FORMATS[this.type]),\n            end: value[1].format(DATETIME_FORMATS[this.type]),\n          };\n          this.$$value = value;\n        }\n      }\n    } else if (isDateParameter(this.type)) {\n      this.value = null;\n      this.$$value = null;\n\n      value = moment(value);\n      if (value.isValid()) {\n        this.value = value.format(DATETIME_FORMATS[this.type]);\n        this.$$value = value;\n      }\n    } else if (this.type === 'number') {\n      this.value = value;\n      this.$$value = normalizeNumericValue(value, null);\n    } else {\n      this.value = value;\n      this.$$value = value;\n    }\n\n    if (isArray(this.locals)) {\n      each(this.locals, (local) => {\n        local.setValue(this.value);\n      });\n    }\n\n    return this;\n  }\n\n  get normalizedValue() {\n    return this.$$value;\n  }\n\n  // TODO: Remove this property when finally moved to React\n  get ngModel() {\n    return this.normalizedValue;\n  }\n\n  set ngModel(value) {\n    this.setValue(value);\n  }\n\n  toUrlParams() {\n    if (this.isEmpty) {\n      return {};\n    }\n    const prefix = this.urlPrefix;\n    if (isDateRangeParameter(this.type)) {\n      return {\n        [`${prefix}${this.name}.start`]: this.value.start,\n        [`${prefix}${this.name}.end`]: this.value.end,\n      };\n    }\n    return {\n      [`${prefix}${this.name}`]: this.value,\n    };\n  }\n\n  fromUrlParams(query) {\n    const prefix = this.urlPrefix;\n    if (isDateRangeParameter(this.type)) {\n      const keyStart = `${prefix}${this.name}.start`;\n      const keyEnd = `${prefix}${this.name}.end`;\n      if (has(query, keyStart) && has(query, keyEnd)) {\n        this.setValue([query[keyStart], query[keyEnd]]);\n      }\n    } else {\n      const key = `${prefix}${this.name}`;\n      if (has(query, key)) {\n        this.setValue(query[key]);\n      }\n    }\n  }\n\n  toQueryTextFragment() {\n    if (isDateRangeParameter(this.type)) {\n      return `{{ ${this.name}.start }} {{ ${this.name}.end }}`;\n    }\n    return `{{ ${this.name} }}`;\n  }\n\n  loadDropdownValues() {\n    if (this.parentQueryId) {\n      return Query.associatedDropdown({ queryId: this.parentQueryId, dropdownQueryId: this.queryId }).$promise;\n    }\n\n    return Query.asDropdown({ id: this.queryId }).$promise;\n  }\n}\n\nclass Parameters {\n  constructor(query, queryString) {\n    this.query = query;\n    this.updateParameters();\n    this.initFromQueryString(queryString);\n  }\n\n  parseQuery() {\n    let parameters = [];\n    try {\n      const parts = Mustache.parse(this.query.query);\n      parameters = uniq(collectParams(parts));\n    } catch (e) {\n      logger('Failed parsing parameters: ', e);\n      // Return current parameters so we don't reset the list\n      parameters = map(this.query.options.parameters, i => i.name);\n    }\n    return parameters;\n  }\n\n  updateParameters() {\n    if (this.query.query === this.cachedQueryText) {\n      return;\n    }\n\n    this.cachedQueryText = this.query.query;\n    const parameterNames = this.parseQuery();\n\n    this.query.options.parameters = this.query.options.parameters || [];\n\n    const parametersMap = {};\n    this.query.options.parameters.forEach((param) => {\n      parametersMap[param.name] = param;\n    });\n\n    parameterNames.forEach((param) => {\n      if (!has(parametersMap, param)) {\n        this.query.options.parameters.push(new Parameter({\n          title: param,\n          name: param,\n          type: 'text',\n          value: null,\n          global: false,\n        }));\n      }\n    });\n\n    const parameterExists = p => includes(parameterNames, p.name);\n    const parameters = this.query.options.parameters;\n    this.query.options.parameters = parameters.filter(parameterExists).map(p => new Parameter(p, this.query.id));\n  }\n\n  initFromQueryString(query) {\n    this.get().forEach((param) => {\n      param.fromUrlParams(query);\n    });\n  }\n\n  get() {\n    this.updateParameters();\n    return this.query.options.parameters;\n  }\n\n  add(parameterDef) {\n    this.query.options.parameters = this.query.options.parameters\n      .filter(p => p.name !== parameterDef.name);\n    const param = new Parameter(parameterDef);\n    this.query.options.parameters.push(param);\n    return param;\n  }\n\n  getMissing() {\n    return map(filter(this.get(), p => p.isEmpty), i => i.title);\n  }\n\n  isRequired() {\n    return !isEmpty(this.get());\n  }\n\n  getValues() {\n    const params = this.get();\n    return zipObject(map(params, i => i.name), map(params, i => i.getValue()));\n  }\n\n  toUrlParams() {\n    if (this.get().length === 0) {\n      return '';\n    }\n\n    const params = Object.assign(...this.get().map(p => p.toUrlParams()));\n    return Object\n      .keys(params)\n      .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(params[k])}`)\n      .join('&');\n  }\n}\n\nfunction QueryResultErrorFactory($q) {\n  class QueryResultError {\n    constructor(errorMessage) {\n      this.errorMessage = errorMessage;\n      this.updatedAt = moment.utc();\n    }\n\n    getUpdatedAt() {\n      return this.updatedAt;\n    }\n\n    getError() {\n      return this.errorMessage;\n    }\n\n    toPromise() {\n      return $q.reject(this);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getStatus() {\n      return 'failed';\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getData() {\n      return null;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    getLog() {\n      return null;\n    }\n  }\n\n  return QueryResultError;\n}\n\nfunction QueryResource(\n  $resource,\n  $http,\n  $location,\n  $q,\n  currentUser,\n  QueryResultError,\n  QueryResult,\n) {\n  const QueryService = $resource(\n    'api/queries/:id',\n    { id: '@id' },\n    {\n      recent: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/recent',\n      },\n      archive: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/archive',\n      },\n      query: {\n        isArray: false,\n      },\n      myQueries: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/my',\n      },\n      fork: {\n        method: 'post',\n        isArray: false,\n        url: 'api/queries/:id/fork',\n        params: { id: '@id' },\n      },\n      resultById: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/:id/results.json',\n      },\n      asDropdown: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/:id/dropdown',\n      },\n      associatedDropdown: {\n        method: 'get',\n        isArray: true,\n        url: 'api/queries/:queryId/dropdowns/:dropdownQueryId',\n      },\n      favorites: {\n        method: 'get',\n        isArray: false,\n        url: 'api/queries/favorites',\n      },\n      favorite: {\n        method: 'post',\n        isArray: false,\n        url: 'api/queries/:id/favorite',\n        transformRequest: [() => ''], // body not needed\n      },\n      unfavorite: {\n        method: 'delete',\n        isArray: false,\n        url: 'api/queries/:id/favorite',\n        transformRequest: [() => ''], // body not needed\n      },\n    },\n  );\n\n  QueryService.newQuery = function newQuery() {\n    return new QueryService({\n      query: '',\n      name: 'New Query',\n      schedule: null,\n      user: currentUser,\n      options: {},\n    });\n  };\n\n  QueryService.format = function formatQuery(syntax, query) {\n    if (syntax === 'json') {\n      try {\n        const formatted = JSON.stringify(JSON.parse(query), ' ', 4);\n        return $q.resolve(formatted);\n      } catch (err) {\n        return $q.reject(String(err));\n      }\n    } else if (syntax === 'sql') {\n      return $http.post('api/queries/format', { query }).then(response => response.data.query);\n    } else {\n      return $q.reject('Query formatting is not supported for your data source syntax.');\n    }\n  };\n\n  QueryService.prototype.getSourceLink = function getSourceLink() {\n    return `/queries/${this.id}/source`;\n  };\n\n  QueryService.prototype.isNew = function isNew() {\n    return this.id === undefined;\n  };\n\n  QueryService.prototype.hasDailySchedule = function hasDailySchedule() {\n    return this.schedule && this.schedule.match(/\\d\\d:\\d\\d/) !== null;\n  };\n\n  QueryService.prototype.scheduleInLocalTime = function scheduleInLocalTime() {\n    const parts = this.schedule.split(':');\n    return moment\n      .utc()\n      .hour(parts[0])\n      .minute(parts[1])\n      .local()\n      .format('HH:mm');\n  };\n\n  QueryService.prototype.hasResult = function hasResult() {\n    return !!(this.latest_query_data || this.latest_query_data_id);\n  };\n\n  QueryService.prototype.paramsRequired = function paramsRequired() {\n    return this.getParameters().isRequired();\n  };\n\n  QueryService.prototype.hasParameters = function hasParameters() {\n    return this.getParametersDefs().length > 0;\n  };\n\n  QueryService.prototype.prepareQueryResultExecution = function prepareQueryResultExecution(execute, maxAge) {\n    if (!this.query) {\n      return new QueryResultError(\"Can't execute empty query.\");\n    }\n\n    const parameters = this.getParameters();\n    const missingParams = parameters.getMissing();\n\n    if (missingParams.length > 0) {\n      let paramsWord = 'parameter';\n      let valuesWord = 'value';\n      if (missingParams.length > 1) {\n        paramsWord = 'parameters';\n        valuesWord = 'values';\n      }\n\n      return new QueryResult({\n        job: {\n          error: `missing ${valuesWord} for ${missingParams.join(', ')} ${paramsWord}.`,\n          status: 4,\n        },\n      });\n    }\n\n    if (parameters.isRequired()) {\n      // Need to clear latest results, to make sure we don't use results for different params.\n      this.latest_query_data = null;\n      this.latest_query_data_id = null;\n    }\n\n    if (this.latest_query_data && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = new QueryResult({\n          query_result: this.latest_query_data,\n        });\n      }\n    } else if (this.latest_query_data_id && maxAge !== 0) {\n      if (!this.queryResult) {\n        this.queryResult = QueryResult.getById(this.latest_query_data_id);\n      }\n    } else if (this.data_source_id) {\n      this.queryResult = execute();\n    } else {\n      return new QueryResultError('Please select data source to run this query.');\n    }\n\n    return this.queryResult;\n  };\n\n  QueryService.prototype.getQueryResult = function getQueryResult(maxAge) {\n    const execute = () => QueryResult.getByQueryId(this.id, this.getParameters().getValues(), maxAge);\n    return this.prepareQueryResultExecution(execute, maxAge);\n  };\n\n  QueryService.prototype.getQueryResultByText = function getQueryResultByText(maxAge, selectedQueryText) {\n    const queryText = selectedQueryText || this.query;\n    const parameters = this.getParameters().getValues();\n    const execute = () => QueryResult.get(this.data_source_id, queryText, parameters, maxAge, this.id);\n    return this.prepareQueryResultExecution(execute, maxAge);\n  };\n\n  QueryService.prototype.getUrl = function getUrl(source, hash) {\n    let url = `queries/${this.id}`;\n\n    if (source) {\n      url += '/source';\n    }\n\n    let params = {};\n    if (this.getParameters().isRequired()) {\n      this.getParametersDefs().forEach((param) => {\n        extend(params, param.toUrlParams());\n      });\n    }\n    params = map(params, (value, name) => `${encodeURIComponent(name)}=${encodeURIComponent(value)}`).join('&');\n\n    if (params !== '') {\n      url += `?${params}`;\n    }\n\n    if (hash) {\n      url += `#${hash}`;\n    }\n\n    return url;\n  };\n\n  QueryService.prototype.getQueryResultPromise = function getQueryResultPromise() {\n    return this.getQueryResult().toPromise();\n  };\n\n  QueryService.prototype.getParameters = function getParameters() {\n    if (!this.$parameters) {\n      this.$parameters = new Parameters(this, $location.search());\n    }\n\n    return this.$parameters;\n  };\n\n  QueryService.prototype.getParametersDefs = function getParametersDefs() {\n    return this.getParameters().get();\n  };\n\n  return QueryService;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('QueryResultError', QueryResultErrorFactory);\n  ngModule.factory('Query', QueryResource);\n\n  ngModule.run(($injector) => {\n    Query = $injector.get('Query');\n  });\n}\n\ninit.init = true;\n","export let Group = {}; // eslint-disable-line import/no-mutable-exports\n\nfunction GroupService($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n\n    members: {\n      method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/members',\n    },\n    addMember: {\n      method: 'POST', url: 'api/groups/:id/members',\n    },\n    removeMember: {\n      method: 'DELETE', url: 'api/groups/:id/members/:userId',\n    },\n\n    dataSources: {\n      method: 'GET', cache: false, isArray: true, url: 'api/groups/:id/data_sources',\n    },\n    addDataSource: {\n      method: 'POST', url: 'api/groups/:id/data_sources',\n    },\n    removeDataSource: {\n      method: 'DELETE', url: 'api/groups/:id/data_sources/:dataSourceId',\n    },\n    updateDataSource: {\n      method: 'POST', url: 'api/groups/:id/data_sources/:dataSourceId',\n    },\n  };\n  return $resource('api/groups/:id', { id: '@id' }, actions);\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Group', GroupService);\n\n  ngModule.run(($injector) => {\n    Group = $injector.get('Group');\n  });\n}\n\ninit.init = true;\n","import { isFunction, isString, filter, map } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Input from 'antd/lib/input';\nimport Select from 'antd/lib/select';\nimport { TagsList } from '@/components/TagsList';\n\n/*\n    SearchInput\n */\n\nexport function SearchInput({ placeholder, value, showIcon, onChange }) {\n  const InputControl = showIcon ? Input.Search : Input;\n  return (\n    <div className=\"m-b-10\">\n      <InputControl\n        className=\"form-control\"\n        placeholder={placeholder}\n        defaultValue={value}\n        onChange={event => onChange(event.target.value)}\n        autoFocus\n      />\n    </div>\n  );\n}\n\nSearchInput.propTypes = {\n  placeholder: PropTypes.string,\n  value: PropTypes.string.isRequired,\n  showIcon: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n};\n\nSearchInput.defaultProps = {\n  placeholder: 'Search...',\n  showIcon: false,\n};\n\n/*\n    Menu\n */\n\nexport function Menu({ items, selected }) {\n  items = filter(\n    items,\n    item => (isFunction(item.isAvailable) ? item.isAvailable() : true),\n  );\n  if (items.length === 0) {\n    return null;\n  }\n  return (\n    <div className=\"list-group m-b-10 tags-list tiled\">\n      {map(items, item => (\n        <a\n          key={item.key}\n          href={item.href}\n          className={classNames('list-group-item', { active: selected === item.key })}\n        >\n          {\n            isString(item.icon) && (item.icon !== '') &&\n            <span className=\"btn-favourite m-r-5\"><i className={item.icon} aria-hidden=\"true\" /></span>\n          }\n          {isFunction(item.icon) && (item.icon(item) || null)}\n          {item.title}\n        </a>\n      ))}\n    </div>\n  );\n}\n\nMenu.propTypes = {\n  items: PropTypes.arrayOf(PropTypes.shape({\n    key: PropTypes.string.isRequired,\n    href: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    icon: PropTypes.func, // function to render icon\n    isAvailable: PropTypes.func, // return `true` to show item and `false` to hide; if omitted: show item\n  })),\n  selected: PropTypes.string,\n};\n\nMenu.defaultProps = {\n  items: [],\n  selected: null,\n};\n\n/*\n    MenuIcon\n */\n\nexport function MenuIcon({ icon }) {\n  return <span className=\"btn-favourite m-r-5\"><i className={icon} aria-hidden=\"true\" /></span>;\n}\n\nMenuIcon.propTypes = {\n  icon: PropTypes.string.isRequired,\n};\n\n/*\n    ProfileImage\n */\n\nexport function ProfileImage({ user }) {\n  if (!isString(user.profile_image_url) || (user.profile_image_url === '')) {\n    return null;\n  }\n  return <img src={user.profile_image_url} className=\"profile__image--navbar m-r-5\" width=\"13\" alt={user.name} />;\n}\n\nProfileImage.propTypes = {\n  user: PropTypes.shape({\n    profile_image_url: PropTypes.string,\n    name: PropTypes.string,\n  }).isRequired,\n};\n\n/*\n    Tags\n */\n\nexport function Tags({ url, onChange }) {\n  if (url === '') {\n    return null;\n  }\n  return (\n    <div className=\"m-b-10\">\n      <TagsList tagsUrl={url} onUpdate={onChange} />\n    </div>\n  );\n}\n\nTags.propTypes = {\n  url: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\n/*\n    PageSizeSelect\n */\n\nexport function PageSizeSelect({ options, value, onChange, ...props }) {\n  return (\n    <div {...props}>\n      <Select\n        className=\"w-100\"\n        defaultValue={value}\n        onChange={onChange}\n      >\n        {map(options, option => (\n          <Select.Option key={option} value={option}>{ option } results</Select.Option>\n        ))}\n      </Select>\n    </div>\n  );\n}\n\nPageSizeSelect.propTypes = {\n  options: PropTypes.arrayOf(PropTypes.number).isRequired,\n  value: PropTypes.number.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n","import DefaultPolicy from './DefaultPolicy';\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let policy = new DefaultPolicy();\n\nexport function setPolicy(newPolicy) {\n  policy = newPolicy;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport './content-with-sidebar.less';\n\nconst propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nconst defaultProps = {\n  className: null,\n  children: null,\n};\n\n// Sidebar\n\nfunction Sidebar({ className, children, ...props }) {\n  return (\n    <div className={classNames('layout-sidebar', className)} {...props}>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nSidebar.propTypes = propTypes;\nSidebar.defaultProps = defaultProps;\n\n// Content\n\nfunction Content({ className, children, ...props }) {\n  return (\n    <div className={classNames('layout-content', className)} {...props}>\n      <div>{children}</div>\n    </div>\n  );\n}\n\nContent.propTypes = propTypes;\nContent.defaultProps = defaultProps;\n\n// Layout\n\nexport default function Layout({ className, children, ...props }) {\n  return <div className={classNames('layout-with-sidebar', className)} {...props}>{children}</div>;\n}\n\nLayout.propTypes = propTypes;\nLayout.defaultProps = defaultProps;\n\nLayout.Sidebar = Sidebar;\nLayout.Content = Content;\n","import { defaults } from 'lodash';\nimport { clientConfig } from '@/services/auth';\nimport { $location } from '@/services/ng';\nimport { parse as parseOrderBy, compile as compileOrderBy } from './Sorter';\n\nexport class StateStorage {\n  constructor(state = {}) {\n    this._state = { ...state };\n  }\n\n  getState() {\n    return defaults(this._state, {\n      page: 1,\n      itemsPerPage: clientConfig.pageSize,\n      orderByField: 'created_at',\n      orderByReverse: false,\n      searchTerm: '',\n      tags: [],\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  setState() {\n  }\n}\n\nexport class UrlStateStorage extends StateStorage {\n  getState() {\n    const defaultState = super.getState();\n    const params = $location.search();\n\n    const searchTerm = params.q || '';\n\n    // in search mode order by should be explicitly specified in url, otherwise use default\n    const defaultOrderBy = searchTerm !== '' ? '' : compileOrderBy(defaultState.orderByField, defaultState.orderByReverse);\n\n    const {\n      field: orderByField,\n      reverse: orderByReverse,\n    } = parseOrderBy(params.order || defaultOrderBy);\n\n    return {\n      page: parseInt(params.page, 10) || defaultState.page,\n      itemsPerPage: parseInt(params.page_size, 10) || defaultState.itemsPerPage,\n      orderByField,\n      orderByReverse,\n      searchTerm,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  setState({ page, itemsPerPage, orderByField, orderByReverse, searchTerm }) {\n    $location.search({\n      page,\n      page_size: itemsPerPage,\n      order: compileOrderBy(orderByField, orderByReverse),\n      q: searchTerm !== '' ? searchTerm : null,\n    });\n  }\n}\n","import { isString } from 'lodash';\nimport { $location, $rootScope } from '@/services/ng';\n\nexport default function navigateTo(url, replace = false) {\n  if (isString(url)) {\n    $location.url(url);\n    if (replace) {\n      $location.replace();\n    }\n    $rootScope.$applyAsync();\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nexport function BigMessage({ message, icon, children, className }) {\n  return (\n    <div className={'p-15 text-center ' + className}>\n      <h3 className=\"m-t-0 m-b-0\">\n        <i className={'fa ' + icon} />\n      </h3>\n      <br />\n      {message}\n      {children}\n    </div>\n  );\n}\n\nBigMessage.propTypes = {\n  message: PropTypes.string,\n  icon: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  className: PropTypes.string,\n};\n\nBigMessage.defaultProps = {\n  message: '',\n  children: null,\n  className: 'tiled bg-white',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('bigMessage', react2angular(BigMessage));\n}\n\ninit.init = true;\n","export const SCHEMA_NOT_SUPPORTED = 1;\nexport const SCHEMA_LOAD_ERROR = 2;\nexport const IMG_ROOT = '/static/images/db-logos';\n\nexport let DataSource = null; // eslint-disable-line import/no-mutable-exports\n\n\nfunction DataSourceService($q, $resource, $http) {\n  function fetchSchema(dataSourceId, refresh = false) {\n    const params = {};\n\n    if (refresh) {\n      params.refresh = true;\n    }\n\n    return $http.get(`api/data_sources/${dataSourceId}/schema`, { params });\n  }\n\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    query: { method: 'GET', cache: false, isArray: true },\n    save: { method: 'POST' },\n    types: {\n      method: 'GET',\n      cache: false,\n      isArray: true,\n      url: 'api/data_sources/types',\n    },\n    test: {\n      method: 'POST',\n      cache: false,\n      isArray: false,\n      url: 'api/data_sources/:id/test',\n    },\n  };\n\n  const DataSourceResource = $resource('api/data_sources/:id', { id: '@id' }, actions);\n\n  DataSourceResource.prototype.getSchema = function getSchema(refresh = false) {\n    if (this._schema === undefined || refresh) {\n      return fetchSchema(this.id, refresh).then((response) => {\n        const data = response.data;\n\n        this._schema = data;\n\n        return data;\n      });\n    }\n\n    return $q.resolve(this._schema);\n  };\n\n  return DataSourceResource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('DataSource', DataSourceService);\n\n  ngModule.run(($injector) => {\n    DataSource = $injector.get('DataSource');\n  });\n}\n\ninit.init = true;\n","import { debounce, extend } from 'lodash';\nimport { $http } from '@/services/ng';\n\nlet events = [];\n\nconst post = debounce(() => {\n  const eventsToSend = events;\n  events = [];\n\n  $http.post('api/events', eventsToSend);\n}, 1000);\n\nexport default function recordEvent(action, objectType, objectId, additionalProperties) {\n  const event = {\n    action,\n    object_type: objectType,\n    object_id: objectId,\n    timestamp: Date.now() / 1000.0,\n    screen_resolution: `${window.screen.width}x${window.screen.height}`,\n  };\n  extend(event, additionalProperties);\n  events.push(event);\n\n  post();\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Pagination from 'antd/lib/pagination';\n\nexport function Paginator({\n  page,\n  itemsPerPage,\n  totalCount,\n  onChange,\n}) {\n  if (totalCount <= itemsPerPage) {\n    return null;\n  }\n  return (\n    <div className=\"paginator-container\">\n      <Pagination\n        defaultCurrent={page}\n        defaultPageSize={itemsPerPage}\n        total={totalCount}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nPaginator.propTypes = {\n  page: PropTypes.number.isRequired,\n  itemsPerPage: PropTypes.number.isRequired,\n  totalCount: PropTypes.number.isRequired,\n  onChange: PropTypes.func,\n};\n\nPaginator.defaultProps = {\n  onChange: () => {},\n};\n\nexport default function init(ngModule) {\n  ngModule.component('paginatorImpl', react2angular(Paginator));\n  ngModule.component('paginator', {\n    template: `\n      <paginator-impl\n        page=\"$ctrl.paginator.page\"\n        items-per-page=\"$ctrl.paginator.itemsPerPage\"\n        total-count=\"$ctrl.paginator.totalCount\"\n        on-change=\"$ctrl.onPageChanged\"\n      ></paginator-impl>`,\n    bindings: {\n      paginator: '<',\n    },\n    controller($scope) {\n      this.onPageChanged = (page) => {\n        this.paginator.setPage(page);\n        $scope.$applyAsync();\n      };\n    },\n  });\n}\n\ninit.init = true;\n","import { isFunction, identity, map, extend } from 'lodash';\nimport Paginator from './Paginator';\nimport Sorter from './Sorter';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport { PlainListFetcher, PaginatedListFetcher } from './ItemsFetcher';\n\nexport class ItemsSource {\n  onBeforeUpdate = null;\n\n  onAfterUpdate = null;\n\n  onError = null;\n\n  getCallbackContext = () => null;\n\n  _beforeUpdate() {\n    if (isFunction(this.onBeforeUpdate)) {\n      return Promise.resolve(this.onBeforeUpdate(this.getState(), this.getCallbackContext()));\n    }\n    return Promise.resolve();\n  }\n\n  _afterUpdate() {\n    if (isFunction(this.onAfterUpdate)) {\n      return Promise.resolve(this.onAfterUpdate(this.getState(), this.getCallbackContext()));\n    }\n    return Promise.resolve();\n  }\n\n  // changes: object with flags or null (full refresh requested)\n  _changed(changes) {\n    const state = {\n      paginator: this._paginator,\n      sorter: this._sorter,\n      searchTerm: this._searchTerm,\n      selectedTags: this._selectedTags,\n    };\n    const customParams = {};\n    const context = {\n      ...this.getCallbackContext(),\n      setCustomParams: (params) => {\n        extend(customParams, params);\n      },\n    };\n    return this._beforeUpdate().then(() => (\n      this._fetcher.fetch(changes, state, context)\n        .then(({ results, count, allResults }) => {\n          this._pageItems = results;\n          this._allItems = allResults || null;\n          this._paginator.setTotalCount(count);\n          this._params = { ...this._params, ...customParams };\n          return this._afterUpdate();\n        })\n        .catch((error) => {\n          this.handleError(error);\n        })\n    ));\n  }\n\n  constructor({ getRequest, doRequest, processResults, isPlainList = false, ...defaultState }) {\n    if (!isFunction(getRequest)) {\n      getRequest = identity;\n    }\n\n    this._fetcher = isPlainList ?\n      new PlainListFetcher({ getRequest, doRequest, processResults }) :\n      new PaginatedListFetcher({ getRequest, doRequest, processResults });\n\n    this.setState(defaultState);\n    this._pageItems = [];\n\n    this._params = {};\n  }\n\n  getState() {\n    return {\n      page: this._paginator.page,\n      itemsPerPage: this._paginator.itemsPerPage,\n      orderByField: this._sorter.field,\n      orderByReverse: this._sorter.reverse,\n      searchTerm: this._searchTerm,\n      selectedTags: this._selectedTags,\n      totalCount: this._paginator.totalCount,\n      pageItems: this._pageItems,\n      allItems: this._allItems,\n      params: this._params,\n    };\n  }\n\n  setState(state) {\n    this._paginator = new Paginator(state);\n    this._sorter = new Sorter(state);\n\n    this._searchTerm = state.searchTerm || '';\n    this._selectedTags = state.selectedTags || [];\n\n    this._savedOrderByField = this._sorter.field;\n  }\n\n  updatePagination = ({ page, itemsPerPage }) => {\n    const { page: prevPage, itemsPerPage: prevItemsPerPage } = this._paginator;\n    this._paginator.setItemsPerPage(itemsPerPage);\n    this._paginator.setPage(page);\n    this._changed({\n      pagination: {\n        page: prevPage !== this._paginator.page, // page changed flag\n        itemsPerPage: prevItemsPerPage !== this._paginator.itemsPerPage, // items per page changed flags\n      },\n    });\n  };\n\n  toggleSorting = (orderByField) => {\n    this._sorter.toggleField(orderByField);\n    this._savedOrderByField = this._sorter.field;\n    this._changed({ sorting: true });\n  };\n\n  updateSearch = (searchTerm) => {\n    // here we update state directly, but later `fetchData` will update it properly\n    this._searchTerm = searchTerm;\n    // in search mode ignore the ordering and use the ranking order\n    // provided by the server-side FTS backend instead, unless it was\n    // requested by the user by actively ordering in search mode\n    if (searchTerm === '') {\n      this._sorter.setField(this._savedOrderByField); // restore ordering\n    } else {\n      this._sorter.setField(null);\n    }\n    this._paginator.setPage(1);\n    this._changed({ search: true, pagination: { page: true } });\n  };\n\n  updateSelectedTags = (selectedTags) => {\n    this._selectedTags = selectedTags;\n    this._paginator.setPage(1);\n    this._changed({ tags: true, pagination: { page: true } });\n  };\n\n  update = () => this._changed();\n\n  handleError = (error) => {\n    if (isFunction(this.onError)) {\n      // ANGULAR_REMOVE_ME This code is related to Angular's HTTP services\n      if (error.status && error.data) {\n        error = new PromiseRejectionError(error);\n      }\n      this.onError(error);\n    }\n  };\n}\n\nexport class ResourceItemsSource extends ItemsSource {\n  constructor({ getResource, getItemProcessor, ...rest }) {\n    getItemProcessor = isFunction(getItemProcessor) ? getItemProcessor : () => null;\n    super({\n      ...rest,\n      doRequest: (request, context) => {\n        const resource = getResource(context);\n        return resource(request).$promise;\n      },\n      processResults: (results, context) => {\n        let processItem = getItemProcessor(context);\n        processItem = isFunction(processItem) ? processItem : identity;\n        return map(results, item => processItem(item, context));\n      },\n    });\n  }\n}\n","import { isFunction, extend, omit, sortBy } from 'lodash';\n\nclass SettingsMenuItem {\n  constructor(menuItem) {\n    extend(\n      this,\n      { pathPrefix: `/${menuItem.path}` },\n      omit(menuItem, ['isActive']),\n    );\n    if (isFunction(menuItem.isActive)) {\n      this.isActive = menuItem.isActive;\n    }\n  }\n\n  isActive(path) {\n    return path.startsWith(this.pathPrefix);\n  }\n}\n\nclass SettingsMenu {\n  constructor() {\n    this.items = [];\n  }\n\n  add(item) {\n    this.items.push(new SettingsMenuItem(item));\n    this.items = sortBy(this.items, 'order');\n  }\n}\n\nexport default new SettingsMenu();\n","import React from 'react';\nimport { each, includes, isUndefined } from 'lodash';\n\nfunction orderedInputs(properties, order, targetOptions) {\n  const inputs = new Array(order.length);\n  Object.keys(properties).forEach((key) => {\n    const position = order.indexOf(key);\n    const input = {\n      name: key,\n      title: properties[key].title,\n      type: properties[key].type,\n      placeholder: properties[key].default && properties[key].default.toString(),\n      required: properties[key].required,\n      initialValue: targetOptions[key],\n    };\n\n    if (position > -1) {\n      inputs[position] = input;\n    } else {\n      inputs.push(input);\n    }\n  });\n  return inputs;\n}\n\nfunction normalizeSchema(configurationSchema) {\n  each(configurationSchema.properties, (prop, name) => {\n    if (name === 'password' || name === 'passwd') {\n      prop.type = 'password';\n    }\n\n    if (name.endsWith('File')) {\n      prop.type = 'file';\n    }\n\n    if (prop.type === 'boolean') {\n      prop.type = 'checkbox';\n    }\n\n    if (prop.type === 'string') {\n      prop.type = 'text';\n    }\n\n    prop.required = includes(configurationSchema.required, name);\n  });\n\n  configurationSchema.order = configurationSchema.order || [];\n}\n\nfunction setDefaultValueForCheckboxes(configurationSchema, options = {}) {\n  if (Object.keys(options).length === 0) {\n    const properties = configurationSchema.properties;\n    Object.keys(properties).forEach((property) => {\n      if (!isUndefined(properties[property].default) && properties[property].type === 'checkbox') {\n        options[property] = properties[property].default;\n      }\n    });\n  }\n}\n\nfunction getFields(type = {}, target = { options: {} }) {\n  const configurationSchema = type.configuration_schema;\n  normalizeSchema(configurationSchema);\n  setDefaultValueForCheckboxes(configurationSchema, target.options);\n\n  const isNewTarget = !target.id;\n  const inputs = [\n    {\n      name: 'name',\n      title: 'Name',\n      type: 'text',\n      required: true,\n      initialValue: target.name,\n      contentAfter: React.createElement('hr'),\n      placeholder: `My ${type.name}`,\n      autoFocus: isNewTarget,\n    },\n    ...orderedInputs(configurationSchema.properties, configurationSchema.order, target.options),\n  ];\n\n  return inputs;\n}\n\nfunction updateTargetWithValues(target, values) {\n  target.name = values.name;\n  Object.keys(values).forEach((key) => {\n    if (key !== 'name') {\n      target.options[key] = values[key];\n    }\n  });\n}\n\nfunction toHuman(text) {\n  return text.replace(/_/g, ' ').replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result.substr(reader.result.indexOf(',') + 1));\n    reader.onerror = error => reject(error);\n  });\n}\n\nexport default {\n  getFields,\n  updateTargetWithValues,\n  toHuman,\n  getBase64,\n};\n","import moment from 'moment/moment';\nimport numeral from 'numeral';\nimport _ from 'lodash';\n\nnumeral.options.scalePercentBy100 = false;\n\n// eslint-disable-next-line\nconst urlPattern = /(^|[\\s\\n]|<br\\/?>)((?:https?|ftp):\\/\\/[\\-A-Z0-9+\\u0026\\u2019@#\\/%?=()~_|!:,.;]*[\\-A-Z0-9+\\u0026@#\\/%=~()_|])/gi;\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction createDefaultFormatter(highlightLinks) {\n  if (highlightLinks) {\n    return (value) => {\n      if (_.isString(value)) {\n        value = value.replace(urlPattern, '$1<a href=\"$2\" target=\"_blank\">$2</a>');\n      }\n      return value;\n    };\n  }\n  return value => value;\n}\n\nfunction createDateTimeFormatter(format) {\n  if (_.isString(format) && (format !== '')) {\n    return (value) => {\n      if (value && moment.isMoment(value)) {\n        return value.format(format);\n      }\n      return value;\n    };\n  }\n  return value => value;\n}\n\nfunction createBooleanFormatter(values) {\n  if (_.isArray(values)) {\n    if (values.length >= 2) {\n      // Both `true` and `false` specified\n      return (value) => {\n        if (value === null || value === undefined) {\n          return '';\n        }\n        return '' + values[value ? 1 : 0];\n      };\n    } else if (values.length === 1) {\n      // Only `true`\n      return value => (value ? values[0] : '');\n    }\n  }\n  return (value) => {\n    if (value === null || value === undefined) {\n      return '';\n    }\n    return value ? 'true' : 'false';\n  };\n}\n\nfunction createNumberFormatter(format) {\n  if (_.isString(format) && (format !== '')) {\n    const n = numeral(0); // cache `numeral` instance\n    return value => (value === null || value === '' ? '' : n.set(value).format(format));\n  }\n  return value => value;\n}\n\nexport function createFormatter(column) {\n  switch (column.displayAs) {\n    case 'number': return createNumberFormatter(column.numberFormat);\n    case 'boolean': return createBooleanFormatter(column.booleanValues);\n    case 'datetime': return createDateTimeFormatter(column.dateTimeFormat);\n    default: return createDefaultFormatter(column.allowHTML && column.highlightLinks);\n  }\n}\n\nexport function formatSimpleTemplate(str, data) {\n  if (!_.isString(str)) {\n    return '';\n  }\n  return str.replace(/{{\\s*([^\\s]+?)\\s*}}/g, (match, prop) => {\n    if (hasOwnProperty.call(data, prop) && !_.isUndefined(data[prop])) {\n      return data[prop];\n    }\n    return match;\n  });\n}\n","/* eslint-disable react/no-multi-comp */\n\nimport { isString, extend, each, map, includes, findIndex, find, fromPairs, clone, isEmpty } from 'lodash';\nimport React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Select from 'antd/lib/select';\nimport Table from 'antd/lib/table';\nimport Popover from 'antd/lib/popover';\nimport Button from 'antd/lib/button';\nimport Icon from 'antd/lib/icon';\nimport Tag from 'antd/lib/tag';\nimport Input from 'antd/lib/input';\nimport Radio from 'antd/lib/radio';\nimport Form from 'antd/lib/form';\nimport Tooltip from 'antd/lib/tooltip';\nimport { ParameterValueInput } from '@/components/ParameterValueInput';\nimport { ParameterMappingType } from '@/services/widget';\nimport { clientConfig } from '@/services/auth';\nimport { Query, Parameter } from '@/services/query';\nimport { HelpTrigger } from '@/components/HelpTrigger';\n\nimport './ParameterMappingInput.less';\n\nconst { Option } = Select;\n\nexport const MappingType = {\n  DashboardAddNew: 'dashboard-add-new',\n  DashboardMapToExisting: 'dashboard-map-to-existing',\n  WidgetLevel: 'widget-level',\n  StaticValue: 'static-value',\n};\n\nexport function parameterMappingsToEditableMappings(mappings, parameters, existingParameterNames = []) {\n  return map(mappings, (mapping) => {\n    const result = extend({}, mapping);\n    const alreadyExists = includes(existingParameterNames, mapping.mapTo);\n    result.param = find(parameters, p => p.name === mapping.name);\n    switch (mapping.type) {\n      case ParameterMappingType.DashboardLevel:\n        result.type = alreadyExists ? MappingType.DashboardMapToExisting : MappingType.DashboardAddNew;\n        result.value = null;\n        break;\n      case ParameterMappingType.StaticValue:\n        result.type = MappingType.StaticValue;\n        result.param = result.param.clone();\n        result.param.setValue(result.value);\n        break;\n      case ParameterMappingType.WidgetLevel:\n        result.type = MappingType.WidgetLevel;\n        result.value = null;\n        break;\n      // no default\n    }\n    return result;\n  });\n}\n\nexport function editableMappingsToParameterMappings(mappings) {\n  return fromPairs(map( // convert to map\n    mappings,\n    (mapping) => {\n      const result = extend({}, mapping);\n      switch (mapping.type) {\n        case MappingType.DashboardAddNew:\n          result.type = ParameterMappingType.DashboardLevel;\n          result.value = null;\n          break;\n        case MappingType.DashboardMapToExisting:\n          result.type = ParameterMappingType.DashboardLevel;\n          result.value = null;\n          break;\n        case MappingType.StaticValue:\n          result.type = ParameterMappingType.StaticValue;\n          result.param = mapping.param.clone();\n          result.param.setValue(result.value);\n          result.value = result.param.value;\n          break;\n        case MappingType.WidgetLevel:\n          result.type = ParameterMappingType.WidgetLevel;\n          result.value = null;\n          break;\n        // no default\n      }\n      delete result.param;\n      return [result.name, result];\n    },\n  ));\n}\n\nexport function synchronizeWidgetTitles(sourceMappings, widgets) {\n  const affectedWidgets = [];\n\n  each(sourceMappings, (sourceMapping) => {\n    if (sourceMapping.type === ParameterMappingType.DashboardLevel) {\n      each(widgets, (widget) => {\n        const widgetMappings = widget.options.parameterMappings;\n        each(widgetMappings, (widgetMapping) => {\n          // check if mapped to the same dashboard-level parameter\n          if (\n            (widgetMapping.type === ParameterMappingType.DashboardLevel) &&\n            (widgetMapping.mapTo === sourceMapping.mapTo)\n          ) {\n            // dirty check - update only when needed\n            if (widgetMapping.title !== sourceMapping.title) {\n              widgetMapping.title = sourceMapping.title;\n              affectedWidgets.push(widget);\n            }\n          }\n        });\n      });\n    }\n  });\n\n  return affectedWidgets;\n}\n\nexport class ParameterMappingInput extends React.Component {\n  static propTypes = {\n    mapping: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n    existingParamNames: PropTypes.arrayOf(PropTypes.string),\n    onChange: PropTypes.func,\n    clientConfig: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    Query: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    inputError: PropTypes.string,\n  };\n\n  static defaultProps = {\n    mapping: {},\n    existingParamNames: [],\n    onChange: () => {},\n    clientConfig: null,\n    Query: null,\n    inputError: null,\n  };\n\n  formItemProps = {\n    labelCol: { span: 5 },\n    wrapperCol: { span: 16 },\n    className: 'form-item',\n  };\n\n  updateSourceType = (type) => {\n    let { mapping: { mapTo } } = this.props;\n    const { existingParamNames } = this.props;\n\n    // if mapped name doesn't already exists\n    // default to first select option\n    if (\n      type === MappingType.DashboardMapToExisting &&\n      !includes(existingParamNames, mapTo)\n    ) {\n      mapTo = existingParamNames[0];\n    }\n\n    this.updateParamMapping({ type, mapTo });\n  };\n\n  updateParamMapping = (update) => {\n    const { onChange, mapping } = this.props;\n    const newMapping = extend({}, mapping, update);\n    onChange(newMapping);\n  };\n\n  renderMappingTypeSelector() {\n    const noExisting = isEmpty(this.props.existingParamNames);\n    return (\n      <Radio.Group\n        value={this.props.mapping.type}\n        onChange={e => this.updateSourceType(e.target.value)}\n      >\n        <Radio className=\"radio\" value={MappingType.DashboardAddNew}>\n          New dashboard parameter\n        </Radio>\n        <Radio\n          className=\"radio\"\n          value={MappingType.DashboardMapToExisting}\n          disabled={noExisting}\n        >\n          Existing dashboard parameter{' '}\n          {noExisting ? (\n            <Tooltip title=\"There are no dashboard parameters corresponding to this data type\">\n              <Icon type=\"question-circle\" theme=\"filled\" />\n            </Tooltip>\n          ) : null }\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.WidgetLevel}>\n          Widget parameter\n        </Radio>\n        <Radio className=\"radio\" value={MappingType.StaticValue}>\n          Static value\n        </Radio>\n      </Radio.Group>\n    );\n  }\n\n  renderDashboardAddNew() {\n    const { mapping: { mapTo } } = this.props;\n    return (\n      <Input\n        value={mapTo}\n        onChange={e => this.updateParamMapping({ mapTo: e.target.value })}\n      />\n    );\n  }\n\n  renderDashboardMapToExisting() {\n    const { mapping, existingParamNames } = this.props;\n\n    return (\n      <Select\n        value={mapping.mapTo}\n        onChange={mapTo => this.updateParamMapping({ mapTo })}\n        dropdownMatchSelectWidth={false}\n      >\n        {map(existingParamNames, name => (\n          <Option value={name} key={name}>{ name }</Option>\n        ))}\n      </Select>\n    );\n  }\n\n  renderStaticValue() {\n    const { mapping } = this.props;\n    return (\n      <ParameterValueInput\n        type={mapping.param.type}\n        value={mapping.param.normalizedValue}\n        enumOptions={mapping.param.enumOptions}\n        queryId={mapping.param.queryId}\n        onSelect={value => this.updateParamMapping({ value })}\n        clientConfig={this.props.clientConfig}\n        Query={this.props.Query}\n      />\n    );\n  }\n\n  renderInputBlock() {\n    const { mapping } = this.props;\n    switch (mapping.type) {\n      case MappingType.DashboardAddNew:\n        return [\n          'Key',\n          'Enter a new parameter keyword',\n          this.renderDashboardAddNew(),\n        ];\n      case MappingType.DashboardMapToExisting:\n        return [\n          'Key',\n          'Select from a list of existing parameters',\n          this.renderDashboardMapToExisting(),\n        ];\n      case MappingType.StaticValue:\n        return [\n          'Value',\n          null,\n          this.renderStaticValue(),\n        ];\n      default: return [];\n    }\n  }\n\n  render() {\n    const { inputError } = this.props;\n    const [label, help, input] = this.renderInputBlock();\n\n    return (\n      <Form layout=\"horizontal\">\n        <Form.Item label=\"Source\" {...this.formItemProps}>\n          {this.renderMappingTypeSelector()}\n        </Form.Item>\n        <Form.Item\n          style={{ height: 60, visibility: input ? 'visible' : 'hidden' }}\n          label={label}\n          {...this.formItemProps}\n          validateStatus={inputError ? 'error' : ''}\n          help={inputError || help} // empty space so line doesn't collapse\n        >\n          {input}\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nclass MappingEditor extends React.Component {\n  static propTypes = {\n    mapping: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    existingParamNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n    onChange: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false,\n      mapping: clone(this.props.mapping),\n      inputError: null,\n    };\n  }\n\n  onVisibleChange = (visible) => {\n    if (visible) this.show(); else this.hide();\n  };\n\n  onChange = (mapping) => {\n    let inputError = null;\n\n    if (mapping.type === MappingType.DashboardAddNew) {\n      if (isEmpty(mapping.mapTo)) {\n        inputError = 'Keyword must have a value';\n      } else if (includes(this.props.existingParamNames, mapping.mapTo)) {\n        inputError = 'A parameter with this name already exists';\n      }\n    }\n\n    this.setState({ mapping, inputError });\n  };\n\n  save = () => {\n    this.props.onChange(this.props.mapping, this.state.mapping);\n    this.hide();\n  };\n\n  show = () => {\n    this.setState({\n      visible: true,\n      mapping: clone(this.props.mapping), // restore original state\n    });\n  };\n\n  hide = () => {\n    this.setState({ visible: false });\n  };\n\n  renderContent() {\n    const { mapping, inputError } = this.state;\n\n    return (\n      <div className=\"parameter-mapping-editor\">\n        <header>\n          Edit Source and Value <HelpTrigger type=\"VALUE_SOURCE_OPTIONS\" />\n        </header>\n        <ParameterMappingInput\n          mapping={mapping}\n          existingParamNames={this.props.existingParamNames}\n          onChange={this.onChange}\n          clientConfig={clientConfig}\n          Query={Query}\n          inputError={inputError}\n        />\n        <footer>\n          <Button onClick={this.hide}>Cancel</Button>\n          <Button onClick={this.save} disabled={!!inputError} type=\"primary\">OK</Button>\n        </footer>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Popover\n        placement=\"left\"\n        trigger=\"click\"\n        content={this.renderContent()}\n        visible={this.state.visible}\n        onVisibleChange={this.onVisibleChange}\n      >\n        <Button size=\"small\" type=\"dashed\">\n          <Icon type=\"edit\" />\n        </Button>\n      </Popover>\n    );\n  }\n}\n\nclass TitleEditor extends React.Component {\n  static propTypes = {\n    existingParams: PropTypes.arrayOf(PropTypes.object),\n    mapping: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    onChange: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    existingParams: [],\n  };\n\n  state = {\n    showPopup: false,\n    title: '', // will be set on editing\n  };\n\n  onPopupVisibleChange = (showPopup) => {\n    this.setState({\n      showPopup,\n      title: showPopup ? this.getMappingTitle() : '',\n    });\n  };\n\n  onEditingTitleChange = (event) => {\n    this.setState({ title: event.target.value });\n  };\n\n  getMappingTitle() {\n    let { mapping } = this.props;\n\n    if (isString(mapping.title) && (mapping.title !== '')) {\n      return mapping.title;\n    }\n\n    // if mapped to dashboard, find source param and return it's title\n    if (mapping.type === MappingType.DashboardMapToExisting) {\n      const source = find(this.props.existingParams, { name: mapping.mapTo });\n      if (source) {\n        mapping = source;\n      }\n    }\n\n    return mapping.title || mapping.param.title;\n  }\n\n  save = () => {\n    const newMapping = extend({}, this.props.mapping, { title: this.state.title });\n    this.props.onChange(newMapping);\n    this.hide();\n  };\n\n  hide = () => {\n    this.setState({ showPopup: false });\n  };\n\n  renderPopover() {\n    const { param: { title: paramTitle } } = this.props.mapping;\n\n    return (\n      <div className=\"parameter-mapping-title-editor\">\n        <Input\n          size=\"small\"\n          value={this.state.title}\n          placeholder={paramTitle}\n          onChange={this.onEditingTitleChange}\n          onPressEnter={this.save}\n          maxLength={100}\n          autoFocus\n        />\n        <Button size=\"small\" type=\"dashed\" onClick={this.hide}>\n          <Icon type=\"close\" />\n        </Button>\n        <Button size=\"small\" type=\"dashed\" onClick={this.save}>\n          <Icon type=\"check\" />\n        </Button>\n      </div>\n    );\n  }\n\n  renderEditButton() {\n    const { mapping } = this.props;\n    if (mapping.type === MappingType.StaticValue) {\n      return (\n        <Tooltip placement=\"right\" title=\"Titles for static values don't appear in widgets\">\n          <i className=\"fa fa-eye-slash\" />\n        </Tooltip>\n      );\n    }\n    return (\n      <Popover\n        placement=\"right\"\n        trigger=\"click\"\n        content={this.renderPopover()}\n        visible={this.state.showPopup}\n        onVisibleChange={this.onPopupVisibleChange}\n      >\n        <Button size=\"small\" type=\"dashed\">\n          <Icon type=\"edit\" />\n        </Button>\n      </Popover>\n    );\n  }\n\n  render() {\n    const { mapping } = this.props;\n    // static value are non-editable hence disabled\n    const disabled = mapping.type === MappingType.StaticValue;\n\n    return (\n      <div className={classNames('parameter-mapping-title', { disabled })}>\n        <span className=\"text\">{this.getMappingTitle()}</span>\n        {this.renderEditButton()}\n      </div>\n    );\n  }\n}\n\nexport class ParameterMappingListInput extends React.Component {\n  static propTypes = {\n    mappings: PropTypes.arrayOf(PropTypes.object),\n    existingParams: PropTypes.arrayOf(PropTypes.object),\n    onChange: PropTypes.func,\n  };\n\n  static defaultProps = {\n    mappings: [],\n    existingParams: [],\n    onChange: () => {},\n  };\n\n  static getStringValue(value) {\n    // null\n    if (!value) {\n      return '';\n    }\n\n    // range\n    if (value instanceof Object && 'start' in value && 'end' in value) {\n      return `${value.start} ~ ${value.end}`;\n    }\n\n    // just to be safe, array or object\n    if (typeof value === 'object') {\n      return map(value, v => this.getStringValue(v)).join(', ');\n    }\n\n    // rest\n    return value.toString();\n  }\n\n  static getDefaultValue(mapping, existingParams) {\n    const { type, mapTo, name } = mapping;\n    let { param } = mapping;\n\n    // if mapped to another param, swap 'em\n    if (type === MappingType.DashboardMapToExisting && mapTo !== name) {\n      const mappedTo = find(existingParams, { name: mapTo });\n      if (mappedTo) { // just being safe\n        param = mappedTo;\n      }\n\n    // static type is different since it's fed param.normalizedValue\n    } else if (type === MappingType.StaticValue) {\n      param = param.clone().setValue(mapping.value);\n    }\n\n    const value = Parameter.getValue(param);\n    return this.getStringValue(value);\n  }\n\n  static getSourceTypeLabel({ type, mapTo }) {\n    switch (type) {\n      case MappingType.DashboardAddNew:\n      case MappingType.DashboardMapToExisting:\n        return (\n          <Fragment>\n            Dashboard{' '}\n            <Tag className=\"tag\">{mapTo}</Tag>\n          </Fragment>\n        );\n      case MappingType.WidgetLevel:\n        return 'Widget parameter';\n      case MappingType.StaticValue:\n        return 'Static value';\n      default:\n        return ''; // won't happen (typescript-ftw)\n    }\n  }\n\n  updateParamMapping(oldMapping, newMapping) {\n    const mappings = [...this.props.mappings];\n    const index = findIndex(mappings, oldMapping);\n    if (index >= 0) {\n      // This should be the only possible case, but need to handle `else` too\n      mappings[index] = newMapping;\n    } else {\n      mappings.push(newMapping);\n    }\n    this.props.onChange(mappings);\n  }\n\n  render() {\n    const { existingParams } = this.props; // eslint-disable-line react/prop-types\n    const dataSource = this.props.mappings.map(mapping => ({ mapping }));\n\n    return (\n      <div className=\"parameters-mapping-list\">\n        <Table\n          dataSource={dataSource}\n          size=\"middle\"\n          pagination={false}\n          rowKey={(record, idx) => `row${idx}`}\n        >\n          <Table.Column\n            title=\"Title\"\n            dataIndex=\"mapping\"\n            key=\"title\"\n            render={mapping => (\n              <TitleEditor\n                existingParams={existingParams}\n                mapping={mapping}\n                onChange={newMapping => this.updateParamMapping(mapping, newMapping)}\n              />\n            )}\n          />\n          <Table.Column\n            title=\"Keyword\"\n            dataIndex=\"mapping\"\n            key=\"keyword\"\n            className=\"keyword\"\n            render={mapping => <code>{`{{ ${mapping.name} }}`}</code>}\n          />\n          <Table.Column\n            title=\"Default Value\"\n            dataIndex=\"mapping\"\n            key=\"value\"\n            render={mapping => (\n              this.constructor.getDefaultValue(mapping, this.props.existingParams)\n            )}\n          />\n          <Table.Column\n            title=\"Value Source\"\n            dataIndex=\"mapping\"\n            key=\"source\"\n            render={(mapping) => {\n              const existingParamsNames = existingParams\n                .filter(({ type }) => type === mapping.param.type) // exclude mismatching param types\n                .map(({ name }) => name); // keep names only\n\n              return (\n                <Fragment>\n                  {this.constructor.getSourceTypeLabel(mapping)}{' '}\n                  <MappingEditor\n                    mapping={mapping}\n                    existingParamNames={existingParamsNames}\n                    onChange={(oldMapping, newMapping) => this.updateParamMapping(oldMapping, newMapping)}\n                  />\n                </Fragment>\n              );\n            }}\n          />\n        </Table>\n      </div>\n    );\n  }\n}\n","export default class PromiseRejectionError extends Error {\n  constructor(rejection) {\n    let message;\n    if (rejection.status !== undefined) {\n      if (rejection.status === 404) {\n        message = \"It seems like the page you're looking for cannot be found.\";\n      } else if (rejection.status === 403 || rejection.status === 401) {\n        message = 'It seems like you dont have permission to see this page.';\n      }\n    }\n\n    if (message === undefined) {\n      message = 'It seems like we encountered an error. Try refreshing this page or contact your administrator.';\n    }\n\n    super(message);\n    this.rejection = rejection;\n  }\n}\n","import moment from 'moment';\nimport { each, pick, extend, isObject, truncate, keys, difference, filter, map } from 'lodash';\nimport { registeredVisualizations } from '@/visualizations';\n\nexport let Widget = null; // eslint-disable-line import/no-mutable-exports\n\nfunction calculatePositionOptions(dashboardGridOptions, widget) {\n  widget.width = 1; // Backward compatibility, user on back-end\n\n  const visualizationOptions = {\n    autoHeight: false,\n    sizeX: Math.round(dashboardGridOptions.columns / 2),\n    sizeY: dashboardGridOptions.defaultSizeY,\n    minSizeX: dashboardGridOptions.minSizeX,\n    maxSizeX: dashboardGridOptions.maxSizeX,\n    minSizeY: dashboardGridOptions.minSizeY,\n    maxSizeY: dashboardGridOptions.maxSizeY,\n  };\n\n  const config = widget.visualization ? registeredVisualizations[widget.visualization.type] : null;\n  if (isObject(config)) {\n    if (Object.prototype.hasOwnProperty.call(config, 'autoHeight')) {\n      visualizationOptions.autoHeight = config.autoHeight;\n    }\n\n    // Width constraints\n    const minColumns = parseInt(config.minColumns, 10);\n    if (isFinite(minColumns) && minColumns >= 0) {\n      visualizationOptions.minSizeX = minColumns;\n    }\n    const maxColumns = parseInt(config.maxColumns, 10);\n    if (isFinite(maxColumns) && maxColumns >= 0) {\n      visualizationOptions.maxSizeX = Math.min(maxColumns, dashboardGridOptions.columns);\n    }\n\n    // Height constraints\n    // `minRows` is preferred, but it should be kept for backward compatibility\n    const height = parseInt(config.height, 10);\n    if (isFinite(height)) {\n      visualizationOptions.minSizeY = Math.ceil(height / dashboardGridOptions.rowHeight);\n    }\n    const minRows = parseInt(config.minRows, 10);\n    if (isFinite(minRows)) {\n      visualizationOptions.minSizeY = minRows;\n    }\n    const maxRows = parseInt(config.maxRows, 10);\n    if (isFinite(maxRows) && maxRows >= 0) {\n      visualizationOptions.maxSizeY = maxRows;\n    }\n\n    // Default dimensions\n    const defaultWidth = parseInt(config.defaultColumns, 10);\n    if (isFinite(defaultWidth) && defaultWidth > 0) {\n      visualizationOptions.sizeX = defaultWidth;\n    }\n    const defaultHeight = parseInt(config.defaultRows, 10);\n    if (isFinite(defaultHeight) && defaultHeight > 0) {\n      visualizationOptions.sizeY = defaultHeight;\n    }\n  }\n\n  return visualizationOptions;\n}\n\nexport const ParameterMappingType = {\n  DashboardLevel: 'dashboard-level',\n  WidgetLevel: 'widget-level',\n  StaticValue: 'static-value',\n};\n\nfunction WidgetFactory($http, $location, Query, dashboardGridOptions) {\n  class WidgetService {\n    static MappingType = ParameterMappingType;\n\n    constructor(data) {\n      // Copy properties\n      each(data, (v, k) => {\n        this[k] = v;\n      });\n\n      const visualizationOptions = calculatePositionOptions(dashboardGridOptions, this);\n\n      this.options = this.options || {};\n      this.options.position = extend(\n        {},\n        visualizationOptions,\n        pick(this.options.position, ['col', 'row', 'sizeX', 'sizeY', 'autoHeight']),\n      );\n\n      if (this.options.position.sizeY < 0) {\n        this.options.position.autoHeight = true;\n      }\n\n      this.updateOriginalPosition();\n    }\n\n    updateOriginalPosition() {\n      // Save original position (create a shallow copy)\n      this.$originalPosition = extend({}, this.options.position);\n    }\n\n    getQuery() {\n      if (!this.query && this.visualization) {\n        this.query = new Query(this.visualization.query);\n      }\n\n      return this.query;\n    }\n\n    getQueryResult() {\n      return this.data;\n    }\n\n    getName() {\n      if (this.visualization) {\n        return `${this.visualization.query.name} (${this.visualization.name})`;\n      }\n      return truncate(this.text, 20);\n    }\n\n    load(force, maxAge) {\n      if (!this.visualization) {\n        return undefined;\n      }\n\n      // Both `this.data` and `this.queryResult` are query result objects;\n      // `this.data` is last loaded query result;\n      // `this.queryResult` is currently loading query result;\n      // while widget is refreshing, `this.data` !== `this.queryResult`\n\n      if (force || (this.queryResult === undefined)) {\n        this.loading = true;\n        this.refreshStartedAt = moment();\n\n        if (maxAge === undefined || force) {\n          maxAge = force ? 0 : undefined;\n        }\n        this.queryResult = this.getQuery().getQueryResult(maxAge);\n\n        this.queryResult.toPromise()\n          .then((result) => {\n            this.loading = false;\n            this.data = result;\n          })\n          .catch((error) => {\n            this.loading = false;\n            this.data = error;\n          });\n      }\n\n      return this.queryResult.toPromise();\n    }\n\n    save() {\n      const data = pick(this, 'options', 'text', 'id', 'width', 'dashboard_id', 'visualization_id');\n\n      let url = 'api/widgets';\n      if (this.id) {\n        url = `${url}/${this.id}`;\n      }\n\n      return $http.post(url, data).then((response) => {\n        each(response.data, (v, k) => {\n          this[k] = v;\n        });\n\n        this.updateOriginalPosition();\n\n        return this;\n      });\n    }\n\n    delete() {\n      const url = `api/widgets/${this.id}`;\n      return $http.delete(url);\n    }\n\n    isStaticParam(param) {\n      const mappings = this.getParameterMappings();\n      const mappingType = mappings[param.name].type;\n      return mappingType === WidgetService.MappingType.StaticValue;\n    }\n\n    getParametersDefs() {\n      const mappings = this.getParameterMappings();\n      // textboxes does not have query\n      const params = this.getQuery() ? this.getQuery().getParametersDefs() : [];\n\n      const queryParams = $location.search();\n\n      const localTypes = [\n        WidgetService.MappingType.WidgetLevel,\n        WidgetService.MappingType.StaticValue,\n      ];\n      return map(\n        filter(params, param => localTypes.indexOf(mappings[param.name].type) >= 0),\n        (param) => {\n          const mapping = mappings[param.name];\n          const result = param.clone();\n          result.title = mapping.title || param.title;\n          result.locals = [param];\n          result.urlPrefix = `p_w${this.id}_`;\n          if (mapping.type === WidgetService.MappingType.StaticValue) {\n            result.setValue(mapping.value);\n          } else {\n            result.fromUrlParams(queryParams);\n          }\n          return result;\n        },\n      );\n    }\n\n    getParameterMappings() {\n      if (!isObject(this.options.parameterMappings)) {\n        this.options.parameterMappings = {};\n      }\n\n      const existingParams = {};\n      // textboxes does not have query\n      const params = this.getQuery() ? this.getQuery().getParametersDefs() : [];\n      each(params, (param) => {\n        existingParams[param.name] = true;\n        if (!isObject(this.options.parameterMappings[param.name])) {\n          // \"migration\" for old dashboards: parameters with `global` flag\n          // should be mapped to a dashboard-level parameter with the same name\n          this.options.parameterMappings[param.name] = {\n            name: param.name,\n            type: param.global ? WidgetService.MappingType.DashboardLevel : WidgetService.MappingType.WidgetLevel,\n            mapTo: param.name, // map to param with the same name\n            value: null, // for StaticValue\n            title: '', // Use parameter's title\n          };\n        }\n      });\n\n      // Remove mappings for parameters that do not exists anymore\n      const removedParams = difference(\n        keys(this.options.parameterMappings),\n        keys(existingParams),\n      );\n      each(removedParams, (name) => {\n        delete this.options.parameterMappings[name];\n      });\n\n      return this.options.parameterMappings;\n    }\n  }\n\n  return WidgetService;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Widget', WidgetFactory);\n\n  ngModule.run(($injector) => {\n    Widget = $injector.get('Widget');\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\n// PreviewCard\n\nexport function PreviewCard({ imageUrl, roundedImage, title, body, children, className, ...props }) {\n  return (\n    <div {...props} className={className + ' w-100 d-flex align-items-center'}>\n      <img\n        src={imageUrl}\n        width=\"32\"\n        height=\"32\"\n        className={classNames({ 'profile__image--settings': roundedImage }, 'm-r-5')}\n        alt=\"Logo/Avatar\"\n      />\n      <div className=\"flex-fill\">\n        <div>{title}</div>\n        {body && <div className=\"text-muted\">{body}</div>}\n      </div>\n      {children}\n    </div>\n  );\n}\n\nPreviewCard.propTypes = {\n  imageUrl: PropTypes.string.isRequired,\n  title: PropTypes.node.isRequired,\n  body: PropTypes.node,\n  roundedImage: PropTypes.bool,\n  className: PropTypes.string,\n  children: PropTypes.node,\n};\n\nPreviewCard.defaultProps = {\n  body: null,\n  roundedImage: true,\n  className: '',\n  children: null,\n};\n\n// UserPreviewCard\n\nexport function UserPreviewCard({ user, withLink, children, ...props }) {\n  const title = withLink ? <a href={'users/' + user.id}>{user.name}</a> : user.name;\n  return (\n    <PreviewCard {...props} imageUrl={user.profile_image_url} title={title} body={user.email}>\n      {children}\n    </PreviewCard>\n  );\n}\n\nUserPreviewCard.propTypes = {\n  user: PropTypes.shape({\n    profile_image_url: PropTypes.string.isRequired,\n    name: PropTypes.string.isRequired,\n    email: PropTypes.string.isRequired,\n  }).isRequired,\n  withLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nUserPreviewCard.defaultProps = {\n  withLink: false,\n  children: null,\n};\n\n// DataSourcePreviewCard\n\nexport function DataSourcePreviewCard({ dataSource, withLink, children, ...props }) {\n  const imageUrl = `/static/images/db-logos/${dataSource.type}.png`;\n  const title = withLink ? <a href={'data_sources/' + dataSource.id}>{dataSource.name}</a> : dataSource.name;\n  return <PreviewCard {...props} imageUrl={imageUrl} title={title}>{children}</PreviewCard>;\n}\n\nDataSourcePreviewCard.propTypes = {\n  dataSource: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    type: PropTypes.string.isRequired,\n  }).isRequired,\n  withLink: PropTypes.bool,\n  children: PropTypes.node,\n};\n\nDataSourcePreviewCard.defaultProps = {\n  withLink: false,\n  children: null,\n};\n","import { map, trim, extend } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Tooltip from 'antd/lib/tooltip';\nimport EditTagsDialog from './EditTagsDialog';\n\nexport class TagsControl extends React.Component {\n  static propTypes = {\n    tags: PropTypes.arrayOf(PropTypes.string),\n    canEdit: PropTypes.bool,\n    getAvailableTags: PropTypes.func,\n    onEdit: PropTypes.func,\n    className: PropTypes.string,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    tags: [],\n    canEdit: false,\n    getAvailableTags: () => Promise.resolve([]),\n    onEdit: () => {},\n    className: '',\n    children: null,\n  };\n\n  editTags = (tags, getAvailableTags) => {\n    EditTagsDialog.showModal({ tags, getAvailableTags })\n      .result.then(this.props.onEdit);\n  };\n\n  renderEditButton() {\n    const tags = map(this.props.tags, trim);\n    return (\n      <a className=\"label label-tag\" role=\"none\" onClick={() => this.editTags(tags, this.props.getAvailableTags)}>\n        {(tags.length === 0) && <React.Fragment><i className=\"zmdi zmdi-plus m-r-5\" />Add tag</React.Fragment>}\n        {(tags.length > 0) && <i className=\"zmdi zmdi-edit\" />}\n      </a>\n    );\n  }\n\n  render() {\n    return (\n      <div className={'tags-control ' + this.props.className}>\n        {this.props.children}\n        {map(this.props.tags, tag => (\n          <span className=\"label label-tag\" key={tag} title={tag}>{tag}</span>\n        ))}\n        {this.props.canEdit && this.renderEditButton()}\n      </div>\n    );\n  }\n}\n\nfunction modelTagsControl({ archivedTooltip }) {\n  // See comment for `propTypes`/`defaultProps`\n  // eslint-disable-next-line react/prop-types\n  function ModelTagsControl({ isDraft, isArchived, ...props }) {\n    return (\n      <TagsControl {...props}>\n        {!isArchived && isDraft && (\n          <span className=\"label label-tag-unpublished\">Unpublished</span>\n        )}\n        {isArchived && (\n          <Tooltip placement=\"right\" title={archivedTooltip}>\n            <span className=\"label label-tag-archived\">Archived</span>\n          </Tooltip>\n        )}\n      </TagsControl>\n    );\n  }\n\n  // ANGULAR_REMOVE_ME `extend` needed just for `react2angular`, so remove it when `react2angular` no longer needed\n  ModelTagsControl.propTypes = extend({\n    isDraft: PropTypes.bool,\n    isArchived: PropTypes.bool,\n  }, TagsControl.propTypes);\n\n  ModelTagsControl.defaultProps = extend({\n    isDraft: false,\n    isArchived: false,\n  }, TagsControl.defaultProps);\n\n  return ModelTagsControl;\n}\n\nexport const QueryTagsControl = modelTagsControl({\n  archivedTooltip: 'This query is archived and can\\'t be used in dashboards, or appear in search results.',\n});\n\nexport const DashboardTagsControl = modelTagsControl({\n  archivedTooltip: 'This dashboard is archived and won\\'t be listed in dashboards nor search results.',\n});\n\nexport default function init(ngModule) {\n  ngModule.component('queryTagsControl', react2angular(QueryTagsControl));\n  ngModule.component('dashboardTagsControl', react2angular(DashboardTagsControl));\n}\n\ninit.init = true;\n","import { values } from 'lodash';\n\n// The following colors will be used if you pick \"Automatic\" color\nexport const BaseColors = {\n  Blue: '#356AFF',\n  Red: '#E92828',\n  Green: '#3BD973',\n  Purple: '#604FE9',\n  Cyan: '#50F5ED',\n  Orange: '#FB8D3D',\n  'Light Blue': '#799CFF',\n  Lilac: '#B554FF',\n  'Light Green': '#8CFFB4',\n  Brown: '#A55F2A',\n  Black: '#000000',\n  Gray: '#494949',\n  Pink: '#FF7DE3',\n  'Dark Blue': '#002FB4',\n};\n\n// Additional colors for the user to choose from\nexport const AdditionalColors = {\n  'Indian Red': '#981717',\n  'Green 2': '#17BF51',\n  'Green 3': '#049235',\n  DarkTurquoise: '#00B6EB',\n  'Dark Violet': '#A58AFF',\n  'Pink 2': '#C63FA9',\n};\n\nexport const ColorPaletteArray = values(BaseColors);\n\nconst ColorPalette = {\n  ...BaseColors,\n  ...AdditionalColors,\n};\n\nexport default ColorPalette;\n","export const IMG_ROOT = '/static/images/destinations';\n\nexport let Destination = null; // eslint-disable-line import/no-mutable-exports\n\nfunction DestinationService($resource) {\n  const actions = {\n    get: { method: 'GET', cache: false, isArray: false },\n    types: {\n      method: 'GET',\n      cache: false,\n      isArray: true,\n      url: 'api/destinations/types',\n    },\n    query: { method: 'GET', cache: false, isArray: true },\n  };\n\n  return $resource('api/destinations/:id', { id: '@id' }, actions);\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Destination', DestinationService);\n\n  ngModule.run(($injector) => {\n    Destination = $injector.get('Destination');\n  });\n}\n\ninit.init = true;\n","import {\n  isArray, isNumber, isString, isUndefined, includes, min, max, has, find,\n  each, values, sortBy, identity, filter, map, extend, reduce, pick, flatten, uniq,\n} from 'lodash';\nimport moment from 'moment';\nimport d3 from 'd3';\nimport plotlyCleanNumber from 'plotly.js/src/lib/clean_number';\nimport { createFormatter, formatSimpleTemplate } from '@/lib/value-format';\nimport { ColorPaletteArray } from '@/visualizations/ColorPalette';\n\nfunction cleanNumber(value) {\n  return isUndefined(value) ? value : (plotlyCleanNumber(value) || 0.0);\n}\n\nfunction defaultFormatSeriesText(item) {\n  let result = item['@@y'];\n  if (item['@@yError'] !== undefined) {\n    result = `${result} \\u00B1 ${item['@@yError']}`;\n  }\n  if (item['@@yPercent'] !== undefined) {\n    result = `${item['@@yPercent']} (${result})`;\n  }\n  if (item['@@size'] !== undefined) {\n    result = `${result}: ${item['@@size']}`;\n  }\n  return result;\n}\n\nfunction defaultFormatSeriesTextForPie(item) {\n  return item['@@yPercent'] + ' (' + item['@@y'] + ')';\n}\n\nfunction getFontColor(bgcolor) {\n  let result = '#333333';\n  if (isString(bgcolor)) {\n    let matches = /#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})/i.exec(bgcolor);\n    let r;\n    let g;\n    let b;\n    if (matches) {\n      r = parseInt(matches[1], 16);\n      g = parseInt(matches[2], 16);\n      b = parseInt(matches[3], 16);\n    } else {\n      matches = /#?([0-9a-f])([0-9a-f])([0-9a-f])/i.exec(bgcolor);\n      if (matches) {\n        r = parseInt(matches[1] + matches[1], 16);\n        g = parseInt(matches[2] + matches[2], 16);\n        b = parseInt(matches[3] + matches[3], 16);\n      } else {\n        return result;\n      }\n    }\n\n    const lightness = r * 0.299 + g * 0.587 + b * 0.114;\n    if (lightness < 170) {\n      result = '#ffffff';\n    }\n  }\n\n  return result;\n}\n\nfunction getPieHoverInfoPattern(options) {\n  const hasX = /{{\\s*@@x\\s*}}/.test(options.textFormat);\n  let result = 'text';\n  if (!hasX) result += '+label';\n  return result;\n}\n\nfunction getHoverInfoPattern(options) {\n  const hasX = /{{\\s*@@x\\s*}}/.test(options.textFormat);\n  const hasName = /{{\\s*@@name\\s*}}/.test(options.textFormat);\n  let result = 'text';\n  if (!hasX) result += '+x';\n  if (!hasName) result += '+name';\n  return result;\n}\n\nexport function normalizeValue(value, axisType, dateTimeFormat = 'YYYY-MM-DD HH:mm:ss') {\n  if (axisType === 'datetime' && moment.utc(value).isValid()) {\n    value = moment.utc(value);\n  }\n  if (moment.isMoment(value)) {\n    return value.format(dateTimeFormat);\n  }\n  return value;\n}\n\nfunction naturalSort($a, $b) {\n  if ($a === $b) {\n    return 0;\n  } else if ($a < $b) {\n    return -1;\n  }\n  return 1;\n}\n\nfunction calculateAxisRange(seriesList, minValue, maxValue) {\n  if (!isNumber(minValue)) {\n    minValue = Math.min(0, min(map(seriesList, series => min(series.y))));\n  }\n  if (!isNumber(maxValue)) {\n    maxValue = max(map(seriesList, series => max(series.y)));\n  }\n  return [minValue, maxValue];\n}\n\nfunction getScaleType(scale) {\n  if (scale === 'datetime') {\n    return 'date';\n  }\n  if (scale === 'logarithmic') {\n    return 'log';\n  }\n  return scale;\n}\n\nfunction getSeriesColor(seriesOptions, seriesIndex) {\n  return seriesOptions.color || ColorPaletteArray[seriesIndex % ColorPaletteArray.length];\n}\n\nfunction getTitle(axis) {\n  if (!isUndefined(axis) && !isUndefined(axis.title)) {\n    return axis.title.text;\n  }\n  return null;\n}\n\nfunction setType(series, type, options) {\n  switch (type) {\n    case 'column':\n      series.type = 'bar';\n      if (options.showDataLabels) {\n        series.textposition = 'inside';\n      }\n      break;\n    case 'line':\n      series.mode = 'lines' + (options.showDataLabels ? '+text' : '');\n      break;\n    case 'area':\n      series.mode = 'lines' + (options.showDataLabels ? '+text' : '');\n      series.fill = options.series.stacking === null ? 'tozeroy' : 'tonexty';\n      break;\n    case 'scatter':\n      series.type = 'scatter';\n      series.mode = 'markers' + (options.showDataLabels ? '+text' : '');\n      break;\n    case 'bubble':\n      series.mode = 'markers';\n      break;\n    case 'box':\n      series.type = 'box';\n      series.mode = 'markers';\n      break;\n    default:\n      break;\n  }\n}\n\nfunction calculateDimensions(series, options) {\n  const rows = series.length > 2 ? 2 : 1;\n  const cellsInRow = Math.ceil(series.length / rows);\n  const cellWidth = 1 / cellsInRow;\n  const cellHeight = 1 / rows;\n  const xPadding = 0.02;\n  const yPadding = 0.1;\n\n  const hasX = includes(values(options.columnMapping), 'x');\n  const hasY2 = !!find(series, (serie) => {\n    const seriesOptions = options.seriesOptions[serie.name] || { type: options.globalSeriesType };\n    return (seriesOptions.yAxis === 1) && (\n      (options.series.stacking === null) || (seriesOptions.type === 'line')\n    );\n  });\n\n  return {\n    rows, cellsInRow, cellWidth, cellHeight, xPadding, yPadding, hasX, hasY2,\n  };\n}\n\nfunction getUnifiedXAxisValues(seriesList, sorted) {\n  const set = new Set();\n  each(seriesList, (series) => {\n    // `Map.forEach` will walk items in insertion order\n    series.sourceData.forEach((item) => {\n      set.add(item.x);\n    });\n  });\n\n  const result = [];\n  // `Set.forEach` will walk items in insertion order\n  set.forEach((item) => {\n    result.push(item);\n  });\n\n  return sorted ? sortBy(result, identity) : result;\n}\n\nfunction preparePieData(seriesList, options) {\n  const {\n    cellWidth, cellHeight, xPadding, yPadding, cellsInRow, hasX,\n  } = calculateDimensions(seriesList, options);\n\n  const formatNumber = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.numberFormat,\n  });\n  const formatPercent = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.percentFormat,\n  });\n  const formatText = options.textFormat === ''\n    ? defaultFormatSeriesTextForPie :\n    item => formatSimpleTemplate(options.textFormat, item);\n\n  const hoverinfo = getPieHoverInfoPattern(options);\n\n  // we will use this to assign colors for values that have not explicitly set color\n  const getDefaultColor = d3.scale.ordinal().domain([]).range(ColorPaletteArray);\n  const valuesColors = {};\n  each(options.valuesOptions, (item, key) => {\n    if (isString(item.color) && (item.color !== '')) {\n      valuesColors[key] = item.color;\n    }\n  });\n\n  return map(seriesList, (serie, index) => {\n    const xPosition = (index % cellsInRow) * cellWidth;\n    const yPosition = Math.floor(index / cellsInRow) * cellHeight;\n\n    const sourceData = new Map();\n    const seriesTotal = reduce(serie.data, (result, row) => {\n      const y = cleanNumber(row.y);\n      return result + Math.abs(y);\n    }, 0);\n    each(serie.data, (row) => {\n      const x = normalizeValue(row.x);\n      const y = cleanNumber(row.y);\n      sourceData.set(x, {\n        x,\n        y,\n        yPercent: y / seriesTotal * 100,\n        raw: extend({}, row.$raw, {\n          // use custom display format - see also `updateSeriesText`\n          '@@x': normalizeValue(row.x, options.xAxis.type, options.dateTimeFormat),\n        }),\n      });\n    });\n\n    return {\n      values: map(serie.data, i => i.y),\n      labels: map(serie.data, row => (hasX ? normalizeValue(row.x) : `Slice ${index}`)),\n      type: 'pie',\n      hole: 0.4,\n      marker: {\n        colors: map(serie.data, row => valuesColors[row.x] || getDefaultColor(row.x)),\n      },\n      hoverinfo,\n      text: [],\n      textinfo: options.showDataLabels ? 'percent' : 'none',\n      textposition: 'inside',\n      textfont: { color: '#ffffff' },\n      name: serie.name,\n      direction: options.direction.type,\n      domain: {\n        x: [xPosition, xPosition + cellWidth - xPadding],\n        y: [yPosition, yPosition + cellHeight - yPadding],\n      },\n      sourceData,\n      formatNumber,\n      formatPercent,\n      formatText,\n    };\n  });\n}\n\nfunction prepareHeatmapData(seriesList, options) {\n  const defaultColorScheme = [\n    [0, '#356aff'],\n    [0.14, '#4a7aff'],\n    [0.28, '#5d87ff'],\n    [0.42, '#7398ff'],\n    [0.56, '#fb8c8c'],\n    [0.71, '#ec6463'],\n    [0.86, '#ec4949'],\n    [1, '#e92827'],\n  ];\n\n  const formatNumber = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.numberFormat,\n  });\n\n  let colorScheme = [];\n\n  if (!options.colorScheme) {\n    colorScheme = defaultColorScheme;\n  } else if (options.colorScheme === 'Custom...') {\n    colorScheme = [[0, options.heatMinColor], [1, options.heatMaxColor]];\n  } else {\n    colorScheme = options.colorScheme;\n  }\n\n  return map(seriesList, (series) => {\n    const plotlySeries = {\n      x: [],\n      y: [],\n      z: [],\n      type: 'heatmap',\n      name: '',\n      colorscale: colorScheme,\n    };\n\n    plotlySeries.x = uniq(map(series.data, 'x'));\n    plotlySeries.y = uniq(map(series.data, 'y'));\n\n    if (options.sortX) {\n      plotlySeries.x.sort(naturalSort);\n    }\n\n    if (options.sortY) {\n      plotlySeries.y.sort(naturalSort);\n    }\n\n    if (options.reverseX) {\n      plotlySeries.x.reverse();\n    }\n\n    if (options.reverseY) {\n      plotlySeries.y.reverse();\n    }\n\n    const zMax = max(map(series.data, 'zVal'));\n\n    // Use text trace instead of default annotation for better performance\n    const dataLabels = {\n      x: [],\n      y: [],\n      mode: 'text',\n      hoverinfo: 'skip',\n      showlegend: false,\n      text: [],\n      textfont: {\n        color: [],\n      },\n    };\n\n    for (let i = 0; i < plotlySeries.y.length; i += 1) {\n      const item = [];\n      for (let j = 0; j < plotlySeries.x.length; j += 1) {\n        const datum = find(\n          series.data,\n          { x: plotlySeries.x[j], y: plotlySeries.y[i] },\n        );\n\n        const zValue = datum ? datum.zVal : 0;\n        item.push(zValue);\n\n        if (isFinite(zMax) && options.showDataLabels) {\n          dataLabels.x.push(plotlySeries.x[j]);\n          dataLabels.y.push(plotlySeries.y[i]);\n          dataLabels.text.push(formatNumber(zValue));\n          if (options.colorScheme && options.colorScheme === 'Custom...') {\n            dataLabels.textfont.color.push('white');\n          } else {\n            dataLabels.textfont.color.push((zValue / zMax) < 0.25 ? 'white' : 'black');\n          }\n        }\n      }\n      plotlySeries.z.push(item);\n    }\n\n    if (isFinite(zMax) && options.showDataLabels) {\n      return [plotlySeries, dataLabels];\n    }\n    return [plotlySeries];\n  });\n}\n\nfunction prepareChartData(seriesList, options) {\n  const sortX = (options.sortX === true) || (options.sortX === undefined);\n\n  const formatNumber = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.numberFormat,\n  });\n  const formatPercent = createFormatter({\n    displayAs: 'number',\n    numberFormat: options.percentFormat,\n  });\n  const formatText = options.textFormat === ''\n    ? defaultFormatSeriesText :\n    item => formatSimpleTemplate(options.textFormat, item);\n\n  const hoverinfo = getHoverInfoPattern(options);\n\n  return map(seriesList, (series, index) => {\n    const seriesOptions = options.seriesOptions[series.name] ||\n      { type: options.globalSeriesType };\n\n    const seriesColor = getSeriesColor(seriesOptions, index);\n\n    // Sort by x - `Map` preserves order of items\n    const data = sortX ? sortBy(series.data, d => normalizeValue(d.x, options.xAxis.type)) : series.data;\n\n    // For bubble/scatter charts `y` may be any (similar to `x`) - numeric is only bubble size;\n    // for other types `y` is always number\n    const cleanYValue = includes(['bubble', 'scatter'], seriesOptions.type) ? normalizeValue : cleanNumber;\n\n    const sourceData = new Map();\n    const xValues = [];\n    const yValues = [];\n    const yErrorValues = [];\n    each(data, (row) => {\n      const x = normalizeValue(row.x, options.xAxis.type); // number/datetime/category\n      const y = cleanYValue(row.y, options.yAxis[0].type); // depends on series type!\n      const yError = cleanNumber(row.yError); // always number\n      const size = cleanNumber(row.size); // always number\n      sourceData.set(x, {\n        x,\n        y,\n        yError,\n        size,\n        yPercent: null, // will be updated later\n        raw: extend({}, row.$raw, {\n          // use custom display format - see also `updateSeriesText`\n          '@@x': normalizeValue(row.x, options.xAxis.type, options.dateTimeFormat),\n        }),\n      });\n      xValues.push(x);\n      yValues.push(y);\n      yErrorValues.push(yError);\n    });\n\n    const plotlySeries = {\n      visible: true,\n      hoverinfo,\n      x: xValues,\n      y: yValues,\n      error_y: {\n        array: yErrorValues,\n        color: seriesColor,\n      },\n      name: seriesOptions.name || series.name,\n      marker: { color: seriesColor },\n      insidetextfont: {\n        color: getFontColor(seriesColor),\n      },\n      sourceData,\n      formatNumber,\n      formatPercent,\n      formatText,\n    };\n\n    if (\n      (seriesOptions.yAxis === 1) &&\n      ((options.series.stacking === null) || (seriesOptions.type === 'line'))\n    ) {\n      plotlySeries.yaxis = 'y2';\n    }\n\n    setType(plotlySeries, seriesOptions.type, options);\n\n    if (seriesOptions.type === 'bubble') {\n      plotlySeries.marker = {\n        color: seriesColor,\n        size: map(data, i => i.size),\n      };\n    } else if (seriesOptions.type === 'box') {\n      plotlySeries.boxpoints = 'outliers';\n      plotlySeries.hoverinfo = false;\n      plotlySeries.marker = {\n        color: seriesColor,\n        size: 3,\n      };\n      if (options.showpoints) {\n        plotlySeries.boxpoints = 'all';\n        plotlySeries.jitter = 0.3;\n        plotlySeries.pointpos = -1.8;\n      }\n    }\n\n    return plotlySeries;\n  });\n}\n\nexport function prepareData(seriesList, options) {\n  if (options.globalSeriesType === 'pie') {\n    return preparePieData(seriesList, options);\n  }\n  if (options.globalSeriesType === 'heatmap') {\n    return flatten(prepareHeatmapData(seriesList, options));\n  }\n  return prepareChartData(seriesList, options);\n}\n\nexport function prepareLayout(element, seriesList, options, data) {\n  const {\n    cellsInRow, cellWidth, cellHeight, xPadding, hasY2,\n  } = calculateDimensions(seriesList, options);\n\n  const result = {\n    margin: {\n      l: 10,\n      r: 10,\n      b: 10,\n      t: 25,\n      pad: 4,\n    },\n    width: Math.floor(element.offsetWidth),\n    height: Math.floor(element.offsetHeight),\n    autosize: true,\n    showlegend: has(options, 'legend') ? options.legend.enabled : true,\n  };\n\n  if (options.globalSeriesType === 'pie') {\n    const hasName = /{{\\s*@@name\\s*}}/.test(options.textFormat);\n\n    if (hasName) {\n      result.annotations = [];\n    } else {\n      result.annotations = filter(map(seriesList, (series, index) => {\n        const xPosition = (index % cellsInRow) * cellWidth;\n        const yPosition = Math.floor(index / cellsInRow) * cellHeight;\n        return {\n          x: xPosition + ((cellWidth - xPadding) / 2),\n          y: yPosition + cellHeight - 0.015,\n          xanchor: 'center',\n          yanchor: 'top',\n          text: (options.seriesOptions[series.name] || {}).name || series.name,\n          showarrow: false,\n        };\n      }));\n    }\n  } else {\n    if (options.globalSeriesType === 'box') {\n      result.boxmode = 'group';\n      result.boxgroupgap = 0.50;\n    }\n\n    result.xaxis = {\n      title: getTitle(options.xAxis),\n      type: getScaleType(options.xAxis.type),\n      automargin: true,\n    };\n\n    if (options.sortX && result.xaxis.type === 'category') {\n      if (options.reverseX) {\n        result.xaxis.categoryorder = 'category descending';\n      } else {\n        result.xaxis.categoryorder = 'category ascending';\n      }\n    }\n\n    if (!isUndefined(options.xAxis.labels)) {\n      result.xaxis.showticklabels = options.xAxis.labels.enabled;\n    }\n\n    if (isArray(options.yAxis)) {\n      result.yaxis = {\n        title: getTitle(options.yAxis[0]),\n        type: getScaleType(options.yAxis[0].type),\n        automargin: true,\n      };\n\n      if (isNumber(options.yAxis[0].rangeMin) || isNumber(options.yAxis[0].rangeMax)) {\n        result.yaxis.range = calculateAxisRange(\n          data.filter(s => !s.yaxis !== 'y2'),\n          options.yAxis[0].rangeMin,\n          options.yAxis[0].rangeMax,\n        );\n      }\n    }\n\n    if (hasY2 && !isUndefined(options.yAxis)) {\n      result.yaxis2 = {\n        title: getTitle(options.yAxis[1]),\n        type: getScaleType(options.yAxis[1].type),\n        overlaying: 'y',\n        side: 'right',\n        automargin: true,\n      };\n\n      if (isNumber(options.yAxis[1].rangeMin) || isNumber(options.yAxis[1].rangeMax)) {\n        result.yaxis2.range = calculateAxisRange(\n          data.filter(s => s.yaxis === 'y2'),\n          options.yAxis[1].rangeMin,\n          options.yAxis[1].rangeMax,\n        );\n      }\n    }\n\n    if (options.series.stacking) {\n      result.barmode = 'relative';\n    }\n  }\n\n  return result;\n}\n\nfunction updateSeriesText(seriesList, options) {\n  each(seriesList, (series) => {\n    const seriesOptions = options.seriesOptions[series.name] ||\n      { type: options.globalSeriesType };\n\n    series.text = [];\n    series.hover = [];\n    const xValues = (options.globalSeriesType === 'pie') ? series.labels : series.x;\n    xValues.forEach((x) => {\n      const text = {\n        '@@name': series.name,\n        // '@@x' is already in `item.$raw`\n      };\n      const item = series.sourceData.get(x);\n      if (item) {\n        text['@@y'] = includes(['bubble', 'scatter'], seriesOptions.type) ? item.y : series.formatNumber(item.y);\n        if (item.yError !== undefined) {\n          text['@@yError'] = series.formatNumber(item.yError);\n        }\n        if (item.size !== undefined) {\n          text['@@size'] = series.formatNumber(item.size);\n        }\n\n        if (options.series.percentValues || (options.globalSeriesType === 'pie')) {\n          text['@@yPercent'] = series.formatPercent(Math.abs(item.yPercent));\n        }\n\n        extend(text, item.raw);\n      }\n\n      series.text.push(series.formatText(text));\n    });\n  });\n  return seriesList;\n}\n\nfunction updatePercentValues(seriesList, options) {\n  if (options.series.percentValues && (seriesList.length > 0)) {\n    // Some series may not have corresponding x-values;\n    // do calculations for each x only for series that do have that x\n    const sumOfCorrespondingPoints = new Map();\n    each(seriesList, (series) => {\n      series.sourceData.forEach((item) => {\n        const sum = sumOfCorrespondingPoints.get(item.x) || 0;\n        sumOfCorrespondingPoints.set(item.x, sum + Math.abs(item.y));\n      });\n    });\n\n    each(seriesList, (series) => {\n      const yValues = [];\n\n      series.sourceData.forEach((item) => {\n        const sum = sumOfCorrespondingPoints.get(item.x);\n        item.yPercent = Math.sign(item.y) * Math.abs(item.y) / sum * 100;\n        yValues.push(item.yPercent);\n      });\n\n      series.y = yValues;\n    });\n  }\n\n  return seriesList;\n}\n\nfunction updateUnifiedXAxisValues(seriesList, options, sorted, defaultY) {\n  const unifiedX = getUnifiedXAxisValues(seriesList, sorted);\n  defaultY = defaultY === undefined ? null : defaultY;\n  each(seriesList, (series) => {\n    series.x = [];\n    series.y = [];\n    series.error_y.array = [];\n    each(unifiedX, (x) => {\n      series.x.push(x);\n      const item = series.sourceData.get(x);\n      if (item) {\n        series.y.push(options.series.percentValues ? item.yPercent : item.y);\n        series.error_y.array.push(item.yError);\n      } else {\n        series.y.push(defaultY);\n        series.error_y.array.push(null);\n      }\n    });\n  });\n}\n\nexport function updateData(seriesList, options) {\n  if (seriesList.length === 0) {\n    return seriesList;\n  }\n  if (options.globalSeriesType === 'pie') {\n    updateSeriesText(seriesList, options);\n    return seriesList;\n  }\n  if (options.globalSeriesType === 'heatmap') {\n    return seriesList;\n  }\n\n  // Use only visible series\n  seriesList = filter(seriesList, s => s.visible === true);\n\n  // Apply \"percent values\" modification\n  updatePercentValues(seriesList, options);\n\n  const sortX = (options.sortX === true) || (options.sortX === undefined);\n\n  if (options.series.stacking) {\n    if (['line', 'area'].indexOf(options.globalSeriesType) >= 0) {\n      updateUnifiedXAxisValues(seriesList, options, sortX, 0);\n\n      // Calculate cumulative value for each x tick\n      let prevSeries = null;\n      each(seriesList, (series) => {\n        if (prevSeries) {\n          series.y = map(series.y, (y, i) => prevSeries.y[i] + y);\n        }\n        prevSeries = series;\n      });\n    }\n  } else {\n    const useUnifiedXAxis = sortX && (options.xAxis.type === 'category') && (options.globalSeriesType !== 'box');\n    if (useUnifiedXAxis) {\n      updateUnifiedXAxisValues(seriesList, options, sortX);\n    }\n  }\n\n  // Finally - update text labels\n  updateSeriesText(seriesList, options);\n}\n\nfunction fixLegendContainer(plotlyElement) {\n  const legend = plotlyElement.querySelector('.legend');\n  if (legend) {\n    let node = legend.parentNode;\n    while (node) {\n      if (node.tagName.toLowerCase() === 'svg') {\n        node.style.overflow = 'visible';\n        break;\n      }\n      node = node.parentNode;\n    }\n  }\n}\n\nexport function updateLayout(plotlyElement, layout, updatePlot) {\n  // update layout size to plot container\n  layout.width = Math.floor(plotlyElement.offsetWidth);\n  layout.height = Math.floor(plotlyElement.offsetHeight);\n\n  const transformName = find([\n    'transform',\n    'webkitTransform',\n    'mozTransform',\n    'msTransform',\n    'oTransform',\n  ], prop => has(plotlyElement.style, prop));\n\n  if (layout.width <= 600) {\n    // change legend orientation to horizontal; plotly has a bug with this\n    // legend alignment - it does not preserve enough space under the plot;\n    // so we'll hack this: update plot (it will re-render legend), compute\n    // legend height, reduce plot size by legend height (but not less than\n    // half of plot container's height - legend will have max height equal to\n    // plot height), re-render plot again and offset legend to the space under\n    // the plot.\n    layout.legend = {\n      orientation: 'h',\n      // locate legend inside of plot area - otherwise plotly will preserve\n      // some amount of space under the plot; also this will limit legend height\n      // to plot's height\n      y: 0,\n      x: 0,\n      xanchor: 'left',\n      yanchor: 'bottom',\n    };\n\n    // set `overflow: visible` to svg containing legend because later we will\n    // position legend outside of it\n    fixLegendContainer(plotlyElement);\n\n    updatePlot(plotlyElement, pick(layout, ['width', 'height', 'legend'])).then(() => {\n      const legend = plotlyElement.querySelector('.legend'); // eslint-disable-line no-shadow\n      if (legend) {\n        // compute real height of legend - items may be split into few columnns,\n        // also scrollbar may be shown\n        const bounds = reduce(legend.querySelectorAll('.traces'), (result, node) => {\n          const b = node.getBoundingClientRect();\n          result = result || b;\n          return {\n            top: Math.min(result.top, b.top),\n            bottom: Math.max(result.bottom, b.bottom),\n          };\n        }, null);\n        // here we have two values:\n        // 1. height of plot container excluding height of legend items;\n        //    it may be any value between 0 and plot container's height;\n        // 2. half of plot containers height. Legend cannot be larger than\n        //    plot; if legend is too large, plotly will reduce it's height and\n        //    show a scrollbar; in this case, height of plot === height of legend,\n        //    so we can split container's height half by half between them.\n        layout.height = Math.floor(Math.max(\n          layout.height / 2,\n          layout.height - (bounds.bottom - bounds.top),\n        ));\n        // offset the legend\n        legend.style[transformName] = 'translate(0, ' + layout.height + 'px)';\n        updatePlot(plotlyElement, pick(layout, ['height']));\n      }\n    });\n  } else {\n    layout.legend = {\n      orientation: 'v',\n      // vertical legend will be rendered properly, so just place it to the right\n      // side of plot\n      y: 1,\n      x: 1,\n      xanchor: 'left',\n      yanchor: 'top',\n    };\n\n    const legend = plotlyElement.querySelector('.legend');\n    if (legend) {\n      legend.style[transformName] = null;\n    }\n\n    updatePlot(plotlyElement, pick(layout, ['width', 'height', 'legend']));\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Form from 'antd/lib/form';\nimport Input from 'antd/lib/input';\nimport InputNumber from 'antd/lib/input-number';\nimport Checkbox from 'antd/lib/checkbox';\nimport Button from 'antd/lib/button';\nimport Upload from 'antd/lib/upload';\nimport Icon from 'antd/lib/icon';\nimport { includes, isFunction } from 'lodash';\nimport Select from 'antd/lib/select';\nimport notification from '@/services/notification';\nimport { Field, Action, AntdForm } from '../proptypes';\nimport helper from './dynamicFormHelper';\n\nconst fieldRules = ({ type, required, minLength }) => {\n  const requiredRule = required;\n  const minLengthRule = minLength && includes(['text', 'email', 'password'], type);\n  const emailTypeRule = type === 'email';\n\n  return [\n    requiredRule && { required, message: 'This field is required.' },\n    minLengthRule && { min: minLength, message: 'This field is too short.' },\n    emailTypeRule && { type: 'email', message: 'This field must be a valid email.' },\n  ].filter(rule => rule);\n};\n\nclass DynamicForm extends React.Component {\n  static propTypes = {\n    id: PropTypes.string,\n    fields: PropTypes.arrayOf(Field),\n    actions: PropTypes.arrayOf(Action),\n    feedbackIcons: PropTypes.bool,\n    hideSubmitButton: PropTypes.bool,\n    saveText: PropTypes.string,\n    onSubmit: PropTypes.func,\n    form: AntdForm.isRequired,\n  };\n\n  static defaultProps = {\n    id: null,\n    fields: [],\n    actions: [],\n    feedbackIcons: false,\n    hideSubmitButton: false,\n    saveText: 'Save',\n    onSubmit: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isSubmitting: false,\n      inProgressActions: [],\n    };\n\n    this.actionCallbacks = this.props.actions.reduce((acc, cur) => ({\n      ...acc,\n      [cur.name]: cur.callback,\n    }), null);\n\n    props.actions.forEach((action) => {\n      this.state.inProgressActions[action.name] = false;\n    });\n  }\n\n  setActionInProgress = (actionName, inProgress) => {\n    this.setState(prevState => ({\n      inProgressActions: {\n        ...prevState.inProgressActions,\n        [actionName]: inProgress,\n      },\n    }));\n  };\n\n  handleSubmit = (e) => {\n    this.setState({ isSubmitting: true });\n    e.preventDefault();\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        this.props.onSubmit(\n          values,\n          (msg) => {\n            const { setFieldsValue, getFieldsValue } = this.props.form;\n            this.setState({ isSubmitting: false });\n            setFieldsValue(getFieldsValue()); // reset form touched state\n            notification.success(msg);\n          },\n          (msg) => {\n            this.setState({ isSubmitting: false });\n            notification.error(msg);\n          },\n        );\n      } else this.setState({ isSubmitting: false });\n    });\n  }\n\n  handleAction = (e) => {\n    const actionName = e.target.dataset.action;\n\n    this.setActionInProgress(actionName, true);\n    this.actionCallbacks[actionName](() => {\n      this.setActionInProgress(actionName, false);\n    });\n  }\n\n  base64File = (fieldName, e) => {\n    if (e && e.fileList[0]) {\n      helper.getBase64(e.file).then((value) => {\n        this.props.form.setFieldsValue({ [fieldName]: value });\n      });\n    }\n  }\n\n  renderUpload(field, props) {\n    const { getFieldDecorator, getFieldValue } = this.props.form;\n    const { name, initialValue } = field;\n\n    const fileOptions = {\n      rules: fieldRules(field),\n      initialValue,\n      getValueFromEvent: this.base64File.bind(this, name),\n    };\n\n    const disabled = getFieldValue(name) !== undefined && getFieldValue(name) !== initialValue;\n\n    const upload = (\n      <Upload {...props} beforeUpload={() => false}>\n        <Button disabled={disabled}><Icon type=\"upload\" /> Click to upload</Button>\n      </Upload>\n    );\n\n    return getFieldDecorator(name, fileOptions)(upload);\n  }\n\n  renderSelect(field, props) {\n    const { getFieldDecorator } = this.props.form;\n    const { name, options, mode, initialValue, readOnly, loading } = field;\n    const { Option } = Select;\n\n    const decoratorOptions = {\n      rules: fieldRules(field),\n      initialValue,\n    };\n\n    return getFieldDecorator(name, decoratorOptions)(\n      <Select {...props} optionFilterProp=\"children\" loading={loading || false} mode={mode}>\n        {options && options.map(({ value, title }) => (\n          <Option key={`${value}`} value={value} disabled={readOnly}>{ title || value }</Option>\n        ))}\n      </Select>,\n    );\n  }\n\n  renderField(field, props) {\n    const { getFieldDecorator } = this.props.form;\n    const { name, type, initialValue } = field;\n    const fieldLabel = field.title || helper.toHuman(name);\n\n    const options = {\n      rules: fieldRules(field),\n      valuePropName: type === 'checkbox' ? 'checked' : 'value',\n      initialValue,\n    };\n\n    if (type === 'checkbox') {\n      return getFieldDecorator(name, options)(<Checkbox {...props}>{fieldLabel}</Checkbox>);\n    } else if (type === 'file') {\n      return this.renderUpload(field, props);\n    } else if (type === 'select') {\n      return this.renderSelect(field, props);\n    } else if (type === 'content') {\n      return field.content;\n    } else if (type === 'number') {\n      return getFieldDecorator(name, options)(<InputNumber {...props} />);\n    }\n    return getFieldDecorator(name, options)(<Input {...props} />);\n  }\n\n  renderFields() {\n    return this.props.fields.map((field) => {\n      const FormItem = Form.Item;\n      const { name, title, type, readOnly, autoFocus, contentAfter } = field;\n      const fieldLabel = title || helper.toHuman(name);\n      const { feedbackIcons, form } = this.props;\n\n      const formItemProps = {\n        className: 'm-b-10',\n        hasFeedback: type !== 'checkbox' && type !== 'file' && feedbackIcons,\n        label: type === 'checkbox' ? '' : fieldLabel,\n      };\n\n      const fieldProps = {\n        ...field.props,\n        className: 'w-100',\n        name,\n        type,\n        readOnly,\n        autoFocus,\n        placeholder: field.placeholder,\n        'data-test': fieldLabel,\n      };\n\n      return (\n        <React.Fragment key={name}>\n          <FormItem {...formItemProps}>{this.renderField(field, fieldProps)}</FormItem>\n          {isFunction(contentAfter) ? contentAfter(form.getFieldValue(name)) : contentAfter}\n        </React.Fragment>\n      );\n    });\n  }\n\n  renderActions() {\n    return this.props.actions.map((action) => {\n      const inProgress = this.state.inProgressActions[action.name];\n      const { isFieldsTouched } = this.props.form;\n\n      const actionProps = {\n        key: action.name,\n        htmlType: 'button',\n        className: action.pullRight ? 'pull-right m-t-10' : 'm-t-10',\n        type: action.type,\n        disabled: (isFieldsTouched() && action.disableWhenDirty),\n        loading: inProgress,\n        onClick: this.handleAction,\n      };\n\n      return (<Button {...actionProps} data-action={action.name}>{action.name}</Button>);\n    });\n  }\n\n  render() {\n    const submitProps = {\n      type: 'primary',\n      htmlType: 'submit',\n      className: 'w-100',\n      disabled: this.state.isSubmitting,\n      loading: this.state.isSubmitting,\n    };\n    const { id, hideSubmitButton, saveText } = this.props;\n    const saveButton = !hideSubmitButton;\n\n    return (\n      <Form id={id} layout=\"vertical\" onSubmit={this.handleSubmit}>\n        {this.renderFields()}\n        {saveButton && <Button {...submitProps}>{saveText}</Button>}\n        {this.renderActions()}\n      </Form>\n    );\n  }\n}\n\nexport default Form.create()(DynamicForm);\n","import { react2angular } from 'react2angular';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport Tooltip from 'antd/lib/tooltip';\nimport Drawer from 'antd/lib/drawer';\nimport { BigMessage } from '@/components/BigMessage';\nimport DynamicComponent from '@/components/DynamicComponent';\n\nimport './HelpTrigger.less';\n\nconst DOMAIN = 'https://redash.io';\nconst HELP_PATH = '/help';\nconst IFRAME_TIMEOUT = 20000;\n\nexport const TYPES = {\n  HOME: [\n    '',\n    'Help',\n  ],\n  VALUE_SOURCE_OPTIONS: [\n    '/user-guide/querying/query-parameters#Value-Source-Options',\n    'Guide: Value Source Options',\n  ],\n  SHARE_DASHBOARD: [\n    '/user-guide/dashboards/sharing-dashboards',\n    'Guide: Sharing and Embedding Dashboards',\n  ],\n  DS_ATHENA: [\n    '/data-sources/amazon-athena-setup',\n    'Guide: Help Setting up Amazon Athena',\n  ],\n  DS_BIGQUERY: [\n    '/data-sources/bigquery-setup',\n    'Guide: Help Setting up BigQuery',\n  ],\n  DS_URL: [\n    '/data-sources/querying-urls',\n    'Guide: Help Setting up URL',\n  ],\n  DS_MONGODB: [\n    '/data-sources/mongodb-setup',\n    'Guide: Help Setting up MongoDB',\n  ],\n  DS_GOOGLE_SPREADSHEETS: [\n    '/data-sources/querying-a-google-spreadsheet',\n    'Guide: Help Setting up Google Spreadsheets',\n  ],\n  DS_GOOGLE_ANALYTICS: [\n    '/data-sources/google-analytics-setup',\n    'Guide: Help Setting up Google Analytics',\n  ],\n  DS_AXIBASETSD: [\n    '/data-sources/axibase-time-series-database',\n    'Guide: Help Setting up Axibase Time Series',\n  ],\n  DS_RESULTS: [\n    '/user-guide/querying/query-results-data-source',\n    'Guide: Help Setting up Query Results',\n  ],\n};\n\nexport class HelpTrigger extends React.Component {\n  static propTypes = {\n    type: PropTypes.oneOf(Object.keys(TYPES)).isRequired,\n    className: PropTypes.string,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    className: null,\n    children: <i className=\"fa fa-question-circle\" />,\n  };\n\n  iframeRef = null\n\n  iframeLoadingTimeout = null\n\n  constructor(props) {\n    super(props);\n    this.iframeRef = React.createRef();\n  }\n\n  state = {\n    visible: false,\n    loading: false,\n    error: false,\n  };\n\n  componentWillUnmount() {\n    clearTimeout(this.iframeLoadingTimeout);\n  }\n\n  loadIframe = (url) => {\n    clearTimeout(this.iframeLoadingTimeout);\n    this.setState({ loading: true, error: false });\n\n    this.iframeRef.current.src = url;\n    this.iframeLoadingTimeout = setTimeout(() => {\n      this.setState({ error: url, loading: false });\n    }, IFRAME_TIMEOUT); // safety\n  };\n\n  onIframeLoaded = () => {\n    this.setState({ loading: false });\n    clearTimeout(this.iframeLoadingTimeout);\n  };\n\n  openDrawer = () => {\n    this.setState({ visible: true });\n    const [pagePath] = TYPES[this.props.type];\n    const url = DOMAIN + HELP_PATH + pagePath;\n\n    // wait for drawer animation to complete so there's no animation jank\n    setTimeout(() => this.loadIframe(url), 300);\n  };\n\n  closeDrawer = () => {\n    this.setState({ visible: false });\n  };\n\n  render() {\n    const [, tooltip] = TYPES[this.props.type];\n    const className = cx('help-trigger', this.props.className);\n\n    return (\n      <React.Fragment>\n        <Tooltip title={tooltip}>\n          <a href=\"javascript: void(0)\" onClick={this.openDrawer} className={className}>\n            {this.props.children}\n          </a>\n        </Tooltip>\n        <Drawer\n          placement=\"right\"\n          onClose={this.closeDrawer}\n          visible={this.state.visible}\n          className=\"help-drawer\"\n          destroyOnClose\n          width={400}\n        >\n          <div className=\"drawer-wrapper\">\n            {/* iframe */}\n            {!this.state.error && (\n              <iframe\n                ref={this.iframeRef}\n                title=\"Redash Help\"\n                src=\"about:blank\"\n                className={cx({ ready: !this.state.loading })}\n                onLoad={this.onIframeLoaded}\n              />\n            )}\n\n            {/* loading indicator */}\n            {this.state.loading && (\n              <BigMessage icon=\"fa-spinner fa-2x fa-pulse\" message=\"Loading...\" className=\"help-message\" />\n            )}\n\n            {/* error message */}\n            {this.state.error && (\n              <BigMessage icon=\"fa-exclamation-circle\" className=\"help-message\">\n                Something went wrong.<br />\n                {/* eslint-disable-next-line react/jsx-no-target-blank */}\n                <a href={this.state.error} target=\"_blank\" rel=\"noopener\">Click here</a>{' '}\n                to open the page in a new window.\n              </BigMessage>\n            )}\n          </div>\n\n          {/* extra content */}\n          <DynamicComponent\n            name=\"HelpDrawerExtraContent\"\n            onLeave={this.closeDrawer}\n            openPageUrl={this.loadIframe}\n          />\n        </Drawer>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('helpTrigger', react2angular(HelpTrigger));\n}\n\ninit.init = true;\n","import chroma from 'chroma-js';\nimport _ from 'lodash';\nimport { createFormatter } from '@/lib/value-format';\n\nexport const AdditionalColors = {\n  White: '#ffffff',\n  Black: '#000000',\n  'Light Gray': '#dddddd',\n};\n\nexport function darkenColor(color) {\n  return chroma(color).darken().hex();\n}\n\nexport function createNumberFormatter(format, placeholder) {\n  const formatter = createFormatter({\n    displayAs: 'number',\n    numberFormat: format,\n  });\n  return (value) => {\n    if (_.isNumber(value) && isFinite(value)) {\n      return formatter(value);\n    }\n    return placeholder;\n  };\n}\n\nexport function prepareData(data, countryCodeField, valueField) {\n  if (!countryCodeField || !valueField) {\n    return {};\n  }\n\n  const result = {};\n  _.each(data, (item) => {\n    if (item[countryCodeField]) {\n      const value = parseFloat(item[valueField]);\n      result[item[countryCodeField]] = {\n        code: item[countryCodeField],\n        value: isFinite(value) ? value : undefined,\n        item,\n      };\n    }\n  });\n  return result;\n}\n\nexport function prepareFeatureProperties(feature, valueFormatted, data, countryCodeType) {\n  const result = {};\n  _.each(feature.properties, (value, key) => {\n    result['@@' + key] = value;\n  });\n  result['@@value'] = valueFormatted;\n  const datum = data[feature.properties[countryCodeType]] || {};\n  return _.extend(result, datum.item);\n}\n\nexport function getValueForFeature(feature, data, countryCodeType) {\n  const code = feature.properties[countryCodeType];\n  if (_.isString(code) && _.isObject(data[code])) {\n    return data[code].value;\n  }\n  return undefined;\n}\n\nexport function getColorByValue(value, limits, colors, defaultColor) {\n  if (_.isNumber(value) && isFinite(value)) {\n    for (let i = 0; i < limits.length; i += 1) {\n      if (value <= limits[i]) {\n        return colors[i];\n      }\n    }\n  }\n  return defaultColor;\n}\n\nexport function createScale(features, data, options) {\n  // Calculate limits\n  const values = _.uniq(_.filter(\n    _.map(features, feature => getValueForFeature(feature, data, options.countryCodeType)),\n    _.isNumber,\n  ));\n  if (values.length === 0) {\n    return {\n      limits: [],\n      colors: [],\n      legend: [],\n    };\n  }\n  const steps = Math.min(values.length, options.steps);\n  if (steps === 1) {\n    return {\n      limits: values,\n      colors: [options.colors.max],\n      legend: [{\n        color: options.colors.max,\n        limit: _.first(values),\n      }],\n    };\n  }\n  const limits = chroma.limits(values, options.clusteringMode, steps - 1);\n\n  // Create color buckets\n  const colors = chroma.scale([options.colors.min, options.colors.max])\n    .colors(limits.length);\n\n  // Group values for legend\n  const legend = _.map(colors, (color, index) => ({\n    color,\n    limit: limits[index],\n  })).reverse();\n\n  return { limits, colors, legend };\n}\n\nexport function inferCountryCodeType(mapType, data, countryCodeField) {\n  const regexMap = {\n    countries: {\n      iso_a2: /^[a-z]{2}$/i,\n      iso_a3: /^[a-z]{3}$/i,\n      iso_n3: /^[0-9]{3}$/i,\n    },\n    subdiv_japan: {\n      name: /^[a-z]+$/i,\n      name_local: /^[\\u3400-\\u9FFF\\uF900-\\uFAFF]|[\\uD840-\\uD87F][\\uDC00-\\uDFFF]+$/i,\n      iso_3166_2: /^JP-[0-9]{2}$/i,\n    },\n  };\n\n  const regex = regexMap[mapType];\n\n  const initState = _.mapValues(regex, () => 0);\n\n  const result = _.chain(data)\n    .reduce((memo, item) => {\n      const value = item[countryCodeField];\n      if (_.isString(value)) {\n        _.each(regex, (r, k) => {\n          memo[k] += r.test(value) ? 1 : 0;\n        });\n      }\n      return memo;\n    }, initState)\n    .toPairs()\n    .reduce((memo, item) => (item[1] > memo[1] ? item : memo))\n    .value();\n\n  return (result[1] / data.length) >= 0.9 ? result[0] : null;\n}\n","import React from 'react';\nimport { BigMessage } from '@/components/BigMessage';\n\n// Default \"list empty\" message for list pages\nexport default function EmptyState(props) {\n  return (\n    <div className=\"text-center\">\n      <BigMessage icon=\"fa-search\" message=\"Sorry, we couldn't find anything.\" {...props} />\n    </div>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nexport function PageHeader({ title }) {\n  return (\n    <div className=\"page-header-wrapper row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0\">\n      <div className=\"col-sm-9 p-l-0 p-r-0\">\n        <h3>{ title }</h3>\n      </div>\n    </div>\n  );\n}\n\nPageHeader.propTypes = {\n  title: PropTypes.string.isRequired,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('pageHeader', react2angular(PageHeader));\n}\n\ninit.init = true;\n","import { $http } from '@/services/ng';\n\nclass OrganizationStatus {\n  constructor() {\n    this.objectCounters = {};\n  }\n\n  refresh() {\n    return $http.get('api/organization/status').then(({ data }) => {\n      this.objectCounters = data.object_counters;\n      return this;\n    });\n  }\n}\n\nexport default new OrganizationStatus();\n","import _ from 'lodash';\n\nexport let Dashboard = null; // eslint-disable-line import/no-mutable-exports\n\nexport function collectDashboardFilters(dashboard, queryResults, urlParams) {\n  const filters = {};\n  queryResults.forEach((queryResult) => {\n    const queryFilters = queryResult.getFilters();\n    queryFilters.forEach((queryFilter) => {\n      const hasQueryStringValue = _.has(urlParams, queryFilter.name);\n\n      if (!(hasQueryStringValue || dashboard.dashboard_filters_enabled)) {\n        // If dashboard filters not enabled, or no query string value given,\n        // skip filters linking.\n        return;\n      }\n\n      if (hasQueryStringValue) {\n        queryFilter.current = urlParams[queryFilter.name];\n      }\n\n      const filter = { ...queryFilter };\n      if (!_.has(filters, queryFilter.name)) {\n        filters[filter.name] = filter;\n      } else {\n        filters[filter.name].values = _.union(filters[filter.name].values, filter.values);\n      }\n    });\n  });\n\n  return _.values(filters);\n}\n\nfunction prepareWidgetsForDashboard(widgets) {\n  // Default height for auto-height widgets.\n  // Compute biggest widget size and choose between it and some magic number.\n  // This value should be big enough so auto-height widgets will not overlap other ones.\n  const defaultWidgetSizeY =\n    Math.max(\n      _\n        .chain(widgets)\n        .map(w => w.options.position.sizeY)\n        .max()\n        .value(),\n      20,\n    ) + 5;\n\n  // Fix layout:\n  // 1. sort and group widgets by row\n  // 2. update position of widgets in each row - place it right below\n  //    biggest widget from previous row\n  _.chain(widgets)\n    .sortBy(widget => widget.options.position.row)\n    .groupBy(widget => widget.options.position.row)\n    .reduce((row, widgetsAtRow) => {\n      let height = 1;\n      _.each(widgetsAtRow, (widget) => {\n        height = Math.max(\n          height,\n          widget.options.position.autoHeight ? defaultWidgetSizeY : widget.options.position.sizeY,\n        );\n        widget.options.position.row = row;\n        if (widget.options.position.sizeY < 1) {\n          widget.options.position.sizeY = defaultWidgetSizeY;\n        }\n      });\n      return row + height;\n    }, 0)\n    .value();\n\n  // Sort widgets by updated column and row value\n  widgets = _.sortBy(widgets, widget => widget.options.position.col);\n  widgets = _.sortBy(widgets, widget => widget.options.position.row);\n\n  return widgets;\n}\n\nfunction DashboardService($resource, $http, $location, currentUser, Widget, dashboardGridOptions) {\n  function prepareDashboardWidgets(widgets) {\n    return prepareWidgetsForDashboard(_.map(widgets, widget => new Widget(widget)));\n  }\n\n  function transformSingle(dashboard) {\n    if (dashboard.widgets) {\n      dashboard.widgets = prepareDashboardWidgets(dashboard.widgets);\n    }\n    dashboard.publicAccessEnabled = dashboard.public_url !== undefined;\n  }\n\n  const transform = $http.defaults.transformResponse.concat((data) => {\n    if (data.results) {\n      data.results.forEach(transformSingle);\n    } else {\n      transformSingle(data);\n    }\n    return data;\n  });\n\n  const resource = $resource(\n    'api/dashboards/:slug',\n    { slug: '@slug' },\n    {\n      get: { method: 'GET', transformResponse: transform },\n      save: { method: 'POST', transformResponse: transform },\n      query: { method: 'GET', isArray: false, transformResponse: transform },\n      recent: {\n        method: 'get',\n        isArray: true,\n        url: 'api/dashboards/recent',\n        transformResponse: transform,\n      },\n      favorites: {\n        method: 'get',\n        isArray: false,\n        url: 'api/dashboards/favorites',\n      },\n      favorite: {\n        method: 'post',\n        isArray: false,\n        url: 'api/dashboards/:slug/favorite',\n        transformRequest: [() => ''], // body not needed\n      },\n      unfavorite: {\n        method: 'delete',\n        isArray: false,\n        url: 'api/dashboards/:slug/favorite',\n        transformRequest: [() => ''], // body not needed\n      },\n    },\n  );\n\n  resource.prototype.canEdit = function canEdit() {\n    return currentUser.canEdit(this) || this.can_edit;\n  };\n\n  resource.prototype.calculateNewWidgetPosition = function calculateNewWidgetPosition(widget) {\n    const width = _.extend({ sizeX: dashboardGridOptions.defaultSizeX }, _.extend({}, widget.options).position).sizeX;\n\n    // Find first free row for each column\n    const bottomLine = _\n      .chain(this.widgets)\n      .map((w) => {\n        const options = _.extend({}, w.options);\n        const position = _.extend({ row: 0, sizeY: 0 }, options.position);\n        return {\n          left: position.col,\n          top: position.row,\n          right: position.col + position.sizeX,\n          bottom: position.row + position.sizeY,\n          width: position.sizeX,\n          height: position.sizeY,\n        };\n      })\n      .reduce((result, item) => {\n        const from = Math.max(item.left, 0);\n        const to = Math.min(item.right, result.length + 1);\n        for (let i = from; i < to; i += 1) {\n          result[i] = Math.max(result[i], item.bottom);\n        }\n        return result;\n      }, _.map(new Array(dashboardGridOptions.columns), _.constant(0)))\n      .value();\n\n    // Go through columns, pick them by count necessary to hold new block,\n    // and calculate bottom-most free row per group.\n    // Choose group with the top-most free row (comparing to other groups)\n    return _\n      .chain(_.range(0, dashboardGridOptions.columns - width + 1))\n      .map(col => ({\n        col,\n        row: _\n          .chain(bottomLine)\n          .slice(col, col + width)\n          .max()\n          .value(),\n      }))\n      .sortBy('row')\n      .first()\n      .value();\n  };\n\n  resource.prepareDashboardWidgets = prepareDashboardWidgets;\n  resource.prepareWidgetsForDashboard = prepareWidgetsForDashboard;\n\n  resource.prototype.getParametersDefs = function getParametersDefs() {\n    const globalParams = {};\n    const queryParams = $location.search();\n    _.each(this.widgets, (widget) => {\n      if (widget.getQuery()) {\n        const mappings = widget.getParameterMappings();\n        widget\n          .getQuery()\n          .getParametersDefs()\n          .forEach((param) => {\n            const mapping = mappings[param.name];\n            if (mapping.type === Widget.MappingType.DashboardLevel) {\n              // create global param\n              if (!globalParams[mapping.mapTo]) {\n                globalParams[mapping.mapTo] = param.clone();\n                globalParams[mapping.mapTo].name = mapping.mapTo;\n                globalParams[mapping.mapTo].title = mapping.title || param.title;\n                globalParams[mapping.mapTo].locals = [];\n              }\n\n              // add to locals list\n              globalParams[mapping.mapTo].locals.push(param);\n            }\n          });\n      }\n    });\n    return _.values(_.each(globalParams, (param) => {\n      param.fromUrlParams(queryParams);\n    }));\n  };\n\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Dashboard', DashboardService);\n\n  ngModule.run(($injector) => {\n    Dashboard = $injector.get('Dashboard');\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport Input from 'antd/lib/input';\nimport Icon from 'antd/lib/icon';\nimport Tooltip from 'antd/lib/tooltip';\n\nexport default class InputWithCopy extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { copied: null };\n    this.ref = React.createRef();\n    this.copyFeatureSupported = document.queryCommandSupported('copy');\n    this.resetCopyState = null;\n  }\n\n  componentWillUnmount() {\n    if (this.resetCopyState) {\n      clearTimeout(this.resetCopyState);\n    }\n  }\n\n  copy = () => {\n    // select text\n    this.ref.current.select();\n\n    // copy\n    try {\n      const success = document.execCommand('copy');\n      if (!success) {\n        throw new Error();\n      }\n      this.setState({ copied: 'Copied!' });\n    } catch (err) {\n      this.setState({\n        copied: 'Copy failed',\n      });\n    }\n\n    // reset tooltip\n    this.resetCopyState = setTimeout(() => this.setState({ copied: null }), 2000);\n  };\n\n  render() {\n    const copyButton = (\n      <Tooltip title={this.state.copied || 'Copy'}>\n        <Icon\n          type=\"copy\"\n          style={{ cursor: 'pointer' }}\n          onClick={this.copy}\n        />\n      </Tooltip>\n    );\n\n    return (\n      <Input {...this.props} ref={this.ref} addonAfter={this.copyFeatureSupported && copyButton} />\n    );\n  }\n}\n","import moment from 'moment';\nimport { isNil } from 'lodash';\nimport React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { Moment } from '@/components/proptypes';\nimport { clientConfig } from '@/services/auth';\nimport useForceUpdate from '@/lib/hooks/useForceUpdate';\n\nfunction toMoment(value) {\n  value = !isNil(value) ? moment(value) : null;\n  return value && value.isValid() ? value : null;\n}\n\nexport function TimeAgo({ date, placeholder, autoUpdate }) {\n  const startDate = toMoment(date);\n\n  const value = startDate ? startDate.fromNow() : placeholder;\n  const title = startDate ? startDate.format(clientConfig.dateTimeFormat) : '';\n\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => {\n    if (autoUpdate) {\n      const timer = setInterval(forceUpdate, 30 * 1000);\n      return () => clearInterval(timer);\n    }\n  }, [autoUpdate]);\n\n  return <span title={title} data-test=\"TimeAgo\">{value}</span>;\n}\n\nTimeAgo.propTypes = {\n  // `date` and `placeholder` used in `getDerivedStateFromProps`\n  // eslint-disable-next-line react/no-unused-prop-types\n  date: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.instanceOf(Date),\n    Moment,\n  ]),\n  // eslint-disable-next-line react/no-unused-prop-types\n  placeholder: PropTypes.string,\n  autoUpdate: PropTypes.bool,\n};\n\nTimeAgo.defaultProps = {\n  date: null,\n  placeholder: '',\n  autoUpdate: true,\n};\n\nexport default function init(ngModule) {\n  ngModule.directive('amTimeAgo', () => ({\n    link($scope, $element, attr) {\n      const modelName = attr.amTimeAgo;\n      $scope.$watch(modelName, (value) => {\n        ReactDOM.render(<TimeAgo date={value} />, $element[0]);\n      });\n\n      $scope.$on('$destroy', () => {\n        ReactDOM.unmountComponentAtNode($element[0]);\n      });\n    },\n  }));\n\n  ngModule.component('rdTimeAgo', {\n    bindings: {\n      value: '=',\n    },\n    controller($scope, $element) {\n      $scope.$watch('$ctrl.value', () => {\n        // Initial render will occur here as well\n        ReactDOM.render(<TimeAgo date={this.value} placeholder=\"-\" />, $element[0]);\n      });\n\n      $scope.$on('$destroy', () => {\n        ReactDOM.unmountComponentAtNode($element[0]);\n      });\n    },\n  });\n}\n\ninit.init = true;\n","import { isArray, map, includes, every, some } from 'lodash';\nimport moment from 'moment';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Select from 'antd/lib/select';\n\nconst ALL_VALUES = '###Redash::Filters::SelectAll###';\nconst NONE_VALUES = '###Redash::Filters::Clear###';\n\nexport const FilterType = PropTypes.shape({\n  name: PropTypes.string.isRequired,\n  friendlyName: PropTypes.string.isRequired,\n  multiple: PropTypes.bool,\n  current: PropTypes.oneOfType([\n    PropTypes.any,\n    PropTypes.arrayOf(PropTypes.any),\n  ]).isRequired,\n  values: PropTypes.arrayOf(PropTypes.any).isRequired,\n});\n\nexport const FiltersType = PropTypes.arrayOf(FilterType);\n\nfunction createFilterChangeHandler(filters, onChange) {\n  return (filter, value) => {\n    if (filter.multiple && includes(value, ALL_VALUES)) {\n      value = [...filter.values];\n    }\n    if (filter.multiple && includes(value, NONE_VALUES)) {\n      value = [];\n    }\n    filters = map(filters, f => (f.name === filter.name ? { ...filter, current: value } : f));\n    onChange(filters);\n  };\n}\n\nexport function filterData(rows, filters = []) {\n  if (!isArray(rows)) {\n    return [];\n  }\n\n  let result = rows;\n\n  if (isArray(filters) && (filters.length > 0)) {\n    // \"every\" field's value should match \"some\" of corresponding filter's values\n    result = result.filter(row => every(\n      filters,\n      (filter) => {\n        const rowValue = row[filter.name];\n        const filterValues = isArray(filter.current) ? filter.current : [filter.current];\n        return some(filterValues, (filterValue) => {\n          if (moment.isMoment(rowValue)) {\n            return rowValue.isSame(filterValue);\n          }\n          // We compare with either the value or the String representation of the value,\n          // because Select2 casts true/false to \"true\"/\"false\".\n          return (filterValue === rowValue) || (String(rowValue) === filterValue);\n        });\n      },\n    ));\n  }\n\n  return result;\n}\n\nexport function Filters({ filters, onChange }) {\n  if (filters.length === 0) {\n    return null;\n  }\n\n  onChange = createFilterChangeHandler(filters, onChange);\n\n  return (\n    <div className=\"filters-wrapper\">\n      <div className=\"parameter-container container bg-white\">\n        <div className=\"row\">\n          {map(filters, (filter) => {\n            const options = map(filter.values, value => (\n              <Select.Option key={value}>{value}</Select.Option>\n            ));\n\n            return (\n              <div key={filter.name} className=\"col-sm-6 p-l-0 filter-container\">\n                <label>{filter.friendlyName}</label>\n                <Select\n                  className=\"w-100\"\n                  mode={filter.multiple ? 'multiple' : 'default'}\n                  value={filter.current}\n                  allowClear={filter.multiple}\n                  showSearch\n                  onChange={value => onChange(filter, value)}\n                >\n                  {!filter.multiple && options}\n                  {filter.multiple && [\n                    <Select.Option key={NONE_VALUES}><i className=\"fa fa-square-o m-r-5\" />Clear</Select.Option>,\n                    <Select.Option key={ALL_VALUES}><i className=\"fa fa-check-square-o m-r-5\" />Select All</Select.Option>,\n                    <Select.OptGroup key=\"Values\" title=\"Values\">{options}</Select.OptGroup>,\n                  ]}\n                </Select>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nFilters.propTypes = {\n  filters: FiltersType.isRequired,\n  onChange: PropTypes.func, // (name, value) => void\n};\n\nFilters.defaultProps = {\n  onChange: () => {},\n};\n\nexport default function init(ngModule) {\n  ngModule.component('filters', react2angular(Filters));\n}\n\ninit.init = true;\n","import { map } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Table from 'antd/lib/table';\nimport Card from 'antd/lib/card';\nimport Spin from 'antd/lib/spin';\nimport Badge from 'antd/lib/badge';\nimport { Columns } from '@/components/items-list/components/ItemsTable';\n\n// CounterCard\n\nexport function CounterCard({ title, value, loading }) {\n  return (\n    <Spin spinning={loading}>\n      <Card>\n        {title}\n        <div className=\"f-20\">{value}</div>\n      </Card>\n    </Spin>\n  );\n}\n\nCounterCard.propTypes = {\n  title: PropTypes.string.isRequired,\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  loading: PropTypes.bool.isRequired,\n};\n\nCounterCard.defaultProps = {\n  value: '',\n};\n\n// Tables\n\nconst commonColumns = [\n  { title: 'Worker Name', dataIndex: 'worker' },\n  { title: 'PID', dataIndex: 'worker_pid' },\n  { title: 'Queue', dataIndex: 'queue' },\n  Columns.custom((value) => {\n    if (value === 'active') {\n      return <span><Badge status=\"processing\" /> Active</span>;\n    }\n    return <span><Badge status=\"warning\" /> {value}</span>;\n  }, {\n    title: 'State',\n    dataIndex: 'state',\n  }),\n  Columns.timeAgo({ title: 'Start Time', dataIndex: 'start_time' }),\n];\n\nconst queryColumns = commonColumns.concat([\n  Columns.timeAgo({ title: 'Enqueue Time', dataIndex: 'enqueue_time' }),\n  { title: 'Query ID', dataIndex: 'query_id' },\n  { title: 'Org ID', dataIndex: 'org_id' },\n  { title: 'Data Source ID', dataIndex: 'data_source_id' },\n  { title: 'User ID', dataIndex: 'user_id' },\n  { title: 'Scheduled', dataIndex: 'scheduled' },\n]);\n\nconst otherTasksColumns = commonColumns.concat([\n  { title: 'Task Name', dataIndex: 'task_name' },\n]);\n\nconst queuesColumns = map(\n  ['Name', 'Active', 'Reserved', 'Waiting'],\n  c => ({ title: c, dataIndex: c.toLowerCase() }),\n);\n\nconst TablePropTypes = {\n  loading: PropTypes.bool.isRequired,\n  items: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport function QueuesTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={queuesColumns}\n      rowKey=\"name\"\n      dataSource={items}\n    />\n  );\n}\n\nQueuesTable.propTypes = TablePropTypes;\n\nexport function QueriesTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={queryColumns}\n      rowKey=\"task_id\"\n      dataSource={items}\n    />\n  );\n}\n\nQueriesTable.propTypes = TablePropTypes;\n\nexport function OtherTasksTable({ loading, items }) {\n  return (\n    <Table\n      loading={loading}\n      columns={otherTasksColumns}\n      rowKey=\"task_id\"\n      dataSource={items}\n    />\n  );\n}\n\nOtherTasksTable.propTypes = TablePropTypes;\n","module.exports = __webpack_public_path__ + \"images/redash_icon_small.png\";","import { $http } from '@/services/ng';\n\nfunction processTags(data) {\n  return data.tags || [];\n}\n\nexport default function getTags(url) {\n  return $http.get(url).then(response => processTags(response.data));\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Tabs from 'antd/lib/tabs';\nimport { PageHeader } from '@/components/PageHeader';\n\nimport './layout.less';\n\nexport default function Layout({ activeTab, children }) {\n  return (\n    <div className=\"container admin-page-layout\">\n      <PageHeader title=\"Admin\" />\n\n      <div className=\"bg-white tiled\">\n        <Tabs className=\"admin-page-layout-tabs\" defaultActiveKey={activeTab} animated={false}>\n          <Tabs.TabPane key=\"system_status\" tab={<a href=\"admin/status\">System Status</a>}>\n            {(activeTab === 'system_status') ? children : null}\n          </Tabs.TabPane>\n          <Tabs.TabPane key=\"tasks\" tab={<a href=\"admin/queries/tasks\">Celery Status</a>}>\n            {(activeTab === 'tasks') ? children : null}\n          </Tabs.TabPane>\n          <Tabs.TabPane key=\"outdated_queries\" tab={<a href=\"admin/queries/outdated\">Outdated Queries</a>}>\n            {(activeTab === 'outdated_queries') ? children : null}\n          </Tabs.TabPane>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n\nLayout.propTypes = {\n  activeTab: PropTypes.string,\n  children: PropTypes.node,\n};\n\nLayout.defaultProps = {\n  activeTab: 'system_status',\n  children: null,\n};\n","import { keys, some } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport classNames from 'classnames';\nimport { $uibModal } from '@/services/ng';\nimport { currentUser } from '@/services/auth';\nimport organizationStatus from '@/services/organizationStatus';\nimport './empty-state.less';\n\nfunction createDashboard() {\n  $uibModal.open({\n    component: 'editDashboardDialog',\n    resolve: {\n      dashboard: () => ({ name: null, layout: null }),\n    },\n  });\n}\n\nfunction Step({ show, completed, text, url, urlText, onClick }) {\n  if (!show) {\n    return null;\n  }\n\n  return (\n    <li className={classNames({ done: completed })}>\n      <a href={url || 'javascript:void(0)'} onClick={onClick}>\n        {urlText}\n      </a>{' '}\n      {text}\n    </li>\n  );\n}\n\nStep.propTypes = {\n  show: PropTypes.bool.isRequired,\n  completed: PropTypes.bool.isRequired,\n  text: PropTypes.string.isRequired,\n  url: PropTypes.string,\n  urlText: PropTypes.string,\n  onClick: PropTypes.func,\n};\n\nStep.defaultProps = {\n  url: null,\n  urlText: null,\n  onClick: null,\n};\n\nexport function EmptyState({\n  icon,\n  title,\n  description,\n  illustration,\n  helpLink,\n  onboardingMode,\n  showAlertStep,\n  showDashboardStep,\n  showInviteStep,\n}) {\n  const isAvailable = {\n    dataSource: true,\n    query: true,\n    alert: showAlertStep,\n    dashboard: showDashboardStep,\n    inviteUsers: showInviteStep,\n  };\n\n  const isCompleted = {\n    dataSource: organizationStatus.objectCounters.data_sources > 0,\n    query: organizationStatus.objectCounters.queries > 0,\n    alert: organizationStatus.objectCounters.alerts > 0,\n    dashboard: organizationStatus.objectCounters.dashboards > 0,\n    inviteUsers: organizationStatus.objectCounters.users > 1,\n  };\n\n  // Show if `onboardingMode=false` or any requested step not completed\n  const shouldShow = !onboardingMode || some(keys(isAvailable), step => isAvailable[step] && !isCompleted[step]);\n\n  if (!shouldShow) {\n    return null;\n  }\n\n  return (\n    <div className=\"empty-state bg-white tiled\">\n      <div className=\"empty-state__summary\">\n        {title && <h4>{title}</h4>}\n        <h2>\n          <i className={icon} />\n        </h2>\n        <p>{description}</p>\n        <img\n          src={'/static/images/illustrations/' + illustration + '.svg'}\n          alt={illustration + ' Illustration'}\n          width=\"75%\"\n        />\n      </div>\n      <div className=\"empty-state__steps\">\n        <h4>Let&apos;s get started</h4>\n        <ol>\n          {currentUser.isAdmin && (\n            <Step\n              show={isAvailable.dataSource}\n              completed={isCompleted.dataSource}\n              url=\"data_sources/new\"\n              urlText=\"Connect\"\n              text=\"a Data Source\"\n            />\n          )}\n          {!currentUser.isAdmin && (\n            <Step\n              show={isAvailable.dataSource}\n              completed={isCompleted.dataSource}\n              text=\"Ask an account admin to connect a data source\"\n            />\n          )}\n          <Step\n            show={isAvailable.query}\n            completed={isCompleted.query}\n            url=\"queries/new\"\n            urlText=\"Create\"\n            text=\"your first Query\"\n          />\n          <Step\n            show={isAvailable.alert}\n            completed={isCompleted.alert}\n            url=\"alerts/new\"\n            urlText=\"Create\"\n            text=\"your first Alert\"\n          />\n          <Step\n            show={isAvailable.dashboard}\n            completed={isCompleted.dashboard}\n            onClick={createDashboard}\n            urlText=\"Create\"\n            text=\"your first Dashboard\"\n          />\n          <Step\n            show={isAvailable.inviteUsers}\n            completed={isCompleted.inviteUsers}\n            url=\"users/new\"\n            urlText=\"Invite\"\n            text=\"your team members\"\n          />\n        </ol>\n        <p>\n          Need more support?{' '}\n          <a href={helpLink} target=\"_blank\" rel=\"noopener noreferrer\">\n            See our Help\n            <i className=\"fa fa-external-link m-l-5\" aria-hidden=\"true\" />\n          </a>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nEmptyState.propTypes = {\n  icon: PropTypes.string,\n  title: PropTypes.string,\n  description: PropTypes.string.isRequired,\n  illustration: PropTypes.string.isRequired,\n  helpLink: PropTypes.string.isRequired,\n\n  onboardingMode: PropTypes.bool,\n  showAlertStep: PropTypes.bool,\n  showDashboardStep: PropTypes.bool,\n  showInviteStep: PropTypes.bool,\n};\n\nEmptyState.defaultProps = {\n  icon: null,\n  title: null,\n\n  onboardingMode: false,\n  showAlertStep: false,\n  showDashboardStep: false,\n  showInviteStep: false,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('emptyState', react2angular(EmptyState));\n}\n\ninit.init = true;\n","import { isString, sortBy } from 'lodash';\n\nconst ORDER_BY_REVERSE = '-';\n\nexport function compile(field, reverse) {\n  if (!field) {\n    return null;\n  }\n  return reverse ? ORDER_BY_REVERSE + field : field;\n}\n\nexport function parse(compiled) {\n  compiled = isString(compiled) ? compiled : '';\n  const reverse = compiled.startsWith(ORDER_BY_REVERSE);\n  if (reverse) {\n    compiled = compiled.substring(1);\n  }\n  const field = compiled !== '' ? compiled : null;\n  return { field, reverse };\n}\n\nexport default class Sorter {\n  field = null;\n\n  reverse = false;\n\n  get compiled() {\n    return compile(this.field, this.reverse);\n  }\n\n  set compiled(value) {\n    const { field, reverse } = parse(value);\n    this.field = field;\n    this.reverse = reverse;\n  }\n\n  setField(value) {\n    this.field = isString(value) && (value !== '') ? value : null;\n  }\n\n  setReverse(value) {\n    this.reverse = !!value; // cast to boolean\n  }\n\n  constructor({ orderByField, orderByReverse } = {}) {\n    this.setField(orderByField);\n    this.setReverse(orderByReverse);\n  }\n\n  toggleField(field) {\n    if (!isString(field) || (field === '')) {\n      return;\n    }\n    if (field === this.field) {\n      this.reverse = !this.reverse;\n    } else {\n      this.field = field;\n      this.reverse = false;\n    }\n  }\n\n  sort(items) {\n    if (this.field) {\n      items = sortBy(items, this.field);\n      if (this.reverse) {\n        items.reverse();\n      }\n      return items;\n    }\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'antd/lib/tooltip';\n\nexport default function ListItemAddon({ isSelected, isStaged, alreadyInGroup }) {\n  if (isStaged) {\n    return <i className=\"fa fa-remove\" />;\n  }\n  if (alreadyInGroup) {\n    return <Tooltip title=\"Already in this group\"><i className=\"fa fa-check\" /></Tooltip>;\n  }\n  return isSelected ? <i className=\"fa fa-check\" /> : <i className=\"fa fa-angle-double-right\" />;\n}\n\nListItemAddon.propTypes = {\n  isSelected: PropTypes.bool,\n  isStaged: PropTypes.bool,\n  alreadyInGroup: PropTypes.bool,\n};\n\nListItemAddon.defaultProps = {\n  isSelected: false,\n  isStaged: false,\n  alreadyInGroup: false,\n};\n","/* eslint-disable react/prop-types */\n\nimport { toPairs } from 'lodash';\nimport React from 'react';\n\nimport List from 'antd/lib/list';\nimport Card from 'antd/lib/card';\nimport { TimeAgo } from '@/components/TimeAgo';\n\nimport { toHuman, prettySize } from '@/filters';\n\nexport function General({ info }) {\n  info = toPairs(info);\n  return (\n    <Card title=\"General\" size=\"small\">\n      {(info.length === 0) && (\n        <div className=\"text-muted text-center\">No data</div>\n      )}\n      {(info.length > 0) && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, value]) => (\n            <List.Item extra={<span className=\"badge\">{value}</span>}>\n              {toHuman(name)}\n            </List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function DatabaseMetrics({ info }) {\n  return (\n    <Card title=\"Redash Database\" size=\"small\">\n      {(info.length === 0) && (\n        <div className=\"text-muted text-center\">No data</div>\n      )}\n      {(info.length > 0) && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, size]) => (\n            <List.Item extra={<span className=\"badge\">{prettySize(size)}</span>}>\n              {name}\n            </List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function Queues({ info }) {\n  info = toPairs(info);\n  return (\n    <Card title=\"Queues\" size=\"small\">\n      {(info.length === 0) && (\n        <div className=\"text-muted text-center\">No data</div>\n      )}\n      {(info.length > 0) && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={info}\n          renderItem={([name, queue]) => (\n            <List.Item extra={<span className=\"badge\">{queue.size}</span>}>\n              {name}\n            </List.Item>\n          )}\n        />\n      )}\n    </Card>\n  );\n}\n\nexport function Manager({ info }) {\n  const items = info ? [(\n    <List.Item extra={<span className=\"badge\"><TimeAgo date={info.lastRefreshAt} placeholder=\"n/a\" /></span>}>\n      Last Refresh\n    </List.Item>\n  ), (\n    <List.Item extra={<span className=\"badge\"><TimeAgo date={info.startedAt} placeholder=\"n/a\" /></span>}>\n      Started\n    </List.Item>\n  ), (\n    <List.Item extra={<span className=\"badge\">{info.outdatedQueriesCount}</span>}>\n      Outdated Queries Count\n    </List.Item>\n  )] : [];\n\n  return (\n    <Card title=\"Manager\" size=\"small\">\n      {!info && (\n        <div className=\"text-muted text-center\">No data</div>\n      )}\n      {info && (\n        <List\n          size=\"small\"\n          itemLayout=\"vertical\"\n          dataSource={items}\n          renderItem={item => item}\n        />\n      )}\n    </Card>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { isEmpty, toUpper, includes } from 'lodash';\nimport Button from 'antd/lib/button';\nimport List from 'antd/lib/list';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport Steps from 'antd/lib/steps';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { PreviewCard } from '@/components/PreviewCard';\nimport EmptyState from '@/components/items-list/components/EmptyState';\nimport DynamicForm from '@/components/dynamic-form/DynamicForm';\nimport helper from '@/components/dynamic-form/dynamicFormHelper';\nimport { HelpTrigger, TYPES as HELP_TRIGGER_TYPES } from '@/components/HelpTrigger';\n\nconst { Step } = Steps;\nconst { Search } = Input;\n\nconst StepEnum = {\n  SELECT_TYPE: 0,\n  CONFIGURE_IT: 1,\n  DONE: 2,\n};\n\nclass CreateSourceDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    types: PropTypes.arrayOf(PropTypes.object),\n    sourceType: PropTypes.string.isRequired,\n    imageFolder: PropTypes.string.isRequired,\n    helpTriggerPrefix: PropTypes.string,\n    onCreate: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    types: [],\n    helpTriggerPrefix: null,\n  };\n\n  state = {\n    searchText: '',\n    selectedType: null,\n    savingSource: false,\n    currentStep: StepEnum.SELECT_TYPE,\n  };\n\n  selectType = (selectedType) => {\n    this.setState({ selectedType, currentStep: StepEnum.CONFIGURE_IT });\n  };\n\n  resetType = () => {\n    if (this.state.currentStep === StepEnum.CONFIGURE_IT) {\n      this.setState({ searchText: '', selectedType: null, currentStep: StepEnum.SELECT_TYPE });\n    }\n  };\n\n  createSource = (values, successCallback, errorCallback) => {\n    const { selectedType, savingSource } = this.state;\n    if (!savingSource) {\n      this.setState({ savingSource: true, currentStep: StepEnum.DONE });\n      this.props.onCreate(selectedType, values).then((data) => {\n        successCallback('Saved.');\n        this.props.dialog.close({ success: true, data });\n      }).catch((error) => {\n        this.setState({ savingSource: false, currentStep: StepEnum.CONFIGURE_IT });\n        errorCallback(error.message);\n      });\n    }\n  };\n\n  renderTypeSelector() {\n    const { types } = this.props;\n    const { searchText } = this.state;\n    const filteredTypes = types.filter(type => isEmpty(searchText) ||\n      includes(type.name.toLowerCase(), searchText.toLowerCase()));\n    return (\n      <div className=\"m-t-10\">\n        <Search\n          placeholder=\"Search...\"\n          onChange={e => this.setState({ searchText: e.target.value })}\n          autoFocus\n          data-test=\"SearchSource\"\n        />\n        <div className=\"scrollbox p-5 m-t-10\" style={{ minHeight: '30vh', maxHeight: '40vh' }}>\n          {isEmpty(filteredTypes) ? (<EmptyState className=\"\" />) : (\n            <List\n              size=\"small\"\n              dataSource={filteredTypes}\n              renderItem={item => this.renderItem(item)}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  renderForm() {\n    const { imageFolder, helpTriggerPrefix } = this.props;\n    const { selectedType } = this.state;\n    const fields = helper.getFields(selectedType);\n    const helpTriggerType = `${helpTriggerPrefix}${toUpper(selectedType.type)}`;\n    return (\n      <div className=\"p-5\">\n        <div className=\"d-flex justify-content-center align-items-center\">\n          <img\n            className=\"p-5\"\n            src={`${imageFolder}/${selectedType.type}.png`}\n            alt={selectedType.name}\n            width=\"48\"\n          />\n          <h4 className=\"m-0\">{selectedType.name}</h4>\n        </div>\n        <div className=\"text-right\">\n          {HELP_TRIGGER_TYPES[helpTriggerType] && (\n            <HelpTrigger className=\"f-13\" type={helpTriggerType}>\n              Setup Instructions <i className=\"fa fa-question-circle\" />\n            </HelpTrigger>\n          )}\n        </div>\n        <DynamicForm\n          id=\"sourceForm\"\n          fields={fields}\n          onSubmit={this.createSource}\n          feedbackIcons\n          hideSubmitButton\n        />\n      </div>\n    );\n  }\n\n  renderItem(item) {\n    const { imageFolder } = this.props;\n    return (\n      <List.Item\n        className=\"p-l-10 p-r-10 clickable\"\n        onClick={() => this.selectType(item)}\n      >\n        <PreviewCard title={item.name} imageUrl={`${imageFolder}/${item.type}.png`} roundedImage={false}>\n          <i className=\"fa fa-angle-double-right\" />\n        </PreviewCard>\n      </List.Item>\n    );\n  }\n\n  render() {\n    const { currentStep, savingSource } = this.state;\n    const { dialog, sourceType } = this.props;\n    return (\n      <Modal\n        {...dialog.props}\n        title={`Create a New ${sourceType}`}\n        footer={(currentStep === StepEnum.SELECT_TYPE) ? [\n          (<Button key=\"cancel\" onClick={() => dialog.dismiss()}>Cancel</Button>),\n          (<Button key=\"submit\" type=\"primary\" disabled>Create</Button>),\n        ] : [\n          (<Button key=\"previous\" onClick={this.resetType}>Previous</Button>),\n          (\n            <Button\n              key=\"submit\"\n              htmlType=\"submit\"\n              form=\"sourceForm\"\n              type=\"primary\"\n              loading={savingSource}\n              data-test=\"CreateSourceButton\"\n            >\n              Create\n            </Button>\n          ),\n        ]}\n      >\n        <div data-test=\"CreateSourceDialog\">\n          <Steps className=\"hidden-xs m-b-10\" size=\"small\" current={currentStep} progressDot>\n            {currentStep === StepEnum.CONFIGURE_IT ? (\n              <Step\n                title={<a>Type Selection</a>}\n                className=\"clickable\"\n                onClick={this.resetType}\n              />\n            ) : (<Step title=\"Type Selection\" />)}\n            <Step title=\"Configuration\" />\n            <Step title=\"Done\" />\n          </Steps>\n          {currentStep === StepEnum.SELECT_TYPE && this.renderTypeSelector()}\n          {currentStep !== StepEnum.SELECT_TYPE && this.renderForm()}\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateSourceDialog);\n","import { isFunction, isString } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst componentsRegistry = new Map();\nconst activeInstances = new Set();\n\nexport function registerComponent(name, component) {\n  if (isString(name) && name !== '') {\n    componentsRegistry.set(name, isFunction(component) ? component : null);\n    // Refresh active DynamicComponent instances which use this component\n    activeInstances.forEach((dynamicComponent) => {\n      if (dynamicComponent.props.name === name) {\n        dynamicComponent.forceUpdate();\n      }\n    });\n  }\n}\n\nexport function unregisterComponent(name) {\n  registerComponent(name, null);\n}\n\nexport default class DynamicComponent extends React.Component {\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    children: PropTypes.node,\n  };\n\n  static defaultProps = {\n    children: null,\n  };\n\n  componentDidMount() {\n    activeInstances.add(this);\n  }\n\n  componentWillUnmount() {\n    activeInstances.delete(this);\n  }\n\n  render() {\n    const { name, children, ...props } = this.props;\n    const RealComponent = componentsRegistry.get(name);\n    if (!RealComponent) {\n      return null;\n    }\n    return <RealComponent {...props}>{children}</RealComponent>;\n  }\n}\n","\nimport { includes, startsWith, words, capitalize, clone, isNull } from 'lodash';\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport Form from 'antd/lib/form';\nimport Checkbox from 'antd/lib/checkbox';\nimport Button from 'antd/lib/button';\nimport Select from 'antd/lib/select';\nimport Input from 'antd/lib/input';\nimport Divider from 'antd/lib/divider';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { QuerySelector } from '@/components/QuerySelector';\nimport { Query } from '@/services/query';\n\nconst { Option } = Select;\nconst formItemProps = { labelCol: { span: 6 }, wrapperCol: { span: 16 } };\n\nfunction getDefaultTitle(text) {\n  return capitalize(words(text).join(' ')); // humanize\n}\n\nfunction isTypeDate(type) {\n  return startsWith(type, 'date') && !isTypeDateRange(type);\n}\n\nfunction isTypeDateRange(type) {\n  return /-range/.test(type);\n}\n\nfunction NameInput({ name, type, onChange, existingNames, setValidation }) {\n  let helpText = '';\n  let validateStatus = '';\n\n  if (!name) {\n    helpText = 'Choose a keyword for this parameter';\n    setValidation(false);\n  } else if (includes(existingNames, name)) {\n    helpText = 'Parameter with this name already exists';\n    setValidation(false);\n    validateStatus = 'error';\n  } else {\n    if (isTypeDateRange(type)) {\n      helpText = (\n        <React.Fragment>\n          Appears in query as {' '}\n          <code style={{ display: 'inline-block', color: 'inherit' }}>\n            {`{{${name}.start}} {{${name}.end}}`}\n          </code>\n        </React.Fragment>\n      );\n    }\n    setValidation(true);\n  }\n\n  return (\n    <Form.Item\n      required\n      label=\"Keyword\"\n      help={helpText}\n      validateStatus={validateStatus}\n      {...formItemProps}\n    >\n      <Input onChange={e => onChange(e.target.value)} autoFocus />\n    </Form.Item>\n  );\n}\n\nNameInput.propTypes = {\n  name: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  existingNames: PropTypes.arrayOf(PropTypes.string).isRequired,\n  setValidation: PropTypes.func.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nfunction EditParameterSettingsDialog(props) {\n  const [param, setParam] = useState(clone(props.parameter));\n  const [isNameValid, setIsNameValid] = useState(true);\n  const [initialQuery, setInitialQuery] = useState();\n\n  const isNew = !props.parameter.name;\n\n  // fetch query by id\n  useEffect(() => {\n    const { queryId } = props.parameter;\n    if (queryId) {\n      Query.get({ id: queryId }, (query) => {\n        setInitialQuery(query);\n      });\n    }\n  }, []);\n\n  function isFulfilled() {\n    // name\n    if (!isNameValid) {\n      return false;\n    }\n\n    // title\n    if (param.title === '') {\n      return false;\n    }\n\n    // query\n    if (param.type === 'query' && !param.queryId) {\n      return false;\n    }\n\n    return true;\n  }\n\n  function onConfirm(e) {\n    // update title to default\n    if (!param.title) {\n      // forced to do this cause param won't update in time for save\n      param.title = getDefaultTitle(param.name);\n      setParam(param);\n    }\n\n    props.dialog.close(param);\n\n    e.preventDefault(); // stops form redirect\n  }\n\n  return (\n    <Modal\n      {...props.dialog.props}\n      title={isNew ? 'Add Parameter' : param.name}\n      width={600}\n      footer={[(\n        <Button key=\"cancel\" onClick={props.dialog.dismiss}>Cancel</Button>\n      ), (\n        <Button key=\"submit\" htmlType=\"submit\" disabled={!isFulfilled()} type=\"primary\" form=\"paramForm\" data-test=\"SaveParameterSettings\">\n          {isNew ? 'Add Parameter' : 'OK'}\n        </Button>\n      )]}\n    >\n      <Form layout=\"horizontal\" onSubmit={onConfirm} id=\"paramForm\">\n        {isNew && (\n          <NameInput\n            name={param.name}\n            onChange={name => setParam({ ...param, name })}\n            setValidation={setIsNameValid}\n            existingNames={props.existingParams}\n            type={param.type}\n          />\n        )}\n        <Form.Item label=\"Title\" {...formItemProps}>\n          <Input\n            value={isNull(param.title) ? getDefaultTitle(param.name) : param.title}\n            onChange={e => setParam({ ...param, title: e.target.value })}\n          />\n        </Form.Item>\n        <Form.Item label=\"Type\" {...formItemProps}>\n          <Select value={param.type} onChange={type => setParam({ ...param, type })} data-test=\"ParameterTypeSelect\">\n            <Option value=\"text\" data-test=\"TextParameterTypeOption\">Text</Option>\n            <Option value=\"number\" data-test=\"NumberParameterTypeOption\">Number</Option>\n            <Option value=\"enum\">Dropdown List</Option>\n            <Option value=\"query\">Query Based Dropdown List</Option>\n            <Option disabled key=\"dv1\">\n              <Divider className=\"select-option-divider\" />\n            </Option>\n            <Option value=\"date\">Date</Option>\n            <Option value=\"datetime-local\">Date and Time</Option>\n            <Option value=\"datetime-with-seconds\">Date and Time (with seconds)</Option>\n            <Option disabled key=\"dv2\">\n              <Divider className=\"select-option-divider\" />\n            </Option>\n            <Option value=\"date-range\">Date Range</Option>\n            <Option value=\"datetime-range\">Date and Time Range</Option>\n            <Option value=\"datetime-range-with-seconds\">Date and Time Range (with seconds)</Option>\n          </Select>\n        </Form.Item>\n        {isTypeDate(param.type) && (\n          <Form.Item label=\" \" colon={false} {...formItemProps}>\n            <Checkbox\n              defaultChecked={param.useCurrentDateTime}\n              onChange={e => setParam({ ...param, useCurrentDateTime: e.target.checked })}\n            >\n              Default to Today/Now if no other value is set\n            </Checkbox>\n          </Form.Item>\n        )}\n        {param.type === 'enum' && (\n          <Form.Item label=\"Values\" help=\"Dropdown list values (newline delimeted)\" {...formItemProps}>\n            <Input.TextArea\n              rows={3}\n              value={param.enumOptions}\n              onChange={e => setParam({ ...param, enumOptions: e.target.value })}\n            />\n          </Form.Item>\n        )}\n        {param.type === 'query' && (\n          <Form.Item label=\"Query\" help=\"Select query to load dropdown values from\" {...formItemProps}>\n            <QuerySelector\n              selectedQuery={initialQuery}\n              onChange={q => setParam({ ...param, queryId: q && q.id })}\n              type=\"select\"\n            />\n          </Form.Item>\n        )}\n      </Form>\n    </Modal>\n  );\n}\n\nEditParameterSettingsDialog.propTypes = {\n  parameter: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  dialog: DialogPropType.isRequired,\n  existingParams: PropTypes.arrayOf(PropTypes.string),\n};\n\nEditParameterSettingsDialog.defaultProps = {\n  existingParams: [],\n};\n\nexport default wrapDialog(EditParameterSettingsDialog);\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport { react2angular } from 'react2angular';\nimport { debounce, find } from 'lodash';\nimport Input from 'antd/lib/input';\nimport Select from 'antd/lib/select';\nimport { Query } from '@/services/query';\nimport notification from '@/services/notification';\nimport { QueryTagsControl } from '@/components/tags-control/TagsControl';\n\nconst SEARCH_DEBOUNCE_DURATION = 200;\nconst { Option } = Select;\n\nclass StaleSearchError extends Error {\n  constructor() {\n    super('stale search');\n  }\n}\n\nfunction search(term) {\n  // get recent\n  if (!term) {\n    return Query.recent().$promise\n      .then((results) => {\n        const filteredResults = results.filter(item => !item.is_draft); // filter out draft\n        return Promise.resolve(filteredResults);\n      });\n  }\n\n  // search by query\n  return Query.query({ q: term }).$promise\n    .then(({ results }) => Promise.resolve(results));\n}\n\nexport function QuerySelector(props) {\n  const [searchTerm, setSearchTerm] = useState();\n  const [searching, setSearching] = useState();\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedQuery, setSelectedQuery] = useState();\n\n  let isStaleSearch = false;\n  const debouncedSearch = debounce(_search, SEARCH_DEBOUNCE_DURATION);\n  const placeholder = 'Search a query by name';\n  const clearIcon = <i className=\"fa fa-times\" onClick={() => selectQuery(null)} />;\n  const spinIcon = <i className={cx('fa fa-spinner fa-pulse', { hidden: !searching })} />;\n\n  // set selected from prop\n  useEffect(() => {\n    if (props.selectedQuery) {\n      setSelectedQuery(props.selectedQuery);\n    }\n  }, [props.selectedQuery]);\n\n  // on search term changed, debounced\n  useEffect(() => {\n    // clear results, no search\n    if (searchTerm === null) {\n      setSearchResults(null);\n      return () => {};\n    }\n\n    // search\n    debouncedSearch(searchTerm);\n    return () => {\n      debouncedSearch.cancel();\n      isStaleSearch = true;\n    };\n  }, [searchTerm]);\n\n  function _search(term) {\n    setSearching(true);\n    search(term)\n      .then(rejectStale)\n      .then((results) => {\n        setSearchResults(results);\n        setSearching(false);\n      })\n      .catch((err) => {\n        if (!(err instanceof StaleSearchError)) {\n          setSearching(false);\n        }\n      });\n  }\n\n  function rejectStale(results) {\n    return isStaleSearch\n      ? Promise.reject(new StaleSearchError())\n      : Promise.resolve(results);\n  }\n\n  function selectQuery(queryId) {\n    let query = null;\n    if (queryId) {\n      query = find(searchResults, { id: queryId });\n      if (!query) { // shouldn't happen\n        notification.error('Something went wrong...', 'Couldn\\'t select query');\n      }\n    }\n\n    setSearchTerm(query ? null : ''); // empty string triggers recent fetch\n    setSelectedQuery(query);\n    props.onChange(query);\n  }\n\n  function renderResults() {\n    if (!searchResults.length) {\n      return <div className=\"text-muted\">No results matching search term.</div>;\n    }\n\n    return (\n      <div className=\"list-group\">\n        {searchResults.map(q => (\n          <a\n            href=\"javascript:void(0)\"\n            className={cx('query-selector-result', 'list-group-item', { inactive: q.is_draft })}\n            key={q.id}\n            onClick={() => selectQuery(q.id)}\n            data-test={`QueryId${q.id}`}\n          >\n            {q.name}\n            {' '}\n            <QueryTagsControl isDraft={q.is_draft} tags={q.tags} className=\"inline-tags-control\" />\n          </a>\n        ))}\n      </div>\n    );\n  }\n\n  if (props.disabled) {\n    return <Input value={selectedQuery && selectedQuery.name} placeholder={placeholder} disabled />;\n  }\n\n  if (props.type === 'select') {\n    const suffixIcon = selectedQuery ? clearIcon : null;\n    const value = selectedQuery ? selectedQuery.name : searchTerm;\n\n    return (\n      <Select\n        showSearch\n        dropdownMatchSelectWidth={false}\n        placeholder={placeholder}\n        value={value || undefined} // undefined for the placeholder to show\n        onSearch={setSearchTerm}\n        onChange={selectQuery}\n        suffixIcon={searching ? spinIcon : suffixIcon}\n        notFoundContent={null}\n        filterOption={false}\n        defaultActiveFirstOption={false}\n      >\n        {searchResults && searchResults.map((q) => {\n          const disabled = q.is_draft;\n          return (\n            <Option value={q.id} key={q.id} disabled={disabled}>\n              {q.name}{' '}\n              <QueryTagsControl isDraft={q.is_draft} tags={q.tags} className={cx('inline-tags-control', { disabled })} />\n            </Option>\n          );\n        })}\n      </Select>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {selectedQuery ? (\n        <Input value={selectedQuery.name} suffix={clearIcon} readOnly />\n      ) : (\n        <Input\n          placeholder={placeholder}\n          value={searchTerm}\n          onChange={e => setSearchTerm(e.target.value)}\n          suffix={spinIcon}\n        />\n      )}\n      <div className=\"scrollbox\" style={{ maxHeight: '50vh', marginTop: 15 }}>\n        {searchResults && renderResults()}\n      </div>\n    </React.Fragment>\n  );\n}\n\nQuerySelector.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  selectedQuery: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  type: PropTypes.oneOf(['select', 'default']),\n  disabled: PropTypes.bool,\n};\n\nQuerySelector.defaultProps = {\n  selectedQuery: null,\n  type: 'default',\n  disabled: false,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('querySelector', react2angular(QuerySelector));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { BigMessage } from '@/components/BigMessage';\nimport { TagsControl } from '@/components/tags-control/TagsControl';\n\nexport function NoTaggedObjectsFound({ objectType, tags }) {\n  return (\n    <BigMessage icon=\"fa-tags\">\n      No {objectType} found tagged with&nbsp;<TagsControl className=\"inline-tags-control\" tags={Array.from(tags)} />.\n    </BigMessage>\n  );\n}\n\nNoTaggedObjectsFound.propTypes = {\n  objectType: PropTypes.string.isRequired,\n  tags: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.objectOf(Set),\n  ]).isRequired,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('noTaggedObjectsFound', react2angular(NoTaggedObjectsFound));\n}\n\ninit.init = true;\n","import { filter, debounce, find } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport List from 'antd/lib/list';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { BigMessage } from '@/components/BigMessage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport notification from '@/services/notification';\n\nclass SelectItemsDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    dialogTitle: PropTypes.string,\n    inputPlaceholder: PropTypes.string,\n    selectedItemsTitle: PropTypes.string,\n    searchItems: PropTypes.func.isRequired, // (searchTerm: string): Promise<Items[]> if `searchTerm === ''` load all\n    itemKey: PropTypes.func, // (item) => string|number - return key of item (by default `id`)\n    // left list\n    // (item, { isSelected }) => {\n    //   content: node, // item contents\n    //   className: string = '', // additional class for item wrapper\n    //   isDisabled: bool = false, // is item clickable or disabled\n    // }\n    renderItem: PropTypes.func,\n    // right list; args/results save as for `renderItem`. if not specified - `renderItem` will be used\n    renderStagedItem: PropTypes.func,\n    save: PropTypes.func, // (selectedItems[]) => Promise<any>\n  };\n\n  static defaultProps = {\n    dialogTitle: 'Add Items',\n    inputPlaceholder: 'Search...',\n    selectedItemsTitle: 'Selected items',\n    itemKey: item => item.id,\n    renderItem: () => '',\n    renderStagedItem: null, // use `renderItem` by default\n    save: items => items,\n  };\n\n  state = {\n    searchTerm: '',\n    loading: false,\n    items: [],\n    selected: [],\n    saveInProgress: false,\n  };\n\n  // eslint-disable-next-line react/sort-comp\n  loadItems = (searchTerm = '') => {\n    this.setState({ searchTerm, loading: true }, () => {\n      this.props.searchItems(searchTerm)\n        .then((items) => {\n          // If another search appeared while loading data - just reject this set\n          if (this.state.searchTerm === searchTerm) {\n            this.setState({ items, loading: false });\n          }\n        })\n        .catch(() => {\n          if (this.state.searchTerm === searchTerm) {\n            this.setState({ items: [], loading: false });\n          }\n        });\n    });\n  };\n\n  search = debounce(this.loadItems, 200);\n\n  componentDidMount() {\n    this.loadItems();\n  }\n\n  isSelected(item) {\n    const key = this.props.itemKey(item);\n    return !!find(this.state.selected, i => this.props.itemKey(i) === key);\n  }\n\n  toggleItem(item) {\n    if (this.isSelected(item)) {\n      const key = this.props.itemKey(item);\n      this.setState(({ selected }) => ({\n        selected: filter(selected, i => this.props.itemKey(i) !== key),\n      }));\n    } else {\n      this.setState(({ selected }) => ({\n        selected: [...selected, item],\n      }));\n    }\n  }\n\n  save() {\n    this.setState({ saveInProgress: true }, () => {\n      const selectedItems = this.state.selected;\n      Promise.resolve(this.props.save(selectedItems))\n        .then(() => {\n          this.props.dialog.close(selectedItems);\n        })\n        .catch(() => {\n          this.setState({ saveInProgress: false });\n          notification.error('Failed to save some of selected items.');\n        });\n    });\n  }\n\n  renderItem(item, isStagedList) {\n    const { renderItem, renderStagedItem } = this.props;\n    const isSelected = this.isSelected(item);\n    const render = isStagedList ? (renderStagedItem || renderItem) : renderItem;\n\n    const { content, className, isDisabled } = render(item, { isSelected });\n\n    return (\n      <List.Item\n        className={classNames('p-l-10', 'p-r-10', { clickable: !isDisabled, disabled: isDisabled }, className)}\n        onClick={isDisabled ? null : () => this.toggleItem(item)}\n      >\n        {content}\n      </List.Item>\n    );\n  }\n\n  render() {\n    const { dialog, dialogTitle, inputPlaceholder, selectedItemsTitle } = this.props;\n    const { loading, saveInProgress, items, selected } = this.state;\n    const hasResults = items.length > 0;\n    return (\n      <Modal\n        {...dialog.props}\n        width=\"80%\"\n        title={dialogTitle}\n        okText=\"Save\"\n        okButtonProps={{\n          loading: saveInProgress,\n          disabled: selected.length === 0,\n        }}\n        onOk={() => this.save()}\n      >\n        <div className=\"d-flex align-items-center m-b-10\">\n          <div className=\"w-50 m-r-10\">\n            <Input.Search\n              defaultValue={this.state.searchTerm}\n              onChange={event => this.search(event.target.value)}\n              placeholder={inputPlaceholder}\n              autoFocus\n            />\n          </div>\n          <div className=\"w-50 m-l-10\">\n            <h5 className=\"m-0\">{selectedItemsTitle}</h5>\n          </div>\n        </div>\n\n        <div className=\"d-flex align-items-stretch\" style={{ minHeight: '30vh', maxHeight: '50vh' }}>\n          <div className=\"w-50 m-r-10 scrollbox\">\n            {loading && <LoadingState className=\"\" />}\n            {!loading && !hasResults && (\n              <BigMessage icon=\"fa-search\" message=\"No items match your search.\" className=\"\" />\n            )}\n            {!loading && hasResults && (\n              <List\n                size=\"small\"\n                dataSource={items}\n                renderItem={item => this.renderItem(item, false)}\n              />\n            )}\n          </div>\n          <div className=\"w-50 m-l-10 scrollbox\">\n            {(selected.length > 0) && (\n              <List\n                size=\"small\"\n                dataSource={selected}\n                renderItem={item => this.renderItem(item, true)}\n              />\n            )}\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(SelectItemsDialog);\n","import Input from 'antd/lib/input';\nimport { includes, isEmpty } from 'lodash';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport EmptyState from '@/components/items-list/components/EmptyState';\n\nconst { Search } = Input;\n\nexport default class CardsList extends React.Component {\n  static propTypes = {\n    items: PropTypes.arrayOf(\n      PropTypes.shape({\n        title: PropTypes.string.isRequired,\n        imgSrc: PropTypes.string.isRequired,\n        onClick: PropTypes.func,\n        href: PropTypes.string,\n      }),\n    ),\n    showSearch: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    items: [],\n    showSearch: false,\n  };\n\n  state = {\n    searchText: '',\n  };\n\n  constructor(props) {\n    super(props);\n    this.items = [];\n\n    let itemId = 1;\n    props.items.forEach((item) => {\n      this.items.push({ id: itemId, ...item });\n      itemId += 1;\n    });\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  renderListItem(item) {\n    return (\n      <a key={`card${item.id}`} className=\"visual-card\" onClick={item.onClick} href={item.href}>\n        <img alt={item.title} src={item.imgSrc} />\n        <h3>{item.title}</h3>\n      </a>\n    );\n  }\n\n  render() {\n    const { showSearch } = this.props;\n    const { searchText } = this.state;\n\n    const filteredItems = this.items.filter(item => isEmpty(searchText) ||\n      includes(item.title.toLowerCase(), searchText.toLowerCase()));\n\n    return (\n      <div data-test=\"CardsList\">\n        {showSearch && (\n          <div className=\"row p-10\">\n            <div className=\"col-md-4 col-md-offset-4\">\n              <Search\n                placeholder=\"Search...\"\n                onChange={e => this.setState({ searchText: e.target.value })}\n                autoFocus\n              />\n            </div>\n          </div>\n        )}\n        {isEmpty(filteredItems) ? (<EmptyState className=\"\" />) : (\n          <div className=\"row\">\n            <div className=\"col-lg-12 d-inline-flex flex-wrap\">\n              {filteredItems.map(item => this.renderListItem(item))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n","import { markdown } from 'markdown';\nimport { debounce } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport Tooltip from 'antd/lib/tooltip';\nimport Divider from 'antd/lib/divider';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport notification from '@/services/notification';\n\nimport './TextboxDialog.less';\n\nclass TextboxDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dialog: DialogPropType.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n    text: PropTypes.string,\n  };\n\n  static defaultProps = {\n    text: '',\n  };\n\n  updatePreview = debounce(() => {\n    const text = this.state.text;\n    this.setState({\n      preview: markdown.toHTML(text),\n    });\n  }, 100);\n\n  constructor(props) {\n    super(props);\n    const { text } = props;\n    this.state = {\n      saveInProgress: false,\n      text,\n      preview: markdown.toHTML(text),\n    };\n  }\n\n  onTextChanged = (event) => {\n    this.setState({ text: event.target.value });\n    this.updatePreview();\n  };\n\n  saveWidget() {\n    this.setState({ saveInProgress: true });\n\n    this.props.onConfirm(this.state.text)\n      .then(() => {\n        this.props.dialog.close();\n      })\n      .catch(() => {\n        notification.error('Widget could not be added');\n      })\n      .finally(() => {\n        this.setState({ saveInProgress: false });\n      });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const isNew = !this.props.text;\n\n    return (\n      <Modal\n        {...dialog.props}\n        title={isNew ? 'Add Textbox' : 'Edit Textbox'}\n        onOk={() => this.saveWidget()}\n        okButtonProps={{\n          loading: this.state.saveInProgress,\n          disabled: !this.state.text,\n        }}\n        okText={isNew ? 'Add to Dashboard' : 'Save'}\n        width={500}\n        wrapProps={{ 'data-test': 'TextboxDialog' }}\n      >\n        <div className=\"textbox-dialog\">\n          <Input.TextArea\n            className=\"resize-vertical\"\n            rows=\"5\"\n            value={this.state.text}\n            onChange={this.onTextChanged}\n            autoFocus\n            placeholder=\"This is where you write some text\"\n          />\n          <small>\n            Supports basic{' '}\n            <a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=\"https://www.markdownguide.org/cheat-sheet/#basic-syntax\"\n            >\n              <Tooltip title=\"Markdown guide opens in new window\">Markdown</Tooltip>\n            </a>.\n          </small>\n          {this.state.text && (\n            <React.Fragment>\n              <Divider dashed />\n              <strong className=\"preview-title\">Preview:</strong>\n              <p\n                dangerouslySetInnerHTML={{ __html: this.state.preview }} // eslint-disable-line react/no-danger\n                className=\"preview markdown\"\n              />\n            </React.Fragment>\n          )}\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(TextboxDialog);\n","import { isString } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'antd/lib/button';\nimport Modal from 'antd/lib/modal';\nimport Tooltip from 'antd/lib/tooltip';\nimport notification from '@/services/notification';\n\nfunction deleteGroup(event, group, onGroupDeleted) {\n  Modal.confirm({\n    title: 'Delete Group',\n    content: 'Are you sure you want to delete this group?',\n    okText: 'Yes',\n    okType: 'danger',\n    cancelText: 'No',\n    onOk: () => {\n      group.$delete(() => {\n        notification.success('Group deleted successfully.');\n        onGroupDeleted();\n      });\n    },\n  });\n}\n\nexport default function DeleteGroupButton({ group, title, onClick, children, ...props }) {\n  if (!group) {\n    return null;\n  }\n  const button = (\n    <Button {...props} type=\"danger\" onClick={event => deleteGroup(event, group, onClick)}>{children}</Button>\n  );\n\n  if (isString(title) && (title !== '')) {\n    return <Tooltip placement=\"top\" title={title} mouseLeaveDelay={0}>{button}</Tooltip>;\n  }\n\n  return button;\n}\n\nDeleteGroupButton.propTypes = {\n  group: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  title: PropTypes.string,\n  onClick: PropTypes.func,\n  children: PropTypes.node,\n};\n\nDeleteGroupButton.defaultProps = {\n  group: null,\n  title: null,\n  onClick: () => {},\n  children: null,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'antd/lib/button';\nimport Divider from 'antd/lib/divider';\n\nimport * as Sidebar from '@/components/items-list/components/Sidebar';\nimport { ControllerType } from '@/components/items-list/ItemsList';\nimport DeleteGroupButton from './DeleteGroupButton';\n\nimport { currentUser } from '@/services/auth';\n\nexport default function DetailsPageSidebar({\n  controller, group, items,\n  canAddMembers, onAddMembersClick,\n  canAddDataSources, onAddDataSourcesClick,\n  onGroupDeleted,\n}) {\n  const canRemove = group && currentUser.isAdmin && (group.type !== 'builtin');\n\n  return (\n    <React.Fragment>\n      <Sidebar.Menu items={items} selected={controller.params.currentPage} />\n      <Sidebar.PageSizeSelect\n        className=\"m-b-10\"\n        options={controller.pageSizeOptions}\n        value={controller.itemsPerPage}\n        onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n      />\n      {canAddMembers && (\n        <Button className=\"w-100 m-t-5\" type=\"primary\" onClick={onAddMembersClick}>\n          <i className=\"fa fa-plus m-r-5\" />Add Members\n        </Button>\n      )}\n      {canAddDataSources && (\n        <Button className=\"w-100 m-t-5\" type=\"primary\" onClick={onAddDataSourcesClick}>\n          <i className=\"fa fa-plus m-r-5\" />Add Data Sources\n        </Button>\n      )}\n      {canRemove && (\n        <React.Fragment>\n          <Divider dashed className=\"m-t-10 m-b-10\" />\n          <DeleteGroupButton className=\"w-100\" group={group} onClick={onGroupDeleted}>Delete Group</DeleteGroupButton>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n}\n\nDetailsPageSidebar.propTypes = {\n  controller: ControllerType.isRequired,\n  group: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  items: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n\n  canAddMembers: PropTypes.bool,\n  onAddMembersClick: PropTypes.func,\n\n  canAddDataSources: PropTypes.bool,\n  onAddDataSourcesClick: PropTypes.func,\n\n  onGroupDeleted: PropTypes.func,\n};\n\nDetailsPageSidebar.defaultProps = {\n  group: null,\n\n  canAddMembers: false,\n  onAddMembersClick: null,\n\n  canAddDataSources: false,\n  onAddDataSourcesClick: null,\n\n  onGroupDeleted: null,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { EditInPlace } from '@/components/EditInPlace';\nimport { currentUser } from '@/services/auth';\n\nfunction updateGroupName(group, name, onChange) {\n  group.name = name;\n  group.$save();\n  onChange();\n}\n\nexport default function GroupName({ group, onChange, ...props }) {\n  if (!group) {\n    return null;\n  }\n\n  const canEdit = currentUser.isAdmin && (group.type !== 'builtin');\n\n  return (\n    <h3 {...props}>\n      <EditInPlace\n        className=\"edit-in-place\"\n        isEditable={canEdit}\n        ignoreBlanks\n        editor=\"input\"\n        onDone={name => updateGroupName(group, name, onChange)}\n        value={group.name}\n      />\n    </h3>\n  );\n}\n\nGroupName.propTypes = {\n  group: PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    $save: PropTypes.func.isRequired,\n  }),\n  onChange: PropTypes.func,\n};\n\nGroupName.defaultProps = {\n  group: null,\n  onChange: () => {},\n};\n","import { react2angular } from 'react2angular';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'antd/lib/tooltip';\nimport { localizeTime, durationHumanize } from '@/filters';\nimport { RefreshScheduleType, RefreshScheduleDefault } from '../proptypes';\n\nimport './ScheduleDialog.css';\n\nexport class SchedulePhrase extends React.Component {\n  static propTypes = {\n    schedule: RefreshScheduleType,\n    isNew: PropTypes.bool.isRequired,\n    isLink: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    schedule: RefreshScheduleDefault,\n    isLink: false,\n  };\n\n  get content() {\n    const { interval: seconds } = this.props.schedule || SchedulePhrase.defaultProps.schedule;\n    if (!seconds) {\n      return ['Never'];\n    }\n    const humanized = durationHumanize(seconds, {\n      omitSingleValueNumber: true,\n    });\n    const short = `Every ${humanized}`;\n    let full = `Refreshes every ${humanized}`;\n\n    const { time, day_of_week: dayOfWeek } = this.props.schedule;\n    if (time) {\n      full += ` at ${localizeTime(time)}`;\n    }\n    if (dayOfWeek) {\n      full += ` on ${dayOfWeek}`;\n    }\n\n    return [short, full];\n  }\n\n  render() {\n    if (this.props.isNew) {\n      return 'Never';\n    }\n\n    const [short, full] = this.content;\n    const content = full ? <Tooltip title={full}>{short}</Tooltip> : short;\n\n    return this.props.isLink\n      ? <a className=\"schedule-phrase\">{content}</a>\n      : content;\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('schedulePhrase', react2angular(SchedulePhrase));\n}\n\ninit.init = true;\n","// eslint-disable-next-line import/prefer-default-export\nexport function absoluteUrl(url) {\n  const urlObj = new URL(url, window.location);\n  urlObj.protocol = window.location.protocol;\n  urlObj.host = window.location.host;\n  return urlObj.toString();\n}\n","export let Visualization = null; // eslint-disable-line import/no-mutable-exports\n\nexport default function init(ngModule) {\n  ngModule.run(($resource) => {\n    Visualization = $resource('api/visualizations/:id', { id: '@id' });\n  });\n}\n\ninit.init = true;\n","import { isFunction, extend } from 'lodash';\nimport { formatSimpleTemplate } from '@/lib/value-format';\n\nfunction trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction processTags(str, data, defaultColumn) {\n  return formatSimpleTemplate(str, extend({\n    '@': data[defaultColumn],\n  }, data));\n}\n\nexport function renderDefault(column, row) {\n  const value = row[column.name];\n  if (isFunction(column.formatFunction)) {\n    return column.formatFunction(value);\n  }\n  return value;\n}\n\nexport function renderImage(column, row) {\n  const url = trim(processTags(column.imageUrlTemplate, row, column.name));\n  const width = parseInt(processTags(column.imageWidth, row, column.name), 10);\n  const height = parseInt(processTags(column.imageHeight, row, column.name), 10);\n  const title = trim(processTags(column.imageTitleTemplate, row, column.name));\n\n  const result = [];\n  if (url !== '') {\n    result.push('<img src=\"' + url + '\"');\n\n    if (isFinite(width) && (width > 0)) {\n      result.push('width=\"' + width + '\"');\n    }\n    if (isFinite(height) && (height > 0)) {\n      result.push('height=\"' + height + '\"');\n    }\n    if (title !== '') {\n      result.push('title=\"' + title + '\"');\n    }\n\n    result.push('>');\n  }\n\n  return result.join(' ');\n}\n\nexport function renderLink(column, row) {\n  const url = trim(processTags(column.linkUrlTemplate, row, column.name));\n  const title = trim(processTags(column.linkTitleTemplate, row, column.name));\n  const text = trim(processTags(column.linkTextTemplate, row, column.name));\n\n  const result = [];\n  if (url !== '') {\n    result.push('<a href=\"' + url + '\"');\n    if (title !== '') {\n      result.push('title=\"' + title + '\"');\n    }\n    if (column.linkOpenInNewTab) {\n      result.push('target=\"_blank\"');\n    }\n    result.push('>' + (text === '' ? url : text) + '</a>');\n  }\n\n  return result.join(' ');\n}\n","export let Alert = null; // eslint-disable-line import/no-mutable-exports\n\nfunction AlertService($resource, $http) {\n  const actions = {\n    save: {\n      method: 'POST',\n      transformRequest: [(data) => {\n        const newData = Object.assign({}, data);\n        if (newData.query_id === undefined) {\n          newData.query_id = newData.query.id;\n          newData.destination_id = newData.destinations;\n          delete newData.query;\n          delete newData.destinations;\n        }\n\n        return newData;\n      }].concat($http.defaults.transformRequest),\n    },\n  };\n  return $resource('api/alerts/:id', { id: '@id' }, actions);\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('Alert', AlertService);\n\n  ngModule.run(($injector) => {\n    Alert = $injector.get('Alert');\n  });\n}\n\ninit.init = true;\n","import { find } from 'lodash';\nimport debug from 'debug';\nimport recordEvent from '@/services/recordEvent';\n\nconst logger = debug('redash:notifications');\n\nconst Notification = window.Notification || null;\nif (!Notification) {\n  logger('HTML5 notifications are not supported.');\n}\n\nconst hidden = find(\n  ['hidden', 'webkitHidden', 'mozHidden', 'msHidden'],\n  prop => prop in document,\n);\n\nclass NotificationsService {\n  // eslint-disable-next-line class-methods-use-this\n  get pageVisible() {\n    return !document[hidden];\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  getPermissions() {\n    if (Notification && (Notification.permission === 'default')) {\n      Notification.requestPermission((status) => {\n        if (Notification.permission !== status) {\n          Notification.permission = status;\n        }\n      });\n    }\n  }\n\n  showNotification(title, content) {\n    if (!Notification || this.pageVisible || (Notification.permission !== 'granted')) {\n      return;\n    }\n\n    // using the 'tag' to avoid showing duplicate notifications\n    const notification = new Notification(title, {\n      tag: title + content,\n      body: content,\n      icon: '/images/redash_icon_small.png',\n    });\n    setTimeout(() => {\n      notification.close();\n    }, 3000);\n    notification.onclick = function onClick() {\n      window.focus();\n      this.close();\n      recordEvent('click', 'notification');\n    };\n  }\n}\n\nexport default new NotificationsService();\n","module.exports = \"<div class=\\\"query-page-wrapper\\\">\\n  <div class=\\\"container\\\">\\n    <overlay ng-if=\\\"canCreateQuery === false && query.isNew()\\\">\\n      You don't have permission to create new queries on any of the data sources available to you. You can either\\n      <a href=\\\"queries\\\">browse existing queries</a>, or ask for additional permissions from your Redash admin.\\n    </overlay>\\n    <overlay ng-if=\\\"noDataSources && currentUser.isAdmin\\\">\\n      Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please create one\\n      first, and then start querying.\\n      <br/>\\n      <a href=\\\"data_sources/new\\\" class=\\\"btn btn-primary\\\">Create Data Source</a>\\n      <a href=\\\"groups\\\" class=\\\"btn btn-default\\\">Manage Group Permissions</a>\\n    </overlay>\\n    <overlay ng-if=\\\"noDataSources && !currentUser.isAdmin\\\">\\n      Looks like no data sources were created yet (or none of them available to the group(s) you're member of). Please ask your\\n      Redash admin to create one first.\\n    </overlay>\\n\\n    <alert-unsaved-changes ng-if=\\\"canEdit\\\" is-dirty=\\\"isDirty\\\"></alert-unsaved-changes>\\n\\n    <div class=\\\"p-b-10 m-l-0 m-r-0 page-header--new page-header--query\\\">\\n      <div class=\\\"page-title p-0\\\">\\n        <div class=\\\"d-flex flex-nowrap align-items-center\\\">\\n          <favorites-control ng-if=\\\"!query.isNew()\\\" item=\\\"query\\\"></favorites-control>\\n          <h3>\\n            <edit-in-place class=\\\"m-r-5\\\" is-editable=\\\"canEdit\\\" on-done=\\\"saveName\\\"\\n              ignore-blanks=\\\"true\\\" value=\\\"query.name\\\" editor=\\\"'input'\\\"></edit-in-place>\\n            <query-tags-control\\n              class=\\\"query-tags\\\" ng-class=\\\"{'query-tags__empty': query.tags.length == 0}\\\"\\n              tags=\\\"query.tags\\\" is-draft=\\\"query.is_draft\\\" is-archived=\\\"query.is_archived\\\"\\n              can-edit=\\\"isQueryOwner\\\" get-available-tags=\\\"loadTags\\\" on-edit=\\\"saveTags\\\"></query-tags-control>\\n          </h3>\\n\\n          <span class=\\\"flex-fill\\\">&nbsp;</span>\\n\\n          <div class=\\\"p-0 source-control text-right text-nowrap align-self-start m-t-5\\\">\\n            <button class=\\\"btn btn-default btn-publish\\\" ng-click=\\\"togglePublished()\\\" ng-if=\\\"query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n              <span class=\\\"fa fa-paper-plane\\\"></span> Publish\\n            </button>\\n\\n            <span ng-show=\\\"query.id && canViewSource\\\">\\n              <a ng-show=\\\"!sourceMode\\\" ng-href=\\\"{{query.getUrl(true, selectedTab)}}\\\" class=\\\"btn btn-default btn--showhide\\\">\\n                <i class=\\\"fa fa-pencil-square-o\\\" aria-hidden=\\\"true\\\"></i> Edit Source</i>\\n              </a>\\n              <a ng-show=\\\"sourceMode\\\" ng-href=\\\"{{query.getUrl(false, selectedTab)}}\\\" class=\\\"btn btn-default btn--showhide\\\">\\n                <i class=\\\"fa fa-table\\\" aria-hidden=\\\"true\\\"></i> Show Data Only</i>\\n              </a>\\n            </span>\\n\\n            <div ng-if=\\\"query.id != undefined\\\" class=\\\"btn-group query-actions-menu\\\" role=\\\"group\\\" uib-dropdown>\\n              <button class=\\\"btn btn-default dropdown-toggle hidden-xs\\\" uib-dropdown-toggle>\\n                <span class=\\\"zmdi zmdi-more\\\"></span>\\n              </button>\\n              <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n                <li ng-class=\\\"{'disabled': query.id === undefined || !canForkQuery() }\\\">\\n                  <a ng-click=\\\"duplicateQuery()\\\"> Fork <i class=\\\"fa fa-external-link\\\"></i></a>\\n                </li>\\n                <li class=\\\"divider\\\" ng-if=\\\"query.is_archived\\\"></li>\\n                <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n                  <a ng-click=\\\"archiveQuery()\\\">Archive</a>\\n                </li>\\n                <li ng-if=\\\"!query.is_archived && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin')) && showPermissionsControl\\\">\\n                  <a ng-click=\\\"showManagePermissionsModal()\\\">Manage Permissions</a>\\n                </li>\\n                <li ng-if=\\\"!query.is_draft && query.id != undefined && (isQueryOwner || currentUser.hasPermission('admin'))\\\">\\n                  <a ng-click=\\\"togglePublished()\\\">Unpublish</a>\\n                </li>\\n                <li class=\\\"divider\\\" ng-if=\\\"!query.is_archived\\\"></li>\\n                <li ng-if=\\\"query.id != undefined\\\">\\n                  <a ng-click=\\\"showApiKey()\\\">Show API Key</a>\\n                </li>\\n              </ul>\\n            </div>\\n          </div>\\n        </div>\\n        <query-tags-control\\n          class=\\\"query-tags__mobile\\\" ng-class=\\\"{'query-tags__empty': query.tags.length == 0}\\\"\\n          tags=\\\"query.tags\\\" is-draft=\\\"query.is_draft\\\" is-archived=\\\"query.is_archived\\\"\\n          can-edit=\\\"isQueryOwner\\\" get-available-tags=\\\"loadTags\\\" on-edit=\\\"saveTags\\\"></query-tags-control>\\n      </div>\\n    </div>\\n  </div>\\n  <main class=\\\"query-fullscreen\\\">\\n    <nav resizable r-directions=\\\"['right']\\\" r-flex=\\\"true\\\" resizable-toggle toggle-shortcut=\\\"Alt+Shift+D, Alt+D\\\">\\n      <div class=\\\"editor__left__data-source\\\">\\n        <ui-select ng-model=\\\"query.data_source_id\\\" remove-selected=\\\"false\\\" ng-disabled=\\\"!isQueryOwner || !sourceMode\\\"\\n          on-select=\\\"updateDataSource()\\\" data-test=\\\"SelectDataSource\\\">\\n          <ui-select-match placeholder=\\\"Select Data Source...\\\">{{$select.selected.name}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"ds.id as ds in dataSources | filter:$select.search\\\">\\n            {{ds.name}}\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n\\n      <div class=\\\"editor__left__schema\\\" ng-if=\\\"sourceMode\\\">\\n        <schema-browser class=\\\"schema-container\\\" schema=\\\"schema\\\" on-refresh=\\\"refreshSchema()\\\"></schema-browser>\\n      </div>\\n      <div ng-if=\\\"!sourceMode\\\" style=\\\"flex-grow: 1;\\\">&nbsp;</div>\\n\\n      <div class=\\\"query-metadata query-metadata--description\\\" ng-if=\\\"!query.isNew()\\\">\\n        <edit-in-place is-editable=\\\"canEdit\\\" on-done=\\\"saveDescription\\\" editor=\\\"'textarea'\\\" placeholder=\\\"'Add description'\\\" ignore-blanks='false'\\n          value=\\\"query.description\\\" markdown=\\\"true\\\">\\n        </edit-in-place>\\n      </div>\\n\\n      <div class=\\\"query-metadata query-metadata--history\\\" ng-if=\\\"!query.isNew()\\\">\\n        <table>\\n          <tr>\\n            <td>\\n              <img ng-src=\\\"{{ query.user.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\" />\\n              <strong class=\\\"meta__name\\\" ng-class=\\\"{'text-muted': query.user.is_disabled}\\\">{{query.user.name}}</strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n              created\\n              <strong>\\n                <rd-time-ago value=\\\"query.created_at\\\"></rd-time-ago>\\n              </strong>\\n            </td>\\n          </tr>\\n          <tr>\\n            <td>\\n              <img ng-src=\\\"{{ query.last_modified_by.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\" />\\n              <strong class=\\\"meta__name\\\" ng-class=\\\"{'text-muted': query.last_modified_by.is_disabled}\\\">{{query.last_modified_by.name}}</strong>\\n            </td>\\n            <td class=\\\"text-right\\\">\\n              updated\\n              <strong>\\n                <rd-time-ago value=\\\"query.updated_at\\\"></rd-time-ago>\\n              </strong>\\n            </td>\\n          </tr>\\n          <tr>\\n            <td class=\\\"p-t-15\\\">\\n              <span class=\\\"query-metadata__property\\\">\\n                <span class=\\\"zmdi zmdi-refresh\\\"></span> Refresh Schedule</span>\\n            </td>\\n            <td class=\\\"p-t-15 text-right\\\">\\n              <schedule-phrase ng-click=\\\"editSchedule()\\\" is-link=\\\"true\\\" schedule=\\\"query.schedule\\\" is-new=\\\"query.isNew()\\\" />\\n            </td>\\n          </tr>\\n        </table>\\n      </div>\\n    </nav>\\n\\n    <div class=\\\"content\\\">\\n      <div class=\\\"flex-fill p-relative\\\">\\n        <div class=\\\"p-absolute d-flex flex-column p-l-15 p-r-15\\\" style=\\\"left: 0; top: 0; right: 0; bottom: 0; overflow: auto\\\">\\n          <div class=\\\"row editor\\\" resizable r-directions=\\\"['bottom']\\\" r-flex=\\\"true\\\" resizable-toggle\\n               style=\\\"min-height: 11px; max-height: 70vh;\\\" ng-if=\\\"sourceMode\\\">\\n            <query-editor\\n              style=\\\"width: 100%; height: 100%;\\\"\\n              query-text=\\\"query.query\\\"\\n              schema=\\\"schema\\\"\\n              syntax=\\\"dataSource.syntax\\\"\\n              can-edit=\\\"canEdit\\\"\\n              is-dirty=\\\"isDirty\\\"\\n              is-query-owner=\\\"isQueryOwner\\\"\\n              update-data-source=\\\"updateDataSource\\\"\\n              execute-query=\\\"executeQuery\\\"\\n              query-executing=\\\"queryExecuting\\\"\\n              can-execute-query=\\\"canExecuteQuery\\\"\\n              listen-for-resize=\\\"listenForResize\\\"\\n              listen-for-editor-command=\\\"listenForEditorCommand\\\"\\n              save-query=\\\"saveQuery\\\"\\n              update-query=\\\"updateQuery\\\"\\n              update-selected-query=\\\"updateSelectedQuery\\\"\\n              add-new-parameter=\\\"addNewParameter\\\"\\n              data-data-source=\\\"dataSource\\\"\\n              data-data-sources=\\\"dataSources\\\"></query-editor>\\n          </div>\\n\\n          <div class=\\\"row query-metadata__mobile\\\">\\n            <img ng-src=\\\"{{ query.user.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\">\\n            <div class=\\\"flex-fill m-r-10\\\">\\n              <strong class=\\\"meta__name\\\" ng-class=\\\"{'text-muted': query.user.is_disabled}\\\">{{query.user.name}}</strong>\\n              created <rd-time-ago value=\\\"query.created_at\\\"></rd-time-ago>\\n            </div>\\n\\n            <img ng-src=\\\"{{ query.last_modified_by.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\">\\n            <div class=\\\"flex-fill m-r-10\\\">\\n              <strong class=\\\"meta__name\\\" ng-class=\\\"{'text-muted': query.last_modified_by.is_disabled}\\\">{{query.last_modified_by.name}}</strong>\\n              updated <rd-time-ago value=\\\"query.updated_at\\\"></rd-time-ago>\\n            </div>\\n\\n            <div>\\n              <span class=\\\"query-metadata__property\\\">Refresh schedule:</span>\\n              <schedule-phrase ng-click=\\\"editSchedule()\\\" is-link=\\\"true\\\" schedule=\\\"query.schedule\\\" is-new=\\\"query.isNew()\\\" />\\n            </div>\\n          </div>\\n\\n          <section class=\\\"flex-fill p-relative t-body query-visualizations-wrapper\\\">\\n            <div class=\\\"d-flex flex-column p-b-15 p-absolute static-position__mobile\\\" style=\\\"left: 0; top: 0; right: 0; bottom: 0;\\\">\\n              <div class=\\\"p-t-15 p-b-5\\\" ng-if=\\\"query.hasParameters()\\\">\\n                <parameters parameters=\\\"query.getParametersDefs()\\\" sync-values=\\\"!query.isNew()\\\" editable=\\\"sourceMode && canEdit\\\" on-updated=\\\"onParametersUpdated\\\"></parameters>\\n              </div>\\n              <!-- Query Execution Status -->\\n\\n              <div class=\\\"query-alerts\\\">\\n                <div class=\\\"alert alert-info m-t-15\\\" ng-if=\\\"queryResult.getStatus() == 'processing'\\\">\\n                  Executing query&hellip;\\n                  <rd-timer from=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n                  <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\" ng-click=\\\"cancelExecution()\\\">Cancel\\n                  </button>\\n                </div>\\n                <div class=\\\"alert alert-info m-t-15\\\" ng-if=\\\"queryResult.getStatus() == 'loading-result'\\\">\\n                  Loading results&hellip;\\n                  <rd-timer from=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n                </div>\\n                <div class=\\\"alert alert-info m-t-15\\\" ng-if=\\\"queryResult.getStatus() == 'waiting'\\\">\\n                  Query in queue&hellip;\\n                  <rd-timer from=\\\"queryResult.getUpdatedAt()\\\"></rd-timer>\\n                  <button type=\\\"button\\\" class=\\\"btn btn-warning btn-xs pull-right\\\" ng-disabled=\\\"cancelling\\\" ng-click=\\\"cancelExecution()\\\">Cancel\\n                  </button>\\n                </div>\\n                <div class=\\\"alert alert-danger m-t-15\\\" ng-if=\\\"queryResult.getError()\\\">\\n                  Error running query:\\n                  <strong>{{queryResult.getError()}}</strong>\\n                </div>\\n              </div>\\n              <!-- End of Query Execution Status -->\\n\\n              <!-- tabs and data -->\\n              <div ng-if=\\\"showDataset\\\" class=\\\"flex-fill p-relative\\\">\\n                <div class=\\\"d-flex flex-column p-absolute static-position__mobile\\\" style=\\\"left: 0; top: 0; right: 0; bottom: 0;\\\">\\n                  <div class=\\\"p-10\\\" ng-show=\\\"showLog\\\">\\n                    <p>Log Information:</p>\\n                    <p class=\\\"query-log-line\\\" ng-repeat=\\\"l in queryResult.getLog() track by $index\\\">{{l}}</p>\\n                  </div>\\n                  <ul class=\\\"tab-nav\\\" data-test=\\\"QueryPageVisualizationTabs\\\">\\n                    <rd-tab ng-if=\\\"!query.visualizations.length\\\" tab-id=\\\"table\\\" name=\\\"Table\\\" base-path=\\\"query.getUrl(sourceMode)\\\"></rd-tab>\\n                    <rd-tab ng-repeat=\\\"vis in query.visualizations | orderBy:'id'\\\" tab-id=\\\"{{vis.id}}\\\" name=\\\"{{vis.name}}\\\" base-path=\\\"query.getUrl(sourceMode)\\\">\\n                      <span class=\\\"remove hidden-xs\\\" ng-click=\\\"deleteVisualization($event, vis)\\\" ng-if=\\\"canEdit && !($first && (vis.type === 'TABLE'))\\\">\\n                        <i class=\\\"zmdi zmdi-close\\\"></i>\\n                      </span>\\n                    </rd-tab>\\n                    <li class=\\\"rd-tab tab-new-vis\\\">\\n                      <a ng-click=\\\"openVisualizationEditor()\\\" class=\\\"btn btn-default\\\" ng-if=\\\"canEdit\\\" data-test=\\\"NewVisualization\\\">\\n                        <i class=\\\"zmdi zmdi-plus\\\"></i> New Visualization</a>\\n                    </li>\\n                  </ul>\\n                  <div class=\\\"query__vis m-t-15 p-b-15 scrollbox\\\" data-test=\\\"QueryPageVisualization{{ selectedVisualization.id }}\\\">\\n                    <visualization-renderer visualization=\\\"selectedVisualization\\\" query-result=\\\"queryResult\\\"></visualization-renderer>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </section>\\n        </div>\\n      </div>\\n      <div class=\\\"bottom-controller-container\\\" ng-if=\\\"showDataset\\\">\\n        <div class=\\\"bottom-controller\\\">\\n          <edit-visualization-button\\n            ng-if=\\\"!query.isNew() && canEdit\\\"\\n            open-visualization-editor=\\\"openVisualizationEditor\\\"\\n            selected-tab=\\\"selectedTab\\\">\\n          </edit-visualization-button>\\n\\n          <query-control-dropdown\\n            query=\\\"query\\\"\\n            query-result=\\\"queryResult\\\"\\n            query-executing=\\\"queryExecuting\\\"\\n            show-embed-dialog=\\\"showEmbedDialog\\\"\\n            embed=\\\"embed\\\"\\n            apiKey=\\\"apiKey\\\"\\n            selected-tab=\\\"selectedTab\\\"\\n            open-add-to-dashboard-form=\\\"openAddToDashboardForm\\\">\\n          </query-control-dropdown>\\n\\n          <span class=\\\"query-metadata__bottom\\\" ng-if=\\\"queryResult.getData()\\\">\\n            <span class=\\\"query-metadata__property\\\">\\n              <strong>{{queryResult.getData().length}}</strong>\\n              <ng-pluralize count=\\\"queryResult.getData().length\\\" when=\\\"{'0': ' rows', 'one': ' row', 'other': ' rows'}\\\"></ng-pluralize>\\n            </span>\\n            <span class=\\\"query-metadata__property\\\">\\n              <strong ng-show=\\\"!queryExecuting\\\">{{queryResult.getRuntime() | durationHumanize}}</strong>\\n              <span ng-show=\\\"queryExecuting\\\">Running&hellip;</span>\\n              <span class=\\\"hidden-xs\\\">runtime</span>\\n            </span>\\n            <span class=\\\"query-metadata__property\\\" ng-if=\\\"queryResult.query_result.data.metadata.data_scanned\\\">Data Scanned\\n              <strong>{{ queryResult.query_result.data.metadata.data_scanned | prettySize}}</strong>\\n            </span>\\n          </span>\\n\\n          <div>\\n            <span class=\\\"query-metadata__property hidden-xs\\\">\\n              <span class=\\\"hidden-xs\\\">Updated </span>\\n              <rd-time-ago value=\\\"queryResult.query_result.retrieved_at\\\"></rd-time-ago>\\n            </span>\\n\\n            <button class=\\\"m-l-5 btn btn-primary\\\" ng-click=\\\"executeQuery()\\\" ng-disabled=\\\"queryExecuting || !canExecuteQuery()\\\" title=\\\"Refresh Dataset\\\"\\n              ng-if=\\\"!sourceMode\\\">\\n              <span class=\\\"zmdi zmdi-play\\\"></span>\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </main>\\n</div>\\n\"","import moment from 'moment';\nimport { clientConfig } from '@/services/auth';\n\nexport function formatDateTime(value) {\n  if (!value) {\n    return '';\n  }\n\n  const parsed = moment(value);\n  if (!parsed.isValid()) {\n    return '-';\n  }\n\n  return parsed.format(clientConfig.dateTimeFormat);\n}\n\nexport default function init(ngModule) {\n  ngModule.filter('toMilliseconds', () => value => value * 1000.0);\n  ngModule.filter('dateTime', () => formatDateTime);\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport DatePicker from 'antd/lib/date-picker';\nimport { clientConfig } from '@/services/auth';\nimport { Moment } from '@/components/proptypes';\n\nexport function DateTimeInput({\n  value,\n  withSeconds,\n  onSelect,\n  className,\n}) {\n  const format = (clientConfig.dateFormat || 'YYYY-MM-DD') +\n    (withSeconds ? ' HH:mm:ss' : ' HH:mm');\n  const additionalAttributes = {};\n  if (value && value.isValid()) {\n    additionalAttributes.defaultValue = value;\n  }\n  return (\n    <DatePicker\n      className={className}\n      showTime\n      {...additionalAttributes}\n      format={format}\n      placeholder=\"Select Date and Time\"\n      onChange={onSelect}\n    />\n  );\n}\n\nDateTimeInput.propTypes = {\n  value: Moment,\n  withSeconds: PropTypes.bool,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateTimeInput.defaultProps = {\n  value: null,\n  withSeconds: false,\n  onSelect: () => {},\n  className: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('dateTimeInput', react2angular(DateTimeInput));\n}\n\ninit.init = true;\n","import { isArray } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport DatePicker from 'antd/lib/date-picker';\nimport { clientConfig } from '@/services/auth';\nimport { Moment } from '@/components/proptypes';\n\nconst { RangePicker } = DatePicker;\n\nexport function DateTimeRangeInput({\n  value,\n  withSeconds,\n  onSelect,\n  className,\n}) {\n  const format = (clientConfig.dateFormat || 'YYYY-MM-DD') +\n    (withSeconds ? ' HH:mm:ss' : ' HH:mm');\n  const additionalAttributes = {};\n  if (isArray(value) && value[0].isValid() && value[1].isValid()) {\n    additionalAttributes.defaultValue = value;\n  }\n  return (\n    <RangePicker\n      className={className}\n      showTime\n      {...additionalAttributes}\n      format={format}\n      onChange={onSelect}\n    />\n  );\n}\n\nDateTimeRangeInput.propTypes = {\n  value: PropTypes.arrayOf(Moment),\n  withSeconds: PropTypes.bool,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateTimeRangeInput.defaultProps = {\n  value: null,\n  withSeconds: false,\n  onSelect: () => {},\n  className: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('dateTimeRangeInput', react2angular(DateTimeRangeInput));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n\nexport default function QueryResultsLink(props) {\n  let href = '';\n\n  const { query, queryResult, fileType } = props;\n  const resultId = queryResult.getId && queryResult.getId();\n  const resultData = queryResult.getData && queryResult.getData();\n\n  if (resultId && resultData && query.name) {\n    if (query.id) {\n      href = `api/queries/${query.id}/results/${resultId}.${fileType}${\n        props.embed ? `?api_key=${props.apiKey}` : ''\n      }`;\n    } else {\n      href = `api/query_results/${resultId}.${fileType}`;\n    }\n  }\n\n  return (\n    <a target=\"_self\" disabled={props.disabled} href={href}>\n      {props.children}\n    </a>\n  );\n}\n\nQueryResultsLink.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  fileType: PropTypes.string,\n  disabled: PropTypes.bool.isRequired,\n  embed: PropTypes.bool,\n  apiKey: PropTypes.string,\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n};\n\nQueryResultsLink.defaultProps = {\n  queryResult: {},\n  fileType: 'csv',\n  embed: false,\n  apiKey: '',\n};\n","import { useState } from 'react';\n\nexport default function useForceUpdate() {\n  const [, setValue] = useState(false);\n  return () => setValue(value => !value);\n}\n","import { identity, isFunction, isNil, isString } from 'lodash';\n\nclass ItemsFetcher {\n  _getRequest(state, context) {\n    return this._originalGetRequest({}, context);\n  }\n\n  _processResults({ results, count }, state, context) {\n    return {\n      results: this._originalProcessResults(results, context),\n      count,\n    };\n  }\n\n  constructor({ getRequest, doRequest, processResults }) {\n    this._originalGetRequest = isFunction(getRequest) ? getRequest : identity;\n    this._originalDoRequest = doRequest;\n    this._originalProcessResults = isFunction(processResults) ? processResults : identity;\n  }\n\n  fetch(changes, state, context) {\n    const request = this._getRequest(state, context);\n    return this._originalDoRequest(request, context)\n      .then(data => this._processResults(data, state, context));\n  }\n}\n\n// For endpoints that return just an array with items; sorting and pagination\n// is performed on client\nexport class PlainListFetcher extends ItemsFetcher {\n  _allItems = [];\n\n  _getRequest({ searchTerm, selectedTags }, context) {\n    return this._originalGetRequest({\n      q: isString(searchTerm) && (searchTerm !== '') ? searchTerm : undefined,\n      tags: selectedTags,\n    }, context);\n  }\n\n  _processResults(data, { paginator, sorter }, context) {\n    this._allItems = this._originalProcessResults(data, context);\n    this._allItems = sorter.sort(this._allItems);\n    return {\n      results: paginator.getItemsForPage(this._allItems),\n      count: this._allItems.length,\n      allResults: this._allItems,\n    };\n  }\n\n  fetch(changes, state, context) {\n    // For plain lists we need to reload items from server only if tags or search changes.\n    if (isNil(changes) || changes.tags || changes.sorting) {\n      return super.fetch(changes, state, context);\n    }\n    // Sorting and pagination could be updated using previously fetched items.\n    const { paginator, sorter } = state;\n    if (changes.sorting) {\n      this._allItems = sorter.sort(this._allItems);\n    }\n    return Promise.resolve({\n      results: paginator.getItemsForPage(this._allItems),\n      count: this._allItems.length,\n      allResults: this._allItems,\n    });\n  }\n}\n\n// For endpoints that support server-side pagination (return object with\n// items for current page and total items count)\nexport class PaginatedListFetcher extends ItemsFetcher {\n  _getRequest({ paginator, sorter, searchTerm, selectedTags }, context) {\n    return this._originalGetRequest({\n      page: paginator.page,\n      page_size: paginator.itemsPerPage,\n      order: sorter.compiled,\n      q: isString(searchTerm) && (searchTerm !== '') ? searchTerm : undefined,\n      tags: selectedTags,\n    }, context);\n  }\n}\n","import { useState, useEffect } from 'react';\n\nfunction getQueryResultData(queryResult) {\n  return {\n    columns: queryResult ? queryResult.getColumns() : [],\n    rows: queryResult ? queryResult.getData() : [],\n    filters: queryResult ? queryResult.getFilters() : [],\n  };\n}\n\nexport default function useQueryResult(queryResult) {\n  const [data, setData] = useState(getQueryResultData(queryResult));\n  let isCancelled = false;\n  useEffect(() => {\n    if (queryResult) {\n      queryResult.toPromise()\n        .then(() => {\n          if (!isCancelled) {\n            setData(getQueryResultData(queryResult));\n          }\n        });\n    } else {\n      setData(getQueryResultData(queryResult));\n    }\n    return () => {\n      isCancelled = true;\n    };\n  }, [queryResult]);\n  return data;\n}\n","import { isNil, each, forOwn, sortBy, values } from 'lodash';\n\nfunction addPointToSeries(point, seriesCollection, seriesName) {\n  if (seriesCollection[seriesName] === undefined) {\n    seriesCollection[seriesName] = {\n      name: seriesName,\n      type: 'column',\n      data: [],\n    };\n  }\n\n  seriesCollection[seriesName].data.push(point);\n}\n\nexport default function getChartData(data, options) {\n  const series = {};\n\n  const mappings = options.columnMapping;\n\n  each(data, (row) => {\n    let point = { $raw: row };\n    let seriesName = null;\n    let xValue = 0;\n    const yValues = {};\n    let eValue = null;\n    let sizeValue = null;\n    let zValue = null;\n\n    forOwn(row, (v, definition) => {\n      definition = '' + definition;\n      const definitionParts = definition.split('::') || definition.split('__');\n      const name = definitionParts[0];\n      const type = mappings ? mappings[definition] : definitionParts[1];\n      let value = v;\n\n      if (type === 'unused') {\n        return;\n      }\n\n      if (type === 'x') {\n        xValue = value;\n        point[type] = value;\n      }\n      if (type === 'y') {\n        if (value == null) {\n          value = 0;\n        }\n        yValues[name] = value;\n        point[type] = value;\n      }\n      if (type === 'yError') {\n        eValue = value;\n        point[type] = value;\n      }\n\n      if (type === 'series') {\n        seriesName = String(value);\n      }\n\n      if (type === 'size') {\n        point[type] = value;\n        sizeValue = value;\n      }\n\n      if (type === 'zVal') {\n        point[type] = value;\n        zValue = value;\n      }\n\n      if (type === 'multiFilter' || type === 'multi-filter') {\n        seriesName = String(value);\n      }\n    });\n\n    if (isNil(seriesName)) {\n      each(yValues, (yValue, ySeriesName) => {\n        point = { x: xValue, y: yValue, $raw: point.$raw };\n        if (eValue !== null) {\n          point.yError = eValue;\n        }\n\n        if (sizeValue !== null) {\n          point.size = sizeValue;\n        }\n\n        if (zValue !== null) {\n          point.zVal = zValue;\n        }\n        addPointToSeries(point, series, ySeriesName);\n      });\n    } else {\n      addPointToSeries(point, series, seriesName);\n    }\n  });\n  return sortBy(values(series), ({ name }) => {\n    if (options.seriesOptions[name]) {\n      return options.seriesOptions[name].zIndex;\n    }\n    return 0;\n  });\n}\n","import React from 'react';\nimport Tooltip from 'antd/lib/tooltip';\nimport PropTypes from 'prop-types';\nimport '@/redash-font/style.less';\nimport recordEvent from '@/services/recordEvent';\n\nexport default function AutocompleteToggle({ state, disabled, onToggle }) {\n  let tooltipMessage = 'Live Autocomplete Enabled';\n  let icon = 'icon-flash';\n  if (!state) {\n    tooltipMessage = 'Live Autocomplete Disabled';\n    icon = 'icon-flash-off';\n  }\n\n  if (disabled) {\n    tooltipMessage = 'Live Autocomplete Not Available (Use Ctrl+Space to Trigger)';\n    icon = 'icon-flash-off';\n  }\n\n  const toggle = (newState) => {\n    recordEvent('toggle_autocomplete', 'screen', 'query_editor', { state: newState });\n    onToggle(newState);\n  };\n\n  return (\n    <Tooltip placement=\"top\" title={tooltipMessage}>\n      <button\n        type=\"button\"\n        className={'btn btn-default m-r-5' + (disabled ? ' disabled' : '')}\n        onClick={() => toggle(!state)}\n        disabled={disabled}\n      >\n        <i className={'icon ' + icon} />\n      </button>\n    </Tooltip>\n  );\n}\n\nAutocompleteToggle.propTypes = {\n  state: PropTypes.bool.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  onToggle: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport DatePicker from 'antd/lib/date-picker';\nimport { clientConfig } from '@/services/auth';\nimport { Moment } from '@/components/proptypes';\n\nexport function DateInput({\n  value,\n  onSelect,\n  className,\n}) {\n  const format = clientConfig.dateFormat || 'YYYY-MM-DD';\n  const additionalAttributes = {};\n  if (value && value.isValid()) {\n    additionalAttributes.defaultValue = value;\n  }\n  return (\n    <DatePicker\n      className={className}\n      {...additionalAttributes}\n      format={format}\n      placeholder=\"Select Date\"\n      onChange={onSelect}\n    />\n  );\n}\n\nDateInput.propTypes = {\n  value: Moment,\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateInput.defaultProps = {\n  value: null,\n  onSelect: () => {},\n  className: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('dateInput', react2angular(DateInput));\n}\n\ninit.init = true;\n","import { isArray } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport DatePicker from 'antd/lib/date-picker';\nimport { clientConfig } from '@/services/auth';\nimport { Moment } from '@/components/proptypes';\n\nconst { RangePicker } = DatePicker;\n\nexport function DateRangeInput({\n  value,\n  onSelect,\n  className,\n}) {\n  const format = clientConfig.dateFormat || 'YYYY-MM-DD';\n  const additionalAttributes = {};\n  if (isArray(value) && value[0].isValid() && value[1].isValid()) {\n    additionalAttributes.defaultValue = value;\n  }\n  return (\n    <RangePicker\n      className={className}\n      {...additionalAttributes}\n      format={format}\n      onChange={onSelect}\n    />\n  );\n}\n\nDateRangeInput.propTypes = {\n  value: PropTypes.arrayOf(Moment),\n  onSelect: PropTypes.func,\n  className: PropTypes.string,\n};\n\nDateRangeInput.defaultProps = {\n  value: null,\n  onSelect: () => {},\n  className: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('dateRangeInput', react2angular(DateRangeInput));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { trim } from 'lodash';\n\nexport class EditInPlace extends React.Component {\n  static propTypes = {\n    ignoreBlanks: PropTypes.bool,\n    isEditable: PropTypes.bool,\n    editor: PropTypes.string.isRequired,\n    placeholder: PropTypes.string,\n    value: PropTypes.string,\n    onDone: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    ignoreBlanks: false,\n    isEditable: true,\n    placeholder: '',\n    value: '',\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      editing: false,\n    };\n    this.inputRef = React.createRef();\n    const self = this;\n    this.componentDidUpdate = (prevProps, prevState) => {\n      if (self.state.editing && !prevState.editing) {\n        self.inputRef.current.focus();\n      }\n    };\n  }\n\n  startEditing = () => {\n    if (this.props.isEditable) {\n      this.setState({ editing: true });\n    }\n  };\n\n  stopEditing = () => {\n    const newValue = trim(this.inputRef.current.value);\n    const ignorableBlank = this.props.ignoreBlanks && newValue === '';\n    if (!ignorableBlank && newValue !== this.props.value) {\n      this.props.onDone(newValue);\n    }\n    this.setState({ editing: false });\n  };\n\n  keyDown = (event) => {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      event.preventDefault();\n      this.stopEditing();\n    } else if (event.keyCode === 27) {\n      this.setState({ editing: false });\n    }\n  };\n\n  renderNormal = () => (\n    <span\n      role=\"presentation\"\n      onFocus={this.startEditing}\n      onClick={this.startEditing}\n      className={this.props.isEditable ? 'editable' : ''}\n    >\n      {this.props.value || this.props.placeholder}\n    </span>\n  );\n\n  renderEdit = () => React.createElement(this.props.editor, {\n    ref: this.inputRef,\n    className: 'rd-form-control',\n    defaultValue: this.props.value,\n    onBlur: this.stopEditing,\n    onKeyDown: this.keyDown,\n  });\n\n  render() {\n    return (\n      <span className={'edit-in-place' + (this.state.editing ? ' active' : '')}>\n        {this.state.editing ? this.renderEdit() : this.renderNormal()}\n      </span>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('editInPlace', react2angular(EditInPlace));\n}\n\ninit.init = true;\n","import { map, trim, uniq, compact } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'antd/lib/select';\nimport Modal from 'antd/lib/modal';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\n\nclass EditTagsDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    tags: PropTypes.arrayOf(PropTypes.string),\n    getAvailableTags: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    tags: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      availableTags: [],\n      result: uniq(map(this.props.tags, trim)),\n    };\n  }\n\n  componentDidMount() {\n    this.props.getAvailableTags().then((availableTags) => {\n      this.setState({\n        loading: false,\n        availableTags: uniq(compact(map(availableTags, trim))),\n      });\n    });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const { loading, availableTags, result } = this.state;\n    return (\n      <Modal\n        {...dialog.props}\n        onOk={() => dialog.close(result)}\n        title=\"Add/Edit Tags\"\n        className=\"shortModal\"\n      >\n        <Select\n          mode=\"tags\"\n          className=\"w-100\"\n          placeholder=\"Add some tags...\"\n          defaultValue={result}\n          onChange={values => this.setState({ result: compact(map(values, trim)) })}\n          autoFocus\n          disabled={loading}\n          loading={loading}\n        >\n          {map(availableTags, tag => <Select.Option key={tag}>{tag}</Select.Option>)}\n        </Select>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EditTagsDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { currentUser, clientConfig } from '@/services/auth';\n\nexport function EmailSettingsWarning({ featureName }) {\n  return (clientConfig.mailSettingsMissing && currentUser.isAdmin) ? (\n    <p className=\"alert alert-danger\">\n      {`It looks like your mail server isn't configured. Make sure to configure it for the ${featureName} to work.`}\n    </p>\n  ) : null;\n}\n\nEmailSettingsWarning.propTypes = {\n  featureName: PropTypes.string.isRequired,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('emailSettingsWarning', react2angular(EmailSettingsWarning));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { $rootScope } from '@/services/ng';\n\nexport class FavoritesControl extends React.Component {\n  static propTypes = {\n    item: PropTypes.shape({\n      is_favorite: PropTypes.bool.isRequired,\n    }).isRequired,\n    onChange: PropTypes.func,\n    // Force component update when `item` changes.\n    // Remove this when `react2angular` will finally go to hell\n    forceUpdate: PropTypes.string, // eslint-disable-line react/no-unused-prop-types\n  };\n\n  static defaultProps = {\n    onChange: () => {},\n    forceUpdate: '',\n  };\n\n  toggleItem(event, item, callback) {\n    const action = item.is_favorite ? item.$unfavorite.bind(item) : item.$favorite.bind(item);\n    const savedIsFavorite = item.is_favorite;\n\n    action().then(() => {\n      item.is_favorite = !savedIsFavorite;\n      this.forceUpdate();\n      $rootScope.$broadcast('reloadFavorites');\n      callback();\n    });\n  }\n\n  render() {\n    const { item, onChange } = this.props;\n    const icon = item.is_favorite ? 'fa fa-star' : 'fa fa-star-o';\n    const title = item.is_favorite ? 'Remove from favorites' : 'Add to favorites';\n    return (\n      <a\n        href=\"javascript:void(0)\"\n        title={title}\n        className=\"btn-favourite\"\n        onClick={event => this.toggleItem(event, item, onChange)}\n      >\n        <i className={icon} aria-hidden=\"true\" />\n      </a>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('favoritesControlImpl', react2angular(FavoritesControl));\n  ngModule.component('favoritesControl', {\n    template: `\n      <favorites-control-impl \n        ng-if=\"$ctrl.item\" \n        item=\"$ctrl.item\" \n        on-change=\"$ctrl.onChange\"\n        force-update=\"$ctrl.forceUpdateTag\"\n      ></favorites-control-impl>\n    `,\n    bindings: {\n      item: '=',\n    },\n    controller($scope) {\n      // See comment for FavoritesControl.propTypes.forceUpdate\n      this.forceUpdateTag = 'force' + Date.now();\n      $scope.$on('reloadFavorites', () => {\n        this.forceUpdateTag = 'force' + Date.now();\n      });\n\n      this.onChange = () => {\n        $scope.$applyAsync();\n      };\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Select from 'antd/lib/select';\nimport Input from 'antd/lib/input';\nimport InputNumber from 'antd/lib/input-number';\nimport { DateInput } from './DateInput';\nimport { DateRangeInput } from './DateRangeInput';\nimport { DateTimeInput } from './DateTimeInput';\nimport { DateTimeRangeInput } from './DateTimeRangeInput';\nimport { QueryBasedParameterInput } from './QueryBasedParameterInput';\n\nconst { Option } = Select;\n\nexport class ParameterValueInput extends React.Component {\n  static propTypes = {\n    type: PropTypes.string,\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    enumOptions: PropTypes.string,\n    queryId: PropTypes.number,\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    onSelect: PropTypes.func,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    type: 'text',\n    value: null,\n    enumOptions: '',\n    queryId: null,\n    parameter: null,\n    onSelect: () => {},\n    className: '',\n  };\n\n  renderDateTimeWithSecondsInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateTimeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n        withSeconds\n      />\n    );\n  }\n\n  renderDateTimeInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateTimeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderDateInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderDateTimeRangeWithSecondsInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateTimeRangeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n        withSeconds\n      />\n    );\n  }\n\n  renderDateTimeRangeInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateTimeRangeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderDateRangeInput() {\n    const { value, onSelect } = this.props;\n    return (\n      <DateRangeInput\n        className={this.props.className}\n        value={value}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderEnumInput() {\n    const { value, onSelect, enumOptions } = this.props;\n    const enumOptionsArray = enumOptions.split('\\n').filter(v => v !== '');\n    return (\n      <Select\n        className={this.props.className}\n        disabled={enumOptionsArray.length === 0}\n        defaultValue={value}\n        onChange={onSelect}\n        dropdownMatchSelectWidth={false}\n        dropdownClassName=\"ant-dropdown-in-bootstrap-modal\"\n      >\n        {enumOptionsArray.map(option => (<Option key={option} value={option}>{ option }</Option>))}\n      </Select>\n    );\n  }\n\n  renderQueryBasedInput() {\n    const { value, onSelect, queryId, parameter } = this.props;\n    return (\n      <QueryBasedParameterInput\n        className={this.props.className}\n        parameter={parameter}\n        value={value}\n        queryId={queryId}\n        onSelect={onSelect}\n      />\n    );\n  }\n\n  renderNumberInput() {\n    const { value, onSelect, className } = this.props;\n    return (\n      <InputNumber\n        className={'form-control ' + className}\n        defaultValue={!isNaN(value) && value || 0}\n        onChange={onSelect}\n      />\n    );\n  }\n\n  renderTextInput() {\n    const { value, onSelect, className } = this.props;\n    return (\n      <Input\n        className={'form-control ' + className}\n        defaultValue={value || ''}\n        data-test=\"TextParamInput\"\n        onChange={event => onSelect(event.target.value)}\n      />\n    );\n  }\n\n  render() {\n    const { type } = this.props;\n    switch (type) {\n      case 'datetime-with-seconds': return this.renderDateTimeWithSecondsInput();\n      case 'datetime-local': return this.renderDateTimeInput();\n      case 'date': return this.renderDateInput();\n      case 'datetime-range-with-seconds': return this.renderDateTimeRangeWithSecondsInput();\n      case 'datetime-range': return this.renderDateTimeRangeInput();\n      case 'date-range': return this.renderDateRangeInput();\n      case 'enum': return this.renderEnumInput();\n      case 'query': return this.renderQueryBasedInput();\n      case 'number': return this.renderNumberInput();\n      default: return this.renderTextInput();\n    }\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('parameterValueInput', {\n    template: `\n      <parameter-value-input-impl\n        type=\"$ctrl.param.type\"\n        value=\"$ctrl.param.normalizedValue\"\n        parameter=\"$ctrl.param\"\n        enum-options=\"$ctrl.param.enumOptions\"\n        query-id=\"$ctrl.param.queryId\"\n        on-select=\"$ctrl.setValue\"\n      ></parameter-value-input-impl>\n    `,\n    bindings: {\n      param: '<',\n    },\n    controller($scope) {\n      this.setValue = (value) => {\n        this.param.setValue(value);\n        $scope.$applyAsync();\n      };\n    },\n  });\n  ngModule.component('parameterValueInputImpl', react2angular(ParameterValueInput));\n}\n\ninit.init = true;\n","import { find, isFunction, toString } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport Select from 'antd/lib/select';\n\nconst { Option } = Select;\n\nexport class QueryBasedParameterInput extends React.Component {\n  static propTypes = {\n    parameter: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    value: PropTypes.any, // eslint-disable-line react/forbid-prop-types\n    queryId: PropTypes.number,\n    onSelect: PropTypes.func,\n    className: PropTypes.string,\n  };\n\n  static defaultProps = {\n    value: null,\n    parameter: null,\n    queryId: null,\n    onSelect: () => {},\n    className: '',\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: [],\n      loading: false,\n    };\n  }\n\n  componentDidMount() {\n    this._loadOptions(this.props.queryId);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.queryId !== prevProps.queryId) {\n      this._loadOptions(this.props.queryId);\n    }\n  }\n\n  async _loadOptions(queryId) {\n    if (queryId && (queryId !== this.state.queryId)) {\n      this.setState({ loading: true });\n      const options = await this.props.parameter.loadDropdownValues();\n\n      // stale queryId check\n      if (this.props.queryId === queryId) {\n        this.setState({ options, loading: false });\n\n        const found = find(options, option => option.value === this.props.value) !== undefined;\n        if (!found && isFunction(this.props.onSelect)) {\n          this.props.onSelect(options[0].value);\n        }\n      }\n    }\n  }\n\n  render() {\n    const { className, value, onSelect } = this.props;\n    const { loading, options } = this.state;\n    return (\n      <span>\n        <Select\n          className={className}\n          disabled={loading || (options.length === 0)}\n          loading={loading}\n          value={toString(value)}\n          onChange={onSelect}\n          dropdownMatchSelectWidth={false}\n          dropdownClassName=\"ant-dropdown-in-bootstrap-modal\"\n        >\n          {options.map(option => (<Option value={option.value} key={option.value}>{option.name}</Option>))}\n        </Select>\n      </span>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('queryBasedParameterInput', react2angular(QueryBasedParameterInput));\n}\n\ninit.init = true;\n","export let QuerySnippet = null; // eslint-disable-line import/no-mutable-exports\n\nfunction QuerySnippetService($resource) {\n  const resource = $resource('api/query_snippets/:id', { id: '@id' });\n  resource.prototype.getSnippet = function getSnippet() {\n    let name = this.trigger;\n    if (this.description !== '') {\n      name = `${this.trigger}: ${this.description}`;\n    }\n\n    return {\n      name,\n      content: this.snippet,\n      tabTrigger: this.trigger,\n    };\n  };\n\n  return resource;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('QuerySnippet', QuerySnippetService);\n\n  ngModule.run(($injector) => {\n    QuerySnippet = $injector.get('QuerySnippet');\n  });\n}\n\ninit.init = true;\n","import { each, trim, without } from 'lodash';\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/global-bind/mousetrap-global-bind';\n\nexport let KeyboardShortcuts = null; // eslint-disable-line import/no-mutable-exports\n\nconst handlers = {};\n\nfunction onShortcut(event, shortcut) {\n  event.preventDefault();\n  event.retunValue = false;\n  each(handlers[shortcut], fn => fn());\n}\n\nfunction KeyboardShortcutsService() {\n  this.modKey = /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'Cmd' : 'Ctrl';\n\n  this.bind = function bind(keymap) {\n    each(keymap, (fn, key) => {\n      const keys = key\n        .toLowerCase()\n        .split(',')\n        .map(trim);\n      each(keys, (k) => {\n        handlers[k] = [...without(handlers[k], fn), fn];\n        Mousetrap.bindGlobal(k, onShortcut);\n      });\n    });\n  };\n\n  this.unbind = function unbind(keymap) {\n    each(keymap, (fn, key) => {\n      const keys = key\n        .toLowerCase()\n        .split(',')\n        .map(trim);\n      each(keys, (k) => {\n        handlers[k] = without(handlers[k], fn);\n        if (handlers[k].length === 0) {\n          handlers[k] = undefined;\n          Mousetrap.unbind(k);\n        }\n      });\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.service('KeyboardShortcuts', KeyboardShortcutsService);\n\n  ngModule.run(($injector) => {\n    KeyboardShortcuts = $injector.get('KeyboardShortcuts');\n  });\n}\n\ninit.init = true;\n","import { map } from 'lodash';\n\nfunction buildTableColumnKeywords(table) {\n  const keywords = [];\n  table.columns.forEach((column) => {\n    keywords.push({\n      caption: column,\n      name: `${table.name}.${column}`,\n      value: `${table.name}.${column}`,\n      score: 100,\n      meta: 'Column',\n      className: 'completion',\n    });\n  });\n  return keywords;\n}\n\nfunction buildKeywordsFromSchema(schema) {\n  const tableKeywords = [];\n  const columnKeywords = {};\n  const tableColumnKeywords = {};\n\n  schema.forEach((table) => {\n    tableKeywords.push({\n      name: table.name,\n      value: table.name,\n      score: 100,\n      meta: 'Table',\n    });\n    tableColumnKeywords[table.name] = buildTableColumnKeywords(table);\n    table.columns.forEach((c) => {\n      columnKeywords[c] = 'Column';\n    });\n  });\n\n  return {\n    table: tableKeywords,\n    column: map(columnKeywords, (v, k) => ({\n      name: k,\n      value: k,\n      score: 50,\n      meta: v,\n    })),\n    tableColumn: tableColumnKeywords,\n  };\n}\n\nexport default {\n  buildKeywordsFromSchema,\n};\n","import { map } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport classNames from 'classnames';\nimport getTags from '@/services/getTags';\n\nexport class TagsList extends React.Component {\n  static propTypes = {\n    tagsUrl: PropTypes.string.isRequired,\n    onUpdate: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onUpdate: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // An array of objects that with the name and count of the tagged items\n      allTags: [],\n      // A set of tag names\n      selectedTags: new Set(),\n    };\n  }\n\n  componentDidMount() {\n    getTags(this.props.tagsUrl).then((allTags) => {\n      this.setState({ allTags });\n    });\n  }\n\n  toggleTag(event, tag) {\n    const { selectedTags } = this.state;\n    if (event.shiftKey) {\n      // toggle tag\n      if (selectedTags.has(tag)) {\n        selectedTags.delete(tag);\n      } else {\n        selectedTags.add(tag);\n      }\n    } else {\n      // if the tag is the only selected, deselect it, otherwise select only it\n      if (selectedTags.has(tag) && (selectedTags.size === 1)) {\n        selectedTags.clear();\n      } else {\n        selectedTags.clear();\n        selectedTags.add(tag);\n      }\n    }\n    this.forceUpdate();\n\n    this.props.onUpdate([...this.state.selectedTags]);\n  }\n\n  render() {\n    const { allTags, selectedTags } = this.state;\n    if (allTags.length > 0) {\n      return (\n        <div className=\"list-group m-t-10 tags-list tiled\">\n          {map(allTags, tag => (\n            <a\n              key={tag.name}\n              href=\"javascript:void(0)\"\n              className={classNames('list-group-item', 'max-character', { active: selectedTags.has(tag.name) })}\n              onClick={event => this.toggleTag(event, tag.name)}\n            >\n              <span className=\"badge badge-light\">{tag.count}</span>\n              <span className=\"tags-list__name\">{tag.name}</span>\n            </a>\n          ))}\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('tagsList', react2angular(TagsList));\n}\n\ninit.init = true;\n","import PromiseRejectionError from '@/lib/promise-rejection-error';\n\n// eslint-disable-next-line import/prefer-default-export\nexport class ErrorHandler {\n  constructor() {\n    this.logToConsole = true;\n    this.reset();\n  }\n\n  reset() {\n    this.error = null;\n  }\n\n  process(error) {\n    this.reset();\n    if (this.logToConsole) {\n      // Log raw error object\n      // eslint-disable-next-line no-console\n      console.error(error);\n    }\n    if (\n      (error === null) ||\n      (error instanceof PromiseRejectionError)\n    ) {\n      this.error = error;\n    }\n  }\n}\n","import { each, values, map, includes, first } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from 'antd/lib/select';\nimport Modal from 'antd/lib/modal';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport {\n  MappingType,\n  ParameterMappingListInput,\n} from '@/components/ParameterMappingInput';\nimport { QuerySelector } from '@/components/QuerySelector';\n\nimport notification from '@/services/notification';\n\nimport { Query } from '@/services/query';\n\nconst { Option, OptGroup } = Select;\n\nclass AddWidgetDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dialog: DialogPropType.isRequired,\n    onConfirm: PropTypes.func.isRequired,\n  };\n\n  state = {\n    saveInProgress: false,\n    selectedQuery: null,\n    selectedVis: null,\n    parameterMappings: [],\n  };\n\n  selectQuery(selectedQuery) {\n    // Clear previously selected query (if any)\n    this.setState({\n      selectedQuery: null,\n      selectedVis: null,\n      parameterMappings: [],\n    });\n\n    if (selectedQuery) {\n      Query.get({ id: selectedQuery.id }, (query) => {\n        if (query) {\n          const existingParamNames = map(\n            this.props.dashboard.getParametersDefs(),\n            param => param.name,\n          );\n          this.setState({\n            selectedQuery: query,\n            parameterMappings: map(query.getParametersDefs(), param => ({\n              name: param.name,\n              type: includes(existingParamNames, param.name)\n                ? MappingType.DashboardMapToExisting : MappingType.DashboardAddNew,\n              mapTo: param.name,\n              value: param.normalizedValue,\n              title: '',\n              param,\n            })),\n          });\n          if (query.visualizations.length) {\n            this.setState({ selectedVis: query.visualizations[0] });\n          }\n        }\n      });\n    }\n  }\n\n  selectVisualization(query, visualizationId) {\n    each(query.visualizations, (visualization) => {\n      if (visualization.id === visualizationId) {\n        this.setState({ selectedVis: visualization });\n        return false;\n      }\n    });\n  }\n\n  saveWidget() {\n    const { selectedVis, parameterMappings } = this.state;\n\n    this.setState({ saveInProgress: true });\n\n    this.props.onConfirm(selectedVis, parameterMappings)\n      .then(() => {\n        this.props.dialog.close();\n      })\n      .catch(() => {\n        notification.error('Widget could not be added');\n      })\n      .finally(() => {\n        this.setState({ saveInProgress: false });\n      });\n  }\n\n  updateParamMappings(parameterMappings) {\n    this.setState({ parameterMappings });\n  }\n\n  renderVisualizationInput() {\n    let visualizationGroups = {};\n    if (this.state.selectedQuery) {\n      each(this.state.selectedQuery.visualizations, (vis) => {\n        visualizationGroups[vis.type] = visualizationGroups[vis.type] || [];\n        visualizationGroups[vis.type].push(vis);\n      });\n    }\n    visualizationGroups = values(visualizationGroups);\n    return (\n      <div>\n        <div className=\"form-group\">\n          <label htmlFor=\"choose-visualization\">Choose Visualization</label>\n          <Select\n            id=\"choose-visualization\"\n            className=\"w-100\"\n            defaultValue={first(this.state.selectedQuery.visualizations).id}\n            onChange={visualizationId => this.selectVisualization(this.state.selectedQuery, visualizationId)}\n            dropdownClassName=\"ant-dropdown-in-bootstrap-modal\"\n          >\n            {visualizationGroups.map(visualizations => (\n              <OptGroup label={visualizations[0].type} key={visualizations[0].type}>\n                {visualizations.map(visualization => (\n                  <Option value={visualization.id} key={visualization.id}>{visualization.name}</Option>\n                ))}\n              </OptGroup>\n            ))}\n          </Select>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const existingParams = this.props.dashboard.getParametersDefs();\n    const { dialog } = this.props;\n\n    return (\n      <Modal\n        {...dialog.props}\n        title=\"Add Widget\"\n        onOk={() => this.saveWidget()}\n        okButtonProps={{\n          loading: this.state.saveInProgress,\n          disabled: !this.state.selectedQuery,\n        }}\n        okText=\"Add to Dashboard\"\n        width={700}\n      >\n        <div data-test=\"AddWidgetDialog\">\n          <QuerySelector onChange={query => this.selectQuery(query)} />\n          {this.state.selectedQuery && this.renderVisualizationInput()}\n\n          {\n            (this.state.parameterMappings.length > 0) && [\n              <label key=\"parameters-title\" htmlFor=\"parameter-mappings\">Parameters</label>,\n              <ParameterMappingListInput\n                key=\"parameters-list\"\n                id=\"parameter-mappings\"\n                mappings={this.state.parameterMappings}\n                existingParams={existingParams}\n                onChange={mappings => this.updateParamMappings(mappings)}\n              />,\n            ]\n          }\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(AddWidgetDialog);\n","import { isMatch, map, find, sortBy } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport {\n  MappingType,\n  ParameterMappingListInput,\n  parameterMappingsToEditableMappings,\n  editableMappingsToParameterMappings,\n  synchronizeWidgetTitles,\n} from '@/components/ParameterMappingInput';\nimport notification from '@/services/notification';\n\nexport function getParamValuesSnapshot(mappings, dashboardParameters) {\n  return map(\n    sortBy(mappings, m => m.name),\n    (m) => {\n      let param;\n      switch (m.type) {\n        case MappingType.StaticValue:\n          return [m.name, m.value];\n        case MappingType.WidgetLevel:\n          return [m.name, m.param.value];\n        case MappingType.DashboardAddNew:\n        case MappingType.DashboardMapToExisting:\n          param = find(dashboardParameters, p => p.name === m.mapTo);\n          return [m.name, param ? param.value : null];\n        // no default\n      }\n    },\n  );\n}\n\nclass EditParameterMappingsDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    widget: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    dialog: DialogPropType.isRequired,\n  };\n\n  originalParamValuesSnapshot = null\n\n  constructor(props) {\n    super(props);\n\n    const parameterMappings = parameterMappingsToEditableMappings(\n      props.widget.options.parameterMappings,\n      props.widget.query.getParametersDefs(),\n      map(this.props.dashboard.getParametersDefs(), p => p.name),\n    );\n\n    this.originalParamValuesSnapshot = getParamValuesSnapshot(\n      parameterMappings,\n      this.props.dashboard.getParametersDefs(),\n    );\n\n    this.state = {\n      saveInProgress: false,\n      parameterMappings,\n    };\n  }\n\n  saveWidget() {\n    const widget = this.props.widget;\n\n    this.setState({ saveInProgress: true });\n\n    const newMappings = editableMappingsToParameterMappings(this.state.parameterMappings);\n    widget.options.parameterMappings = newMappings;\n\n    const valuesChanged = !isMatch(\n      this.originalParamValuesSnapshot,\n      getParamValuesSnapshot(this.state.parameterMappings, this.props.dashboard.getParametersDefs()),\n    );\n\n    const widgetsToSave = [\n      widget,\n      ...synchronizeWidgetTitles(widget.options.parameterMappings, this.props.dashboard.widgets),\n    ];\n\n    Promise.all(map(widgetsToSave, w => w.save()))\n      .then(() => {\n        this.props.dialog.close(valuesChanged);\n      })\n      .catch(() => {\n        notification.error('Widget cannot be updated');\n      })\n      .finally(() => {\n        this.setState({ saveInProgress: false });\n      });\n  }\n\n  updateParamMappings(parameterMappings) {\n    this.setState({ parameterMappings });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    return (\n      <Modal\n        {...dialog.props}\n        title=\"Parameters\"\n        onOk={() => this.saveWidget()}\n        okButtonProps={{ loading: this.state.saveInProgress }}\n        width={700}\n      >\n        {(this.state.parameterMappings.length > 0) && (\n          <ParameterMappingListInput\n            mappings={this.state.parameterMappings}\n            existingParams={this.props.dashboard.getParametersDefs()}\n            onChange={mappings => this.updateParamMappings(mappings)}\n          />\n        )}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(EditParameterMappingsDialog);\n","import { isArray } from 'lodash';\nimport { $q } from '@/services/ng';\nimport { currentUser, clientConfig } from '@/services/auth';\n\n/* eslint-disable class-methods-use-this */\n\nexport default class DefaultPolicy {\n  refresh() {\n    return $q.resolve(this);\n  }\n\n  canCreateDataSource() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateDataSourceEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  canCreateDestination() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateDestinationEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  canCreateDashboard() {\n    return currentUser.hasPermission('create_dashboard');\n  }\n\n  isCreateDashboardEnabled() {\n    return currentUser.hasPermission('create_dashboard');\n  }\n\n  canCreateAlert() {\n    return true;\n  }\n\n  canCreateUser() {\n    return currentUser.isAdmin;\n  }\n\n  isCreateUserEnabled() {\n    return currentUser.isAdmin;\n  }\n\n  getDashboardRefreshIntervals() {\n    const result = clientConfig.dashboardRefreshIntervals;\n    return isArray(result) ? result : null;\n  }\n\n  getQueryRefreshIntervals() {\n    const result = clientConfig.queryRefreshIntervals;\n    return isArray(result) ? result : null;\n  }\n}\n","import { isFunction, isArray, isObject, isString, isNumber, isUndefined, each, keys, filter } from 'lodash';\nimport $ from 'jquery';\nimport './json-view-interactive.less';\n\nfunction isPrimitive(value) {\n  return (value === null) || (value === false) || (value === true) ||\n    (isNumber(value) && isFinite(value));\n}\n\nfunction combine(...functions) {\n  functions = filter(functions, isFunction);\n  return (...args) => {\n    each(functions, (fn) => {\n      fn(...args);\n    });\n  };\n}\n\nfunction initToggle(toggle, toggleBlockFn) {\n  if (isFunction(toggleBlockFn)) {\n    let visible = false;\n    const icon = $('<i>').addClass('fa fa-caret-right').appendTo(toggle.empty());\n    toggleBlockFn(visible);\n    toggle.on('click', () => {\n      visible = !visible;\n      icon.toggleClass('fa-caret-right fa-caret-down');\n      toggleBlockFn(visible);\n    });\n  } else {\n    toggle.addClass('hidden');\n  }\n}\n\nfunction createRenderNestedBlock(block, ellipsis, values, renderKeys) {\n  return (show) => {\n    if (show) {\n      ellipsis.addClass('hidden');\n      block.removeClass('hidden').empty();\n\n      let firstItem = null;\n      let lastItem = null;\n      each(values, (val, key) => {\n        const nestedBlock = $('<span>').addClass('jvi-item').appendTo(block);\n        firstItem = firstItem || nestedBlock;\n        lastItem = nestedBlock;\n\n        const toggle = $('<span>').addClass('jvi-toggle').appendTo(nestedBlock);\n\n        if (renderKeys) {\n          const keyWrapper = $('<span>').addClass('jvi-object-key').appendTo(nestedBlock);\n          // eslint-disable-next-line no-use-before-define\n          renderString(keyWrapper, key);\n          $('<span>').addClass('jvi-punctuation').text(': ').appendTo(nestedBlock);\n        }\n        // eslint-disable-next-line no-use-before-define\n        const toggleBlockFn = renderValue(nestedBlock, val, true);\n        initToggle(toggle, toggleBlockFn);\n      });\n\n      if (firstItem) {\n        firstItem.addClass('jvi-nested-first');\n      }\n      if (lastItem) {\n        lastItem.addClass('jvi-nested-last');\n      }\n    } else {\n      block.addClass('hidden').empty();\n      ellipsis.removeClass('hidden');\n    }\n  };\n}\n\nfunction renderComma($element) {\n  return $('<span>').addClass('jvi-punctuation jvi-comma').text(',').appendTo($element);\n}\n\nfunction renderEllipsis($element) {\n  const result = $('<span>')\n    .addClass('jvi-punctuation jvi-ellipsis')\n    .html('&hellip;')\n    .appendTo($element)\n    .on('click', () => {\n      result.parents('.jvi-item').eq(0).find('.jvi-toggle').trigger('click');\n    });\n  return result;\n}\n\nfunction renderPrimitive($element, value, comma) {\n  $('<span>').addClass('jvi-value jvi-primitive').text('' + value).appendTo($element);\n  if (comma) {\n    renderComma($element);\n  }\n  return null;\n}\n\nfunction renderString($element, value, comma) {\n  $('<span>').addClass('jvi-punctuation jvi-string').text('\"').appendTo($element);\n  $('<span>').addClass('jvi-value jvi-string').text(value).appendTo($element);\n  $('<span>').addClass('jvi-punctuation jvi-string').text('\"').appendTo($element);\n  if (comma) {\n    renderComma($element);\n  }\n  return null;\n}\n\nfunction renderComment($element, count) {\n  const text = ' // ' + count + ' ' + (count === 1 ? 'item' : 'items');\n  const comment = $('<span>').addClass('jvi-comment').text(text).appendTo($element);\n  return (show) => {\n    if (show) {\n      comment.addClass('hidden');\n    } else {\n      comment.removeClass('hidden');\n    }\n  };\n}\n\nfunction renderBrace($element, isForArray, isOpening) {\n  const openingBrace = isForArray ? '[' : '{';\n  const closingBrace = isForArray ? ']' : '}';\n  const brace = isOpening ? openingBrace : closingBrace;\n  return $('<span>').addClass('jvi-punctuation jvi-braces').text(brace).appendTo($element);\n}\n\nfunction renderWithNested($element, values, comma, valuesIsArray) {\n  const count = valuesIsArray ? values.length : keys(values).length;\n  let result = null;\n\n  renderBrace($element, valuesIsArray, true);\n  if (count > 0) {\n    const ellipsis = renderEllipsis($element);\n    const block = $('<span>').addClass('jvi-block hidden').appendTo($element);\n    result = createRenderNestedBlock(block, ellipsis, values, !valuesIsArray);\n  }\n  renderBrace($element, valuesIsArray, false);\n\n  if (comma) {\n    renderComma($element);\n  }\n\n  if (count > 0) {\n    result = combine(renderComment($element, count), result);\n  }\n  return result;\n}\n\nfunction renderArray($element, values, comma) {\n  return renderWithNested($element, values, comma, true);\n}\n\nfunction renderObject($element, value, comma) {\n  return renderWithNested($element, value, comma, false);\n}\n\nfunction renderValue($element, value, comma) {\n  $element = $('<span>').appendTo($element);\n\n  if (isPrimitive(value)) {\n    return renderPrimitive($element, value, comma);\n  } else if (isString(value)) {\n    return renderString($element, value, comma);\n  } else if (isArray(value)) {\n    return renderArray($element, value, comma);\n  } else if (isObject(value)) {\n    return renderObject($element, value, comma);\n  }\n}\n\nexport default function renderJsonView(container, value) {\n  if ((container instanceof $) && !isUndefined(value) && !isFunction(value)) {\n    const block = $('<span>').addClass('jvi-item').appendTo(container);\n    const toggle = $('<span>').addClass('jvi-toggle').appendTo(block);\n    const toggleBlockFn = renderValue(block, value);\n    initToggle(toggle, toggleBlockFn);\n  }\n}\n","import React from 'react';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { Group } from '@/services/group';\n\nclass CreateGroupDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n  };\n\n  state = {\n    name: '',\n  };\n\n  save = () => {\n    this.props.dialog.close(new Group({\n      name: this.state.name,\n    }));\n  };\n\n  render() {\n    const { dialog } = this.props;\n    return (\n      <Modal {...dialog.props} title=\"Create a New Group\" okText=\"Create\" onOk={() => this.save()}>\n        <Input\n          className=\"form-control\"\n          defaultValue={this.state.name}\n          onChange={event => this.setState({ name: event.target.value })}\n          onPressEnter={() => this.save()}\n          placeholder=\"Group Name\"\n          autoFocus\n        />\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateGroupDialog);\n","import { isUndefined } from 'lodash';\n\nexport default class Paginator {\n  page = 1;\n\n  itemsPerPage = 20;\n\n  totalCount = 0;\n\n  get totalPages() {\n    return Math.ceil(this.totalCount / this.itemsPerPage);\n  }\n\n  setPage(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 1;\n    if (validate) {\n      this.page = ((value >= 1) && (value <= this.totalPages)) ? value : 1;\n    } else {\n      this.page = (value >= 1) ? value : 1;\n    }\n  }\n\n  setItemsPerPage(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 20;\n    this.itemsPerPage = (value >= 1) ? value : 1;\n    if (validate) {\n      this.setPage(this.page, validate);\n    }\n  }\n\n  setTotalCount(value, validate = true) {\n    if (isUndefined(value)) {\n      return;\n    }\n    value = parseInt(value, 10) || 0;\n    this.totalCount = value;\n    if (validate) {\n      this.setPage(this.page, validate);\n    }\n  }\n\n  constructor({ page, itemsPerPage, totalCount, validate = true } = {}) {\n    this.setItemsPerPage(itemsPerPage, validate);\n    this.setTotalCount(totalCount, validate);\n    this.setPage(page, validate);\n  }\n\n  getItemsForPage(items) {\n    const first = this.itemsPerPage * (this.page - 1);\n    const last = first + this.itemsPerPage;\n\n    return items.slice(first, last);\n  }\n}\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport DatePicker from 'antd/lib/date-picker';\nimport TimePicker from 'antd/lib/time-picker';\nimport Select from 'antd/lib/select';\nimport Radio from 'antd/lib/radio';\nimport { capitalize, clone, isEqual } from 'lodash';\nimport moment from 'moment';\nimport { secondsToInterval, durationHumanize, pluralize, IntervalEnum, localizeTime } from '@/filters';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { RefreshScheduleType, RefreshScheduleDefault, Moment } from '../proptypes';\n\nimport './ScheduleDialog.css';\n\nconst WEEKDAYS_SHORT = moment.weekdaysShort();\nconst WEEKDAYS_FULL = moment.weekdays();\nconst DATE_FORMAT = 'YYYY-MM-DD';\nconst HOUR_FORMAT = 'HH:mm';\nconst { Option, OptGroup } = Select;\n\nexport function TimeEditor(props) {\n  const [time, setTime] = useState(props.defaultValue);\n  const showUtc = time && !time.isUTC();\n\n  function onChange(newTime) {\n    setTime(newTime);\n    props.onChange(newTime);\n  }\n\n  return (\n    <React.Fragment>\n      <TimePicker\n        allowClear={false}\n        value={time}\n        format={HOUR_FORMAT}\n        minuteStep={5}\n        onChange={onChange}\n      />\n      {showUtc && (\n        <span className=\"utc\" data-testid=\"utc\">\n          ({ moment.utc(time).format(HOUR_FORMAT) } UTC)\n        </span>\n      )}\n    </React.Fragment>\n  );\n}\n\nTimeEditor.propTypes = {\n  defaultValue: Moment,\n  onChange: PropTypes.func.isRequired,\n};\n\nTimeEditor.defaultProps = {\n  defaultValue: null,\n};\n\nclass ScheduleDialog extends React.Component {\n  static propTypes = {\n    schedule: RefreshScheduleType,\n    refreshOptions: PropTypes.arrayOf(PropTypes.number).isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  static defaultProps = {\n    schedule: RefreshScheduleDefault,\n  };\n\n  state = this.getState();\n\n  getState() {\n    const newSchedule = clone(this.props.schedule || ScheduleDialog.defaultProps.schedule);\n    const { time, interval: seconds, day_of_week: day } = newSchedule;\n    const { interval } = secondsToInterval(seconds);\n    const [hour, minute] = time ? localizeTime(time).split(':') : [null, null];\n\n    return {\n      hour,\n      minute,\n      seconds,\n      interval,\n      dayOfWeek: day ? WEEKDAYS_SHORT[WEEKDAYS_FULL.indexOf(day)] : null,\n      newSchedule,\n    };\n  }\n\n  get intervals() {\n    const ret = {\n      [IntervalEnum.NEVER]: [],\n    };\n    this.props.refreshOptions.forEach((seconds) => {\n      const { count, interval } = secondsToInterval(seconds);\n      if (!(interval in ret)) {\n        ret[interval] = [];\n      }\n      ret[interval].push([count, seconds]);\n    });\n\n    Object.defineProperty(this, 'intervals', { value: ret }); // memoize\n\n    return ret;\n  }\n\n  set newSchedule(newProps) {\n    this.setState(prevState => ({\n      newSchedule: Object.assign(prevState.newSchedule, newProps),\n    }));\n  }\n\n  setTime = (time) => {\n    this.newSchedule = {\n      time: moment(time)\n        .utc()\n        .format(HOUR_FORMAT),\n    };\n  };\n\n  setInterval = (newSeconds) => {\n    const { newSchedule } = this.state;\n    const { interval: newInterval } = secondsToInterval(newSeconds);\n\n    // resets to defaults\n    if (newInterval === IntervalEnum.NEVER) {\n      newSchedule.until = null;\n    }\n    if ([IntervalEnum.NEVER, IntervalEnum.MINUTES, IntervalEnum.HOURS].indexOf(newInterval) !== -1) {\n      newSchedule.time = null;\n    }\n    if (newInterval !== IntervalEnum.WEEKS) {\n      newSchedule.day_of_week = null;\n    }\n    if (\n      (newInterval === IntervalEnum.DAYS || newInterval === IntervalEnum.WEEKS) &&\n      (!this.state.minute || !this.state.hour)\n    ) {\n      newSchedule.time = moment()\n        .hour('00')\n        .minute('15')\n        .utc()\n        .format(HOUR_FORMAT);\n    }\n    if (newInterval === IntervalEnum.WEEKS && !this.state.dayOfWeek) {\n      newSchedule.day_of_week = WEEKDAYS_FULL[0];\n    }\n\n    newSchedule.interval = newSeconds;\n\n    const [hour, minute] = newSchedule.time ? localizeTime(newSchedule.time).split(':') : [null, null];\n\n    this.setState({\n      interval: newInterval,\n      seconds: newSeconds,\n      hour,\n      minute,\n      dayOfWeek: newSchedule.day_of_week ? WEEKDAYS_SHORT[WEEKDAYS_FULL.indexOf(newSchedule.day_of_week)] : null,\n    });\n\n    this.newSchedule = newSchedule;\n  };\n\n  setScheduleUntil = (_, date) => {\n    this.newSchedule = { until: date };\n  };\n\n  setWeekday = (e) => {\n    const dayOfWeek = e.target.value;\n    this.setState({ dayOfWeek });\n    this.newSchedule = {\n      day_of_week: dayOfWeek ? WEEKDAYS_FULL[WEEKDAYS_SHORT.indexOf(dayOfWeek)] : null,\n    };\n  };\n\n  setUntilToggle = (e) => {\n    const date = e.target.value ? moment().format(DATE_FORMAT) : null;\n    this.setScheduleUntil(null, date);\n  };\n\n  save() {\n    const { newSchedule } = this.state;\n\n    // save if changed\n    if (!isEqual(newSchedule, this.props.schedule)) {\n      if (newSchedule.interval) {\n        this.props.dialog.close(clone(newSchedule));\n      } else {\n        this.props.dialog.close(null);\n      }\n    }\n    this.props.dialog.dismiss();\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const {\n      interval,\n      minute,\n      hour,\n      seconds,\n      newSchedule: { until },\n    } = this.state;\n\n    return (\n      <Modal {...dialog.props} title=\"Refresh Schedule\" className=\"schedule\" onOk={() => this.save()}>\n        <div className=\"schedule-component\">\n          <h5>Refresh every</h5>\n          <div data-testid=\"interval\">\n            <Select className=\"input\" value={seconds} onChange={this.setInterval} dropdownMatchSelectWidth={false}>\n              <Option value={null} key=\"never\">\n                Never\n              </Option>\n              {Object.keys(this.intervals).map(int => (\n                <OptGroup label={capitalize(pluralize(int))} key={int}>\n                  {this.intervals[int].map(([cnt, secs]) => (\n                    <Option value={secs} key={cnt}>\n                      {durationHumanize(secs)}\n                    </Option>\n                  ))}\n                </OptGroup>\n              ))}\n            </Select>\n          </div>\n        </div>\n        {[IntervalEnum.DAYS, IntervalEnum.WEEKS].indexOf(interval) !== -1 ? (\n          <div className=\"schedule-component\">\n            <h5>On time</h5>\n            <div data-testid=\"time\">\n              <TimeEditor\n                defaultValue={hour ? moment().hour(hour).minute(minute) : null}\n                onChange={this.setTime}\n              />\n            </div>\n          </div>\n        ) : null}\n        {IntervalEnum.WEEKS === interval ? (\n          <div className=\"schedule-component\">\n            <h5>On day</h5>\n            <div data-testid=\"weekday\">\n              <Radio.Group size=\"medium\" defaultValue={this.state.dayOfWeek} onChange={this.setWeekday}>\n                {WEEKDAYS_SHORT.map(day => (\n                  <Radio.Button value={day} key={day} className=\"input\">\n                    {day[0]}\n                  </Radio.Button>\n                ))}\n              </Radio.Group>\n            </div>\n          </div>\n        ) : null}\n        {interval !== IntervalEnum.NEVER ? (\n          <div className=\"schedule-component\">\n            <h5>Ends</h5>\n            <div className=\"ends\" data-testid=\"ends\">\n              <Radio.Group size=\"medium\" value={!!until} onChange={this.setUntilToggle}>\n                <Radio value={false}>Never</Radio>\n                <Radio value>On</Radio>\n              </Radio.Group>\n              {until ? (\n                <DatePicker\n                  size=\"small\"\n                  className=\"datepicker\"\n                  value={moment(until)}\n                  allowClear={false}\n                  format={DATE_FORMAT}\n                  onChange={this.setScheduleUntil}\n                />\n              ) : null}\n            </div>\n          </div>\n        ) : null}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ScheduleDialog);\n","import React from 'react';\nimport Form from 'antd/lib/form';\nimport Modal from 'antd/lib/modal';\nimport Input from 'antd/lib/input';\nimport { isFunction } from 'lodash';\nimport { User } from '@/services/user';\nimport notification from '@/services/notification';\nimport { UserProfile } from '../proptypes';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\n\nclass ChangePasswordDialog extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      currentPassword: { value: '', error: null, touched: false },\n      newPassword: { value: '', error: null, touched: false },\n      repeatPassword: { value: '', error: null, touched: false },\n      updatingPassword: false,\n    };\n  }\n\n  fieldError = (name, value) => {\n    if (value.length === 0) return 'This field is required.';\n    if (name !== 'currentPassword' && value.length < 6) return 'This field is too short.';\n    if (name === 'repeatPassword' && value !== this.state.newPassword.value) return 'Passwords don\\'t match';\n    return null;\n  };\n\n  validateFields = (callback) => {\n    const { currentPassword, newPassword, repeatPassword } = this.state;\n\n    const errors = {\n      currentPassword: this.fieldError('currentPassword', currentPassword.value),\n      newPassword: this.fieldError('newPassword', newPassword.value),\n      repeatPassword: this.fieldError('repeatPassword', repeatPassword.value),\n    };\n\n    this.setState({\n      currentPassword: { ...currentPassword, error: errors.currentPassword },\n      newPassword: { ...newPassword, error: errors.newPassword },\n      repeatPassword: { ...repeatPassword, error: errors.repeatPassword },\n    });\n\n    if (isFunction(callback)) {\n      if (errors.currentPassword || errors.newPassword || errors.repeatPassword) {\n        callback(errors);\n      } else callback(null);\n    }\n  }\n\n  updatePassword = () => {\n    const { currentPassword, newPassword, updatingPassword } = this.state;\n\n    if (!updatingPassword) {\n      this.validateFields((err) => {\n        if (!err) {\n          const userData = {\n            id: this.props.user.id,\n            old_password: currentPassword.value,\n            password: newPassword.value,\n          };\n\n          this.setState({ updatingPassword: true });\n\n          User.save(userData, () => {\n            notification.success('Saved.');\n            this.props.dialog.close({ success: true });\n          }, (error = {}) => {\n            notification.error(error.data && error.data.message || 'Failed saving.');\n            this.setState({ updatingPassword: false });\n          });\n        } else {\n          this.setState(prevState => ({\n            currentPassword: { ...prevState.currentPassword, touched: true },\n            newPassword: { ...prevState.newPassword, touched: true },\n            repeatPassword: { ...prevState.repeatPassword, touched: true },\n          }));\n        }\n      });\n    }\n  }\n\n  handleChange = (e) => {\n    const { name, value } = e.target;\n    const { error } = this.state[name];\n\n    this.setState({ [name]: { value, error, touched: true } }, () => {\n      this.validateFields();\n    });\n  }\n\n  render() {\n    const { dialog } = this.props;\n    const { currentPassword, newPassword, repeatPassword, updatingPassword } = this.state;\n\n    const formItemProps = { className: 'm-b-10', required: true };\n\n    const inputProps = {\n      onChange: this.handleChange,\n      onPressEnter: this.updatePassword,\n    };\n\n    return (\n      <Modal\n        {...dialog.props}\n        okButtonProps={{ loading: updatingPassword }}\n        onOk={this.updatePassword}\n        title=\"Change Password\"\n      >\n        <Form layout=\"vertical\">\n          <Form.Item\n            {...formItemProps}\n            validateStatus={currentPassword.touched && currentPassword.error ? 'error' : null}\n            help={currentPassword.touched ? currentPassword.error : null}\n            label=\"Current Password\"\n          >\n            <Input.Password {...inputProps} name=\"currentPassword\" data-test=\"CurrentPassword\" autoFocus />\n          </Form.Item>\n          <Form.Item\n            {...formItemProps}\n            validateStatus={newPassword.touched && newPassword.error ? 'error' : null}\n            help={newPassword.touched ? newPassword.error : null}\n            label=\"New Password\"\n          >\n            <Input.Password {...inputProps} name=\"newPassword\" data-test=\"NewPassword\" />\n          </Form.Item>\n          <Form.Item\n            {...formItemProps}\n            validateStatus={repeatPassword.touched && repeatPassword.error ? 'error' : null}\n            help={repeatPassword.touched ? repeatPassword.error : null}\n            label=\"Repeat New Password\"\n          >\n            <Input.Password {...inputProps} name=\"repeatPassword\" data-test=\"RepeatPassword\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ChangePasswordDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport Alert from 'antd/lib/alert';\nimport DynamicForm from '@/components/dynamic-form/DynamicForm';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport recordEvent from '@/services/recordEvent';\n\nclass CreateUserDialog extends React.Component {\n  static propTypes = {\n    dialog: DialogPropType.isRequired,\n    onCreate: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { savingUser: false, errorMessage: null };\n    this.form = React.createRef();\n  }\n\n  componentDidMount() {\n    recordEvent('view', 'page', 'users/new');\n  }\n\n  createUser = () => {\n    this.form.current.validateFieldsAndScroll((err, values) => {\n      if (!err) {\n        this.setState({ savingUser: true });\n        this.props.onCreate(values).then(() => {\n          this.props.dialog.close();\n        }).catch((error) => {\n          this.setState({ savingUser: false, errorMessage: error.message });\n        });\n      }\n    });\n  };\n\n  render() {\n    const { savingUser, errorMessage } = this.state;\n    const formFields = [\n      { name: 'name', title: 'Name', type: 'text', autoFocus: true },\n      { name: 'email', title: 'Email', type: 'email' },\n    ].map(field => ({ required: true, props: { onPressEnter: this.createUser }, ...field }));\n\n    return (\n      <Modal\n        {...this.props.dialog.props}\n        title=\"Create a New User\"\n        okText=\"Create\"\n        okButtonProps={{ loading: savingUser }}\n        onOk={() => this.createUser()}\n      >\n        <DynamicForm fields={formFields} ref={this.form} hideSubmitButton />\n        {errorMessage && <Alert message={errorMessage} type=\"error\" showIcon />}\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(CreateUserDialog);\n","import React, { Fragment } from 'react';\nimport { includes } from 'lodash';\nimport Alert from 'antd/lib/alert';\nimport Button from 'antd/lib/button';\nimport Form from 'antd/lib/form';\nimport Modal from 'antd/lib/modal';\nimport Tag from 'antd/lib/tag';\nimport { User } from '@/services/user';\nimport { Group } from '@/services/group';\nimport { currentUser } from '@/services/auth';\nimport { absoluteUrl } from '@/services/utils';\nimport { UserProfile } from '../proptypes';\nimport DynamicForm from '../dynamic-form/DynamicForm';\nimport ChangePasswordDialog from './ChangePasswordDialog';\nimport InputWithCopy from '../InputWithCopy';\n\nexport default class UserEdit extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: this.props.user,\n      groups: [],\n      loadingGroups: true,\n      regeneratingApiKey: false,\n      sendingPasswordEmail: false,\n      resendingInvitation: false,\n      togglingUser: false,\n    };\n  }\n\n  componentDidMount() {\n    Group.query((groups) => {\n      this.setState({\n        groups: groups.map(({ id, name }) => ({ value: id, title: name })),\n        loadingGroups: false,\n      });\n    });\n  }\n\n  changePassword = () => {\n    ChangePasswordDialog.showModal({ user: this.props.user });\n  };\n\n  sendPasswordReset = () => {\n    this.setState({ sendingPasswordEmail: true });\n\n    User.sendPasswordReset(this.state.user).then((passwordLink) => {\n      this.setState({ passwordLink });\n    }).finally(() => {\n      this.setState({ sendingPasswordEmail: false });\n    });\n  };\n\n  resendInvitation = () => {\n    this.setState({ resendingInvitation: true });\n\n    User.resendInvitation(this.state.user).then((passwordLink) => {\n      this.setState({ passwordLink });\n    }).finally(() => {\n      this.setState({ resendingInvitation: false });\n    });\n  };\n\n  regenerateApiKey = () => {\n    const doRegenerate = () => {\n      this.setState({ regeneratingApiKey: true });\n      User.regenerateApiKey(this.state.user).then((apiKey) => {\n        if (apiKey) {\n          const { user } = this.state;\n          this.setState({ user: { ...user, apiKey } });\n        }\n      }).finally(() => {\n        this.setState({ regeneratingApiKey: false });\n      });\n    };\n\n    Modal.confirm({\n      title: 'Regenerate API Key',\n      content: 'Are you sure you want to regenerate?',\n      okText: 'Regenerate',\n      onOk: doRegenerate,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  toggleUser = () => {\n    const { user } = this.state;\n    const toggleUser = user.isDisabled ? User.enableUser : User.disableUser;\n\n    this.setState({ togglingUser: true });\n    toggleUser(user).then((data) => {\n      if (data) {\n        this.setState({ user: User.convertUserInfo(data.data) });\n      }\n    }).finally(() => {\n      this.setState({ togglingUser: false });\n    });\n  };\n\n  saveUser = (values, successCallback, errorCallback) => {\n    const data = {\n      id: this.props.user.id,\n      ...values,\n    };\n\n    User.save(data, (user) => {\n      successCallback('Saved.');\n      this.setState({ user: User.convertUserInfo(user) });\n    }, (error = {}) => {\n      errorCallback(error.data && error.data.message || 'Failed saving.');\n    });\n  };\n\n  renderUserInfoForm() {\n    const { user, groups, loadingGroups } = this.state;\n\n    const formFields = [\n      {\n        name: 'name',\n        title: 'Name',\n        type: 'text',\n        initialValue: user.name,\n      },\n      {\n        name: 'email',\n        title: 'Email',\n        type: 'email',\n        initialValue: user.email,\n      },\n      (!user.isDisabled && currentUser.id !== user.id) ? {\n        name: 'group_ids',\n        title: 'Groups',\n        type: 'select',\n        mode: 'multiple',\n        options: groups,\n        initialValue: groups.filter(group => includes(user.groupIds, group.value)).map(group => group.value),\n        loading: loadingGroups,\n        placeholder: loadingGroups ? 'Loading...' : '',\n      } : {\n        name: 'group_ids',\n        title: 'Groups',\n        type: 'content',\n        content: this.renderUserGroups(),\n      },\n    ].map(field => ({ readOnly: user.isDisabled, required: true, ...field }));\n\n    return (\n      <DynamicForm\n        fields={formFields}\n        onSubmit={this.saveUser}\n        hideSubmitButton={user.isDisabled}\n      />\n    );\n  }\n\n  renderUserGroups() {\n    const { user, groups, loadingGroups } = this.state;\n\n    return loadingGroups ? 'Loading...' : (\n      <div data-test=\"Groups\">\n        {groups.filter(group => includes(user.groupIds, group.value)).map((group => (\n          <Tag className=\"m-b-5 m-r-5\" key={group.value}>\n            <a href={`groups/${group.value}`}>{group.title}</a>\n          </Tag>\n        )))}\n      </div>\n    );\n  }\n\n  renderApiKey() {\n    const { user, regeneratingApiKey } = this.state;\n\n    return (\n      <Form layout=\"vertical\">\n        <hr />\n        <Form.Item label=\"API Key\" className=\"m-b-10\">\n          <InputWithCopy id=\"apiKey\" className=\"hide-in-percy\" value={user.apiKey} data-test=\"ApiKey\" readOnly />\n        </Form.Item>\n        <Button\n          className=\"w-100\"\n          onClick={this.regenerateApiKey}\n          loading={regeneratingApiKey}\n          data-test=\"RegenerateApiKey\"\n        >\n          Regenerate\n        </Button>\n      </Form>\n    );\n  }\n\n  renderPasswordLinkAlert() {\n    const { user, passwordLink } = this.state;\n\n    return (\n      <Alert\n        message=\"Email not sent!\"\n        description={(\n          <Fragment>\n            <p>\n              The mail server is not configured, please send the following link\n              to <b>{user.name}</b>:\n            </p>\n            <InputWithCopy value={absoluteUrl(passwordLink)} readOnly />\n          </Fragment>\n        )}\n        type=\"warning\"\n        className=\"m-t-20\"\n        afterClose={() => { this.setState({ passwordLink: null }); }}\n        closable\n      />\n    );\n  }\n\n  renderResendInvitation() {\n    return (\n      <Button\n        className=\"w-100 m-t-10\"\n        onClick={this.resendInvitation}\n        loading={this.state.resendingInvitation}\n      >\n        Resend Invitation\n      </Button>\n    );\n  }\n\n  renderSendPasswordReset() {\n    const { sendingPasswordEmail } = this.state;\n\n    return (\n      <Fragment>\n        <Button\n          className=\"w-100 m-t-10\"\n          onClick={this.sendPasswordReset}\n          loading={sendingPasswordEmail}\n        >\n          Send Password Reset Email\n        </Button>\n      </Fragment>\n    );\n  }\n\n  rendertoggleUser() {\n    const { user, togglingUser } = this.state;\n\n    return user.isDisabled ? (\n      <Button className=\"w-100 m-t-10\" type=\"primary\" onClick={this.toggleUser} loading={togglingUser}>\n        Enable User\n      </Button>\n    ) : (\n      <Button className=\"w-100 m-t-10\" type=\"danger\" onClick={this.toggleUser} loading={togglingUser}>\n        Disable User\n      </Button>\n    );\n  }\n\n  render() {\n    const { user, passwordLink } = this.state;\n\n    return (\n      <div className=\"col-md-4 col-md-offset-4\">\n        <img\n          alt=\"Profile\"\n          src={user.profileImageUrl}\n          className=\"profile__image\"\n          width=\"40\"\n        />\n        <h3 className=\"profile__h3\">{user.name}</h3>\n        <hr />\n        {this.renderUserInfoForm()}\n        {!user.isDisabled && (\n          <Fragment>\n            {this.renderApiKey()}\n            <hr />\n            <h5>Password</h5>\n            {user.id === currentUser.id && (\n              <Button className=\"w-100 m-t-10\" onClick={this.changePassword} data-test=\"ChangePassword\">\n                Change Password\n              </Button>\n            )}\n            {(currentUser.isAdmin && user.id !== currentUser.id) && (\n              <Fragment>\n                {user.isInvitationPending ?\n                  this.renderResendInvitation() : this.renderSendPasswordReset()}\n                {passwordLink && this.renderPasswordLinkAlert()}\n              </Fragment>\n            )}\n          </Fragment>\n        )}\n        <hr />\n        {currentUser.isAdmin && user.id !== currentUser.id && this.rendertoggleUser()}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { includes } from 'lodash';\nimport Tag from 'antd/lib/tag';\nimport { Group } from '@/services/group';\nimport { UserProfile } from '../proptypes';\n\nexport default class UserShow extends React.Component {\n  static propTypes = {\n    user: UserProfile.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { groups: [], loadingGroups: true };\n  }\n\n  componentDidMount() {\n    Group.query((groups) => {\n      this.setState({ groups, loadingGroups: false });\n    });\n  }\n\n  renderUserGroups() {\n    const { groupIds } = this.props.user;\n    const { groups } = this.state;\n\n    return (\n      <div>\n        {groups.filter(group => includes(groupIds, group.id)).map((group => (\n          <Tag className=\"m-t-5 m-r-5\" key={group.id}>\n            <a href={`groups/${group.id}`}>{group.name}</a>\n          </Tag>\n        )))}\n      </div>\n    );\n  }\n\n  render() {\n    const { name, email, profileImageUrl } = this.props.user;\n    const { loadingGroups } = this.state;\n\n    return (\n      <div className=\"col-md-4 col-md-offset-4 profile__container\">\n        <img\n          alt=\"profile\"\n          src={profileImageUrl}\n          className=\"profile__image\"\n          width=\"40\"\n        />\n\n        <h3 className=\"profile__h3\">{name}</h3>\n\n        <hr />\n\n        <dl className=\"profile__dl\">\n          <dt>Name:</dt>\n          <dd>{name}</dd>\n          <dt>Email:</dt>\n          <dd>{email}</dd>\n          <dt>Groups:</dt>\n          <dd>{loadingGroups ? 'Loading...' : this.renderUserGroups()}</dd>\n        </dl>\n      </div>\n    );\n  }\n}\n","import debug from 'debug';\nimport moment from 'moment';\nimport { uniqBy, each, isNumber, isString, includes, extend, forOwn } from 'lodash';\n\nconst logger = debug('redash:services:QueryResult');\nconst filterTypes = ['filter', 'multi-filter', 'multiFilter'];\n\nfunction getColumnNameWithoutType(column) {\n  let typeSplit;\n  if (column.indexOf('::') !== -1) {\n    typeSplit = '::';\n  } else if (column.indexOf('__') !== -1) {\n    typeSplit = '__';\n  } else {\n    return column;\n  }\n\n  const parts = column.split(typeSplit);\n  if (parts[0] === '' && parts.length === 2) {\n    return parts[1];\n  }\n\n  if (!includes(filterTypes, parts[1])) {\n    return column;\n  }\n\n  return parts[0];\n}\n\nexport function getColumnCleanName(column) {\n  return getColumnNameWithoutType(column);\n}\n\nfunction getColumnFriendlyName(column) {\n  return getColumnNameWithoutType(column).replace(/(?:^|\\s)\\S/g, a => a.toUpperCase());\n}\n\nfunction QueryResultService($resource, $timeout, $q, QueryResultError, Auth) {\n  const QueryResultResource = $resource('api/query_results/:id', { id: '@id' }, { post: { method: 'POST' } });\n  const Job = $resource('api/jobs/:id', { id: '@id' });\n  const JobWithApiKey = $resource('api/queries/:queryId/jobs/:id', { queryId: '@queryId', id: '@id' });\n  const statuses = {\n    1: 'waiting',\n    2: 'processing',\n    3: 'done',\n    4: 'failed',\n  };\n\n  function handleErrorResponse(queryResult, response) {\n    if (response.status === 403) {\n      queryResult.update(response.data);\n    } else if (response.status === 400 && 'job' in response.data) {\n      queryResult.update(response.data);\n    } else {\n      logger('Unknown error', response);\n      queryResult.update({\n        job: {\n          error: response.data.message || 'unknown error occurred. Please try again later.',\n          status: 4,\n        },\n      });\n    }\n  }\n\n  class QueryResult {\n    constructor(props) {\n      this.deferred = $q.defer();\n      this.job = {};\n      this.query_result = {};\n      this.status = 'waiting';\n\n      this.updatedAt = moment();\n\n      // extended status flags\n      this.isLoadingResult = false;\n\n      if (props) {\n        this.update(props);\n      }\n    }\n\n    update(props) {\n      extend(this, props);\n\n      if ('query_result' in props) {\n        this.status = 'done';\n\n        const columnTypes = {};\n\n        // TODO: we should stop manipulating incoming data, and switch to relaying\n        // on the column type set by the backend. This logic is prone to errors,\n        // and better be removed. Kept for now, for backward compatability.\n        each(this.query_result.data.rows, (row) => {\n          forOwn(row, (v, k) => {\n            let newType = null;\n            if (isNumber(v)) {\n              newType = 'float';\n            } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}T/)) {\n              row[k] = moment.utc(v);\n              newType = 'datetime';\n            } else if (isString(v) && v.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n              row[k] = moment.utc(v);\n              newType = 'date';\n            } else if (typeof v === 'object' && v !== null) {\n              row[k] = JSON.stringify(v);\n            } else {\n              newType = 'string';\n            }\n\n            if (newType !== null) {\n              if (columnTypes[k] !== undefined && columnTypes[k] !== newType) {\n                columnTypes[k] = 'string';\n              } else {\n                columnTypes[k] = newType;\n              }\n            }\n          });\n        });\n\n        each(this.query_result.data.columns, (column) => {\n          column.name = '' + column.name;\n          if (columnTypes[column.name]) {\n            if (column.type == null || column.type === 'string') {\n              column.type = columnTypes[column.name];\n            }\n          }\n        });\n\n        this.deferred.resolve(this);\n      } else if (this.job.status === 3) {\n        this.status = 'processing';\n      } else if (this.job.status === 4) {\n        this.status = statuses[this.job.status];\n        this.deferred.reject(new QueryResultError(this.job.error));\n      } else {\n        this.status = undefined;\n      }\n    }\n\n    getId() {\n      let id = null;\n      if ('query_result' in this) {\n        id = this.query_result.id;\n      }\n      return id;\n    }\n\n    cancelExecution() {\n      Job.delete({ id: this.job.id });\n    }\n\n    getStatus() {\n      if (this.isLoadingResult) {\n        return 'loading-result';\n      }\n      return this.status || statuses[this.job.status];\n    }\n\n    getError() {\n      // TODO: move this logic to the server...\n      if (this.job.error === 'None') {\n        return undefined;\n      }\n\n      return this.job.error;\n    }\n\n    getLog() {\n      if (!this.query_result.data || !this.query_result.data.log || this.query_result.data.log.length === 0) {\n        return null;\n      }\n\n      return this.query_result.data.log;\n    }\n\n    getUpdatedAt() {\n      return this.query_result.retrieved_at || this.job.updated_at * 1000.0 || this.updatedAt;\n    }\n\n    getRuntime() {\n      return this.query_result.runtime;\n    }\n\n    getRawData() {\n      if (!this.query_result.data) {\n        return null;\n      }\n\n      return this.query_result.data.rows;\n    }\n\n    getData() {\n      return this.query_result.data ? this.query_result.data.rows : null;\n    }\n\n    isEmpty() {\n      return this.getData() === null || this.getData().length === 0;\n    }\n\n    getColumns() {\n      if (this.columns === undefined && this.query_result.data) {\n        this.columns = this.query_result.data.columns;\n      }\n\n      return this.columns;\n    }\n\n    getColumnNames() {\n      if (this.columnNames === undefined && this.query_result.data) {\n        this.columnNames = this.query_result.data.columns.map(v => v.name);\n      }\n\n      return this.columnNames;\n    }\n\n    getColumnCleanNames() {\n      return this.getColumnNames().map(col => getColumnCleanName(col));\n    }\n\n    getColumnFriendlyNames() {\n      return this.getColumnNames().map(col => getColumnFriendlyName(col));\n    }\n\n    getFilters() {\n      if (!this.getColumns()) {\n        return [];\n      }\n\n      const filters = [];\n\n      this.getColumns().forEach((col) => {\n        const name = col.name;\n        const type = name.split('::')[1] || name.split('__')[1];\n        if (includes(filterTypes, type)) {\n          // filter found\n          const filter = {\n            name,\n            friendlyName: getColumnFriendlyName(name),\n            column: col,\n            values: [],\n            multiple: type === 'multiFilter' || type === 'multi-filter',\n          };\n          filters.push(filter);\n        }\n      }, this);\n\n      this.getRawData().forEach((row) => {\n        filters.forEach((filter) => {\n          filter.values.push(row[filter.name]);\n          if (filter.values.length === 1) {\n            if (filter.multiple) {\n              filter.current = [row[filter.name]];\n            } else {\n              filter.current = row[filter.name];\n            }\n          }\n        });\n      });\n\n      filters.forEach((filter) => {\n        filter.values = uniqBy(filter.values, (v) => {\n          if (moment.isMoment(v)) {\n            return v.unix();\n          }\n          return v;\n        });\n      });\n\n      return filters;\n    }\n\n    toPromise() {\n      return this.deferred.promise;\n    }\n\n    static getById(id) {\n      const queryResult = new QueryResult();\n\n      queryResult.isLoadingResult = true;\n      QueryResultResource.get(\n        { id },\n        (response) => {\n          // Success handler\n          queryResult.isLoadingResult = false;\n          queryResult.update(response);\n        },\n        (error) => {\n          // Error handler\n          queryResult.isLoadingResult = false;\n          handleErrorResponse(queryResult, error);\n        },\n      );\n\n      return queryResult;\n    }\n\n    loadLatestCachedResult(queryId, parameters) {\n      $resource('api/queries/:id/results', { id: '@queryId' }, { post: { method: 'POST' } })\n        .post({ queryId, parameters },\n          (response) => { this.update(response); },\n          (error) => { handleErrorResponse(this, error); });\n    }\n\n    loadResult(tryCount) {\n      this.isLoadingResult = true;\n      QueryResultResource.get(\n        { id: this.job.query_result_id },\n        (response) => {\n          this.update(response);\n          this.isLoadingResult = false;\n        },\n        (error) => {\n          if (tryCount === undefined) {\n            tryCount = 0;\n          }\n\n          if (tryCount > 3) {\n            logger('Connection error while trying to load result', error);\n            this.update({\n              job: {\n                error: 'failed communicating with server. Please check your Internet connection and try again.',\n                status: 4,\n              },\n            });\n            this.isLoadingResult = false;\n          } else {\n            $timeout(() => {\n              this.loadResult(tryCount + 1);\n            }, 1000 * Math.pow(2, tryCount));\n          }\n        },\n      );\n    }\n\n    refreshStatus(query, parameters, tryNumber = 1) {\n      const resource = Auth.isAuthenticated() ? Job : JobWithApiKey;\n      const loadResult = () => (Auth.isAuthenticated()\n        ? this.loadResult()\n        : this.loadLatestCachedResult(query, parameters));\n\n      resource.get(\n        { queryId: query, id: this.job.id },\n        (jobResponse) => {\n          this.update(jobResponse);\n\n          if (this.getStatus() === 'processing' && this.job.query_result_id && this.job.query_result_id !== 'None') {\n            loadResult();\n          } else if (this.getStatus() !== 'failed') {\n            const waitTime = tryNumber > 10 ? 3000 : 500;\n            $timeout(() => {\n              this.refreshStatus(query, parameters, tryNumber + 1);\n            }, waitTime);\n          }\n        },\n        (error) => {\n          logger('Connection error', error);\n          // TODO: use QueryResultError, or better yet: exception/reject of promise.\n          this.update({\n            job: {\n              error: 'failed communicating with server. Please check your Internet connection and try again.',\n              status: 4,\n            },\n          });\n        },\n      );\n    }\n\n    getLink(queryId, fileType, apiKey) {\n      let link = `api/queries/${queryId}/results/${this.getId()}.${fileType}`;\n      if (apiKey) {\n        link = `${link}?api_key=${apiKey}`;\n      }\n      return link;\n    }\n\n    getName(queryName, fileType) {\n      return `${queryName.replace(/ /g, '_') + moment(this.getUpdatedAt()).format('_YYYY_MM_DD')}.${fileType}`;\n    }\n\n    static getByQueryId(id, parameters, maxAge) {\n      const queryResult = new QueryResult();\n\n      $resource('api/queries/:id/results', { id: '@id' }, { post: { method: 'POST' } }).post(\n        {\n          id,\n          parameters,\n          max_age: maxAge,\n        },\n        (response) => {\n          queryResult.update(response);\n\n          if ('job' in response) {\n            queryResult.refreshStatus(id, parameters);\n          }\n        },\n        (error) => {\n          handleErrorResponse(queryResult, error);\n        },\n      );\n\n      return queryResult;\n    }\n\n    static get(dataSourceId, query, parameters, maxAge, queryId) {\n      const queryResult = new QueryResult();\n\n      const params = {\n        data_source_id: dataSourceId,\n        parameters,\n        query,\n        max_age: maxAge,\n      };\n\n      if (queryId !== undefined) {\n        params.query_id = queryId;\n      }\n\n      QueryResultResource.post(\n        params,\n        (response) => {\n          queryResult.update(response);\n\n          if ('job' in response) {\n            queryResult.refreshStatus(query, parameters);\n          }\n        },\n        (error) => {\n          handleErrorResponse(queryResult, error);\n        },\n      );\n\n      return queryResult;\n    }\n  }\n\n  return QueryResult;\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('QueryResult', QueryResultService);\n}\n\ninit.init = true;\n","import { extend, map, findIndex, isEqual } from 'lodash';\nimport React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from 'antd/lib/modal';\nimport Select from 'antd/lib/select';\nimport Input from 'antd/lib/input';\nimport * as Grid from 'antd/lib/grid';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport { Filters, filterData } from '@/components/Filters';\nimport notification from '@/services/notification';\nimport { Visualization } from '@/services/visualization';\nimport recordEvent from '@/services/recordEvent';\n\n// ANGULAR_REMOVE_ME Remove when all visualizations will be migrated to React\nimport { cleanAngularProps } from '@/lib/utils';\nimport useQueryResult from '@/lib/hooks/useQueryResult';\n\nimport { VisualizationType, registeredVisualizations, getDefaultVisualization, newVisualization } from './index';\n\nfunction updateQueryVisualizations(query, visualization) {\n  const index = findIndex(query.visualizations, v => v.id === visualization.id);\n  if (index > -1) {\n    query.visualizations[index] = visualization;\n  } else {\n    // new visualization\n    query.visualizations.push(visualization);\n  }\n}\n\nfunction saveVisualization(visualization) {\n  if (visualization.id) {\n    recordEvent('update', 'visualization', visualization.id, { type: visualization.type });\n  } else {\n    recordEvent('create', 'visualization', null, { type: visualization.type });\n  }\n\n  return Visualization.save(visualization).$promise\n    .then((result) => {\n      notification.success('Visualization saved');\n      return result;\n    })\n    .catch((error) => {\n      notification.error('Visualization could not be saved');\n      return Promise.reject(error);\n    });\n}\n\nfunction confirmDialogClose(isDirty) {\n  return new Promise((resolve, reject) => {\n    if (isDirty) {\n      Modal.confirm({\n        title: 'Visualization Editor',\n        content: 'Are you sure you want to close the editor without saving?',\n        okText: 'Yes',\n        cancelText: 'No',\n        onOk: () => resolve(),\n        onCancel: () => reject(),\n      });\n    } else {\n      resolve();\n    }\n  });\n}\n\nfunction EditVisualizationDialog({ dialog, visualization, query, queryResult }) {\n  const isNew = !visualization;\n\n  const data = useQueryResult(queryResult);\n  const [filters, setFilters] = useState(data.filters);\n\n  const filteredData = useMemo(() => ({\n    columns: data.columns,\n    rows: filterData(data.rows, filters),\n  }), [data, filters]);\n\n  const defaultState = useMemo(\n    () => {\n      const config = visualization ? registeredVisualizations[visualization.type] : getDefaultVisualization();\n      const options = config.getOptions(isNew ? {} : visualization.options, data);\n      return {\n        type: config.type,\n        name: isNew ? config.name : visualization.name,\n        options,\n        originalOptions: options,\n      };\n    },\n    [visualization],\n  );\n\n  const [type, setType] = useState(defaultState.type);\n  const [name, setName] = useState(defaultState.name);\n  const [nameChanged, setNameChanged] = useState(false);\n  const [options, setOptions] = useState(defaultState.options);\n\n  const [saveInProgress, setSaveInProgress] = useState(false);\n\n  function onTypeChanged(newType) {\n    setType(newType);\n\n    const config = registeredVisualizations[newType];\n    if (!nameChanged) {\n      setName(config.name);\n    }\n\n    setOptions(config.getOptions(isNew ? {} : visualization.options, data));\n  }\n\n  function onNameChanged(newName) {\n    setName(newName);\n    setNameChanged(newName !== name);\n  }\n\n  function onOptionsChanged(newOptions) {\n    const config = registeredVisualizations[type];\n    setOptions(config.getOptions(newOptions, data));\n  }\n\n  function save() {\n    setSaveInProgress(true);\n    const visualizationData = extend(newVisualization(type), visualization, { name, options, query_id: query.id });\n    saveVisualization(visualizationData).then((savedVisualization) => {\n      updateQueryVisualizations(query, savedVisualization);\n      dialog.close(savedVisualization);\n    });\n  }\n\n  function dismiss() {\n    const optionsChanged = !isEqual(cleanAngularProps(options), defaultState.originalOptions);\n    confirmDialogClose(nameChanged || optionsChanged).then(dialog.dismiss);\n  }\n\n  const { Renderer, Editor } = registeredVisualizations[type];\n\n  return (\n    <Modal\n      {...dialog.props}\n      wrapClassName=\"ant-modal-fullscreen\"\n      title=\"Visualization Editor\"\n      okText=\"Save\"\n      okButtonProps={{\n        loading: saveInProgress,\n        disabled: saveInProgress,\n      }}\n      onOk={save}\n      onCancel={dismiss}\n      wrapProps={{ 'data-test': 'EditVisualizationDialog' }}\n    >\n      <Grid.Row gutter={24}>\n        <Grid.Col span={24} md={10}>\n          <div className=\"m-b-15\">\n            <label htmlFor=\"visualization-type\">Visualization Type</label>\n            <Select\n              data-test=\"VisualizationType\"\n              id=\"visualization-type\"\n              className=\"w-100\"\n              disabled={!isNew}\n              value={type}\n              onChange={onTypeChanged}\n            >\n              {map(\n                registeredVisualizations,\n                vis => <Select.Option key={vis.type} data-test={'VisualizationType.' + vis.type}>{vis.name}</Select.Option>,\n              )}\n            </Select>\n          </div>\n          <div className=\"m-b-15\">\n            <label htmlFor=\"visualization-name\">Visualization Name</label>\n            <Input\n              data-test=\"VisualizationName\"\n              id=\"visualization-name\"\n              className=\"w-100\"\n              value={name}\n              onChange={event => onNameChanged(event.target.value)}\n            />\n          </div>\n          <div data-test=\"VisualizationEditor\">\n            <Editor\n              data={data}\n              options={options}\n              visualizationName={name}\n              onOptionsChange={onOptionsChanged}\n            />\n          </div>\n        </Grid.Col>\n        <Grid.Col span={24} md={14}>\n          <label htmlFor=\"visualization-preview\" className=\"invisible hidden-xs\">Preview</label>\n          <Filters filters={filters} onChange={setFilters} />\n          <div className=\"scrollbox\" data-test=\"VisualizationPreview\">\n            <Renderer\n              data={filteredData}\n              options={options}\n              visualizationName={name}\n              onOptionsChange={onOptionsChanged}\n            />\n          </div>\n        </Grid.Col>\n      </Grid.Row>\n    </Modal>\n  );\n}\n\nEditVisualizationDialog.propTypes = {\n  dialog: DialogPropType.isRequired,\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  visualization: VisualizationType,\n  queryResult: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nEditVisualizationDialog.defaultProps = {\n  visualization: null,\n};\n\nexport default wrapDialog(EditVisualizationDialog);\n","import React from 'react';\nimport Input from 'antd/lib/input';\nimport { EditorPropTypes } from '@/visualizations';\n\nexport default function Editor({ options, onOptionsChange }) {\n  const onXAxisLabelChanged = (xAxisLabel) => {\n    const newOptions = { ...options, xAxisLabel };\n    onOptionsChange(newOptions);\n  };\n\n  const onYAxisLabelChanged = (yAxisLabel) => {\n    const newOptions = { ...options, yAxisLabel };\n    onOptionsChange(newOptions);\n  };\n\n  return (\n    <div>\n      <div className=\"form-group\">\n        <label className=\"control-label\" htmlFor=\"box-plot-x-axis-label\">X Axis Label</label>\n        <Input\n          id=\"box-plot-x-axis-label\"\n          value={options.xAxisLabel}\n          onChange={event => onXAxisLabelChanged(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label className=\"control-label\" htmlFor=\"box-plot-y-axis-label\">Y Axis Label</label>\n        <Input\n          id=\"box-plot-y-axis-label\"\n          value={options.yAxisLabel}\n          onChange={event => onYAxisLabelChanged(event.target.value)}\n        />\n      </div>\n    </div>\n  );\n}\n\nEditor.propTypes = EditorPropTypes;\n","import { merge } from 'lodash';\nimport React from 'react';\nimport Switch from 'antd/lib/switch';\nimport { EditorPropTypes } from '@/visualizations';\n\nexport default function Editor({ options, onOptionsChange }) {\n  const updateOptions = (updates) => {\n    onOptionsChange(merge({}, options, updates));\n  };\n\n  return (\n    <div className=\"form-group\">\n      <label className=\"d-flex align-items-center\" htmlFor=\"pivot-show-controls\">\n        <span className=\"m-r-10\">Hide Pivot Controls</span>\n        <Switch\n          data-test=\"PivotEditor.HideControls\"\n          id=\"pivot-show-controls\"\n          checked={options.controls.enabled}\n          onChange={enabled => updateOptions({ controls: { enabled } })}\n        />\n      </label>\n    </div>\n  );\n}\n\nEditor.propTypes = EditorPropTypes;\n","import React from 'react';\n\nexport default function Editor() {\n  return (\n    <div className=\"form-horizontal\">\n      <div>\n        This visualization expects the query result to have rows in the following format:\n\n        <ul>\n          <li><strong>stage1</strong> - stage 1 value</li>\n          <li><strong>stage2</strong> - stage 2 value (or null)</li>\n          <li><strong>stage3</strong> - stage 3 value (or null)</li>\n          <li><strong>stage4</strong> - stage 4 value (or null)</li>\n          <li><strong>stage5</strong> - stage 5 value (or null)</li>\n          <li><strong>value</strong> - number of times this sequence occurred</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport default function Editor() {\n  return (\n    <div className=\"form-horizontal\">\n      <div>\n        This visualization expects the query result to have rows in one of the following formats:\n\n        <div className=\"m-t-10\">\n          <strong>Option 1:</strong>\n          <ul>\n            <li><strong>sequence</strong> - sequence id</li>\n            <li><strong>stage</strong> - what stage in sequence this is (1, 2, ...)</li>\n            <li><strong>node</strong> - stage name</li>\n            <li><strong>value</strong> - number of times this sequence occurred</li>\n          </ul>\n        </div>\n\n        <div className=\"m-t-10\">\n          <strong>Option 2:</strong>\n          <ul>\n            <li><strong>stage1</strong> - stage 1 value</li>\n            <li><strong>stage2</strong> - stage 2 value (or null)</li>\n            <li><strong>stage3</strong> - stage 3 value (or null)</li>\n            <li><strong>stage4</strong> - stage 4 value (or null)</li>\n            <li><strong>stage5</strong> - stage 5 value (or null)</li>\n            <li><strong>value</strong> - number of times this sequence occurred</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { map } from 'lodash';\nimport React from 'react';\nimport Select from 'antd/lib/select';\nimport { EditorPropTypes } from '@/visualizations';\n\nconst { Option } = Select;\n\nexport default function Editor({ options, data, onOptionsChange }) {\n  const onColumnChanged = (column) => {\n    const newOptions = { ...options, column };\n    onOptionsChange(newOptions);\n  };\n\n  return (\n    <div className=\"form-group\">\n      <label className=\"control-label\" htmlFor=\"word-cloud-column\">Word Cloud Column Name</label>\n      <Select\n        id=\"word-cloud-column\"\n        className=\"w-100\"\n        value={options.column}\n        onChange={onColumnChanged}\n      >\n        {map(data.columns, ({ name }) => (\n          <Option key={name}>{name}</Option>\n        ))}\n      </Select>\n    </div>\n  );\n}\n\nEditor.propTypes = EditorPropTypes;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { BigMessage } from '@/components/BigMessage';\nimport { NoTaggedObjectsFound } from '@/components/NoTaggedObjectsFound';\nimport { EmptyState } from '@/components/empty-state/EmptyState';\n\nexport default function DashboardListEmptyState({ page, searchTerm, selectedTags }) {\n  if (searchTerm !== '') {\n    return (\n      <BigMessage message=\"Sorry, we couldn't find anything.\" icon=\"fa-search\" />\n    );\n  }\n  if (selectedTags.length > 0) {\n    return (\n      <NoTaggedObjectsFound objectType=\"dashboards\" tags={selectedTags} />\n    );\n  }\n  switch (page) {\n    case 'favorites': return (\n      <BigMessage message=\"Mark dashboards as Favorite to list them here.\" icon=\"fa-star\" />\n    );\n    default: return (\n      <EmptyState\n        icon=\"zmdi zmdi-view-quilt\"\n        description=\"See the big picture\"\n        illustration=\"dashboard\"\n        helpLink=\"https://help.redash.io/category/22-dashboards\"\n        showDashboardStep\n      />\n    );\n  }\n}\n\nDashboardListEmptyState.propTypes = {\n  page: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string.isRequired,\n  selectedTags: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","import { replace } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Switch from 'antd/lib/switch';\nimport Modal from 'antd/lib/modal';\nimport Form from 'antd/lib/form';\nimport Alert from 'antd/lib/alert';\nimport { $http } from '@/services/ng';\nimport notification from '@/services/notification';\nimport { wrap as wrapDialog, DialogPropType } from '@/components/DialogWrapper';\nimport InputWithCopy from '@/components/InputWithCopy';\nimport { HelpTrigger } from '@/components/HelpTrigger';\n\nconst API_SHARE_URL = 'api/dashboards/{id}/share';\n\nclass ShareDashboardDialog extends React.Component {\n  static propTypes = {\n    dashboard: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n    hasQueryParams: PropTypes.bool.isRequired,\n    dialog: DialogPropType.isRequired,\n  };\n\n  formItemProps = {\n    labelCol: { span: 8 },\n    wrapperCol: { span: 16 },\n    style: { marginBottom: 7 },\n  }\n\n  constructor(props) {\n    super(props);\n    const { dashboard } = this.props;\n\n    this.state = {\n      saving: false,\n    };\n\n    this.apiUrl = replace(API_SHARE_URL, '{id}', dashboard.id);\n    this.disabled = this.props.hasQueryParams && !dashboard.publicAccessEnabled;\n  }\n\n  static get headerContent() {\n    return (\n      <React.Fragment>\n        Share Dashboard\n        <div className=\"modal-header-desc\">\n          Allow public access to this dashboard with a secret address.{' '}\n          <HelpTrigger type=\"SHARE_DASHBOARD\" />\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  enableAccess = () => {\n    const { dashboard } = this.props;\n    this.setState({ saving: true });\n\n    $http\n      .post(this.apiUrl)\n      .success((data) => {\n        dashboard.publicAccessEnabled = true;\n        dashboard.public_url = data.public_url;\n      })\n      .error(() => {\n        notification.error('Failed to turn on sharing for this dashboard');\n      })\n      .finally(() => {\n        this.setState({ saving: false });\n      });\n  }\n\n  disableAccess = () => {\n    const { dashboard } = this.props;\n    this.setState({ saving: true });\n\n    $http\n      .delete(this.apiUrl)\n      .success(() => {\n        dashboard.publicAccessEnabled = false;\n        delete dashboard.public_url;\n      })\n      .error(() => {\n        notification.error('Failed to turn off sharing for this dashboard');\n      })\n      .finally(() => {\n        this.setState({ saving: false });\n      });\n  }\n\n  onChange = (checked) => {\n    if (checked) {\n      this.enableAccess();\n    } else {\n      this.disableAccess();\n    }\n  };\n\n  render() {\n    const { dialog, dashboard } = this.props;\n\n    return (\n      <Modal\n        {...dialog.props}\n        title={this.constructor.headerContent}\n        footer={null}\n      >\n        <Form layout=\"horizontal\">\n          {this.props.hasQueryParams && (\n            <Form.Item>\n              <Alert\n                message=\"Sharing is currently not supported for dashboards containing queries with parameters.\"\n                type=\"error\"\n              />\n            </Form.Item>\n          )}\n          <Form.Item label=\"Allow public access\" {...this.formItemProps}>\n            <Switch\n              checked={dashboard.publicAccessEnabled}\n              onChange={this.onChange}\n              loading={this.state.saving}\n              disabled={this.disabled}\n            />\n          </Form.Item>\n          {dashboard.public_url && (\n            <Form.Item label=\"Secret address\" {...this.formItemProps}>\n              <InputWithCopy value={dashboard.public_url} />\n            </Form.Item>\n          )}\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nexport default wrapDialog(ShareDashboardDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { BigMessage } from '@/components/BigMessage';\nimport { NoTaggedObjectsFound } from '@/components/NoTaggedObjectsFound';\nimport { EmptyState } from '@/components/empty-state/EmptyState';\n\nexport default function QueriesListEmptyState({ page, searchTerm, selectedTags }) {\n  if (searchTerm !== '') {\n    return (\n      <BigMessage message=\"Sorry, we couldn't find anything.\" icon=\"fa-search\" />\n    );\n  }\n  if (selectedTags.length > 0) {\n    return (\n      <NoTaggedObjectsFound objectType=\"queries\" tags={selectedTags} />\n    );\n  }\n  switch (page) {\n    case 'favorites': return (\n      <BigMessage message=\"Mark queries as Favorite to list them here.\" icon=\"fa-star\" />\n    );\n    case 'archive': return (\n      <BigMessage message=\"Archived queries will be listed here.\" icon=\"fa-archive\" />\n    );\n    case 'my': return (\n      <div className=\"tiled bg-white p-15\">\n        <a href=\"queries/new\" className=\"btn btn-primary btn-sm\">Create your first query</a>\n        {' '}to populate My Queries list. Need help? Check out our{' '}\n        <a href=\"https://redash.io/help/user-guide/querying/writing-queries\">query writing documentation</a>.\n      </div>\n    );\n    default: return (\n      <EmptyState\n        icon=\"fa fa-code\"\n        illustration=\"query\"\n        description=\"Getting the data from your datasources.\"\n        helpLink=\"https://help.redash.io/category/21-querying\"\n      />\n    );\n  }\n}\n\nQueriesListEmptyState.propTypes = {\n  page: PropTypes.string.isRequired,\n  searchTerm: PropTypes.string.isRequired,\n  selectedTags: PropTypes.array.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n","module.exports = __webpack_public_path__ + \"images/avatar.svg\";","import $ from 'jquery';\nimport _ from 'lodash';\nimport 'jquery-ui/ui/widgets/draggable';\nimport 'jquery-ui/ui/widgets/droppable';\nimport 'jquery-ui/ui/widgets/resizable';\nimport 'gridstack/dist/gridstack.css';\n\n// eslint-disable-next-line import/first\nimport gridstack from 'gridstack';\n\nfunction sequence(...fns) {\n  fns = _.filter(fns, _.isFunction);\n  if (fns.length > 0) {\n    return function sequenceWrapper(...args) {\n      for (let i = 0; i < fns.length; i += 1) {\n        fns[i].apply(this, args);\n      }\n    };\n  }\n  return _.noop;\n}\n\n// eslint-disable-next-line import/prefer-default-export\nfunction JQueryUIGridStackDragDropPlugin(grid) {\n  gridstack.GridStackDragDropPlugin.call(this, grid);\n}\n\ngridstack.GridStackDragDropPlugin.registerPlugin(JQueryUIGridStackDragDropPlugin);\n\nJQueryUIGridStackDragDropPlugin.prototype = Object.create(gridstack.GridStackDragDropPlugin.prototype);\nJQueryUIGridStackDragDropPlugin.prototype.constructor = JQueryUIGridStackDragDropPlugin;\n\nJQueryUIGridStackDragDropPlugin.prototype.resizable = function resizable(el, opts, key, value) {\n  el = $(el);\n  if (opts === 'disable' || opts === 'enable') {\n    el.resizable(opts);\n  } else if (opts === 'option') {\n    el.resizable(opts, key, value);\n  } else {\n    el.resizable(_.extend({}, this.grid.opts.resizable, {\n      // run user-defined callback before internal one\n      start: sequence(this.grid.opts.resizable.start, opts.start),\n      // this and next - run user-defined callback after internal one\n      stop: sequence(opts.stop, this.grid.opts.resizable.stop),\n      resize: sequence(opts.resize, this.grid.opts.resizable.resize),\n    }));\n  }\n  return this;\n};\n\nJQueryUIGridStackDragDropPlugin.prototype.draggable = function draggable(el, opts) {\n  el = $(el);\n  if (opts === 'disable' || opts === 'enable') {\n    el.draggable(opts);\n  } else {\n    el.draggable(_.extend({}, this.grid.opts.draggable, {\n      containment: this.grid.opts.isNested ? this.grid.container.parent() : null,\n      // run user-defined callback before internal one\n      start: sequence(this.grid.opts.draggable.start, opts.start),\n      // this and next - run user-defined callback after internal one\n      stop: sequence(opts.stop, this.grid.opts.draggable.stop),\n      drag: sequence(opts.drag, this.grid.opts.draggable.drag),\n    }));\n  }\n  return this;\n};\n\nJQueryUIGridStackDragDropPlugin.prototype.droppable = function droppable(el, opts) {\n  el = $(el);\n  if (opts === 'disable' || opts === 'enable') {\n    el.droppable(opts);\n  } else {\n    el.droppable({\n      accept: opts.accept,\n    });\n  }\n  return this;\n};\n\nJQueryUIGridStackDragDropPlugin.prototype.isDroppable = function isDroppable(el) {\n  return Boolean($(el).data('droppable'));\n};\n\nJQueryUIGridStackDragDropPlugin.prototype.on = function on(el, eventName, callback) {\n  $(el).on(eventName, callback);\n  return this;\n};\n","module.exports = \"<div class=\\\"p-5\\\">\\n  <h4>Notifications</h4>\\n\\n  <div>\\n    <ui-select ng-model=\\\"newSubscription.destination\\\" ng-disabled=\\\"destinations.length == 0\\\">\\n      <ui-select-match><span ng-bind-html=\\\"destinationsDisplay($select.selected)\\\"></span></ui-select-match>\\n      <ui-select-choices repeat=\\\"d in destinations\\\">\\n        <span ng-bind-html=\\\"destinationsDisplay(d)\\\"></span>\\n      </ui-select-choices>\\n    </ui-select>\\n  </div>\\n  <div class=\\\"m-t-5\\\">\\n    <button class=\\\"btn btn-default\\\" ng-click=\\\"saveSubscriber()\\\" ng-disabled=\\\"destinations.length == 0\\\" style=\\\"width:50%;\\\">Add</button>\\n    <span class=\\\"pull-right m-t-5\\\">\\n      <a href=\\\"destinations/new\\\" ng-if=\\\"currentUser.isAdmin\\\">Create New Destination</a>\\n    </span>\\n  </div>\\n\\n  <hr/>\\n\\n  <div>\\n    <div class=\\\"list-group-item\\\" ng-repeat=\\\"subscriber in subscribers\\\">\\n      <span ng-bind-html=\\\"destinationsDisplay(subscriber)\\\"></span>\\n      <button class=\\\"btn btn-xs btn-danger pull-right\\\" ng-click=\\\"unsubscribe(subscriber)\\\" ng-if=\\\"currentUser.isAdmin || currentUser.id == subscriber.user.id\\\">Remove</button>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<nav class=\\\"navbar navbar-default app-header\\\" role=\\\"navigation\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"navbar-header\\\">\\n      <button\\n        type=\\\"button\\\"\\n        class=\\\"navbar-toggle\\\"\\n        ng-click=\\\"isNavOpen = !isNavOpen\\\"\\n      >\\n        <span class=\\\"sr-only\\\">Toggle navigation</span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n        <span class=\\\"icon-bar\\\"></span>\\n      </button>\\n      <!-- REDASH LOGO -->\\n      <a class=\\\"navbar-brand\\\" ng-href=\\\"{{ $ctrl.basePath }}\\\"\\n        ><img ng-src=\\\"{{ $ctrl.logoUrl }}\\\"\\n      /></a>\\n    </div>\\n    <div class=\\\"collapse navbar-collapse\\\" uib-collapse=\\\"!isNavOpen\\\">\\n      <!-- Main Left Nav-->\\n\\n      <ul class=\\\"nav navbar-nav nav__main\\\">\\n        <li\\n          class=\\\"dropdown btn-group\\\"\\n          ng-show=\\\"$ctrl.showDashboardsMenu\\\"\\n          uib-dropdown\\n        >\\n          <a class=\\\"btn\\\" href=\\\"dashboards\\\">Dashboards</a>\\n          <a type=\\\"button\\\" class=\\\"btn hidden-xs\\\" uib-dropdown-toggle>\\n            <span class=\\\"caret caret--nav\\\"></span>\\n          </a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li ng-if=\\\"$ctrl.dashboards.length == 0\\\">\\n              <a>\\n                <em>\\n                  <span class=\\\"btn-favourite\\\">\\n                    <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n                  </span>\\n                  Favorite Dashboards will appear here\\n                </em>\\n              </a>\\n            </li>\\n            <li ng-repeat=\\\"dashboard in $ctrl.dashboards\\\">\\n              <a href=\\\"dashboard/{{ dashboard.slug }}\\\">\\n                {{ dashboard.name }}\\n              </a>\\n            </li>\\n          </ul>\\n        </li>\\n        <li\\n          class=\\\"dropdown btn-group\\\"\\n          ng-show=\\\"$ctrl.showQueriesMenu\\\"\\n          uib-dropdown\\n        >\\n          <a class=\\\"btn\\\" href=\\\"queries\\\">Queries</a>\\n          <a type=\\\"button\\\" class=\\\"btn hidden-xs\\\" uib-dropdown-toggle>\\n            <span class=\\\"caret caret--nav\\\"></span>\\n          </a>\\n          <ul class=\\\"dropdown-menu\\\" uib-dropdown-menu>\\n            <li ng-if=\\\"$ctrl.queries.length == 0\\\">\\n              <a>\\n                <em>\\n                  <span class=\\\"btn-favourite\\\">\\n                    <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n                  </span>\\n                  Favorite Queries will appear here\\n                </em>\\n              </a>\\n            </li>\\n            <li ng-repeat=\\\"query in $ctrl.queries\\\">\\n              <a href=\\\"queries/{{ query.id }}\\\">\\n                {{ query.name }}\\n              </a>\\n            </li>\\n          </ul>\\n        </li>\\n        <li ng-if=\\\"$ctrl.showAlertsLink\\\">\\n          <a href=\\\"alerts\\\">Alerts</a>\\n        </li>\\n      </ul>\\n\\n      <!-- Add New Button -->\\n      <div\\n        class=\\\"btn-group navbar-btn navbar-left btn__new hidden-xs\\\"\\n        uib-dropdown\\n        is-open=\\\"status.isopen\\\"\\n      >\\n        <button\\n          id=\\\"create-button\\\"\\n          data-test=\\\"CreateButton\\\"\\n          type=\\\"button\\\"\\n          class=\\\"btn btn-primary btn--create\\\"\\n          uib-dropdown-toggle\\n          ng-disabled=\\\"disabled\\\"\\n        >\\n          Create <span class=\\\"caret caret--nav\\\"></span>\\n        </button>\\n        <ul\\n          class=\\\"dropdown-menu\\\"\\n          uib-dropdown-menu\\n          role=\\\"menu\\\"\\n          aria-labelledby=\\\"create-button\\\"\\n        >\\n          <li role=\\\"menuitem\\\" ng-show=\\\"$ctrl.showNewQueryMenu\\\">\\n            <a href=\\\"queries/new\\\">Query</a>\\n          </li>\\n          <li role=\\\"menuitem\\\">\\n            <a\\n              ng-show=\\\"$ctrl.currentUser.hasPermission('create_dashboard')\\\"\\n              ng-click=\\\"$ctrl.newDashboard()\\\"\\n              >Dashboard</a\\n            >\\n          </li>\\n          <li role=\\\"menuitem\\\"><a href=\\\"alerts/new\\\">Alert</a></li>\\n        </ul>\\n      </div>\\n\\n      <!-- Profile -->\\n      <ul class=\\\"nav navbar-nav navbar-right\\\">\\n        <li>\\n          <help-trigger\\n            type=\\\"'HOME'\\\"\\n            class-name=\\\"'navbar-link-ANGULAR_REMOVE_ME'\\\"\\n          ></help-trigger>\\n        </li>\\n        <li ng-show=\\\"$ctrl.currentUser.isAdmin\\\">\\n          <a href=\\\"data_sources\\\" title=\\\"Settings\\\"\\n            ><i class=\\\"fa fa-sliders\\\" aria-hidden=\\\"true\\\"></i\\n          ></a>\\n        </li>\\n        <!--<li ng-show=\\\"$ctrl.showSettingsMenu\\\">-->\\n        <!--<a href=\\\"users\\\" title=\\\"Settings\\\"><i class=\\\"fa fa-cog\\\"></i></a>-->\\n        <!--</li>-->\\n        <li class=\\\"dropdown\\\" uib-dropdown>\\n          <a\\n            href=\\\"#\\\"\\n            class=\\\"dropdown-toggle dropdown--profile\\\"\\n            uib-dropdown-toggle\\n            data-test=\\\"ProfileDropdown\\\"\\n          >\\n            <img\\n              ng-src=\\\"{{ $ctrl.currentUser.profile_image_url }}\\\"\\n              class=\\\"profile__image--navbar\\\"\\n              width=\\\"20\\\"/>\\n            <span\\n              class=\\\"dropdown--profile__username\\\"\\n              ng-bind=\\\"$ctrl.currentUser.name\\\"\\n            ></span>\\n            <span class=\\\"caret caret--nav\\\"></span\\n          ></a>\\n          <ul class=\\\"dropdown-menu dropdown-menu--profile\\\">\\n            <li>\\n              <a ng-href=\\\"users/me\\\">Edit Profile</a>\\n            </li>\\n            <li\\n              class=\\\"divider\\\"\\n              ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\"\\n            ></li>\\n\\n            <li ng-show=\\\"$ctrl.currentUser.isAdmin\\\">\\n              <a href=\\\"data_sources\\\" title=\\\"Data Sources\\\">Data Sources</a>\\n            </li>\\n            <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n              <a href=\\\"groups\\\" title=\\\"Settings\\\">Groups</a>\\n            </li>\\n            <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n              <a href=\\\"users\\\" title=\\\"Settings\\\">Users</a>\\n            </li>\\n            <li>\\n              <a ng-href=\\\"query_snippets\\\">Query Snippets</a>\\n            </li>\\n            <li ng-show=\\\"$ctrl.showSettingsMenu\\\">\\n              <a href=\\\"destinations\\\" title=\\\"Settings\\\">Alert Destinations</a>\\n            </li>\\n\\n            <li\\n              ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\"\\n              class=\\\"divider\\\"\\n            ></li>\\n\\n            <li ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin')\\\">\\n              <a href=\\\"admin/status\\\">System Status</a>\\n            </li>\\n\\n            <li class=\\\"divider\\\"></li>\\n\\n            <li>\\n              <a ng-click=\\\"$ctrl.logout()\\\">Log out</a>\\n            </li>\\n\\n            <li class=\\\"divider\\\"></li>\\n            <li class=\\\"dropdown-menu__version\\\">\\n              Version: {{ $ctrl.backendVersion }}\\n              <span ng-if=\\\"$ctrl.frontendVersion !== $ctrl.backendVersion\\\">\\n                ({{ $ctrl.frontendVersion.substring(0, 8) }})\\n              </span>\\n              <span\\n                class=\\\"update-available\\\"\\n                ng-if=\\\"$ctrl.currentUser.hasPermission('super_admin') && $ctrl.newVersionAvailable\\\"\\n              >\\n                <a href=\\\"https://version.redash.io/\\\" target=\\\"_blank\\\">\\n                  <i class=\\\"fa fa-arrow-circle-down\\\"></i>\\n                </a>\\n              </span>\\n            </li>\\n          </ul>\\n        </li>\\n      </ul>\\n\\n      <!-- Search -->\\n      <form\\n        class=\\\"navbar-form navbar-right\\\"\\n        role=\\\"search\\\"\\n        ng-submit=\\\"$ctrl.searchQueries()\\\"\\n      >\\n        <div class=\\\"input-group menu-search\\\">\\n          <input\\n            type=\\\"text\\\"\\n            ng-model=\\\"$ctrl.searchTerm\\\"\\n            class=\\\"form-control navbar__search__input\\\"\\n            placeholder=\\\"Search queries...\\\"\\n            data-test=\\\"AppHeaderSearch\\\"\\n          />\\n          <span class=\\\"input-group-btn\\\">\\n            <button type=\\\"submit\\\" class=\\\"btn btn-default\\\">\\n              <span class=\\\"zmdi zmdi-search\\\"></span>\\n            </button>\\n          </span>\\n        </div>\\n      </form>\\n    </div>\\n  </div>\\n</nav>\\n\"","module.exports = \"<app-header ng-if=\\\"$ctrl.layout.showHeader\\\"></app-header>\\n<div ng-if=\\\"$ctrl.handler.error\\\" class=\\\"fixed-container\\\" data-test=\\\"ErrorMessage\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"col-md-8 col-md-push-2\\\">\\n      <div class=\\\"error-state bg-white tiled\\\">\\n         <div class=\\\"error-state__icon\\\">\\n           <i class=\\\"zmdi zmdi-alert-circle-o\\\"></i>\\n         </div>\\n         <div class=\\\"error-state__details\\\">\\n           <h4>{{ $ctrl.handler.error.message }}</h4>\\n         </div>\\n       </div>\\n    </div>\\n  </div>\\n</div>\\n<div id=\\\"app-content\\\" ng-if=\\\"!$ctrl.handler.error\\\" ng-view></div>\\n\"","module.exports = \"<div data-test=\\\"EditDashboardDialog\\\">\\n  <div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" ng-click=\\\"$ctrl.dismiss()\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" aria-hidden=\\\"true\\\">&times;</button>\\n    <h4 class=\\\"modal-title\\\">New Dashboard</h4>\\n  </div>\\n  <div class=\\\"modal-body\\\" ng-if=\\\"$ctrl.policy.isCreateDashboardEnabled()\\\">\\n    <p>\\n      <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Dashboard Name\\\" ng-model=\\\"$ctrl.dashboard.name\\\" autofocus ng-keyup=\\\"$event.keyCode === 13 && $ctrl.saveDashboard()\\\">\\n    </p>\\n  </div>\\n  <div class=\\\"modal-footer\\\" ng-if=\\\"$ctrl.policy.isCreateDashboardEnabled()\\\">\\n    <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n    <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" ng-disabled=\\\"$ctrl.saveInProgress || !$ctrl.isFormValid()\\\" ng-click=\\\"$ctrl.saveDashboard()\\\" data-test=\\\"DashboardSaveButton\\\">Save</button>\\n  </div>\\n\\n  <div class=\\\"modal-body\\\" ng-if=\\\"!$ctrl.policy.isCreateDashboardEnabled()\\\">\\n    <edit-dashboard-dialog-disabled></edit-dashboard-dialog-disabled>\\n  </div>\\n</div>\"","module.exports = \"<div class=\\\"widget-wrapper\\\">\\n  <div class=\\\"tile body-container widget-visualization\\\" ng-if=\\\"$ctrl.type=='visualization'\\\" ng-class=\\\"$ctrl.type\\\"\\n    ng-switch=\\\"$ctrl.widget.getQueryResult().getStatus()\\\">\\n    <div class=\\\"body-row\\\">\\n      <div class=\\\"t-header widget clearfix\\\">\\n        <div class=\\\"dropdown pull-right widget-menu-remove\\\"  ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\">\\n          <div class=\\\"actions\\\">\\n            <a ng-click=\\\"$ctrl.deleteWidget()\\\" title=\\\"Remove From Dashboard\\\"><i class=\\\"zmdi zmdi-close\\\"></i></a>\\n          </div>\\n        </div>\\n        <div class=\\\"dropdown pull-right widget-menu-regular\\\" ng-if=\\\"!$ctrl.public\\\"\\n          uib-dropdown dropdown-append-to-body=\\\"true\\\"\\n        >\\n          <div class=\\\"actions\\\">\\n            <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle><i class=\\\"zmdi zmdi-more-vert\\\"></i></a>\\n          </div>\\n\\n          <ul class=\\\"dropdown-menu dropdown-menu-right\\\" uib-dropdown-menu>\\n            <li ng-class=\\\"{'disabled': $ctrl.widget.getQueryResult().isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.widget.getQueryResult().getLink($ctrl.widget.getQuery().id, 'csv')}}\\\" download=\\\"{{$ctrl.widget.getQueryResult().getName($ctrl.widget.getQuery().name, 'csv')}}\\\" target=\\\"_self\\\">Download as CSV File</a></li>\\n            <li ng-class=\\\"{'disabled': $ctrl.widget.getQueryResult().isEmpty()}\\\"><a ng-href=\\\"{{$ctrl.widget.getQueryResult().getLink($ctrl.widget.getQuery().id, 'xlsx')}}\\\" download=\\\"{{$ctrl.widget.getQueryResult().getName($ctrl.widget.getQuery().name, 'xlsx')}}\\\" target=\\\"_self\\\">Download as Excel File</a></li>\\n\\n            <li ng-if=\\\"$ctrl.canViewQuery || ($ctrl.dashboard.canEdit() && $ctrl.hasParameters())\\\" class=\\\"divider\\\"></li>\\n            <li ng-if=\\\"$ctrl.canViewQuery\\\"><a ng-href=\\\"{{$ctrl.widget.getQuery().getUrl(true, $ctrl.widget.visualization.id)}}\\\">View Query</a></li>\\n            <li ng-if=\\\"$ctrl.dashboard.canEdit() && $ctrl.hasParameters()\\\">\\n              <li ng-if=\\\"$ctrl.dashboard.canEdit() && $ctrl.hasParameters()\\\"><a ng-click=\\\"$ctrl.editParameterMappings()\\\">Edit Parameters</a></li>\\n            </li>\\n\\n            <li ng-if=\\\"$ctrl.dashboard.canEdit()\\\" class=\\\"divider\\\"></li>\\n            <li ng-if=\\\"$ctrl.dashboard.canEdit()\\\"><a ng-click=\\\"$ctrl.deleteWidget()\\\">Remove from Dashboard</a></li>\\n          </ul>\\n        </div>\\n        <div class=\\\"th-title\\\">\\n          <p>\\n            <query-link query=\\\"$ctrl.widget.getQuery()\\\" visualization=\\\"$ctrl.widget.visualization\\\"\\n              readonly=\\\"!$ctrl.canViewQuery\\\"></query-link>\\n          </p>\\n          <div class=\\\"text-muted query--description\\\" ng-bind-html=\\\"$ctrl.widget.getQuery().description | markdown\\\"></div>\\n        </div>\\n      </div>\\n      <div class=\\\"m-b-10\\\" ng-if=\\\"$ctrl.localParametersDefs().length > 0\\\">\\n        <parameters parameters=\\\"$ctrl.localParametersDefs()\\\"></parameters>\\n      </div>\\n    </div>\\n\\n    <div ng-switch-when=\\\"failed\\\" class=\\\"body-row-auto scrollbox\\\">\\n      <div class=\\\"alert alert-danger m-5\\\" ng-show=\\\"$ctrl.widget.getQueryResult().getError()\\\">Error running query: <strong>{{$ctrl.widget.getQueryResult().getError()}}</strong></div>\\n    </div>\\n    <div ng-switch-when=\\\"done\\\" class=\\\"body-row-auto scrollbox\\\">\\n      <visualization-renderer class=\\\"t-body\\\"\\n        visualization=\\\"$ctrl.widget.visualization\\\"\\n        query-result=\\\"$ctrl.widget.getQueryResult()\\\"\\n        filters=\\\"$ctrl.filters\\\"\\n      ></visualization-renderer>\\n    </div>\\n    <div ng-switch-default class=\\\"body-row-auto spinner-container\\\">\\n      <div class=\\\"spinner\\\">\\n        <i class=\\\"zmdi zmdi-refresh zmdi-hc-spin zmdi-hc-5x\\\"></i>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"body-row clearfix tile__bottom-control\\\">\\n      <a class=\\\"small hidden-print\\\" ng-click=\\\"$ctrl.refresh()\\\" ng-if=\\\"!$ctrl.public\\\" data-test=\\\"RefreshIndicator\\\">\\n        <i ng-class='{\\\"zmdi-hc-spin\\\": $ctrl.widget.loading}' class=\\\"zmdi zmdi-refresh\\\"></i>\\n        <span am-time-ago=\\\"$ctrl.widget.getQueryResult().getUpdatedAt()\\\" ng-if=\\\"!$ctrl.widget.loading\\\"></span>\\n        <rd-timer from=\\\"$ctrl.widget.refreshStartedAt\\\" ng-if=\\\"$ctrl.widget.loading\\\"></rd-timer>\\n      </a>\\n      <span class=\\\"small hidden-print\\\" ng-if=\\\"$ctrl.public\\\">\\n        <i class=\\\"zmdi zmdi-time-restore\\\"></i> <span am-time-ago=\\\"$ctrl.widget.getQueryResult().getUpdatedAt()\\\"></span>\\n      </span>\\n      <span class=\\\"visible-print\\\">\\n        <i class=\\\"zmdi zmdi-time-restore\\\"></i> {{$ctrl.widget.getQueryResult().getUpdatedAt() | dateTime}}\\n      </span>\\n\\n      <button class=\\\"btn btn-sm btn-default pull-right hidden-print btn-transparent btn__refresh\\\" ng-click=\\\"$ctrl.refresh()\\\" ng-if=\\\"!$ctrl.public\\\"><i class=\\\"zmdi zmdi-refresh\\\"></i></button>\\n      <button class=\\\"btn btn-sm btn-default pull-right hidden-print btn-transparent btn__refresh\\\" ng-click=\\\"$ctrl.expandVisualization()\\\"><i class=\\\"zmdi zmdi-fullscreen\\\"></i></button>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile body-container widget-restricted\\\" ng-if=\\\"$ctrl.type=='restricted'\\\" ng-class=\\\"$ctrl.type\\\">\\n    <div class=\\\"t-body body-row-auto scrollbox\\\">\\n      <div class=\\\"text-center\\\">\\n        <h1><span class=\\\"zmdi zmdi-lock\\\"></span></h1>\\n        <p class=\\\"text-muted\\\">\\n          This widget requires access to a data source you don't have access to.\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"tile body-container widget-text\\\" ng-hide=\\\"$ctrl.widget.width === 0\\\" ng-if=\\\"$ctrl.type=='textbox'\\\" ng-class=\\\"$ctrl.type\\\">\\n    <div class=\\\"body-row clearfix t-body\\\">\\n      <div class=\\\"dropdown pull-right widget-menu-remove\\\" ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\">\\n        <div class=\\\"dropdown-header\\\">\\n          <a class=\\\"actions\\\" ng-click=\\\"$ctrl.deleteWidget()\\\" title=\\\"Remove From Dashboard\\\"><i class=\\\"zmdi zmdi-close\\\"></i></a>\\n        </div>\\n      </div>\\n      <div class=\\\"dropdown pull-right widget-menu-regular\\\" ng-if=\\\"!$ctrl.public && $ctrl.dashboard.canEdit()\\\" uib-dropdown>\\n        <div class=\\\"dropdown-header\\\">\\n          <a data-toggle=\\\"dropdown\\\" uib-dropdown-toggle class=\\\"actions\\\"><i class=\\\"zmdi zmdi-more\\\"></i></a>\\n        </div>\\n\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu style=\\\"z-index:1000000\\\">\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.editTextBox()\\\">Edit</a></li>\\n          <li><a ng-show=\\\"$ctrl.dashboard.canEdit()\\\" ng-click=\\\"$ctrl.deleteWidget()\\\">Remove From Dashboard</a></li>\\n        </ul>\\n      </div>\\n    </div>\\n    <div class=\\\"body-row-auto scrollbox tiled t-body p-15 markdown\\\" ng-bind-html=\\\"$ctrl.widget.text | markdown\\\"></div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-hidden=\\\"true\\\" ng-click=\\\"$ctrl.dismiss()\\\">&times;</button>\\n  <div class=\\\"visualization-title\\\">\\n    <query-link query=\\\"$ctrl.widget.getQuery()\\\" visualization=\\\"$ctrl.widget.visualization\\\" readonly=\\\"true\\\"></query-link>\\n  </div>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <visualization-renderer visualization=\\\"$ctrl.widget.visualization\\\" query-result=\\\"$ctrl.widget.getQueryResult()\\\" class=\\\"t-body\\\"></visualization-renderer>\\n</div>\\n<div class=\\\"modal-footer\\\">\\n  <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.dismiss()\\\">Close</button>\\n</div>\\n\"","module.exports = \"<td ng-class=\\\"'content-align-' + column.alignContent + ' display-as-' + column.displayAs\\\">\\n  <div ng-if=\\\"allowHTML\\\" ng-bind-html=\\\"value\\\"></div>\\n  <div ng-if=\\\"!allowHTML\\\" ng-bind=\\\"value\\\"></div>\\n</td>\\n\"","module.exports = \"<div class=\\\"dynamic-table-container\\\">\\n  <table class=\\\"table table-condensed table-hover\\\" data-test=\\\"DynamicTable\\\">\\n    <thead>\\n      <tr>\\n        <th ng-repeat=\\\"column in $ctrl.columns\\\" ng-click=\\\"$ctrl.onColumnHeaderClick($event, column)\\\"\\n          class=\\\"sortable-column\\\" ng-class=\\\"'content-align-' + column.alignContent + ' display-as-' + column.displayAs\\\">\\n          <span ng-if=\\\"($ctrl.orderBy.length > 1) && ($ctrl.orderByColumnsIndex[column.name] > 0)\\\"\\n            class=\\\"sort-order-indicator\\\">{{ $ctrl.orderByColumnsIndex[column.name] }}</span>\\n          <span>{{column.title}}</span>\\n          <i ng-if=\\\"$ctrl.orderByColumnsIndex[column.name] > 0\\\"\\n            ng-class=\\\"{\\n              'fa': true,\\n              'fa-caret-down': $ctrl.orderByColumnsDirection[column.name] > 0,\\n              'fa-caret-up': $ctrl.orderByColumnsDirection[column.name] < 0\\n            }\\\"></i>\\n        </th>\\n        <th class=\\\"dynamic-table-spacer\\\"></th>\\n      </tr>\\n    </thead>\\n    <thead ng-if=\\\"$ctrl.searchColumns.length > 0\\\">\\n      <th class=\\\"p-t-10 p-b-10 p-l-15 p-r-15\\\" colspan=\\\"{{ $ctrl.columns.length + 1 }}\\\">\\n        <input type=\\\"text\\\" class=\\\"form-control\\\" placeholder=\\\"Search...\\\"\\n          ng-model=\\\"$ctrl.searchTerm\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n          ng-change=\\\"$ctrl.onSearchTermChanged()\\\">\\n      </th>\\n    </thead>\\n    <tbody>\\n      <tr ng-repeat=\\\"row in $ctrl.rowsToDisplay\\\"\\n        dynamic-table-row columns=\\\"$ctrl.columns\\\" row=\\\"row\\\"\\n        render=\\\"$ctrl.renderSingleRow\\\"\\n      ></tr>\\n    </tbody>\\n  </table>\\n</div>\\n<paginator paginator=\\\"$ctrl.paginatorAdapter\\\"></paginator>\\n\"","module.exports = \"<td ng-class=\\\"'display-as-' + column.displayAs\\\">\\n  <div ng-if=\\\"!isValid\\\" class=\\\"json-cell-invalid\\\">{{ value }}</div>\\n  <div ng-show=\\\"isValid\\\" class=\\\"json-cell-valid\\\"></div>\\n</td>\\n\"","module.exports = \"<div\\n  class=\\\"parameter-container form-inline bg-white\\\"\\n  ng-if=\\\"parameters | notEmpty\\\"\\n  ui-sortable=\\\"{ 'ui-floating': true, 'disabled': !editable }\\\"\\n  ng-model=\\\"parameters\\\"\\n>\\n  <div\\n    class=\\\"form-group m-r-10\\\"\\n    ng-repeat=\\\"param in parameters\\\"\\n    data-test=\\\"ParameterName{{ param.name }}\\\"\\n  >\\n    <label class=\\\"parameter-label\\\">{{ param.title }}</label>\\n    <button\\n      class=\\\"btn btn-default btn-xs\\\"\\n      ng-if=\\\"editable\\\"\\n      ng-click=\\\"showParameterSettings(param, $index)\\\"\\n      data-test=\\\"ParameterSettings-{{ param.name }}\\\"\\n    >\\n      <i class=\\\"zmdi zmdi-settings\\\"></i>\\n    </button>\\n    <parameter-value-input param=\\\"param\\\"></parameter-value-input>\\n  </div>\\n  <button\\n    class=\\\"m-t-20 btn btn-primary hidden-print\\\"\\n    ng-if=\\\"onRefresh\\\"\\n    ng-click=\\\"onRefresh()\\\"\\n    title=\\\"Refresh Dataset\\\"\\n  >\\n    <span class=\\\"zmdi zmdi-play\\\"></span>\\n  </button>\\n</div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Manage Permissions</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <div style=\\\"overflow: auto; height: 300px\\\">\\n    <ui-select ng-model=\\\"$ctrl.newGrantees.selected\\\" on-select=\\\"$ctrl.addGrantee($item)\\\">\\n       <ui-select-match placeholder=\\\"Add New User\\\"></ui-select-match>\\n       <ui-select-choices repeat=\\\"user in $ctrl.foundUsers | filter:$select.search\\\"\\n                         refresh=\\\"$ctrl.findUser($select.search)\\\"\\n                         refresh-delay=\\\"0\\\"\\n                         ui-disable-choice=\\\"user.alreadyGrantee\\\">\\n        <div class=\\\"d-flex align-items-center\\\">\\n          <img ng-src=\\\"{{ user.profile_image_url }}\\\" class=\\\"profile__image\\\" height=\\\"24px\\\">&nbsp;\\n          <span ng-class=\\\"{'text-muted': user.is_disabled}\\\">{{user.name}}</span>\\n          &nbsp;<small ng-if=\\\"user.alreadyGrantee\\\">(already has permission)</small>\\n        </div>\\n       </ui-select-choices>\\n    </ui-select>\\n      <br>\\n      <h5>Who has access</h5>\\n       <table class=\\\"table table-condensed table-hover table--permission\\\">\\n        <thead>\\n          <tr>\\n            <th></th>\\n            <th>User</th>\\n            <th>Permission</th>\\n            <th></th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n        <tr>\\n          <td width=\\\"32px\\\"><img ng-src=\\\"{{ $ctrl.owner.profile_image_url }}\\\" class=\\\"profile__image\\\" height=\\\"32px\\\"/></td>\\n          <td class=\\\"text-muted\\\"> {{ $ctrl.owner.name}}</td>\\n          <td class=\\\"mp__permission-type\\\">Owner</td>\\n          <td></td>\\n        </tr>\\n        <tr ng-repeat=\\\"grantee in $ctrl.grantees\\\" ng-if=\\\"grantee.id != $ctrl.owner.id\\\">\\n          <td width=\\\"32px\\\"><img ng-src=\\\"{{ grantee.profile_image_url }}\\\" class=\\\"profile__image\\\" height=\\\"32px\\\"/></td>\\n          <td ng-class=\\\"{'text-muted': grantee.is_disabled}\\\">{{grantee.name}}</td>\\n          <td class=\\\"mp__permission-type\\\">{{grantee.access_type}}</td>\\n          <td><button class=\\\"pull-right btn btn-sm btn-danger\\\" ng-click=\\\"$ctrl.removeGrantee(grantee)\\\">Remove</button></td>\\n        </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n  <h4 class=\\\"modal-title\\\">Embed Code</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n  <h5>IFrame Embed</h5>\\n  <div>\\n    <code data-test=\\\"EmbedIframe\\\">&lt;iframe src=\\\"{{ $ctrl.embedUrl }}\\\" width=\\\"720\\\" height=\\\"391\\\"&gt;&lt;/iframe&gt;</code>\\n  </div>\\n  <span class=\\\"text-muted\\\">(height should be adjusted)</span>\\n  <div ng-if=\\\"$ctrl.snapshotUrl\\\">\\n    <h5>Image Embed</h5>\\n    <div>\\n      <code style=\\\"overflow-wrap:break-word;\\\">{{$ctrl.snapshotUrl}}</code>\\n    </div>\\n  </div>\\n</div>\"","module.exports = \"<div class=\\\"schema-container\\\" ng-if=\\\"$ctrl.schema\\\">\\n  <div class=\\\"schema-control\\\">\\n    <input type=\\\"text\\\" placeholder=\\\"Search schema...\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.schemaFilter\\\" ng-model-options=\\\"{ debounce: 500 }\\\" ng-disabled=\\\"$ctrl.isEmpty()\\\" ng-change=\\\"$ctrl.splitFilter($ctrl.schemaFilter);\\\">\\n    <button class=\\\"btn btn-default\\\"\\n            title=\\\"Refresh Schema\\\"\\n            ng-click=\\\"$ctrl.onRefresh()\\\">\\n      <span class=\\\"zmdi zmdi-refresh\\\"></span>\\n    </button>\\n  </div>\\n\\n  <div class=\\\"schema-browser\\\" vs-repeat vs-size=\\\"$ctrl.getSize(table)\\\">\\n    <div ng-repeat=\\\"table in $ctrl.schema | filter:$ctrl.schemaFilterObject track by table.name\\\">\\n      <div class=\\\"table-name\\\" ng-click=\\\"$ctrl.showTable(table)\\\">\\n        <i class=\\\"fa fa-table\\\"></i>\\n        <strong>\\n          <span title=\\\"{{table.name}}\\\">{{table.name}}</span>\\n          <span ng-if=\\\"table.size !== undefined\\\"> ({{table.size}})</span>\\n        </strong>\\n        <i class=\\\"fa fa-angle-double-right copy-to-editor\\\" aria-hidden=\\\"true\\\"\\n          ng-click=\\\"$ctrl.itemSelected($event, [table.name])\\\"></i>\\n      </div>\\n      <div uib-collapse=\\\"table.collapsed\\\">\\n        <div ng-repeat=\\\"column in table.columns | filter:$ctrl.schemaFilterColumn track by column\\\" class=\\\"table-open\\\">{{column}}\\n          <i class=\\\"fa fa-angle-double-right copy-to-editor\\\" aria-hidden=\\\"true\\\"\\n            ng-click=\\\"$ctrl.itemSelected($event, [column])\\\"></i>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"tile m-l-10 m-r-10 embed__vis\\\" data-test=\\\"VisualizationEmbed\\\">\\n  <div class=\\\"embed-heading p-t-10 p-b-10 p-r-15 p-l-15\\\">\\n    <h3>\\n      <img ng-src=\\\"{{$ctrl.logoUrl}}\\\" style=\\\"height: 24px;\\\"/>\\n      <visualization-name visualization=\\\"$ctrl.visualization\\\"/>\\n      {{$ctrl.query.name}}\\n\\n      <small ng-if=\\\"$ctrl.showQueryDescription\\\">\\n        <div class=\\\"text-muted\\\" ng-bind-html=\\\"$ctrl.query.description | markdown\\\"></div>\\n      </small>\\n    </h3>\\n  </div>\\n\\n  <div class=\\\"col-md-12 query__vis\\\">\\n    <div class=\\\"p-t-15 p-b-5\\\" ng-if=\\\"$ctrl.query.hasParameters()\\\">\\n      <parameters parameters=\\\"$ctrl.query.getParametersDefs()\\\" on-refresh=\\\"$ctrl.refreshQueryResults\\\"></parameters>\\n    </div>\\n\\n    <div ng-if=\\\"$ctrl.error\\\">\\n      <div class=\\\"alert alert-danger\\\" data-test=\\\"ErrorMessage\\\">Error: {{$ctrl.error}}</div>\\n    </div>\\n\\n    <visualization-renderer visualization=\\\"$ctrl.visualization\\\" query-result=\\\"$ctrl.queryResult\\\" class=\\\"t-body\\\" ng-if=\\\"$ctrl.queryResult\\\">\\n    </visualization-renderer>\\n  </div>\\n\\n  <div class=\\\"clearfix tile__bottom-control\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <a class=\\\"small hidden-print\\\" ng-click=\\\"$ctrl.refreshQueryResults()\\\">\\n          <i ng-class='{\\\"zmdi-hc-spin\\\": $ctrl.loading}' class=\\\"zmdi zmdi-refresh\\\"></i>\\n          <span am-time-ago=\\\"$ctrl.queryResult.getUpdatedAt()\\\" ng-if=\\\"!$ctrl.loading\\\"></span>\\n          <rd-timer from=\\\"$ctrl.refreshStartedAt\\\" ng-if=\\\"$ctrl.loading\\\"></rd-timer>\\n        </a>\\n      </div>\\n      <span class=\\\"small visible-print\\\"><i class=\\\"zmdi zmdi-time-restore\\\"></i> {{$ctrl.queryResult.getUpdatedAt() | dateTime}} UTC</span>\\n      <div class=\\\"col-xs-6 text-right hidden-print\\\">\\n        <a class=\\\"btn btn-default btn-sm\\\" ng-href=\\\"{{$ctrl.query.getUrl()}}\\\" target=\\\"_blank\\\" tooltip=\\\"Open in Redash\\\">\\n          <span class=\\\"zmdi zmdi-link\\\"></span>\\n        </a>\\n\\n        <div class=\\\"btn-group dropup\\\" uib-dropdown ng-if=\\\"!$ctrl.query.hasParameters()\\\">\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm dropdown-toggle\\\" aria-haspopup=\\\"true\\\" uib-dropdown-toggle\\n                  aria-expanded=\\\"false\\\">\\n            Download Dataset <span class=\\\"caret\\\"></span>\\n          </button>\\n          <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n            <li>\\n              <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'csv', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'csv')}}\\\" target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-o\\\"></span> Download as CSV File\\n              </a>\\n            </li>\\n            <li>\\n              <a ng-href=\\\"{{$ctrl.queryResult.getLink($ctrl.query.id, 'xlsx', $ctrl.apiKey)}}\\\" download=\\\"{{$ctrl.queryResult.getName($ctrl.query.name, 'xlsx')}}\\\"  target=\\\"_self\\\">\\n                <span class=\\\"fa fa-file-excel-o\\\"></span> Download as Excel File\\n              </a>\\n            </li>\\n          </ul>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"'Settings'\\\"></page-header>\\n\\n  <div class=\\\"bg-white tiled\\\">\\n    <ul class=\\\"tab-nav\\\">\\n      <li\\n        ng-repeat=\\\"menuItem in $ctrl.settingsMenu.items\\\"\\n        ng-if=\\\"$ctrl.isAvailable(menuItem.permission)\\\"\\n        ng-class=\\\"{'active': $ctrl.isActive(menuItem)}\\\"\\n      >\\n        <a href=\\\"{{menuItem.path}}\\\">{{menuItem.title}}</a>\\n      </li>\\n\\n    </ul>\\n    <div class=\\\"p-15\\\">\\n      <div ng-transclude>\\n\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div ng-if=\\\"$ctrl.options.globalSeriesType != 'custom'\\\">\\n  <plotly-chart options=\\\"$ctrl.options\\\" series=\\\"$ctrl.chartSeries\\\"></plotly-chart>\\n</div>\\n<div ng-if=\\\"plotlyOptions.globalSeriesType == 'custom'\\\">\\n  <custom-plotly-chart options=\\\"$ctrl.options\\\" series=\\\"$ctrl.chartSeries\\\"></custom-plotly-chart>\\n</div>\\n\"","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'general'}\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'xAxis'}\\\" ng-if=\\\"$ctrl.options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('xAxis')\\\">X Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'yAxis'}\\\" ng-if=\\\"$ctrl.options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('yAxis')\\\">Y Axis</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'series'}\\\" ng-if=\\\"$ctrl.options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('series')\\\">Series</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'colors'}\\\" ng-if=\\\"$ctrl.options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('colors')\\\">Colors</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'dataLabels'}\\\" ng-if=\\\"$ctrl.options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('dataLabels')\\\">Data Labels</a>\\n    </li>\\n  </ul>\\n  <div ng-if=\\\"$ctrl.currentTab == 'general'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Chart Type</label>\\n      <div ng-if=\\\"$ctrl.chartTypes\\\">\\n        <!--the if is a weird workaround-->\\n        <ui-select ng-model=\\\"$ctrl.options.globalSeriesType\\\" on-select=\\\"$ctrl.chartTypeChanged()\\\">\\n          <ui-select-match placeholder=\\\"Choose chart type...\\\">\\n            <div>\\n              <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n              {{$select.selected.value.name}}\\n            </div>\\n          </ui-select-match>\\n          <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in $ctrl.chartTypes\\\">\\n            <div>\\n              <i class=\\\"fa fa-{{info.value.icon}}\\\"></i>\\n              <span> </span>\\n              <span ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span>\\n            </div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': chartEditor.xAxisColumn.$invalid}\\\">\\n      <label class=\\\"control-label\\\">X Column</label>\\n\\n      <ui-select name=\\\"xAxisColumn\\\" required ng-model=\\\"$ctrl.form.xAxisColumn\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <!-- not using regular validation (chartEditor.yAxisColumns.$invalid) due to a bug in ui-select with multiple choices-->\\n    <div class=\\\"form-group\\\" ng-class=\\\"{'has-error': !$ctrl.form.yAxisColumns || $ctrl.form.yAxisColumns.length == 0}\\\">\\n      <label class=\\\"control-label\\\">Y Columns</label>\\n\\n      <ui-select multiple name=\\\"yAxisColumns\\\" required ng-model=\\\"$ctrl.form.yAxisColumns\\\">\\n        <ui-select-match placeholder=\\\"Choose columns...\\\">{{$item}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.columnNames | remove:$ctrl.form.groupby | remove:$ctrl.form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"['custom', 'heatmap'].indexOf($ctrl.options.globalSeriesType) == -1\\\">\\n      <label class=\\\"control-label\\\">Group by</label>\\n      <ui-select name=\\\"groupby\\\" ng-model=\\\"$ctrl.form.groupby\\\" class=\\\"clearable\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">\\n          {{$select.selected}}\\n        </ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.xAxisColumn\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.showSizeColumnPicker()\\\">\\n      <label class=\\\"control-label\\\">Bubble size column</label>\\n\\n      <ui-select name=\\\"sizeColumn\\\" ng-model=\\\"$ctrl.form.sizeColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.showZColumnPicker()\\\">\\n      <label class=\\\"control-label\\\">Color Column</label>\\n\\n      <ui-select name=\\\"zValColumn\\\" ng-model=\\\"$ctrl.form.zValColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"['custom', 'heatmap'].indexOf($ctrl.options.globalSeriesType) == -1\\\">\\n      <label class=\\\"control-label\\\">Errors column</label>\\n\\n      <ui-select name=\\\"errorColumn\\\" ng-model=\\\"$ctrl.form.errorColumn\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.columnNames | remove:$ctrl.form.yAxisColumns | remove:$ctrl.form.groupby\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span>\\n          <span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.options.globalSeriesType === 'pie'\\\">\\n      <label class=\\\"control-label\\\">Direction</label>\\n\\n      <ui-select ng-model=\\\"$ctrl.options.direction.type\\\">\\n        <ui-select-match placeholder=\\\"Choose Direction...\\\">{{$select.selected.label}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"direction.value as direction in $ctrl.directions\\\">\\n          <div ng-bind-html=\\\"direction.label | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"['custom', 'heatmap'].indexOf($ctrl.options.globalSeriesType) == -1\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.legend.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Legend\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\" ng-if=\\\"$ctrl.options.globalSeriesType == 'box'\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.showpoints\\\">\\n        <i class=\\\"input-helper\\\"></i> Show All Points\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\" ng-if=\\\"['custom', 'heatmap'].indexOf($ctrl.options.globalSeriesType) == -1\\\">\\n      <label class=\\\"control-label\\\">Stacking</label>\\n\\n      <div ng-if=\\\"$ctrl.stackingOptions\\\">\\n        <!--the if is a weird workaround-->\\n        <ui-select\\n          ng-model=\\\"$ctrl.options.series.stacking\\\"\\n          ng-disabled=\\\"['line', 'area', 'column'].indexOf($ctrl.options.globalSeriesType) == -1\\\"\\n        >\\n          <ui-select-match placeholder=\\\"Choose stacking...\\\">{{ $select.selected.key }}</ui-select-match>\\n          <ui-select-choices repeat=\\\"value.value as (key, value) in $ctrl.stackingOptions\\\">\\n            <div ng-bind-html=\\\"value.key | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n\\n      <div ng-if=\\\"['line', 'area', 'column'].indexOf($ctrl.options.globalSeriesType) >= 0\\\" class=\\\"checkbox\\\">\\n        <label class=\\\"control-label\\\">\\n          <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.series.percentValues\\\"> Normalize values to percentage\\n        </label>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.options.globalSeriesType == 'custom'\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Custom code</label>\\n      <textarea ng-model=\\\"$ctrl.options.customCode\\\" class=\\\"form-control v-resizable\\\" rows=\\\"10\\\">\\n      </textarea>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.enableConsoleLogs\\\">\\n        <i class=\\\"input-helper\\\"></i> Show errors in the console\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.autoRedraw\\\">\\n        <i class=\\\"input-helper\\\"></i> Auto update graph\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.currentTab == 'xAxis'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Scale</label>\\n      <ui-select ng-model=\\\"$ctrl.options.xAxis.type\\\">\\n        <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected.label}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"scaleType.value as scaleType in $ctrl.xAxisScales\\\">\\n          <div ng-bind-html=\\\"scaleType.label | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Name</label>\\n      <input ng-model=\\\"$ctrl.options.xAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.sortX\\\">\\n        <i class=\\\"input-helper\\\"></i> Sort Values\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.reverseX\\\">\\n        <i class=\\\"input-helper\\\"></i> Reverse Order\\n      </label>\\n    </div>\\n\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.xAxis.labels.enabled\\\">\\n        <i class=\\\"input-helper\\\"></i> Show Labels\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.currentTab == 'yAxis'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div ng-repeat=\\\"yAxis in $ctrl.options.yAxis\\\">\\n      <h4>{{$index == 0 ? 'Left' : 'Right'}} Y Axis</h4>\\n\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Scale</label>\\n        <ui-select ng-model=\\\"yAxis.type\\\">\\n          <ui-select-match placeholder=\\\"Choose Scale...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"scaleType in $ctrl.yAxisScales\\\">\\n            <div ng-bind-html=\\\"scaleType | capitalize | highlight: $select.search\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Name</label>\\n        <input ng-model=\\\"yAxis.title.text\\\" type=\\\"text\\\" class=\\\"form-control\\\">\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Min Value</label>\\n        <input ng-model=\\\"yAxis.rangeMin\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\">\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"control-label\\\">Max Value</label>\\n        <input ng-model=\\\"yAxis.rangeMax\\\" type=\\\"number\\\" step=\\\"any\\\" placeholder=\\\"Auto\\\" class=\\\"form-control\\\">\\n      </div>\\n\\n      <div class=\\\"checkbox\\\" ng-if=\\\"$ctrl.options.globalSeriesType == 'heatmap'\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.sortY\\\">\\n          <i class=\\\"input-helper\\\"></i> Sort Values\\n        </label>\\n      </div>\\n\\n      <div class=\\\"checkbox\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.reverseY\\\">\\n          <i class=\\\"input-helper\\\"></i> Reverse Order\\n        </label>\\n      </div>\\n\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.currentTab == 'series'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n        <th style=\\\"width: 1%;\\\">zIndex</th>\\n        <th ng-if=\\\"$ctrl.options.globalSeriesType != 'pie'\\\">Left Y Axis</th>\\n        <th ng-if=\\\"$ctrl.options.globalSeriesType != 'pie'\\\">Right Y Axis</th>\\n        <th>Label</th>\\n        <th ng-if=\\\"$ctrl.options.globalSeriesType != 'pie'\\\">Type</th>\\n      </thead>\\n      <tbody ui-sortable ng-model=\\\"$ctrl.form.seriesList\\\">\\n        <tr ng-repeat=\\\"name in $ctrl.form.seriesList\\\">\\n          <td style=\\\"width: 1%; cursor: move;\\\">\\n            <i class=\\\"fa fa-arrows-v\\\"></i>\\n            <span ng-bind=\\\"$ctrl.options.seriesOptions[name].zIndex + 1\\\"></span>\\n          </td>\\n          <td ng-if=\\\"$ctrl.options.globalSeriesType != 'pie'\\\">\\n            <input type=\\\"radio\\\" ng-value=\\\"0\\\" ng-model=\\\"$ctrl.options.seriesOptions[name].yAxis\\\">\\n          </td>\\n          <td ng-if=\\\"$ctrl.options.globalSeriesType != 'pie'\\\">\\n            <input type=\\\"radio\\\" ng-value=\\\"1\\\" ng-model=\\\"$ctrl.options.seriesOptions[name].yAxis\\\">\\n          </td>\\n          <td style=\\\"padding: 3px; width: 140px;\\\">\\n            <input\\n              placeholder=\\\"{{name}}\\\"\\n              class=\\\"form-control input-sm super-small-input\\\" type=\\\"text\\\"\\n              ng-model=\\\"$ctrl.options.seriesOptions[name].name\\\"\\n            >\\n          </td>\\n          <td ng-if=\\\"$ctrl.options.globalSeriesType != 'pie'\\\" style=\\\"padding: 3px; width: 105px;\\\">\\n            <ui-select ng-model=\\\"$ctrl.options.seriesOptions[name].type\\\">\\n              <ui-select-match placeholder=\\\"Chart Type\\\">\\n                <div>\\n                  <i class=\\\"fa fa-{{$select.selected.value.icon}}\\\"></i>\\n                  {{$select.selected.value.name}}\\n                </div>\\n              </ui-select-match>\\n              <ui-select-choices repeat=\\\"info.chartType as (chartType, info) in $ctrl.chartTypes\\\">\\n                <div>\\n                  <i class=\\\"fa fa-{{info.value.icon}}\\\"></i>\\n                  <span> </span>\\n                  <span ng-bind-html=\\\"info.value.name | highlight: $select.search\\\"></span>\\n                </div>\\n              </ui-select-choices>\\n            </ui-select>\\n          </td>\\n        </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-if=\\\"($ctrl.currentTab == 'colors') && (['pie', 'heatmap'].indexOf($ctrl.options.globalSeriesType) == -1)\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <tbody>\\n      <tr ng-repeat=\\\"name in $ctrl.form.seriesList\\\">\\n        <td style=\\\"padding: 3px; width: 140px;\\\">\\n          <div>{{ name }}</div>\\n        </td>\\n        <td style=\\\"padding: 3px; width: 35px;\\\">\\n          <ui-select ng-model=\\\"$ctrl.options.seriesOptions[name].color\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-if=\\\"($ctrl.currentTab == 'colors') && ($ctrl.options.globalSeriesType == 'heatmap')\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.options.globalSeriesType == 'heatmap'\\\">\\n      <label class=\\\"control-label\\\">Color Scheme</label>\\n\\n      <ui-select ng-model=\\\"$ctrl.options.colorScheme\\\">\\n        <ui-select-match allow-clear=\\\"true\\\" placeholder=\\\"Choose Color Scheme...\\\">{{$select.selected | capitalize}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"value in $ctrl.colorScheme\\\">\\n          <div ng-bind-html=\\\"value | highlight: $select.search\\\"></div>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.options.colorScheme == 'Custom...'\\\">\\n          <label class=\\\"control-label\\\">Min Color</label>\\n          <ui-select ng-model=\\\"$ctrl.options.heatMinColor\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.options.colorScheme == 'Custom...'\\\">\\n          <label class=\\\"control-label\\\">Max Color</label>\\n          <ui-select ng-model=\\\"$ctrl.options.heatMaxColor\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"($ctrl.currentTab == 'colors') && ($ctrl.options.globalSeriesType == 'pie')\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <tbody>\\n      <tr ng-repeat=\\\"name in $ctrl.form.valuesList\\\">\\n        <td style=\\\"padding: 3px; width: 140px;\\\">\\n          <div>{{ name }}</div>\\n        </td>\\n        <td style=\\\"padding: 3px; width: 35px;\\\">\\n          <ui-select ng-model=\\\"$ctrl.options.valuesOptions[name].color\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.currentTab == 'dataLabels'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div ng-if=\\\"['line', 'area', 'column', 'scatter', 'pie', 'heatmap'].indexOf($ctrl.options.globalSeriesType) >= 0\\\" class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.showDataLabels\\\"> Show Data Labels</label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"chart-editor-number-format\\\">\\n        Number Values Format\\n        <span class=\\\"m-l-5\\\" uib-popover-html=\\\"'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n          popover-trigger=\\\"'click outsideClick'\\\">\\n          <i class=\\\"fa fa-question-circle\\\"></i>\\n        </span>\\n      </label>\\n      <input\\n        class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.numberFormat\\\"\\n        ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\" id=\\\"chart-editor-number-format\\\"\\n      >\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"chart-editor-percent-format\\\">\\n        Percent Values Format\\n        <span class=\\\"m-l-5\\\" uib-popover-html=\\\"'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n          popover-trigger=\\\"'click outsideClick'\\\">\\n          <i class=\\\"fa fa-question-circle\\\"></i>\\n        </span>\\n      </label>\\n      <input\\n        class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.percentFormat\\\"\\n        ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\" id=\\\"chart-editor-percent-format\\\"\\n      >\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"chart-editor-datetime-format\\\">\\n        Date/Time Values Format\\n        <span class=\\\"m-l-5\\\" uib-popover-html=\\\"'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n          popover-trigger=\\\"'click outsideClick'\\\">\\n          <i class=\\\"fa fa-question-circle\\\"></i>\\n        </span>\\n      </label>\\n      <input\\n        class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.dateTimeFormat\\\"\\n        ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\" id=\\\"chart-editor-datetime-format\\\"\\n      >\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"chart-editor-text\\\">\\n        Data Labels\\n        <i class=\\\"fa fa-question-circle m-l-5\\\" uib-popover-html=\\\"$ctrl.templateHint\\\"\\n          popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\"></i>\\n      </label>\\n      <input class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.textFormat\\\"\\n        ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\" id=\\\"chart-editor-text\\\"\\n        placeholder=\\\"(auto)\\\"\\n      >\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"map-visualization-container\\\">\\n  <div resize-event=\\\"handleResize()\\\" ng-style=\\\"{ background: $ctrl.options.colors.background }\\\"></div>\\n  <div ng-if=\\\"$ctrl.options.legend.visible && ($ctrl.legendItems.length > 0)\\\"\\n    class=\\\"leaflet-bar map-custom-control\\\" ng-class=\\\"$ctrl.options.legend.position\\\"\\n  >\\n    <div ng-repeat=\\\"item in $ctrl.legendItems\\\" class=\\\"d-flex align-items-center\\\">\\n      <color-box color=\\\"item.color\\\" class=\\\"m-0\\\" style=\\\"line-height: 1px\\\"></color-box>\\n      <div class=\\\"flex-fill text-{{ $ctrl.options.legend.alignText }}\\\">{{ $ctrl.formatValue(item.limit) }}</div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'general'}\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'colors'}\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('colors')\\\">Colors</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'bounds'}\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('bounds')\\\">Bounds</a>\\n    </li>\\n  </ul>\\n  <div ng-if=\\\"$ctrl.currentTab == 'general'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Map Type</label>\\n          <select ng-options=\\\"key as value for (key, value) in $ctrl.mapTypes\\\"\\n            ng-model=\\\"$ctrl.options.mapType\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Key column</label>\\n          <select ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"\\n            ng-model=\\\"$ctrl.options.countryCodeColumn\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Key type</label>\\n          <select ng-options=\\\"key as value for (key, value) in $ctrl.countryCodeTypes\\\"\\n            ng-model=\\\"$ctrl.options.countryCodeType\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Value column</label>\\n          <select ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"\\n            ng-model=\\\"$ctrl.options.valueColumn\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"legend-value-format\\\">\\n            Value format\\n            <span class=\\\"m-l-5\\\"\\n              uib-popover-html=\\\"'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n              popover-trigger=\\\"'click outsideClick'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n          </label>\\n          <input class=\\\"form-control\\\" id=\\\"legend-value-format\\\"\\n            ng-model=\\\"$ctrl.options.valueFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"legend-value-placeholder\\\">Value placeholder</label>\\n          <input class=\\\"form-control\\\" id=\\\"legend-value-placeholder\\\"\\n            ng-model=\\\"$ctrl.options.noValuePlaceholder\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label><input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.legend.visible\\\"> Show legend</label>\\n    </div>\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"legend-position\\\">Legend position</label>\\n          <select class=\\\"form-control\\\" id=\\\"legend-position\\\"\\n            ng-options=\\\"key as value for (key, value) in $ctrl.legendPositions\\\"\\n            ng-model=\\\"$ctrl.options.legend.position\\\"\\n            ng-disabled=\\\"!$ctrl.options.legend.visible\\\"\\n          ></select>\\n        </div>\\n      </div>\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"legend-position\\\">Legend text alignment</label>\\n          <div class=\\\"btn-group d-flex\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-md flex-fill\\\"\\n              ng-click=\\\"$ctrl.options.legend.alignText = 'left'\\\"\\n              ng-class=\\\"{active: $ctrl.options.legend.alignText == 'left'}\\\"><i class=\\\"fa fa-align-left\\\"></i></button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-md flex-fill\\\"\\n              ng-click=\\\"$ctrl.options.legend.alignText = 'center'\\\"\\n              ng-class=\\\"{active: $ctrl.options.legend.alignText == 'center'}\\\"><i class=\\\"fa fa-align-center\\\"></i></button>\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-md flex-fill\\\"\\n              ng-click=\\\"$ctrl.options.legend.alignText = 'right'\\\"\\n              ng-class=\\\"{active: $ctrl.options.legend.alignText == 'right'}\\\"><i class=\\\"fa fa-align-right\\\"></i></button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <label><input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.tooltip.enabled\\\"> Show tooltip</label>\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"tooltip-template\\\">Tooltip template</label>\\n      <input class=\\\"form-control\\\" id=\\\"tooltip-template\\\"\\n        ng-model=\\\"$ctrl.options.tooltip.template\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n        ng-disabled=\\\"!$ctrl.options.tooltip.enabled\\\">\\n    </div>\\n\\n    <label><input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.popup.enabled\\\"> Show popup</label>\\n    <div class=\\\"form-group\\\">\\n      <label for=\\\"popup-template\\\">Popup template</label>\\n      <textarea class=\\\"form-control resize-vertical\\\" id=\\\"popup-template\\\" rows=\\\"3\\\"\\n        ng-model=\\\"$ctrl.options.popup.template\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n        ng-disabled=\\\"!$ctrl.options.popup.enabled\\\"></textarea>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"ui-sortable-bypass text-muted\\\" style=\\\"font-weight: normal; cursor: pointer;\\\"\\n        uib-popover-html=\\\"$ctrl.templateHint\\\"\\n        popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\">\\n        Format specs <i class=\\\"fa fa-question-circle m-l-5\\\"></i>\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.currentTab == 'colors'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Steps</label>\\n          <input type=\\\"number\\\" min=\\\"3\\\" max=\\\"11\\\" class=\\\"form-control\\\"\\n            ng-model=\\\"$ctrl.options.steps\\\">\\n        </div>\\n      </div>\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Clustering mode</label>\\n          <select ng-options=\\\"key as value for (key, value) in $ctrl.clusteringModes\\\"\\n            ng-model=\\\"$ctrl.options.clusteringMode\\\" class=\\\"form-control\\\"></select>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Min color</label>\\n          <ui-select ng-model=\\\"$ctrl.options.colors.min\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Max color</label>\\n          <ui-select ng-model=\\\"$ctrl.options.colors.max\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>No value color</label>\\n          <ui-select ng-model=\\\"$ctrl.options.colors.noValue\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Background color</label>\\n          <ui-select ng-model=\\\"$ctrl.options.colors.background\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-xs-6\\\">\\n        <div class=\\\"form-group\\\">\\n          <label>Borders color</label>\\n          <ui-select ng-model=\\\"$ctrl.options.colors.borders\\\">\\n            <ui-select-match>\\n              <color-box color=\\\"$select.selected.value\\\"></color-box>\\n              <span ng-bind-html=\\\"$select.selected.key | capitalize\\\"></span>\\n            </ui-select-match>\\n            <ui-select-choices repeat=\\\"color.value as (key, color) in $ctrl.colors\\\">\\n              <color-box color=\\\"color.value\\\"></color-box>\\n              <span ng-bind-html=\\\"color.key | capitalize | highlight: $select.search\\\"></span>\\n            </ui-select-choices>\\n          </ui-select>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.currentTab == 'bounds'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label>North-East latitude and longitude</label>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-xs-6\\\">\\n          <input class=\\\"form-control\\\" type=\\\"text\\\"\\n            ng-model=\\\"$ctrl.options.bounds[1][0]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n        <div class=\\\"col-xs-6\\\">\\n          <input class=\\\"form-control\\\" type=\\\"text\\\"\\n            ng-model=\\\"$ctrl.options.bounds[1][1]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label>South-West latitude and longitude</label>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-xs-6\\\">\\n          <input class=\\\"form-control\\\" type=\\\"text\\\"\\n            ng-model=\\\"$ctrl.options.bounds[0][0]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n        <div class=\\\"col-xs-6\\\">\\n          <input class=\\\"form-control\\\" type=\\\"text\\\"\\n            ng-model=\\\"$ctrl.options.bounds[0][1]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = __webpack_public_path__ + \"data/0962607.countries.geo.json\";","module.exports = __webpack_public_path__ + \"data/650f3ee.japan.prefectures.geo.json\";","module.exports = \"<ul class=\\\"tab-nav\\\">\\n  <li ng-class=\\\"{active: $ctrl.currentTab == 'columns'}\\\">\\n    <a ng-click=\\\"$ctrl.setCurrentTab('columns')\\\">Columns</a>\\n  </li>\\n  <li ng-class=\\\"{active: $ctrl.currentTab == 'options'}\\\">\\n    <a ng-click=\\\"$ctrl.setCurrentTab('options')\\\">Options</a>\\n  </li>\\n</ul>\\n\\n<div ng-if=\\\"$ctrl.currentTab == 'options'\\\" class=\\\"m-t-10 m-b-10\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Time Interval</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.timeInterval\\\">\\n      <option value=\\\"daily\\\">Daily</option>\\n      <option value=\\\"weekly\\\">Weekly</option>\\n      <option value=\\\"monthly\\\">Monthly</option>\\n    </select>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Mode</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.mode\\\">\\n      <option value=\\\"diagonal\\\">Fill gaps with zeros</option>\\n      <option value=\\\"simple\\\">Show data as is</option>\\n    </select>\\n  </div>\\n</div>\\n\\n<div ng-if=\\\"$ctrl.currentTab == 'columns'\\\" class=\\\"m-t-10 m-b-10\\\">\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Date (Bucket)</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.dateColumn\\\"\\n      ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"></select>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Stage</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.stageColumn\\\"\\n      ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"></select>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Bucket Population Size</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.totalColumn\\\"\\n      ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"></select>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"control-label\\\">Stage Value</label>\\n    <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.options.valueColumn\\\"\\n      ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"></select>\\n  </div>\\n</div>\\n\"","module.exports = \"<counter\\n  ng-class=\\\"{'positive': targetValue && trendPositive, 'negative': targetValue && !trendPositive}\\\"\\n  resize-event=\\\"handleResize()\\\"\\n>\\n  <div ng-style=\\\"{\\n    '-o-transform': 'scale(' + scale + ')',\\n    '-ms-transform': 'scale(' + scale + ')',\\n    '-moz-transform': 'scale(' + scale + ')',\\n    '-webkit-transform': 'scale(' + scale + ')',\\n    'transform': 'scale(' + scale + ')'\\n  }\\\">\\n    <value ng-if=\\\"isNumber\\\">{{stringPrefix}}{{counterValue | number}}{{stringSuffix}}</value>\\n    <value ng-if=\\\"!isNumber\\\">{{stringPrefix}}{{counterValue}}{{stringSuffix}}</value>\\n    <counter-target ng-if=\\\"targetValue\\\" title=\\\"({{targetValue | number}})\\\">({{targetValue | number}})</counter-target>\\n    <counter-name>{{counterLabel}}</counter-name>\\n  </div>\\n</counter>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'general'}\\\">\\n      <a ng-click=\\\"$ctrl.changeTab('general')\\\">General</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'format'}\\\">\\n      <a ng-click=\\\"$ctrl.changeTab('format')\\\">Format</a>\\n    </li>\\n  </ul>\\n  <div ng-show=\\\"$ctrl.currentTab == 'general'\\\" class=\\\"m-t-10 m-b-10\\\">\\n      <div class=\\\"form-group\\\">\\n          <label class=\\\"col-lg-6\\\">Counter Label</label>\\n          <div class=\\\"col-lg-6\\\">\\n            <input type=\\\"text\\\" ng-model=\\\"$ctrl.options.counterLabel\\\" placeholder=\\\"{{$ctrl.visualizationName}}\\\"\\n              class=\\\"form-control\\\" ng-trim=\\\"false\\\">\\n          </div>\\n        </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Counter Value Column Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\" ng-model=\\\"$ctrl.options.counterColName\\\"\\n          class=\\\"form-control\\\" ng-disabled=\\\"$ctrl.options.countRow\\\"></select>\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Counter Value Row Number</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"$ctrl.options.rowNumber\\\" class=\\\"form-control\\\" ng-disabled=\\\"$ctrl.options.countRow\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Target Value Column Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\" ng-model=\\\"$ctrl.options.targetColName\\\" class=\\\"form-control\\\">\\n          <option value=\\\"\\\">No target value</option>\\n        </select>\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.options.targetColName\\\">\\n      <label class=\\\"col-lg-6\\\">Target Value Row Number</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"$ctrl.options.targetRowNumber\\\" class=\\\"form-control\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <div class=\\\"col-lg-6\\\">\\n        <label>\\n          <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.countRow\\\">\\n          Count Rows\\n        </label>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"$ctrl.currentTab == 'format'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Decimal Place</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"number\\\" ng-model=\\\"$ctrl.options.stringDecimal\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.isValueNumber()\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Decimal Character</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"$ctrl.options.stringDecChar\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.isValueNumber()\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting Thousands Separator</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"$ctrl.options.stringThouSep\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting String Prefix</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"$ctrl.options.stringPrefix\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Formatting String Suffix</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <input type=\\\"text\\\" ng-model=\\\"$ctrl.options.stringSuffix\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.isValueNumber()\\\" ng-trim=\\\"false\\\">\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"form-horizontal\\\">\\n  <div style=\\\"margin-bottom: 20px;\\\">\\n    This visualization constructs funnel chart. Please notice that value column only accept number for values.\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Step Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"\\n        ng-model=\\\"$ctrl.options.stepCol.colName\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Step Column Display Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"$ctrl.options.stepCol.displayAs\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Funnel Value Column Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <select ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"\\n        ng-model=\\\"$ctrl.options.valueCol.colName\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Funnel Value Column Display Name</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"text\\\" ng-model=\\\"$ctrl.options.valueCol.displayAs\\\" class=\\\"form-control\\\">\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label class=\\\"col-lg-6\\\">Auto Sort Record By Value</label>\\n    <div class=\\\"col-lg-6\\\">\\n      <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.autoSort\\\">\\n    </div>\\n  </div>\\n  <div ng-show=\\\"!$ctrl.options.autoSort\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"col-lg-6\\\">Funnel Value Columns Name</label>\\n      <div class=\\\"col-lg-6\\\">\\n        <select ng-options=\\\"col.name as col.name for col in $ctrl.data.columns\\\"\\n          ng-model=\\\"$ctrl.options.sortKeyCol.colName\\\" class=\\\"form-control\\\"></select>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"map-visualization-container\\\">\\n  <div resize-event=\\\"handleResize()\\\"></div>\\n</div>\\n\"","module.exports = \"<div>\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'general'}\\\"><a ng-click=\\\"$ctrl.setCurrentTab('general')\\\">General</a></li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'groups'}\\\"><a ng-click=\\\"$ctrl.setCurrentTab('groups')\\\">Groups</a></li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'map'}\\\"><a ng-click=\\\"$ctrl.setCurrentTab('map')\\\">Map Settings</a></li>\\n  </ul>\\n\\n  <div ng-show=\\\"$ctrl.currentTab == 'general'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Latitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"$ctrl.options.latColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.columnNames | remove:$ctrl.options.classify | remove:$ctrl.options.lonColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Longitude Column Name</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"$ctrl.options.lonColName\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.columnNames | remove:$ctrl.options.classify | remove:$ctrl.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Group By</label>\\n      <ui-select name=\\\"form-control\\\" required ng-model=\\\"$ctrl.options.classify\\\">\\n        <ui-select-match placeholder=\\\"Choose column...\\\">{{$select.selected}}</ui-select-match>\\n        <ui-select-choices repeat=\\\"column in $ctrl.classifyColumns | remove:$ctrl.options.lonColName | remove:$ctrl.options.latColName\\\">\\n          <span ng-bind-html=\\\"column | highlight: $select.search\\\"></span><span> </span>\\n          <small class=\\\"text-muted\\\" ng-bind=\\\"$ctrl.columns[column].type\\\"></small>\\n        </ui-select-choices>\\n      </ui-select>\\n    </div>\\n  </div>\\n\\n  <div ng-show=\\\"$ctrl.currentTab == 'groups'\\\" class=\\\"m-b-10\\\">\\n    <table class=\\\"table table-condensed col-table\\\">\\n      <thead>\\n      <th>Name</th>\\n      <th>Color</th>\\n      </thead>\\n      <tbody>\\n      <tr ng-repeat=\\\"(name, options) in $ctrl.options.groups\\\">\\n        <td>{{name}}</td>\\n        <td>\\n          <input class=\\\"form-control\\\" type=\\\"color\\\" ng-model=\\\"options.color\\\"/>\\n        </td>\\n      </tr>\\n      </tbody>\\n    </table>\\n  </div>\\n\\n  <div ng-show=\\\"$ctrl.currentTab == 'map'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"checkbox\\\">\\n      <label>\\n        <input type=\\\"checkbox\\\" ng-model=\\\"$ctrl.options.clusterMarkers\\\">\\n        <i class=\\\"input-helper\\\"></i> Cluster Markers\\n      </label>\\n    </div>\\n\\n    <div class=\\\"form-group\\\">\\n      <label class=\\\"control-label\\\">Map Tiles</label>\\n      <select ng-options=\\\"tile.url as tile.name for tile in $ctrl.mapTiles\\\"\\n        ng-model=\\\"$ctrl.options.mapTileUrl\\\" class=\\\"form-control\\\"></select>\\n    </div>\\n  </div>\\n\\n</div>\\n\"","module.exports = \"<dynamic-table rows=\\\"$ctrl.gridRows\\\" columns=\\\"$ctrl.gridColumns\\\" items-per-page=\\\"$ctrl.options.itemsPerPage\\\"></dynamic-table>\\n\"","module.exports = \"<div class=\\\"table-editor-container\\\">\\n  <ul class=\\\"tab-nav\\\">\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'columns'}\\\" ng-if=\\\"$ctrl.options.globalSeriesType != 'custom'\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('columns')\\\">Columns</a>\\n    </li>\\n    <li ng-class=\\\"{active: $ctrl.currentTab == 'grid'}\\\">\\n      <a ng-click=\\\"$ctrl.setCurrentTab('grid')\\\">Grid</a>\\n    </li>\\n  </ul>\\n\\n  <div ng-if=\\\"$ctrl.currentTab == 'grid'\\\" class=\\\"m-t-10 m-b-10\\\">\\n    <div class=\\\"form-group\\\">\\n      <label>Items per page</label>\\n      <select ng-options=\\\"value for value in $ctrl.allowedItemsPerPage\\\"\\n        ng-model=\\\"$ctrl.options.itemsPerPage\\\" class=\\\"form-control\\\">\\n      </select>\\n    </div>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.currentTab == 'columns'\\\" class=\\\"table-editor-query-columns m-t-10 m-b-10\\\"\\n    ui-sortable ng-model=\\\"$ctrl.options.columns\\\">\\n    <div ng-repeat=\\\"column in $ctrl.options.columns\\\">\\n      <div class=\\\"table-editor-column-header form-group\\\">\\n        <div class=\\\"input-group\\\">\\n          <span class=\\\"input-group-addon\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.visible\\\"></span>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.title\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\">\\n        </div>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <div class=\\\"btn-group btn-group-justified\\\">\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs\\\"\\n            ng-click=\\\"column.alignContent = 'left'\\\"\\n            ng-class=\\\"{active: column.alignContent == 'left'}\\\"><i class=\\\"fa fa-align-left\\\"></i></button>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs\\\"\\n            ng-click=\\\"column.alignContent = 'center'\\\"\\n            ng-class=\\\"{active: column.alignContent == 'center'}\\\"><i class=\\\"fa fa-align-center\\\"></i></button>\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs\\\"\\n            ng-click=\\\"column.alignContent = 'right'\\\"\\n            ng-class=\\\"{active: column.alignContent == 'right'}\\\"><i class=\\\"fa fa-align-right\\\"></i></button>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label class=\\\"ui-sortable-bypass\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.allowSearch\\\"> Use for search</label>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Display as:</label>\\n        <select ng-options=\\\"item.value as item.name for item in $ctrl.displayAsOptions\\\"\\n          ng-model=\\\"column.displayAs\\\" class=\\\"form-control\\\">\\n        </select>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'string'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.allowHTML\\\"> Allow HTML content</label>\\n        </div>\\n        <div ng-if=\\\"column.allowHTML\\\" class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.highlightLinks\\\"> Highlight links</label>\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'number'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-number-format\\\">\\n            Number format\\n            <span class=\\\"m-l-5\\\"\\n              uib-popover-html=\\\"'Format <a href=&quot;https://redash.io/help/user-guide/visualizations/formatting-numbers&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n              popover-trigger=\\\"'click outsideClick'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n          </label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.numberFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-number-format\\\">\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'datetime'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-datetime-format\\\">\\n            Date/Time format\\n            <span class=\\\"m-l-5\\\"\\n              uib-popover-html=\\\"'Format <a href=&quot;https://momentjs.com/docs/#/displaying/format/&quot; target=&quot;_blank&quot;>specs.</a>'\\\"\\n              popover-trigger=\\\"'click outsideClick'\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n          </label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.dateTimeFormat\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-datetime-format\\\">\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'boolean'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-boolean-false\\\">Value for <code>false</code></label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.booleanValues[0]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-boolean-false\\\">\\n        </div>\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-boolean-true\\\">Value for <code>true</code></label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.booleanValues[1]\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-boolean-true\\\">\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'image'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-image-url-template\\\">URL template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.imageUrlTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-image-url-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label>\\n            Size\\n            <span class=\\\"m-l-5\\\"\\n              uib-popover-html=\\\"'Any positive integer value that specifies size in pixels. Leave empty to use default value.'\\\"\\n              popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\"><i class=\\\"fa fa-question-circle\\\"></i></span>\\n          </label>\\n          <div class=\\\"d-flex\\\">\\n            <input class=\\\"form-control\\\" ng-model=\\\"column.imageWidth\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n              placeholder=\\\"Width\\\">\\n            <span class=\\\"form-control-static m-l-5 m-r-5\\\">&times;</span>\\n            <input class=\\\"form-control\\\" ng-model=\\\"column.imageHeight\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n              placeholder=\\\"Height\\\">\\n          </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-image-title-template\\\">Title template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.imageTitleTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-image-title-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass text-muted\\\" style=\\\"font-weight: normal; cursor: pointer;\\\"\\n            uib-popover-html=\\\"templateHint\\\"\\n            popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\">\\n            Format specs <i class=\\\"fa fa-question-circle m-l-5\\\"></i>\\n          </label>\\n        </div>\\n      </div>\\n\\n      <div ng-if=\\\"column.displayAs == 'link'\\\">\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-link-url-template\\\">URL template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.linkUrlTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-link-url-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-link-text-template\\\">Text template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.linkTextTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-link-text-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label for=\\\"table-editor-{{ column.name }}-link-title-template\\\">Title template</label>\\n          <input class=\\\"form-control\\\" ng-model=\\\"column.linkTitleTemplate\\\" ng-model-options=\\\"{ allowInvalid: true, debounce: 200 }\\\"\\n            id=\\\"table-editor-{{ column.name }}-link-title-template\\\">\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass\\\"><input type=\\\"checkbox\\\" ng-model=\\\"column.linkOpenInNewTab\\\"> Open in new tab</label>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"ui-sortable-bypass text-muted\\\" style=\\\"font-weight: normal; cursor: pointer;\\\"\\n            uib-popover-html=\\\"templateHint\\\"\\n            popover-trigger=\\\"'click outsideClick'\\\" popover-placement=\\\"top-left\\\">\\n            Format specs <i class=\\\"fa fa-question-circle m-l-5\\\"></i>\\n          </label>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <page-header title=\\\"$ctrl.alert.name || $ctrl.getDefaultName() || 'New Alert'\\\"></page-header>\\n\\n  <email-settings-warning feature-name=\\\"'alert emails'\\\"></email-settings-warning>\\n\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row bg-white tiled p-10\\\">\\n      <div class=\\\"col-md-8\\\">\\n        <form name=\\\"alertForm\\\" class=\\\"form\\\">\\n          <div class=\\\"form-group\\\">\\n            <label>Query</label>\\n            <query-selector type=\\\"'select'\\\" selected-query=\\\"$ctrl.alert.query\\\" on-change=\\\"$ctrl.onQuerySelected\\\" disabled=\\\"!$ctrl.canEdit\\\" />\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-show=\\\"$ctrl.selectedQuery\\\">\\n            <label>Name</label>\\n            <input type=\\\"string\\\" placeholder=\\\"{{$ctrl.getDefaultName()}}\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.name\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n          </div>\\n\\n          <div ng-show=\\\"$ctrl.queryResult\\\" class=\\\"form-horizontal\\\">\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Value column</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.queryResult.getColumnNames()\\\" ng-model=\\\"$ctrl.alert.options.column\\\"\\n                        class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Value</label>\\n              <div class=\\\"col-md-4\\\">\\n                <p class=\\\"form-control-static\\\">{{$ctrl.queryResult.getData()[0][$ctrl.alert.options.column]}}</p>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Op</label>\\n              <div class=\\\"col-md-4\\\">\\n                <select ng-options=\\\"name for name in $ctrl.ops\\\" ng-model=\\\"$ctrl.alert.options.op\\\" class=\\\"form-control\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"></select>\\n              </div>\\n              <label class=\\\"control-label col-md-2\\\">Reference</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" step=\\\"any\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.options.value\\\" placeholder=\\\"reference value\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"\\n                       required/>\\n              </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n              <label class=\\\"control-label col-md-2\\\">Rearm seconds</label>\\n              <div class=\\\"col-md-4\\\">\\n                <input type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.alert.rearm\\\" ng-disabled=\\\"!$ctrl.canEdit\\\"/>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n            <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!alertForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n            <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.alert.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n          </div>\\n        </form>\\n      </div>\\n      <div class=\\\"col-md-4\\\" ng-if=\\\"$ctrl.alert.id\\\">\\n        <alert-subscriptions alert-id=\\\"$ctrl.alert.id\\\"></alert-subscriptions>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <div class=\\\"row p-l-15 p-r-15 m-b-10 m-l-0 m-r-0 dashboard-header page-header--new\\\">\\n    <div class=\\\"page-title col-xs-8 col-sm-7 col-lg-7 p-l-0\\\">\\n      <favorites-control item=\\\"$ctrl.dashboard\\\"></favorites-control>\\n      <h3>\\n        <edit-in-place class=\\\"edit-in-place\\\" is-editable=\\\"$ctrl.layoutEditing\\\" on-done=\\\"$ctrl.saveName\\\" ignore-blanks=\\\"true\\\" value=\\\"$ctrl.dashboard.name\\\" editor=\\\"'input'\\\"></edit-in-place>\\n      </h3>\\n\\n      <img ng-src=\\\"{{$ctrl.dashboard.user.profile_image_url}}\\\" class=\\\"profile__image_thumb--dashboard\\\" alt=\\\"{{$ctrl.dashboard.user.name}}\\\">\\n\\n      <dashboard-tags-control class=\\\"hidden-xs\\\"\\n        tags=\\\"$ctrl.dashboard.tags\\\" is-draft=\\\"$ctrl.dashboard.is_draft\\\" is-archived=\\\"$ctrl.dashboard.is_archived\\\"\\n        can-edit=\\\"$ctrl.isDashboardOwner\\\" get-available-tags=\\\"$ctrl.loadTags\\\" on-edit=\\\"$ctrl.saveTags\\\"></dashboard-tags-control>\\n\\n    </div>\\n    <div class=\\\"col-xs-4 col-sm-5 col-lg-5 text-right dashboard__control p-r-0\\\">\\n      <span ng-if=\\\"!$ctrl.dashboard.is_archived && !public\\\" class=\\\"hidden-print\\\">\\n          <div ng-if=\\\"$ctrl.layoutEditing\\\" ng-switch=\\\"$ctrl.isLayoutDirty\\\">\\n            <span ng-switch-when=\\\"true\\\" ng-switch=\\\"$ctrl.saveInProgress || $ctrl.saveDelay\\\">\\n                <span ng-switch-when=\\\"true\\\">\\n                  <span class=\\\"save-status\\\" data-saving>Saving</span>\\n                  <button class=\\\"btn btn-primary btn-sm\\\" ng-disabled=\\\"$ctrl.editBtnClickedWhileSaving\\\" ng-click=\\\"$ctrl.editBtnClickedWhileSaving = true\\\">\\n                    <i class=\\\"fa fa-check\\\" ng-class=\\\"{'fa-spinner fa-pulse': $ctrl.editBtnClickedWhileSaving}\\\"></i> Done Editing\\n                  </button>\\n                </span>\\n                <span ng-switch-default>\\n                  <span class=\\\"save-status\\\" data-error>Saving Failed</span>\\n                  <button class=\\\"btn btn-primary btn-sm\\\" ng-click=\\\"$ctrl.saveDashboardLayout()\\\">\\n                    Retry\\n                  </button>\\n                </span>\\n            </span>\\n            <span ng-switch-default>\\n              <span class=\\\"save-status\\\">Saved</span>\\n              <button class=\\\"btn btn-primary btn-sm\\\"\\n                ng-disabled=\\\"$ctrl.isGridDisabled\\\"\\n                ng-click=\\\"$ctrl.editLayout(false)\\\">\\n                <i class=\\\"fa fa-check\\\"></i> Done Editing\\n              </button>\\n            </span>\\n          </div>\\n\\n          <button type=\\\"button\\\" class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"$ctrl.togglePublished()\\\" tooltip=\\\"Publish Dashboard\\\" ng-if=\\\"$ctrl.dashboard.is_draft && !$ctrl.layoutEditing\\\">\\n            <span class=\\\"fa fa-paper-plane\\\"></span> Publish\\n          </button>\\n\\n          <div class=\\\"btn-group\\\" uib-dropdown ng-if=\\\"!$ctrl.layoutEditing\\\">\\n            <button id=\\\"split-button\\\" type=\\\"button\\\"\\n                    ng-class=\\\"{'btn-default btn-sm': $ctrl.refreshRate === null,'btn-primary btn-sm':$ctrl.refreshRate !== null}\\\"\\n                    class=\\\"btn btn-sm\\\" ng-click=\\\"$ctrl.refreshDashboard()\\\">\\n              <i class=\\\"zmdi zmdi-refresh\\\"></i> {{$ctrl.refreshRate === null ? 'Refresh' : $ctrl.refreshRate.name}}\\n            </button>\\n            <button type=\\\"button\\\" class=\\\"btn hidden-xs\\\" uib-dropdown-toggle\\n                    ng-class=\\\"{'btn-default btn-sm': $ctrl.refreshRate === null,'btn-primary btn-sm':$ctrl.refreshRate !== null}\\\">\\n              <span class=\\\"caret\\\"></span>\\n              <span class=\\\"sr-only\\\">Split button!</span>\\n            </button>\\n            <ul class=\\\"dropdown-menu pull-right\\\" ng-model=\\\"$ctrl.refreshRate\\\" uib-dropdown-menu role=\\\"menu\\\" aria-labelledby=\\\"split-button\\\">\\n              <li role=\\\"menuitem\\\" ng-repeat=\\\"refreshRate in $ctrl.refreshRates\\\" ng-class=\\\"{disabled: !refreshRate.enabled}\\\">\\n                <a href=\\\"javascript:void(0)\\\" ng-click=\\\"$ctrl.setRefreshRate(refreshRate)\\\">{{refreshRate.name}}</a>\\n              </li>\\n              <li role=\\\"menuitem\\\" ng-if=\\\"$ctrl.refreshRate !== null\\\">\\n                <a href=\\\"#\\\" ng-click=\\\"$ctrl.setRefreshRate(null)\\\">Stop auto refresh</a>\\n              </li>\\n            </ul>\\n          </div>\\n          <button type=\\\"button\\\" class=\\\"btn btn-sm hidden-xs\\\" ng-class=\\\"{'btn-default': !$ctrl.isFullscreen, 'btn-primary': $ctrl.isFullscreen}\\\" tooltip=\\\"Enable/Disable Fullscreen display\\\" ng-click=\\\"$ctrl.toggleFullscreen()\\\" ng-if=\\\"!$ctrl.dashboard.is_draft && !$ctrl.layoutEditing\\\">\\n            <span class=\\\"zmdi zmdi-fullscreen\\\"></span>\\n          </button>\\n          <button type=\\\"button\\\" class=\\\"btn btn-sm hidden-xs\\\" ng-class=\\\"{'btn-default': !$ctrl.dashboard.publicAccessEnabled, 'btn-primary': $ctrl.dashboard.publicAccessEnabled}\\\" tooltip=\\\"Enable/Disable Share URL\\\" ng-click=\\\"$ctrl.openShareForm()\\\" ng-if=\\\"($ctrl.dashboard.canEdit() || $ctrl.dashboard.publicAccessEnabled) && !$ctrl.dashboard.is_draft && !$ctrl.layoutEditing\\\">\\n            <span class=\\\"zmdi zmdi-share\\\"></span>\\n          </button>\\n      </span>\\n\\n      <div class=\\\"btn-group hidden-print hidden-xs\\\" role=\\\"group\\\" ng-show=\\\"$ctrl.dashboard.canEdit()\\\" uib-dropdown ng-if=\\\"!$ctrl.dashboard.is_archived && !$ctrl.layoutEditing\\\" data-test=\\\"DashboardMoreMenu\\\">\\n        <button class=\\\"btn btn-default btn-sm dropdown-toggle\\\" uib-dropdown-toggle>\\n          <span class=\\\"zmdi zmdi-more\\\"></span>\\n        </button>\\n        <ul class=\\\"dropdown-menu pull-right\\\" uib-dropdown-menu>\\n          <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\" ng-class=\\\"{hidden: $ctrl.isGridDisabled}\\\"><a ng-click=\\\"$ctrl.editLayout(true)\\\">Edit</a></li>\\n          <li ng-if=\\\"$ctrl.showPermissionsControl\\\"><a ng-click=\\\"$ctrl.showManagePermissionsModal()\\\">Manage Permissions</a></li>\\n          <li ng-if=\\\"!$ctrl.dashboard.is_draft\\\"><a ng-click=\\\"$ctrl.togglePublished()\\\">Unpublish</a></li>\\n          <li ng-if=\\\"!$ctrl.dashboard.is_archived\\\"><a ng-click=\\\"$ctrl.archiveDashboard()\\\">Archive</a></li>\\n        </ul>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"m-b-10 p-15 bg-white tiled\\\" ng-if=\\\"$ctrl.layoutEditing\\\">\\n    <label>\\n        <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.dashboard.dashboard_filters_enabled\\\" ng-change=\\\"$ctrl.updateDashboardFiltersState()\\\">\\n        Use Dashboard Level Filters\\n    </label>\\n  </div>\\n\\n  <div class=\\\"m-b-10 p-15 bg-white tiled\\\" ng-if=\\\"$ctrl.globalParameters.length > 0\\\">\\n    <parameters parameters=\\\"$ctrl.globalParameters\\\"></parameters>\\n  </div>\\n\\n  <div class=\\\"m-b-10 p-15 bg-white tiled\\\" ng-if=\\\"$ctrl.filters | notEmpty\\\">\\n    <filters filters=\\\"$ctrl.filters\\\" on-change=\\\"$ctrl.filtersOnChange\\\"></filters>\\n  </div>\\n\\n  <div ng-if=\\\"$ctrl.dashboard.widgets.length > 0\\\"  id=\\\"dashboard-container\\\" ng-class=\\\"{'preview-mode': !$ctrl.layoutEditing, 'editing-mode': $ctrl.layoutEditing, 'grid-enabled': !$ctrl.isGridDisabled}\\\">\\n    <div gridstack editing=\\\"$ctrl.layoutEditing\\\" on-layout-changed=\\\"$ctrl.onLayoutChanged\\\"\\n      is-one-column-mode=\\\"$ctrl.isGridDisabled\\\" class=\\\"dashboard-wrapper\\\">\\n      <div class=\\\"dashboard-widget-wrapper\\\"\\n        ng-repeat=\\\"widget in $ctrl.dashboard.widgets track by widget.id\\\"\\n        gridstack-item=\\\"widget.options.position\\\" gridstack-item-id=\\\"{{ widget.id }}\\\" data-test=\\\"WidgetId{{ widget.id }}\\\">\\n        <div class=\\\"grid-stack-item-content\\\">\\n          <dashboard-widget widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" filters=\\\"$ctrl.filters\\\"\\n            on-delete=\\\"$ctrl.removeWidget(widget.id)\\\"></dashboard-widget>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"add-widget-container\\\" ng-if=\\\"$ctrl.layoutEditing\\\">\\n    <h2>\\n      <i class=\\\"zmdi zmdi-widgets\\\"></i>\\n      <span class=\\\"hidden-xs hidden-sm\\\">Widgets are individual query visualizations or text boxes you can place on your dashboard in various arrangements.</span>\\n    </h2>\\n    <div>\\n      <a class=\\\"btn btn-default\\\" ng-click=\\\"$ctrl.showAddTextboxDialog()\\\">Add Textbox</a>\\n      <a class=\\\"btn btn-primary m-l-10\\\" ng-click=\\\"$ctrl.showAddWidgetDialog()\\\">Add Widget</a>\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"container p-t-10 p-b-20\\\">\\n  <page-header title=\\\"$ctrl.dashboard.name\\\"></page-header>\\n\\n  <div class=\\\"m-b-5\\\">\\n    <filters filters=\\\"$ctrl.filters\\\" on-change=\\\"$ctrl.filtersOnChange\\\"></filters>\\n  </div>\\n\\n  <div style=\\\"padding-bottom: 5px\\\" ng-if=\\\"$ctrl.dashboard.widgets.length > 0\\\">\\n    <div gridstack editing=\\\"false\\\" class=\\\"dashboard-wrapper preview-mode\\\">\\n      <div class=\\\"dashboard-widget-wrapper\\\"\\n        ng-repeat=\\\"widget in $ctrl.dashboard.widgets\\\"\\n        gridstack-item=\\\"widget.options.position\\\" gridstack-item-id=\\\"{{ widget.id }}\\\">\\n        <div class=\\\"grid-stack-item-content\\\">\\n          <dashboard-widget widget=\\\"widget\\\" dashboard=\\\"$ctrl.dashboard\\\" filters=\\\"$ctrl.filters\\\" public=\\\"true\\\"></dashboard-widget>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<div id=\\\"footer\\\">\\n  <div class=\\\"text-center\\\">\\n    <a href=\\\"https://redash.io\\\"><img ng-src=\\\"{{$ctrl.logoUrl}}\\\" width=\\\"38\\\"/></a>\\n  </div>\\n  Powered by <a href=\\\"https://redash.io/?ref=public-dashboard\\\">Redash</a>\\n</div>\\n\"","module.exports = \"<div class=\\\"container\\\">\\n  <div ng-if=\\\"$ctrl.messages.includes('using-deprecated-embed-feature')\\\" class=\\\"alert alert-warning\\\">\\n      You have enabled <code>ALLOW_PARAMETERS_IN_EMBEDS</code>. This setting is now deprecated and should be turned off. Parameters in embeds are supported by default. <a href=\\\"https://discuss.redash.io/t/support-for-parameters-in-embedded-visualizations/3337\\\" target=\\\"_blank\\\">Read more</a>.\\n  </div>\\n  <div ng-if=\\\"$ctrl.messages.includes('email-not-verified')\\\" class=\\\"alert alert-warning\\\">\\n      We have sent an email with a confirmation link to your email address. Please follow the link to verify your email address. <a ng-click=\\\"$ctrl.verifyEmail()\\\">Resend email</a>.\\n  </div>\\n  <empty-state\\n    title=\\\"'Welcome to Redash '\\\"\\n    description=\\\"'Connect to any data source, easily visualize and share your data'\\\"\\n    illustration=\\\"'dashboard'\\\"\\n    help-link=\\\"'https://redash.io/help/user-guide/getting-started'\\\"\\n    show-dashboard-step=\\\"true\\\"\\n    show-invite-step=\\\"true\\\"\\n    onboarding-mode=\\\"true\\\"\\n  ></empty-state>\\n\\n  <home-extra></home-extra>\\n\\n  <div class=\\\"tile\\\">\\n    <div class=\\\"t-body tb-padding\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-sm-6\\\">\\n          <p class=\\\"f-500 m-b-20 c-black\\\">Favorite Dashboards</p>\\n\\n          <p ng-if=\\\"$ctrl.noDashboards\\\">\\n            <span class=\\\"btn-favourite\\\">\\n              <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n            </span>\\n            Favorite <a href=\\\"dashboards\\\">Dashboards</a> will appear here\\n          </p>\\n\\n          <div class=\\\"list-group\\\">\\n            <a ng-href=\\\"dashboard/{{dashboard.slug}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"dashboard in $ctrl.favoriteDashboards\\\"\\n              ng-if=\\\"dashboard.is_favorite\\\">\\n              <span class=\\\"btn-favourite\\\">\\n                <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n              </span>\\n              {{dashboard.name}}\\n              <span class=\\\"label label-default\\\" ng-if=\\\"dashboard.is_draft\\\">Unpublished</span>\\n            </a>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"col-sm-6\\\">\\n          <p class=\\\"f-500 m-b-20 c-black\\\">Favorite Queries</p>\\n          <p ng-if=\\\"$ctrl.noQueries\\\">\\n            <span class=\\\"btn-favourite\\\">\\n              <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n            </span>\\n            Favorite <a href=\\\"queries\\\">Queries</a> will appear here\\n          </p>\\n          <div class=\\\"list-group\\\">\\n            <a ng-href=\\\"queries/{{query.id}}\\\" class=\\\"list-group-item\\\" ng-repeat=\\\"query in $ctrl.favoriteQueries\\\" ng-if=\\\"query.is_favorite\\\">\\n              <span class=\\\"btn-favourite\\\">\\n                <i class=\\\"fa fa-star\\\" aria-hidden=\\\"true\\\"></i>\\n              </span>\\n              {{query.name}}\\n              <span class=\\\"label label-default\\\" ng-if=\\\"query.is_draft\\\">Unpublished</span>\\n            </a>\\n          </div>\\n        </div>\\n      </div>\\n\\n    </div>\\n  </div>\\n</div>\\n\"","module.exports = \"<div class=\\\"modal-header\\\">\\n    <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" ng-click=\\\"$ctrl.close()\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n    <h4 class=\\\"modal-title\\\">Add to Dashboard</h4>\\n</div>\\n<div class=\\\"modal-body\\\">\\n    <form name=\\\"alertForm\\\" class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Choose the dashboard to add this query to:</label>\\n        <ui-select ng-model=\\\"$ctrl.dashboardList\\\" reset-search-input=\\\"false\\\" on-select=\\\"$ctrl.onDashboardSelected($item)\\\" ng-disabled=\\\"$ctrl.saveInProgress\\\">\\n          <ui-select-match placeholder=\\\"Search a dashboard by name\\\">{{$select.selected.name}}</ui-select-match>\\n          <ui-select-choices repeat=\\\"q in $ctrl.dashboards\\\"\\n                             refresh=\\\"$ctrl.searchDashboards($select.search, $ctrl.limitToUsersDashboards)\\\"\\n                             refresh-delay=\\\"0\\\">\\n            <div ng-bind-html=\\\"$ctrl.trustAsHtml(q.name | highlight: $select.search)\\\"></div>\\n          </ui-select-choices>\\n        </ui-select>\\n      </div>\\n    </form>\\n</div>\"","module.exports = \"<settings-screen>\\n  <div class=\\\"\\\">\\n    <form name=\\\"snippetForm\\\" class=\\\"form\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>Trigger</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.trigger\\\" ng-disabled=\\\"!$ctrl.canEdit\\\" required autofocus>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Description</label>\\n        <input type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.snippet.description\\\" ng-disabled=\\\"!$ctrl.canEdit\\\">\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>Snippet</label>\\n        <pre ng-if=\\\"!$ctrl.canEdit\\\">{{$ctrl.snippet.snippet}}</pre>\\n        <div ui-ace=\\\"$ctrl.editorOptions\\\" ng-model=\\\"$ctrl.snippet.snippet\\\" style=\\\"height:300px\\\" ng-if=\\\"$ctrl.canEdit\\\"></div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" ng-if=\\\"$ctrl.canEdit\\\">\\n        <button class=\\\"btn btn-primary\\\" ng-disabled=\\\"!snippetForm.$valid\\\" ng-click=\\\"$ctrl.saveChanges()\\\">Save</button>\\n        <button class=\\\"btn btn-danger\\\" ng-if=\\\"$ctrl.snippet.id\\\" ng-click=\\\"$ctrl.delete()\\\">Delete</button>\\n      </div>\\n      <small ng-if=\\\"$ctrl.snippet.user\\\">\\n        Created by:\\n        <img ng-src=\\\"{{ $ctrl.snippet.user.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\"/>\\n        <span ng-class=\\\"{'text-muted': $ctrl.snippet.user.is_disabled}\\\">{{$ctrl.snippet.user.name}}</span>\\n      </small>\\n    </form>\\n  </div>\\n</settings-screen>\\n\"","module.exports = \"<settings-screen>\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\">\\n          <p>\\n            <a href=\\\"query_snippets/new\\\" class=\\\"btn btn-default\\\"><i class=\\\"fa fa-plus\\\"></i> New Snippet</a>\\n          </p>\\n\\n          <table class=\\\"table table-border table-hover\\\">\\n            <thead>\\n              <tr>\\n                <th>Trigger</th>\\n                <th>Description</th>\\n                <th>Snippet</th>\\n                <th>Created By</th>\\n                <th>Updated At</th>\\n              </tr>\\n            </thead>\\n            <tbody>\\n              <tr ng-repeat=\\\"snippet in $ctrl.snippets.getPageRows()\\\">\\n                <td>\\n                  <a href=\\\"query_snippets/{{snippet.id}}\\\">{{snippet.trigger}}</a>\\n                </td>\\n                <td>\\n                  {{snippet.description}}\\n                </td>\\n                <td>\\n                  {{snippet.snippet}}\\n                </td>\\n                <td>\\n                  <img ng-src=\\\"{{ snippet.user.profile_image_url }}\\\" class=\\\"profile__image_thumb\\\"/>\\n                  <span ng-class=\\\"{'text-muted': snippet.user.is_disabled}\\\">{{snippet.user.name}}</span>\\n                </td>\\n                <td>\\n                  <span am-time-ago=\\\"snippet.created_at\\\"></span>\\n                </td>\\n              </tr>\\n            </tbody>\\n          </table>\\n          <paginator paginator=\\\"$ctrl.snippets\\\"></paginator>\\n        </div>\\n    </div>\\n</settings-screen>\\n\"","module.exports = \"<settings-screen>\\n    <div class=\\\"row\\\" data-test=\\\"OrganizationSettings\\\">\\n        <div class=\\\"col-md-offset-4 col-md-4\\\">\\n            <h3 class=\\\"m-t-0\\\">General</h3>\\n            <p>\\n                <label>\\n                    Date Format\\n                </label>\\n                <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.date_format\\\" ng-change=\\\"$ctrl.update('date_format')\\\" data-test=\\\"DateFormatSelect\\\">\\n                    <option ng-repeat=\\\"date_format in $ctrl.dateFormatList\\\" value=\\\"{{date_format}}\\\">{{date_format}}</option>\\n                </select>\\n            </p>\\n            <p>\\n                <label>\\n                    Time Format\\n                </label>\\n                <select class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.time_format\\\" ng-change=\\\"$ctrl.update('time_format')\\\" data-test=\\\"TimeFormatSelect\\\">\\n                    <option ng-repeat=\\\"time_format in $ctrl.timeFormatList\\\" value=\\\"{{time_format}}\\\">{{time_format}}</option>\\n                </select>\\n            </p>\\n\\n            <p>\\n                <h4>Feature Flags</h4>\\n\\n                <label>\\n                    <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.settings.feature_show_permissions_control\\\" ng-change=\\\"$ctrl.update('feature_show_permissions_control')\\\"\\n                        accesskey=\\\"tab\\\"> Enable experimental multiple owners support\\n                </label>\\n            </p>\\n            <hr>\\n            <h3>Authentication</h3>\\n            <p>\\n                <label>\\n                    <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.settings.auth_password_login_enabled\\\" ng-change=\\\"$ctrl.update('auth_password_login_enabled')\\\"\\n                        accesskey=\\\"tab\\\" ng-disabled=\\\"$ctrl.disablePasswordLoginToggle()\\\"> Password Login Enabled\\n                    <span uib-popover=\\\"Password login can be disabled only if another login method is enabled.\\\" popover-trigger=\\\"'mouseenter'\\\"\\n                        ng-if=\\\"$ctrl.disablePasswordLoginToggle()\\\">\\n                        <i class=\\\"fa fa-question-circle\\\"></i>\\n                    </span>\\n                </label>\\n\\n                <div class=\\\"callout callout-warning\\\" ng-if=\\\"!$ctrl.settings.auth_password_login_enabled\\\">\\n                    Password based login is currently disabled and users will be able to login only with the enabled SSO options.\\n                </div>\\n            </p>\\n\\n            <div ng-if=\\\"$ctrl.googleLoginEnabled\\\">\\n                <h4>Google Login</h4>\\n                <label>\\n                    Allowed Google Apps Domains\\n                </label>\\n                <ui-select multiple tagging tagging-label=\\\"false\\\" ng-model=\\\"$ctrl.settings.auth_google_apps_domains\\\" tagging-tokens=\\\"SPACE|,\\\"\\n                    title=\\\"Google Apps Domain(s)\\\"\\n                    ng-change=\\\"$ctrl.update('auth_google_apps_domains')\\\">\\n                    <ui-select-match placeholder=\\\"Google Apps Domain(s)\\\">{{$item}}</ui-select-match>\\n                    <!-- the ui-select-choices is here just to make ui-select work -->\\n                    <ui-select-choices repeat=\\\"domain in $ctrl.domains\\\">\\n                        {{domain}}\\n                    </ui-select-choices>\\n                </ui-select>\\n\\n                <div class=\\\"callout callout-info m-t-5\\\" ng-if=\\\"$ctrl.settings.auth_google_apps_domains | notEmpty\\\">\\n                    Any user registered with a <strong>{{$ctrl.settings.auth_google_apps_domains | join}}</strong> Google Apps account will be able to login. If they don't have an existing user, a new user will be created and join the <strong>Default</strong> group.\\n                </div>\\n            </div>\\n\\n            <h4>SAML</h4>\\n            <p>\\n                <label>\\n                    <input name=\\\"input\\\" type=\\\"checkbox\\\" ng-model=\\\"$ctrl.settings.auth_saml_enabled\\\" ng-change=\\\"$ctrl.update('auth_saml_enabled')\\\"\\n                        accesskey=\\\"tab\\\"> SAML Enabled\\n                </label>\\n\\n                <div ng-show=\\\"$ctrl.settings.auth_saml_enabled\\\">\\n                    <div class=\\\"form-group\\\">\\n                        <label>SAML Metadata URL</label>\\n                        <input name=\\\"input\\\" type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.auth_saml_metadata_url\\\" accesskey=\\\"tab\\\" ng-change=\\\"$ctrl.update('auth_saml_metadata_url')\\\"\\n                            ng-model-options=\\\"{ debounce: 200 }\\\">\\n                    </div>\\n                    <div class=\\\"form-group\\\">\\n                        <label>SAML Entity ID</label>\\n                        <input name=\\\"input\\\" type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.auth_saml_entity_id\\\" accesskey=\\\"tab\\\" ng-change=\\\"$ctrl.update('auth_saml_entity_id')\\\"\\n                            ng-model-options=\\\"{ debounce: 200 }\\\">\\n                    </div>\\n                    <div class=\\\"form-group\\\">\\n                        <label>SAML NameID Format</label>\\n                        <input name=\\\"input\\\" type=\\\"string\\\" class=\\\"form-control\\\" ng-model=\\\"$ctrl.settings.auth_saml_nameid_format\\\" accesskey=\\\"tab\\\"\\n                            ng-change=\\\"$ctrl.update('auth_saml_nameid_format')\\\" ng-model-options=\\\"{ debounce: 200 }\\\">\\n                    </div>\\n                </div>\\n            </p>\\n        </div>\\n    </div>\\n</settings-screen>\\n\"","var map = {\n\t\"./en-SG\": 480,\n\t\"./en-SG.js\": 480,\n\t\"./en-au\": 481,\n\t\"./en-au.js\": 481,\n\t\"./en-ca\": 482,\n\t\"./en-ca.js\": 482,\n\t\"./en-gb\": 483,\n\t\"./en-gb.js\": 483,\n\t\"./en-ie\": 484,\n\t\"./en-ie.js\": 484,\n\t\"./en-il\": 485,\n\t\"./en-il.js\": 485,\n\t\"./en-nz\": 486,\n\t\"./en-nz.js\": 486\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 752;","var map = {\n\t\"./avatar.svg\": 468,\n\t\"./db-logos/Cassandra.png\": 775,\n\t\"./db-logos/athena.png\": 776,\n\t\"./db-logos/aws_es.png\": 777,\n\t\"./db-logos/axibasetsd.png\": 778,\n\t\"./db-logos/bigquery.png\": 779,\n\t\"./db-logos/clickhouse.png\": 780,\n\t\"./db-logos/cockroach.png\": 781,\n\t\"./db-logos/couchbase.png\": 782,\n\t\"./db-logos/csv.png\": 783,\n\t\"./db-logos/databricks.png\": 784,\n\t\"./db-logos/db2.png\": 785,\n\t\"./db-logos/drill.png\": 786,\n\t\"./db-logos/druid.png\": 787,\n\t\"./db-logos/dynamodb_sql.png\": 788,\n\t\"./db-logos/elasticsearch.png\": 789,\n\t\"./db-logos/google_analytics.png\": 790,\n\t\"./db-logos/google_spreadsheets.png\": 791,\n\t\"./db-logos/graphite.png\": 792,\n\t\"./db-logos/hive.png\": 793,\n\t\"./db-logos/hive_http.png\": 794,\n\t\"./db-logos/impala.png\": 795,\n\t\"./db-logos/influxdb.png\": 796,\n\t\"./db-logos/jirajql.png\": 797,\n\t\"./db-logos/kibana.png\": 798,\n\t\"./db-logos/kylin.png\": 799,\n\t\"./db-logos/mapd.png\": 800,\n\t\"./db-logos/memsql.png\": 801,\n\t\"./db-logos/mongodb.png\": 802,\n\t\"./db-logos/mssql.png\": 803,\n\t\"./db-logos/mysql.png\": 804,\n\t\"./db-logos/oracle.png\": 805,\n\t\"./db-logos/pg.png\": 806,\n\t\"./db-logos/phoenix.png\": 807,\n\t\"./db-logos/presto.png\": 808,\n\t\"./db-logos/prometheus.png\": 809,\n\t\"./db-logos/python.png\": 810,\n\t\"./db-logos/qubole.png\": 811,\n\t\"./db-logos/rds_mysql.png\": 812,\n\t\"./db-logos/redshift.png\": 813,\n\t\"./db-logos/results.png\": 814,\n\t\"./db-logos/rockset.png\": 815,\n\t\"./db-logos/salesforce.png\": 816,\n\t\"./db-logos/scylla.png\": 817,\n\t\"./db-logos/snowflake.png\": 818,\n\t\"./db-logos/sqlite.png\": 819,\n\t\"./db-logos/treasuredata.png\": 820,\n\t\"./db-logos/uptycs.png\": 821,\n\t\"./db-logos/url.png\": 822,\n\t\"./db-logos/vertica.png\": 823,\n\t\"./db-logos/yandex_appmetrika.png\": 824,\n\t\"./db-logos/yandex_metrika.png\": 825,\n\t\"./destinations/chatwork.png\": 826,\n\t\"./destinations/email.png\": 827,\n\t\"./destinations/hangouts_chat.png\": 828,\n\t\"./destinations/hipchat.png\": 829,\n\t\"./destinations/mattermost.png\": 830,\n\t\"./destinations/pagerduty.png\": 831,\n\t\"./destinations/slack.png\": 832,\n\t\"./destinations/webhook.png\": 833,\n\t\"./favicon-16x16.png\": 834,\n\t\"./favicon-32x32.png\": 835,\n\t\"./favicon-96x96.png\": 836,\n\t\"./google_logo.svg\": 837,\n\t\"./illustrations/alert.svg\": 838,\n\t\"./illustrations/dashboard.svg\": 839,\n\t\"./illustrations/query.svg\": 840,\n\t\"./logo.png\": 841,\n\t\"./logo_white.png\": 842,\n\t\"./redash_icon_small.png\": 183\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 774;","module.exports = __webpack_public_path__ + \"images/db-logos/Cassandra.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/athena.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/aws_es.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/axibasetsd.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/bigquery.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/clickhouse.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/cockroach.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/couchbase.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/csv.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/databricks.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/db2.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/drill.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/druid.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/dynamodb_sql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/elasticsearch.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/google_analytics.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/google_spreadsheets.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/graphite.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/hive.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/hive_http.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/impala.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/influxdb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/jirajql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/kibana.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/kylin.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mapd.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/memsql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mongodb.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mssql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/mysql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/oracle.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/pg.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/phoenix.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/presto.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/prometheus.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/python.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/qubole.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/rds_mysql.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/redshift.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/results.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/rockset.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/salesforce.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/scylla.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/snowflake.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/sqlite.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/treasuredata.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/uptycs.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/url.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/vertica.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/yandex_appmetrika.png\";","module.exports = __webpack_public_path__ + \"images/db-logos/yandex_metrika.png\";","module.exports = __webpack_public_path__ + \"images/destinations/chatwork.png\";","module.exports = __webpack_public_path__ + \"images/destinations/email.png\";","module.exports = __webpack_public_path__ + \"images/destinations/hangouts_chat.png\";","module.exports = __webpack_public_path__ + \"images/destinations/hipchat.png\";","module.exports = __webpack_public_path__ + \"images/destinations/mattermost.png\";","module.exports = __webpack_public_path__ + \"images/destinations/pagerduty.png\";","module.exports = __webpack_public_path__ + \"images/destinations/slack.png\";","module.exports = __webpack_public_path__ + \"images/destinations/webhook.png\";","module.exports = __webpack_public_path__ + \"images/favicon-16x16.png\";","module.exports = __webpack_public_path__ + \"images/favicon-32x32.png\";","module.exports = __webpack_public_path__ + \"images/favicon-96x96.png\";","module.exports = __webpack_public_path__ + \"images/google_logo.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/alert.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/dashboard.svg\";","module.exports = __webpack_public_path__ + \"images/illustrations/query.svg\";","module.exports = __webpack_public_path__ + \"images/logo.png\";","module.exports = __webpack_public_path__ + \"images/logo_white.png\";","var map = {\n\t\"./AutocompleteToggle.jsx\": 410,\n\t\"./BigMessage.jsx\": 67,\n\t\"./ColorBox.jsx\": 960,\n\t\"./CreateSourceDialog.jsx\": 240,\n\t\"./DateInput.jsx\": 414,\n\t\"./DateRangeInput.jsx\": 416,\n\t\"./DateTimeInput.jsx\": 310,\n\t\"./DateTimeRangeInput.jsx\": 311,\n\t\"./DialogWrapper.jsx\": 35,\n\t\"./DynamicComponent.jsx\": 242,\n\t\"./EditInPlace.jsx\": 417,\n\t\"./EditParameterSettingsDialog.jsx\": 243,\n\t\"./EditVisualizationButton/QueryControlDropdown.jsx\": 1073,\n\t\"./EditVisualizationButton/QueryResultsLink.jsx\": 312,\n\t\"./EditVisualizationButton/index.jsx\": 1078,\n\t\"./EmailSettingsWarning.jsx\": 419,\n\t\"./FavoritesControl.jsx\": 420,\n\t\"./Filters.jsx\": 159,\n\t\"./HelpTrigger.jsx\": 123,\n\t\"./InputWithCopy.jsx\": 154,\n\t\"./NoTaggedObjectsFound.jsx\": 245,\n\t\"./PageHeader.jsx\": 143,\n\t\"./Paginator.jsx\": 77,\n\t\"./ParameterMappingInput.jsx\": 83,\n\t\"./ParameterValueInput.jsx\": 421,\n\t\"./PreviewCard.jsx\": 107,\n\t\"./QueryBasedParameterInput.jsx\": 422,\n\t\"./QueryEditor.jsx\": 1465,\n\t\"./QuerySelector.jsx\": 244,\n\t\"./SelectItemsDialog.jsx\": 246,\n\t\"./SortIcon.jsx\": 1123,\n\t\"./TagsList.jsx\": 426,\n\t\"./TimeAgo.jsx\": 155,\n\t\"./Timer.jsx\": 1124,\n\t\"./admin/CeleryStatus.jsx\": 160,\n\t\"./admin/Layout.jsx\": 186,\n\t\"./admin/StatusBlock.jsx\": 212,\n\t\"./alerts/alert-subscriptions/index.js\": 1142,\n\t\"./app-header/index.js\": 1143,\n\t\"./app-view/error-handler.js\": 427,\n\t\"./app-view/index.js\": 1145,\n\t\"./cancel-query-button/index.js\": 1146,\n\t\"./cards-list/CardsList.jsx\": 247,\n\t\"./dashboards/AddWidgetDialog.jsx\": 428,\n\t\"./dashboards/EditParameterMappingsDialog.jsx\": 429,\n\t\"./dashboards/TextboxDialog.jsx\": 248,\n\t\"./dashboards/edit-dashboard-dialog.js\": 1148,\n\t\"./dashboards/gridstack/gridstack.js\": 561,\n\t\"./dashboards/gridstack/index.js\": 1155,\n\t\"./dashboards/widget.js\": 1157,\n\t\"./dynamic-form/DynamicForm.jsx\": 121,\n\t\"./dynamic-form/dynamicFormHelper.js\": 80,\n\t\"./dynamic-table/default-cell/index.js\": 1160,\n\t\"./dynamic-table/default-cell/utils.js\": 256,\n\t\"./dynamic-table/dynamic-table-row.js\": 1161,\n\t\"./dynamic-table/index.js\": 1162,\n\t\"./dynamic-table/json-cell/index.js\": 1165,\n\t\"./dynamic-table/json-cell/json-view-interactive.js\": 431,\n\t\"./empty-state/EmptyState.jsx\": 187,\n\t\"./groups/CreateGroupDialog.jsx\": 432,\n\t\"./groups/DeleteGroupButton.jsx\": 249,\n\t\"./groups/DetailsPageSidebar.jsx\": 250,\n\t\"./groups/GroupName.jsx\": 251,\n\t\"./groups/ListItemAddon.jsx\": 191,\n\t\"./items-list/ItemsList.jsx\": 50,\n\t\"./items-list/classes/ItemsFetcher.js\": 314,\n\t\"./items-list/classes/ItemsSource.js\": 78,\n\t\"./items-list/classes/Paginator.js\": 433,\n\t\"./items-list/classes/Sorter.js\": 190,\n\t\"./items-list/classes/StateStorage.js\": 65,\n\t\"./items-list/components/EmptyState.jsx\": 141,\n\t\"./items-list/components/ItemsTable.jsx\": 23,\n\t\"./items-list/components/LoadingState.jsx\": 46,\n\t\"./items-list/components/Sidebar.jsx\": 54,\n\t\"./keywordBuilder.js\": 425,\n\t\"./layouts/ContentWithSidebar.jsx\": 62,\n\t\"./overlay.js\": 1169,\n\t\"./parameters.js\": 1170,\n\t\"./permissions-editor/index.js\": 1171,\n\t\"./proptypes.js\": 40,\n\t\"./queries/ScheduleDialog.jsx\": 434,\n\t\"./queries/SchedulePhrase.jsx\": 252,\n\t\"./queries/alert-unsaved-changes.js\": 1172,\n\t\"./queries/api-key-dialog.js\": 1173,\n\t\"./queries/embed-code-dialog.js\": 1174,\n\t\"./queries/schema-browser.js\": 1175,\n\t\"./queries/visualization-embed.js\": 1176,\n\t\"./query-link.js\": 1177,\n\t\"./rd-tab/index.js\": 1178,\n\t\"./settings-screen.js\": 1179,\n\t\"./tab-nav/index.js\": 1180,\n\t\"./tags-control/EditTagsDialog.jsx\": 418,\n\t\"./tags-control/TagsControl.jsx\": 111,\n\t\"./users/ChangePasswordDialog.jsx\": 435,\n\t\"./users/CreateUserDialog.jsx\": 436,\n\t\"./users/UserEdit.jsx\": 437,\n\t\"./users/UserShow.jsx\": 438\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 843;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nimport './color-box.less';\n\nexport function ColorBox({ color }) {\n  return <span style={{ backgroundColor: color }} />;\n}\n\nColorBox.propTypes = {\n  color: PropTypes.string,\n};\n\nColorBox.defaultProps = {\n  color: 'transparent',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('colorBox', react2angular(ColorBox));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dropdown from 'antd/lib/dropdown';\nimport Menu from 'antd/lib/menu';\nimport Button from 'antd/lib/button';\nimport Icon from 'antd/lib/icon';\nimport { react2angular } from 'react2angular';\n\nimport QueryResultsLink from './QueryResultsLink';\n\n\nexport function QueryControlDropdown(props) {\n  const menu = (\n    <Menu>\n      {!props.query.isNew() && (!props.query.is_draft || !props.query.is_archived) && (\n        <Menu.Item>\n          <a target=\"_self\" onClick={() => props.openAddToDashboardForm(props.selectedTab)}>\n            <Icon type=\"plus-circle\" theme=\"filled\" /> Add to Dashboard\n          </a>\n        </Menu.Item>\n      )}\n      {!props.query.isNew() && (\n        <Menu.Item>\n          <a onClick={() => props.showEmbedDialog(props.query, props.selectedTab)} data-test=\"ShowEmbedDialogButton\">\n            <Icon type=\"share-alt\" /> Embed elsewhere\n          </a>\n        </Menu.Item>\n      )}\n      <Menu.Item>\n        <QueryResultsLink\n          disabled={props.queryExecuting || !props.queryResult.getData || !props.queryResult.getData()}\n          query={props.query}\n          queryResult={props.queryResult}\n          embed={props.embed}\n          apiKey={props.apiKey}\n        >\n          <Icon type=\"file\" /> Download as CSV File\n        </QueryResultsLink>\n      </Menu.Item>\n      <Menu.Item>\n        <QueryResultsLink\n          fileType=\"xlsx\"\n          disabled={props.queryExecuting || !props.queryResult.getData || !props.queryResult.getData()}\n          query={props.query}\n          queryResult={props.queryResult}\n          embed={props.embed}\n          apiKey={props.apiKey}\n        >\n          <Icon type=\"file-excel\" /> Download as Excel File\n        </QueryResultsLink>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Dropdown trigger={['click']} overlay={menu}>\n      <Button data-test=\"QueryControlDropdownButton\">\n        <Icon type=\"ellipsis\" rotate={90} />\n      </Button>\n    </Dropdown>\n  );\n}\n\nQueryControlDropdown.propTypes = {\n  query: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  queryResult: PropTypes.object, // eslint-disable-line react/forbid-prop-types\n  queryExecuting: PropTypes.bool.isRequired,\n  showEmbedDialog: PropTypes.func.isRequired,\n  embed: PropTypes.bool,\n  apiKey: PropTypes.string,\n  selectedTab: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  openAddToDashboardForm: PropTypes.func.isRequired,\n};\n\nQueryControlDropdown.defaultProps = {\n  queryResult: {},\n  embed: false,\n  apiKey: '',\n  selectedTab: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('queryControlDropdown', react2angular(QueryControlDropdown));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'antd/lib/button';\nimport Icon from 'antd/lib/icon';\nimport { react2angular } from 'react2angular';\n\n\nexport function EditVisualizationButton(props) {\n  return (\n    <Button\n      data-test=\"EditVisualization\"\n      className=\"edit-visualization\"\n      onClick={() => props.openVisualizationEditor(props.selectedTab)}\n    >\n      <Icon type=\"form\" />\n      <span className=\"hidden-xs hidden-s hidden-m\">\n        Edit Visualization\n      </span>\n    </Button>\n  );\n}\n\nEditVisualizationButton.propTypes = {\n  openVisualizationEditor: PropTypes.func.isRequired,\n  selectedTab: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n};\n\nEditVisualizationButton.defaultProps = {\n  selectedTab: '',\n};\n\nexport default function init(ngModule) {\n  ngModule.component('editVisualizationButton', react2angular(EditVisualizationButton));\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nexport function SortIcon({ column, sortColumn, reverse }) {\n  if (column !== sortColumn) {\n    return null;\n  }\n\n  return (\n    <span><i className={'fa fa-sort-' + (reverse ? 'desc' : 'asc')} /></span>\n  );\n}\n\nSortIcon.propTypes = {\n  column: PropTypes.string,\n  sortColumn: PropTypes.string,\n  reverse: PropTypes.bool,\n};\n\nSortIcon.defaultProps = {\n  column: null,\n  sortColumn: null,\n  reverse: false,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('sortIcon', react2angular(SortIcon));\n}\n\ninit.init = true;\n","import moment from 'moment';\nimport { useMemo, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport { Moment } from '@/components/proptypes';\nimport useForceUpdate from '@/lib/hooks/useForceUpdate';\n\nexport function Timer({ from }) {\n  const startTime = useMemo(() => moment(from).valueOf(), [from]);\n  const forceUpdate = useForceUpdate();\n\n  useEffect(() => {\n    const timer = setInterval(forceUpdate, 1000);\n    return () => clearInterval(timer);\n  }, []);\n\n  return moment.utc(moment.now() - startTime).format('HH:mm:ss');\n}\n\nTimer.propTypes = {\n  from: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.instanceOf(Date),\n    Moment,\n  ]),\n};\n\nTimer.defaultProps = {\n  from: null,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('rdTimer', react2angular(Timer));\n}\n\ninit.init = true;\n","import { includes, without, compact } from 'lodash';\nimport notification from '@/services/notification';\nimport template from './alert-subscriptions.html';\n\nfunction controller($scope, $q, $sce, currentUser, AlertSubscription, Destination) {\n  'ngInject';\n\n  $scope.newSubscription = {};\n  $scope.subscribers = [];\n  $scope.destinations = [];\n  $scope.currentUser = currentUser;\n\n  $q\n    .all([\n      Destination.query().$promise,\n      AlertSubscription.query({ alertId: $scope.alertId }).$promise,\n    ])\n    .then((responses) => {\n      const destinations = responses[0];\n      const subscribers = responses[1];\n\n      const mapF = s => s.destination && s.destination.id;\n      const subscribedDestinations = compact(subscribers.map(mapF));\n\n      const subscribedUsers = compact(subscribers.map(s => !s.destination && s.user.id));\n\n      $scope.destinations = destinations.filter(d => !includes(subscribedDestinations, d.id));\n\n      if (!includes(subscribedUsers, currentUser.id)) {\n        $scope.destinations.unshift({ user: { name: currentUser.name } });\n      }\n\n      $scope.newSubscription.destination = $scope.destinations[0];\n      $scope.subscribers = subscribers;\n    });\n\n  $scope.destinationsDisplay = (d) => {\n    if (!d) {\n      return '';\n    }\n\n    let destination = d;\n    if (d.destination) {\n      destination = destination.destination;\n    } else if (destination.user) {\n      destination = {\n        name: `${d.user.name} (Email)`,\n        icon: 'fa-envelope',\n        type: 'user',\n      };\n    }\n\n    return $sce.trustAsHtml(`<i class=\"fa ${destination.icon}\"></i>&nbsp;${destination.name}`);\n  };\n\n  $scope.saveSubscriber = () => {\n    const sub = new AlertSubscription({ alert_id: $scope.alertId });\n    if ($scope.newSubscription.destination.id) {\n      sub.destination_id = $scope.newSubscription.destination.id;\n    }\n\n    sub.$save(\n      () => {\n        notification.success('Subscribed.');\n        $scope.subscribers.push(sub);\n        $scope.destinations = without($scope.destinations, $scope.newSubscription.destination);\n        if ($scope.destinations.length > 0) {\n          $scope.newSubscription.destination = $scope.destinations[0];\n        } else {\n          $scope.newSubscription.destination = undefined;\n        }\n      },\n      () => {\n        notification.error('Failed saving subscription.');\n      },\n    );\n  };\n\n  $scope.unsubscribe = (subscriber) => {\n    const destination = subscriber.destination;\n    const user = subscriber.user;\n\n    subscriber.$delete(\n      () => {\n        notification.success('Unsubscribed');\n        $scope.subscribers = without($scope.subscribers, subscriber);\n        if (destination) {\n          $scope.destinations.push(destination);\n        } else if (user.id === currentUser.id) {\n          $scope.destinations.push({ user: { name: currentUser.name } });\n        }\n\n        if ($scope.destinations.length === 1) {\n          $scope.newSubscription.destination = $scope.destinations[0];\n        }\n      },\n      () => {\n        notification.error('Failed unsubscribing.');\n      },\n    );\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('alertSubscriptions', () => ({\n    restrict: 'E',\n    replace: true,\n    scope: {\n      alertId: '=',\n    },\n    template,\n    controller,\n  }));\n}\n\ninit.init = true;\n","import debug from 'debug';\n\nimport logoUrl from '@/assets/images/redash_icon_small.png';\nimport frontendVersion from '@/version.json';\nimport template from './app-header.html';\nimport './app-header.css';\n\nconst logger = debug('redash:appHeader');\n\nfunction controller($rootScope, $location, $route, $uibModal, Auth, currentUser, clientConfig, Dashboard, Query) {\n  this.logoUrl = logoUrl;\n  this.basePath = clientConfig.basePath;\n  this.currentUser = currentUser;\n  this.showQueriesMenu = currentUser.hasPermission('view_query');\n  this.showAlertsLink = currentUser.hasPermission('list_alerts');\n  this.showNewQueryMenu = currentUser.hasPermission('create_query');\n  this.showSettingsMenu = currentUser.hasPermission('list_users');\n  this.showDashboardsMenu = currentUser.hasPermission('list_dashboards');\n\n  this.frontendVersion = frontendVersion;\n  this.backendVersion = clientConfig.version;\n  this.newVersionAvailable = clientConfig.newVersionAvailable && currentUser.isAdmin;\n\n  this.reload = () => {\n    logger('Reloading dashboards and queries.');\n    Dashboard.favorites().$promise.then((data) => {\n      this.dashboards = data.results;\n    });\n    Query.favorites().$promise.then((data) => {\n      this.queries = data.results;\n    });\n  };\n\n  this.reload();\n\n  $rootScope.$on('reloadFavorites', this.reload);\n\n  this.newDashboard = () => {\n    $uibModal.open({\n      component: 'editDashboardDialog',\n      resolve: {\n        dashboard: () => ({ name: null, layout: null }),\n      },\n    });\n  };\n\n  this.searchQueries = () => {\n    $location.path('/queries').search({ q: this.searchTerm });\n    $route.reload();\n  };\n\n  this.logout = () => {\n    Auth.logout();\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('appHeader', {\n    template,\n    controller,\n  });\n}\n\ninit.init = true;\n","import debug from 'debug';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport { ErrorHandler } from './error-handler';\nimport template from './template.html';\n\nconst logger = debug('redash:app-view');\n\nconst handler = new ErrorHandler();\n\nconst layouts = {\n  default: {\n    showHeader: true,\n    bodyClass: false,\n  },\n  fixed: {\n    showHeader: true,\n    bodyClass: 'fixed-layout',\n  },\n  defaultSignedOut: {\n    showHeader: false,\n  },\n};\n\nfunction selectLayout(route) {\n  let layout = layouts.default;\n  if (route.layout) {\n    layout = layouts[route.layout] || layouts.default;\n  } else if (!route.authenticated) {\n    layout = layouts.defaultSignedOut;\n  }\n  return layout;\n}\n\nclass AppViewComponent {\n  constructor($rootScope, $route, Auth) {\n    this.$rootScope = $rootScope;\n    this.layout = layouts.defaultSignedOut;\n    this.handler = handler;\n\n    $rootScope.$on('$routeChangeStart', (event, route) => {\n      this.handler.reset();\n\n      // In case we're handling $routeProvider.otherwise call, there will be no\n      // $$route.\n      const $$route = route.$$route || { authenticated: true };\n\n      if ($$route.authenticated) {\n        // For routes that need authentication, check if session is already\n        // loaded, and load it if not.\n        logger('Requested authenticated route: ', route);\n        if (!Auth.isAuthenticated()) {\n          event.preventDefault();\n          // Auth.requireSession resolves only if session loaded\n          Auth.requireSession().then(() => {\n            this.applyLayout($$route);\n            $route.reload();\n          });\n        }\n      }\n    });\n\n    $rootScope.$on('$routeChangeSuccess', (event, route) => {\n      const $$route = route.$$route || { authenticated: true };\n      this.applyLayout($$route);\n    });\n\n    $rootScope.$on('$routeChangeError', (event, current, previous, rejection) => {\n      const $$route = current.$$route || { authenticated: true };\n      this.applyLayout($$route);\n      throw new PromiseRejectionError(rejection);\n    });\n  }\n\n  applyLayout(route) {\n    this.layout = selectLayout(route);\n    this.$rootScope.bodyClass = this.layout.bodyClass;\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.factory(\n    '$exceptionHandler',\n    () => function exceptionHandler(exception) {\n      handler.process(exception);\n    },\n  );\n\n  ngModule.component('appView', {\n    template,\n    controller: AppViewComponent,\n  });\n}\n\ninit.init = true;\n","function cancelQueryButton() {\n  return {\n    restrict: 'E',\n    scope: {\n      queryId: '=',\n      taskId: '=',\n    },\n    transclude: true,\n    template:\n      '<button class=\"btn btn-default\" ng-disabled=\"inProgress\" ng-click=\"cancelExecution()\"><i class=\"zmdi zmdi-spinner zmdi-hc-spin\" ng-if=\"inProgress\"></i> Cancel</button>',\n    replace: true,\n    controller($scope, $http, currentUser, Events) {\n      $scope.inProgress = false;\n\n      $scope.cancelExecution = () => {\n        $http.delete(`api/jobs/${$scope.taskId}`).success(() => {});\n\n        let queryId = $scope.queryId;\n        if ($scope.queryId === 'adhoc') {\n          queryId = null;\n        }\n\n        Events.record('cancel_execute', 'query', queryId, { admin: true });\n        $scope.inProgress = true;\n      };\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('cancelQueryButton', cancelQueryButton);\n}\n\ninit.init = true;\n","import { isEmpty } from 'lodash';\nimport { policy } from '@/services/policy';\nimport template from './edit-dashboard-dialog.html';\n\nconst EditDashboardDialog = {\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n  controller($location, $http, Events) {\n    'ngInject';\n\n    this.dashboard = this.resolve.dashboard;\n    this.policy = policy;\n\n    this.isFormValid = () => !isEmpty(this.dashboard.name);\n\n    this.saveDashboard = () => {\n      if (!this.isFormValid()) {\n        return;\n      }\n\n      this.saveInProgress = true;\n\n      $http\n        .post('api/dashboards', {\n          name: this.dashboard.name,\n        })\n        .success((response) => {\n          this.close();\n          $location\n            .path(`/dashboard/${response.slug}`)\n            .search('edit')\n            .replace();\n        });\n      Events.record('create', 'dashboard');\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('editDashboardDialog', EditDashboardDialog);\n}\n\ninit.init = true;\n","import $ from 'jquery';\nimport _ from 'lodash';\nimport './gridstack';\nimport './gridstack.less';\n\nfunction toggleAutoHeightClass($element, isEnabled) {\n  const className = 'widget-auto-height-enabled';\n  if (isEnabled) {\n    $element.addClass(className);\n  } else {\n    $element.removeClass(className);\n  }\n}\n\nfunction computeAutoHeight($element, grid, node, minHeight, maxHeight) {\n  const wrapper = $element[0];\n  const element = wrapper.querySelector('.scrollbox, .spinner-container');\n\n  let resultHeight = _.isObject(node) ? node.height : 1;\n  if (element) {\n    const childrenBounds = _.chain(element.children)\n      .map((child) => {\n        const bounds = child.getBoundingClientRect();\n        const style = window.getComputedStyle(child);\n        return {\n          top: bounds.top - parseFloat(style.marginTop),\n          bottom: bounds.bottom + parseFloat(style.marginBottom),\n        };\n      })\n      .reduce((result, bounds) => ({\n        top: Math.min(result.top, bounds.top),\n        bottom: Math.max(result.bottom, bounds.bottom),\n      }))\n      .value() || { top: 0, bottom: 0 };\n\n    // Height of controls outside visualization area\n    const bodyWrapper = wrapper.querySelector('.body-container');\n    if (bodyWrapper) {\n      const elementStyle = window.getComputedStyle(element);\n      const controlsHeight = _.chain(bodyWrapper.children)\n        .filter(n => n !== element)\n        .reduce((result, n) => {\n          const b = n.getBoundingClientRect();\n          return result + (b.bottom - b.top);\n        }, 0)\n        .value();\n\n      const additionalHeight = grid.opts.verticalMargin +\n        // include container paddings too\n        parseFloat(elementStyle.paddingTop) + parseFloat(elementStyle.paddingBottom) +\n        // add few pixels for scrollbar (if visible)\n        (element.scrollWidth > element.offsetWidth ? 16 : 0);\n\n      const contentsHeight = childrenBounds.bottom - childrenBounds.top;\n\n      const cellHeight = grid.cellHeight() + grid.opts.verticalMargin;\n      resultHeight = Math.ceil(Math.round(controlsHeight + contentsHeight + additionalHeight) / cellHeight);\n    }\n  }\n\n  // minHeight <= resultHeight <= maxHeight\n  return Math.min(Math.max(minHeight, resultHeight), maxHeight);\n}\n\nfunction gridstack($parse, dashboardGridOptions) {\n  return {\n    restrict: 'A',\n    replace: false,\n    scope: {\n      editing: '=',\n      batchUpdate: '=', // set by directive - for using in wrapper components\n      onLayoutChanged: '=',\n      isOneColumnMode: '=',\n    },\n    controller() {\n      this.$el = null;\n\n      this.resizingWidget = null;\n      this.draggingWidget = null;\n\n      this.grid = () => (this.$el ? this.$el.data('gridstack') : null);\n\n      this._updateStyles = () => {\n        const grid = this.grid();\n        if (grid) {\n          // compute real grid height; `gridstack` sometimes uses only \"dirty\"\n          // items and computes wrong height\n          const gridHeight = _.chain(grid.grid.nodes)\n            .map(node => node.y + node.height)\n            .max()\n            .value();\n          // `_updateStyles` is internal, but grid sometimes \"forgets\"\n          // to rebuild stylesheet, so we need to force it\n          if (_.isObject(grid._styles)) {\n            grid._styles._max = 0; // reset size cache\n          }\n          grid._updateStyles(gridHeight + 10);\n        }\n      };\n\n      this.addWidget = ($element, item, itemId) => {\n        const grid = this.grid();\n        if (grid) {\n          grid.addWidget(\n            $element,\n            item.col, item.row, item.sizeX, item.sizeY,\n            false, // auto position\n            item.minSizeX, item.maxSizeX, item.minSizeY, item.maxSizeY,\n            itemId,\n          );\n          this._updateStyles();\n        }\n      };\n\n      this.updateWidget = ($element, item) => {\n        this.update((grid) => {\n          grid.update($element, item.col, item.row, item.sizeX, item.sizeY);\n          grid.minWidth($element, item.minSizeX);\n          grid.maxWidth($element, item.maxSizeX);\n          grid.minHeight($element, item.minSizeY);\n          grid.maxHeight($element, item.maxSizeY);\n        });\n      };\n\n      this.removeWidget = ($element) => {\n        const grid = this.grid();\n        if (grid) {\n          grid.removeWidget($element, false);\n          this._updateStyles();\n        }\n      };\n\n      this.getNodeByElement = (element) => {\n        const grid = this.grid();\n        if (grid && grid.grid) {\n          // This method seems to be internal\n          return grid.grid.getNodeDataByDOMEl($(element));\n        }\n      };\n\n      this.setWidgetId = ($element, id) => {\n        // `gridstack` has no API method to change node id; but since it's not used\n        // by library, we can just update grid and DOM node\n        const node = this.getNodeByElement($element);\n        if (node) {\n          node.id = id;\n          $element.attr('data-gs-id', _.isUndefined(id) ? null : id);\n        }\n      };\n\n      this.setEditing = (value) => {\n        const grid = this.grid();\n        if (grid) {\n          if (value) {\n            grid.enable();\n          } else {\n            grid.disable();\n          }\n        }\n      };\n\n      this.update = (callback) => {\n        const grid = this.grid();\n        if (grid) {\n          grid.batchUpdate();\n          try {\n            if (_.isFunction(callback)) {\n              callback(grid);\n            }\n          } finally {\n            grid.commit();\n            this._updateStyles();\n          }\n        }\n      };\n    },\n    link: ($scope, $element, $attr, controller) => {\n      const isOneColumnModeAssignable = _.isFunction($parse($attr.onLayoutChanged).assign);\n      let enablePolling = true;\n\n      $element.addClass('grid-stack');\n      $element.gridstack({\n        auto: false,\n        verticalMargin: dashboardGridOptions.margins,\n        // real row height will be `cellHeight` + `verticalMargin`\n        cellHeight: dashboardGridOptions.rowHeight - dashboardGridOptions.margins,\n        width: dashboardGridOptions.columns, // columns\n        height: 0, // max rows (0 for unlimited)\n        animate: true,\n        float: false,\n        minWidth: dashboardGridOptions.mobileBreakPoint,\n        resizable: {\n          handles: 'e, se, s, sw, w',\n          start: (event, ui) => {\n            controller.resizingWidget = ui.element;\n            $(ui.element).trigger(\n              'gridstack.resize-start',\n              controller.getNodeByElement(ui.element),\n            );\n          },\n          stop: (event, ui) => {\n            controller.resizingWidget = null;\n            $(ui.element).trigger(\n              'gridstack.resize-end',\n              controller.getNodeByElement(ui.element),\n            );\n            controller.update();\n          },\n        },\n        draggable: {\n          start: (event, ui) => {\n            controller.draggingWidget = ui.helper;\n            $(ui.helper).trigger(\n              'gridstack.drag-start',\n              controller.getNodeByElement(ui.helper),\n            );\n          },\n          stop: (event, ui) => {\n            controller.draggingWidget = null;\n            $(ui.helper).trigger(\n              'gridstack.drag-end',\n              controller.getNodeByElement(ui.helper),\n            );\n            controller.update();\n          },\n        },\n      });\n      controller.$el = $element;\n\n      // `change` events sometimes fire too frequently (for example,\n      // on initial rendering when all widgets add themselves to grid, grid\n      // will fire `change` event will _all_ items available at that moment).\n      // Collect changed items, and then delegate event with some delay\n      let changedNodes = {};\n      const triggerChange = _.debounce(() => {\n        _.each(changedNodes, (node) => {\n          if (node.el) {\n            $(node.el).trigger('gridstack.changed', node);\n          }\n        });\n        if ($scope.onLayoutChanged) {\n          $scope.onLayoutChanged();\n        }\n        changedNodes = {};\n      });\n\n      $element.on('change', (event, nodes) => {\n        nodes = _.isArray(nodes) ? nodes : [];\n        _.each(nodes, (node) => {\n          changedNodes[node.id] = node;\n        });\n        triggerChange();\n      });\n\n      $scope.$watch('editing', (value) => {\n        controller.setEditing(!!value);\n      });\n\n      $scope.$on('$destroy', () => {\n        enablePolling = false;\n        controller.$el = null;\n      });\n\n      // `gridstack` does not provide API to detect when one-column mode changes.\n      // Just watch `$element` for specific class\n      function updateOneColumnMode() {\n        const grid = controller.grid();\n        if (grid) {\n          const isOneColumnMode = $element.hasClass(grid.opts.oneColumnModeClass);\n          if ($scope.isOneColumnMode !== isOneColumnMode) {\n            $scope.isOneColumnMode = isOneColumnMode;\n            $scope.$applyAsync();\n          }\n        }\n\n        if (enablePolling) {\n          setTimeout(updateOneColumnMode, 150);\n        }\n      }\n\n      // Start polling only if we can update scope binding; otherwise it\n      // will just waisting CPU time (example: public dashboards don't need it)\n      if (isOneColumnModeAssignable) {\n        updateOneColumnMode();\n      }\n    },\n  };\n}\n\nfunction gridstackItem($timeout) {\n  return {\n    restrict: 'A',\n    replace: false,\n    require: '^gridstack',\n    scope: {\n      gridstackItem: '=',\n      gridstackItemId: '@',\n    },\n    link: ($scope, $element, $attr, controller) => {\n      let enablePolling = true;\n      let heightBeforeResize = null;\n\n      controller.addWidget($element, $scope.gridstackItem, $scope.gridstackItemId);\n\n      // these events are triggered only on user interaction\n      $element.on('gridstack.resize-start', () => {\n        const node = controller.getNodeByElement($element);\n        heightBeforeResize = _.isObject(node) ? node.height : null;\n      });\n      $element.on('gridstack.resize-end', (event, node) => {\n        const item = $scope.gridstackItem;\n        if (\n          _.isObject(node) && _.isObject(item) &&\n          (node.height !== heightBeforeResize) &&\n          (heightBeforeResize !== null)\n        ) {\n          item.autoHeight = false;\n          toggleAutoHeightClass($element, item.autoHeight);\n          $scope.$applyAsync();\n        }\n      });\n\n      $element.on('gridstack.changed', (event, node) => {\n        const item = $scope.gridstackItem;\n        if (_.isObject(node) && _.isObject(item)) {\n          let dirty = false;\n          if (node.x !== item.col) {\n            item.col = node.x;\n            dirty = true;\n          }\n          if (node.y !== item.row) {\n            item.row = node.y;\n            dirty = true;\n          }\n          if (node.width !== item.sizeX) {\n            item.sizeX = node.width;\n            dirty = true;\n          }\n          if (node.height !== item.sizeY) {\n            item.sizeY = node.height;\n            dirty = true;\n          }\n          if (dirty) {\n            $scope.$applyAsync();\n          }\n        }\n      });\n\n      $scope.$watch('gridstackItem.autoHeight', () => {\n        const item = $scope.gridstackItem;\n        if (_.isObject(item)) {\n          toggleAutoHeightClass($element, item.autoHeight);\n        } else {\n          toggleAutoHeightClass($element, false);\n        }\n      });\n\n      $scope.$watch('gridstackItemId', () => {\n        controller.setWidgetId($element, $scope.gridstackItemId);\n      });\n\n      $scope.$on('$destroy', () => {\n        enablePolling = false;\n        $timeout(() => {\n          controller.removeWidget($element);\n        });\n      });\n\n      function update() {\n        if (!controller.resizingWidget && !controller.draggingWidget) {\n          const item = $scope.gridstackItem;\n          const grid = controller.grid();\n          if (grid && _.isObject(item) && item.autoHeight) {\n            const sizeY = computeAutoHeight(\n              $element, grid, controller.getNodeByElement($element),\n              item.minSizeY, item.maxSizeY,\n            );\n            if (sizeY !== item.sizeY) {\n              item.sizeY = sizeY;\n              controller.updateWidget($element, { sizeY });\n              $scope.$applyAsync();\n            }\n          }\n        }\n        if (enablePolling) {\n          setTimeout(update, 150);\n        }\n      }\n\n      update();\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('gridstack', gridstack);\n  ngModule.directive('gridstackItem', gridstackItem);\n}\n\ninit.init = true;\n","import { filter } from 'lodash';\nimport template from './widget.html';\nimport TextboxDialog from '@/components/dashboards/TextboxDialog';\nimport widgetDialogTemplate from './widget-dialog.html';\nimport EditParameterMappingsDialog from '@/components/dashboards/EditParameterMappingsDialog';\nimport './widget.less';\nimport './widget-dialog.less';\n\nconst WidgetDialog = {\n  template: widgetDialogTemplate,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller() {\n    this.widget = this.resolve.widget;\n  },\n};\n\nfunction DashboardWidgetCtrl($scope, $location, $uibModal, $window, $rootScope, $timeout, Events, currentUser) {\n  this.canViewQuery = currentUser.hasPermission('view_query');\n\n  this.editTextBox = () => {\n    TextboxDialog.showModal({\n      dashboard: this.dashboard,\n      text: this.widget.text,\n      onConfirm: (text) => {\n        this.widget.text = text;\n        return this.widget.save();\n      },\n    });\n  };\n\n  this.expandVisualization = () => {\n    $uibModal.open({\n      component: 'widgetDialog',\n      resolve: {\n        widget: this.widget,\n      },\n      size: 'lg',\n    });\n  };\n\n  this.hasParameters = () => this.widget.query.getParametersDefs().length > 0;\n\n  this.editParameterMappings = () => {\n    EditParameterMappingsDialog.showModal({\n      dashboard: this.dashboard,\n      widget: this.widget,\n    }).result.then((valuesChanged) => {\n      this.localParameters = null;\n\n      // refresh widget if any parameter value has been updated\n      if (valuesChanged) {\n        $timeout(() => this.refresh());\n      }\n      $scope.$applyAsync();\n      $rootScope.$broadcast('dashboard.update-parameters');\n    });\n  };\n\n  this.localParametersDefs = () => {\n    if (!this.localParameters) {\n      this.localParameters = filter(\n        this.widget.getParametersDefs(),\n        param => !this.widget.isStaticParam(param),\n      );\n    }\n    return this.localParameters;\n  };\n\n  this.deleteWidget = () => {\n    if (!$window.confirm(`Are you sure you want to remove \"${this.widget.getName()}\" from the dashboard?`)) {\n      return;\n    }\n\n    this.widget.delete().then(() => {\n      if (this.deleted) {\n        this.deleted({});\n      }\n    });\n  };\n\n  Events.record('view', 'widget', this.widget.id);\n\n  this.load = (refresh = false) => {\n    const maxAge = $location.search().maxAge;\n    this.widget.load(refresh, maxAge);\n  };\n\n  this.refresh = () => {\n    this.load(true);\n  };\n\n  if (this.widget.visualization) {\n    Events.record('view', 'query', this.widget.visualization.query.id, { dashboard: true });\n    Events.record('view', 'visualization', this.widget.visualization.id, { dashboard: true });\n\n    this.type = 'visualization';\n    this.load();\n  } else if (this.widget.restricted) {\n    this.type = 'restricted';\n  } else {\n    this.type = 'textbox';\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('widgetDialog', WidgetDialog);\n  ngModule.component('dashboardWidget', {\n    template,\n    controller: DashboardWidgetCtrl,\n    bindings: {\n      widget: '<',\n      public: '<',\n      dashboard: '<',\n      filters: '<',\n      deleted: '&onDelete',\n    },\n  });\n}\n\ninit.init = true;\n","import { includes, identity } from 'lodash';\nimport { renderDefault, renderImage, renderLink } from './utils';\nimport template from './template.html';\n\nconst renderFunctions = {\n  image: renderImage,\n  link: renderLink,\n};\n\nexport default function init(ngModule) {\n  ngModule.directive('dynamicTableDefaultCell', $sanitize => ({\n    template,\n    restrict: 'E',\n    replace: true,\n    scope: {\n      column: '=',\n      row: '=',\n    },\n    link: ($scope) => {\n      // `dynamicTable` will recreate all table cells if some columns changed.\n      // This means two things:\n      // 1. `column` object will be always \"fresh\" - no need to watch it.\n      // 2. we will always have a column object already available in `link` function.\n      // Note that `row` may change during this directive's lifetime.\n\n      if ($scope.column.displayAs === 'string') {\n        $scope.allowHTML = $scope.column.allowHTML;\n      } else {\n        $scope.allowHTML = includes(['image', 'link'], $scope.column.displayAs);\n      }\n\n      const sanitize = $scope.allowHTML ? $sanitize : identity;\n\n      const renderValue = renderFunctions[$scope.column.displayAs] || renderDefault;\n\n      $scope.value = sanitize(renderValue($scope.column, $scope.row));\n\n      $scope.$watch('row', (newValue, oldValue) => {\n        if (newValue !== oldValue) {\n          $scope.value = sanitize(renderValue($scope.column, $scope.row));\n        }\n      });\n    },\n  }));\n}\n\ninit.init = true;\n","import { isFunction } from 'lodash';\n\nexport default function init(ngModule) {\n  ngModule.directive('dynamicTableRow', () => ({\n    template: '',\n    // AngularJS has a strange love to table-related tags, therefore\n    // we should use this directive as an attribute\n    restrict: 'A',\n    replace: false,\n    scope: {\n      columns: '=',\n      row: '=',\n      render: '=',\n    },\n    link: ($scope, $element) => {\n      $scope.$watch('render', () => {\n        if (isFunction($scope.render)) {\n          $scope.render($scope, (clonedElement) => {\n            $element\n              .empty()\n              .append(clonedElement)\n              .append('<td></td>');\n          });\n        }\n      });\n    },\n  }));\n}\n\ninit.init = true;\n","import { find, filter, map, each } from 'lodash';\nimport template from './dynamic-table.html';\nimport './dynamic-table.less';\n\nfunction isNullOrUndefined(v) {\n  return v === null || v === undefined;\n}\n\nfunction filterRows(rows, searchTerm, columns) {\n  if (searchTerm === '' || columns.length === 0 || rows.length === 0) {\n    return rows;\n  }\n  searchTerm = searchTerm.toUpperCase();\n  return filter(rows, (row) => {\n    for (let i = 0; i < columns.length; i += 1) {\n      const columnName = columns[i].name;\n      const formatFunction = columns[i].formatFunction;\n      if (row[columnName] !== undefined) {\n        let value = formatFunction ? formatFunction(row[columnName]) : row[columnName];\n        value = ('' + value).toUpperCase();\n        if (value.indexOf(searchTerm) >= 0) {\n          return true;\n        }\n      }\n    }\n    return false;\n  });\n}\n\nfunction sortRows(rows, orderBy) {\n  if (orderBy.length === 0 || rows.length === 0) {\n    return rows;\n  }\n  // Create a copy of array before sorting, because .sort() will modify original array\n  return [].concat(rows).sort((a, b) => {\n    let va;\n    let vb;\n    for (let i = 0; i < orderBy.length; i += 1) {\n      va = a[orderBy[i].name];\n      vb = b[orderBy[i].name];\n      if (isNullOrUndefined(va) || va < vb) {\n        // if a < b - we should return -1, but take in account direction\n        return orderBy[i].direction * -1;\n      }\n      if (va > vb || isNullOrUndefined(vb)) {\n        // if a > b - we should return 1, but take in account direction\n        return orderBy[i].direction * 1;\n      }\n    }\n    return 0;\n  });\n}\n\nfunction validateItemsPerPage(value, defaultValue) {\n  defaultValue = defaultValue || 25;\n  value = parseInt(value, 10) || defaultValue;\n  return value > 0 ? value : defaultValue;\n}\n\n// Optimized rendering\n// Instead of using two nested `ng-repeat`s by rows and columns,\n// we'll create a template for row (and update it when columns changed),\n// compile it, and then use `ng-repeat` by rows and bind this template\n// to each row's scope. The goal is to reduce amount of scopes and watchers\n// from `count(rows) * count(cols)` to `count(rows)`. The major disadvantage\n// is that cell markup should be specified here instead of template.\nfunction createRowRenderTemplate(columns, $compile) {\n  const rowTemplate = map(columns, (column, index) => {\n    switch (column.displayAs) {\n      case 'json':\n        return `\n          <dynamic-table-json-cell column=\"columns[${index}]\" \n            value=\"row[columns[${index}].name]\"></dynamic-table-json-cell>\n        `;\n      default:\n        return `\n          <dynamic-table-default-cell column=\"columns[${index}]\" \n            row=\"row\"></dynamic-table-default-cell>\n        `;\n    }\n  }).join('');\n  return $compile(rowTemplate);\n}\n\nclass DynamicTablePaginatorAdapter {\n  constructor($ctrl) {\n    this.$ctrl = $ctrl;\n  }\n\n  get page() {\n    return this.$ctrl.currentPage;\n  }\n\n  get itemsPerPage() {\n    return this.$ctrl.itemsPerPage;\n  }\n\n  get totalCount() {\n    return this.$ctrl.preparedRows.length;\n  }\n\n  setPage(page) {\n    this.$ctrl.onPageChanged(page);\n  }\n}\n\nfunction DynamicTable($scope, $compile) {\n  'ngInject';\n\n  this.paginatorAdapter = new DynamicTablePaginatorAdapter(this);\n\n  this.itemsPerPage = validateItemsPerPage(this.itemsPerPage);\n  this.currentPage = 1;\n  this.searchTerm = '';\n\n  this.columns = [];\n  this.rows = [];\n  this.preparedRows = [];\n  this.rowsToDisplay = [];\n  this.orderBy = [];\n  this.orderByColumnsIndex = {};\n  this.orderByColumnsDirection = {};\n\n  this.searchColumns = [];\n\n  const updateOrderByColumnsInfo = () => {\n    this.orderByColumnsIndex = {};\n    this.orderByColumnsDirection = {};\n    each(this.orderBy, (column, index) => {\n      this.orderByColumnsIndex[column.name] = index + 1;\n      this.orderByColumnsDirection[column.name] = column.direction;\n    });\n  };\n\n  const updateRowsToDisplay = (performFilterAndSort) => {\n    if (performFilterAndSort) {\n      this.preparedRows = sortRows(filterRows(this.rows, this.searchTerm, this.searchColumns), this.orderBy);\n    }\n    const first = (this.currentPage - 1) * this.itemsPerPage;\n    const last = first + this.itemsPerPage;\n    this.rowsToDisplay = this.preparedRows.slice(first, last);\n  };\n\n  const setColumns = (columns) => {\n    // 1. reset sorting\n    // 2. reset current page\n    // 3. reset search\n    // 4. get columns for search\n    // 5. update row rendering template\n    // 6. prepare rows\n\n    this.columns = columns;\n    updateOrderByColumnsInfo();\n    this.orderBy = [];\n    this.currentPage = 1;\n    this.searchTerm = '';\n    this.searchColumns = filter(this.columns, 'allowSearch');\n    this.renderSingleRow = createRowRenderTemplate(this.columns, $compile);\n    updateRowsToDisplay(true);\n  };\n\n  const setRows = (rows) => {\n    // 1. reset current page\n    // 2. prepare rows\n\n    this.rows = rows;\n    this.currentPage = 1;\n    updateRowsToDisplay(true);\n  };\n\n  this.renderSingleRow = null;\n\n  this.onColumnHeaderClick = ($event, column) => {\n    const orderBy = find(this.orderBy, item => item.name === column.name);\n    if (orderBy) {\n      // ASC -> DESC -> off\n      if (orderBy.direction === 1) {\n        orderBy.direction = -1;\n        if (!$event.shiftKey) {\n          this.orderBy = [orderBy];\n        }\n      } else {\n        if ($event.shiftKey) {\n          this.orderBy = filter(this.orderBy, item => item.name !== column.name);\n        } else {\n          this.orderBy = [];\n        }\n      }\n    } else {\n      if (!$event.shiftKey) {\n        this.orderBy = [];\n      }\n      this.orderBy.push({\n        name: column.name,\n        direction: 1,\n      });\n    }\n    updateOrderByColumnsInfo();\n    updateRowsToDisplay(true);\n\n    // Remove text selection - may occur accidentally\n    if ($event.shiftKey) {\n      document.getSelection().removeAllRanges();\n    }\n  };\n\n  this.onPageChanged = (page) => {\n    this.currentPage = page;\n    updateRowsToDisplay(false);\n    $scope.$applyAsync();\n  };\n\n  this.onSearchTermChanged = () => {\n    this.preparedRows = sortRows(filterRows(this.rows, this.searchTerm, this.searchColumns), this.orderBy);\n    this.currentPage = 1;\n    updateRowsToDisplay(true);\n  };\n\n  this.$onChanges = (changes) => {\n    if (changes.columns) {\n      if (changes.rows) {\n        // if rows also changed - temporarily set if to empty array - to avoid\n        // filtering and sorting\n        this.rows = [];\n      }\n      setColumns(changes.columns.currentValue);\n    }\n\n    if (changes.rows) {\n      setRows(changes.rows.currentValue);\n    }\n\n    if (changes.itemsPerPage) {\n      this.itemsPerPage = validateItemsPerPage(this.itemsPerPage);\n      this.currentPage = 1;\n      updateRowsToDisplay(false);\n    }\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('dynamicTable', {\n    template,\n    controller: DynamicTable,\n    bindings: {\n      rows: '<',\n      columns: '<',\n      itemsPerPage: '<',\n    },\n  });\n}\n\ninit.init = true;\n","import { isUndefined, isString } from 'lodash';\nimport renderJsonView from './json-view-interactive';\nimport template from './template.html';\n\nfunction parseValue(value, clientConfig) {\n  if (isString(value) && value.length <= clientConfig.tableCellMaxJSONSize) {\n    try {\n      return JSON.parse(value);\n    } catch (e) {\n      return undefined;\n    }\n  }\n}\n\nfunction DynamicTableJsonCell(clientConfig) {\n  return {\n    template,\n    restrict: 'E',\n    replace: true,\n    scope: {\n      column: '=',\n      value: '=',\n    },\n    link: ($scope, $element) => {\n      const container = $element.find('.json-cell-valid');\n\n      $scope.isValid = false;\n      $scope.parsedValue = null;\n\n      $scope.$watch('value', () => {\n        $scope.parsedValue = parseValue($scope.value, clientConfig);\n        $scope.isValid = !isUndefined($scope.parsedValue);\n        container.empty();\n        renderJsonView(container, $scope.parsedValue);\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('dynamicTableJsonCell', DynamicTableJsonCell);\n}\n\ninit.init = true;\n","const Overlay = {\n  template: `\n  <div>\n    <div class=\"overlay\"></div>\n    <div style=\"width: 100%; position:absolute; top:50px; z-index:2000\">\n      <div class=\"well well-lg\" style=\"width: 70%; margin: auto;\" ng-transclude>\n      </div>\n    </div>\n  </div>\n  `,\n  transclude: true,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('overlay', Overlay);\n}\n\ninit.init = true;\n","import { extend } from 'lodash';\nimport template from './parameters.html';\nimport EditParameterSettingsDialog from './EditParameterSettingsDialog';\n\nfunction ParametersDirective($location) {\n  return {\n    restrict: 'E',\n    transclude: true,\n    scope: {\n      parameters: '=',\n      syncValues: '=?',\n      editable: '=?',\n      changed: '&onChange',\n      onUpdated: '=',\n      onRefresh: '=',\n    },\n    template,\n    link(scope) {\n      // is this the correct location for this logic?\n      if (scope.syncValues !== false) {\n        scope.$watch(\n          'parameters',\n          () => {\n            if (scope.changed) {\n              scope.changed({});\n            }\n            const params = extend({}, $location.search());\n            scope.parameters.forEach((param) => {\n              extend(params, param.toUrlParams());\n            });\n            $location.search(params);\n          },\n          true,\n        );\n      }\n\n      scope.showParameterSettings = (parameter, index) => {\n        EditParameterSettingsDialog\n          .showModal({ parameter })\n          .result.then((updated) => {\n            scope.parameters[index] = extend(parameter, updated);\n            scope.onUpdated();\n          });\n      };\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('parameters', ParametersDirective);\n}\n\ninit.init = true;\n","import { includes, each, filter } from 'lodash';\nimport notification from '@/services/notification';\nimport template from './permissions-editor.html';\n\nconst PermissionsEditorComponent = {\n  template,\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  controller($http, User) {\n    'ngInject';\n\n    this.grantees = [];\n    this.newGrantees = {};\n    this.aclUrl = this.resolve.aclUrl.url;\n    this.owner = this.resolve.owner;\n\n    // List users that are granted permissions\n    const loadGrantees = () => {\n      $http.get(this.aclUrl).success((result) => {\n        this.grantees = [];\n\n        each(result, (grantees, accessType) => {\n          grantees.forEach((grantee) => {\n            grantee.access_type = accessType;\n            this.grantees.push(grantee);\n          });\n        });\n      });\n    };\n\n    loadGrantees();\n\n    // Search for user\n    this.findUser = (search) => {\n      if (search === '') {\n        this.foundUsers = [];\n        return;\n      }\n\n      User.query({ q: search }, (response) => {\n        const users = filter(response.results, u => u.id !== this.owner.id);\n        const existingIds = this.grantees.map(m => m.id);\n        users.forEach((user) => {\n          user.alreadyGrantee = includes(existingIds, user.id);\n        });\n        this.foundUsers = users;\n      });\n    };\n\n    // Add new user to grantees list\n    this.addGrantee = (user) => {\n      this.newGrantees = {};\n      const body = { access_type: 'modify', user_id: user.id };\n      $http.post(this.aclUrl, body).success(() => {\n        user.alreadyGrantee = true;\n        loadGrantees();\n      }).catch((error) => {\n        if (error.status === 403) {\n          notification.error('You cannot add a user to this dashboard.', 'Ask the dashboard owner to grant them permissions.');\n        } else {\n          notification.error('Something went wrong.');\n        }\n      });\n    };\n\n    // Remove user from grantees list\n    this.removeGrantee = (user) => {\n      const body = { access_type: 'modify', user_id: user.id };\n      $http({\n        url: this.aclUrl,\n        method: 'DELETE',\n        data: body,\n        headers: { 'Content-Type': 'application/json' },\n      }).success(() => {\n        this.grantees = this.grantees.filter(m => m !== user);\n\n        if (this.foundUsers) {\n          this.foundUsers.forEach((u) => {\n            if (u.id === user.id) {\n              u.alreadyGrantee = false;\n            }\n          });\n        }\n      });\n    };\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('permissionsEditor', PermissionsEditorComponent);\n}\n\ninit.init = true;\n","function alertUnsavedChanges($window) {\n  return {\n    restrict: 'E',\n    replace: true,\n    scope: {\n      isDirty: '=',\n    },\n    link($scope) {\n      const unloadMessage = 'You will lose your changes if you leave';\n      const confirmMessage = `${unloadMessage}\\n\\nAre you sure you want to leave this page?`;\n      // store original handler (if any)\n      const _onbeforeunload = $window.onbeforeunload;\n\n      $window.onbeforeunload = function onbeforeunload() {\n        return $scope.isDirty ? unloadMessage : null;\n      };\n\n      $scope.$on('$locationChangeStart', (event, next, current) => {\n        if (next.split('?')[0] === current.split('?')[0] || next.split('#')[0] === current.split('#')[0]) {\n          return;\n        }\n\n        if ($scope.isDirty && !$window.confirm(confirmMessage)) {\n          event.preventDefault();\n        }\n      });\n\n      $scope.$on('$destroy', () => {\n        $window.onbeforeunload = _onbeforeunload;\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('alertUnsavedChanges', alertUnsavedChanges);\n}\n\ninit.init = true;\n","const ApiKeyDialog = {\n  template: `<div class=\"modal-header\">\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" ng-click=\"$ctrl.close()\"><span aria-hidden=\"true\">&times;</span></button>\n</div>\n<div class=\"modal-body\">\n    <h5>API Key</h5>\n    <pre>{{$ctrl.apiKey}}</pre>\n\n    <h5>Example API Calls:</h5>\n\n    <div>\n        Results in CSV format:\n\n        <pre>{{$ctrl.csvUrl}}</pre>\n\n        Results in JSON format:\n\n        <pre>{{$ctrl.jsonUrl}}</pre>\n    </div>\n</div>`,\n  controller(clientConfig) {\n    'ngInject';\n\n    this.apiKey = this.resolve.query.api_key;\n    this.csvUrl = `${clientConfig.basePath}api/queries/${this.resolve.query.id}/results.csv?api_key=${this.apiKey}`;\n    this.jsonUrl = `${clientConfig.basePath}api/queries/${this.resolve.query.id}/results.json?api_key=${this.apiKey}`;\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('apiKeyDialog', ApiKeyDialog);\n}\n\ninit.init = true;\n","import template from './embed-code-dialog.html';\n\nconst EmbedCodeDialog = {\n  controller(clientConfig) {\n    'ngInject';\n\n    this.query = this.resolve.query;\n    this.visualization = this.resolve.visualization;\n\n    this.embedUrl = `${clientConfig.basePath}embed/query/${this.query.id}/visualization/${\n      this.visualization.id\n    }?api_key=${this.query.api_key}&${this.query.getParameters().toUrlParams()}`;\n    if (window.snapshotUrlBuilder) {\n      this.snapshotUrl = window.snapshotUrlBuilder(this.query, this.visualization);\n    }\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n  },\n  template,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('embedCodeDialog', EmbedCodeDialog);\n}\n\ninit.init = true;\n","import template from './schema-browser.html';\n\nfunction SchemaBrowserCtrl($rootScope, $scope) {\n  'ngInject';\n\n  this.showTable = (table) => {\n    table.collapsed = !table.collapsed;\n    $scope.$broadcast('vsRepeatTrigger');\n  };\n\n  this.getSize = (table) => {\n    let size = 22;\n\n    if (!table.collapsed) {\n      size += 18 * table.columns.length;\n    }\n\n    return size;\n  };\n\n  this.isEmpty = function isEmpty() {\n    return this.schema === undefined || this.schema.length === 0;\n  };\n\n  this.itemSelected = ($event, hierarchy) => {\n    $rootScope.$broadcast('query-editor.command', 'paste', hierarchy.join('.'));\n    $event.preventDefault();\n    $event.stopPropagation();\n  };\n\n  this.splitFilter = (filter) => {\n    filter = filter.replace(/ {2}/g, ' ');\n    if (filter.includes(' ')) {\n      const splitTheFilter = filter.split(' ');\n      this.schemaFilterObject = { name: splitTheFilter[0], columns: splitTheFilter[1] };\n      this.schemaFilterColumn = splitTheFilter[1];\n    } else {\n      this.schemaFilterObject = filter;\n      this.schemaFilterColumn = '';\n    }\n  };\n}\n\nconst SchemaBrowser = {\n  bindings: {\n    schema: '<',\n    onRefresh: '&',\n  },\n  controller: SchemaBrowserCtrl,\n  template,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('schemaBrowser', SchemaBrowser);\n}\n\ninit.init = true;\n","import { find } from 'lodash';\nimport moment from 'moment';\nimport logoUrl from '@/assets/images/redash_icon_small.png';\nimport template from './visualization-embed.html';\n\nconst VisualizationEmbed = {\n  template,\n  bindings: {\n    query: '<',\n  },\n  controller($routeParams) {\n    'ngInject';\n\n    this.refreshQueryResults = () => {\n      this.loading = true;\n      this.error = null;\n      this.refreshStartedAt = moment();\n      this.query\n        .getQueryResultPromise()\n        .then((result) => {\n          this.loading = false;\n          this.queryResult = result;\n        })\n        .catch((error) => {\n          this.loading = false;\n          this.error = error.getError();\n        });\n    };\n\n    const visualizationId = parseInt($routeParams.visualizationId, 10);\n    this.visualization = find(this.query.visualizations, visualization => visualization.id === visualizationId);\n    this.showQueryDescription = $routeParams.showDescription;\n    this.logoUrl = logoUrl;\n\n    document.querySelector('body').classList.add('headless');\n\n    if (this.query.is_safe) {\n      this.refreshQueryResults();\n    } else {\n      this.error = \"Can't embed queries with text parameters.\";\n    }\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('visualizationEmbed', VisualizationEmbed);\n\n  function loadSession($route, Auth) {\n    const apiKey = $route.current.params.api_key;\n    Auth.setApiKey(apiKey);\n    return Auth.loadConfig();\n  }\n\n  function loadQuery($route, Auth, Query) {\n    'ngInject';\n\n    return loadSession($route, Auth).then(() => Query.get({ id: $route.current.params.queryId }).$promise);\n  }\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.when('/embed/query/:queryId/visualization/:visualizationId', {\n      resolve: {\n        query: loadQuery,\n      },\n      reloadOnSearch: false,\n      template: '<visualization-embed query=\"$resolve.query\"></visualization-embed>',\n    });\n  });\n}\n\ninit.init = true;\n","export default function init(ngModule) {\n  ngModule.component('queryLink', {\n    bindings: {\n      query: '<',\n      visualization: '<',\n      readonly: '<',\n    },\n    template: `\n      <a ng-href=\"{{$ctrl.readonly ? undefined : $ctrl.getUrl()}}\" class=\"query-link\">\n        <visualization-name visualization=\"$ctrl.visualization\"/>\n        <span>{{$ctrl.query.name}}</span>\n      </a>\n    `,\n    controller() {\n      this.getUrl = () => {\n        let hash = null;\n        if (this.visualization) {\n          if (this.visualization.type === 'TABLE') {\n            // link to hard-coded table tab instead of the (hidden) visualization tab\n            hash = 'table';\n          } else {\n            hash = this.visualization.id;\n          }\n        }\n\n        return this.query.getUrl(false, hash);\n      };\n    },\n  });\n}\n\ninit.init = true;\n","function rdTab($location) {\n  return {\n    restrict: 'E',\n    scope: {\n      tabId: '@',\n      name: '@',\n      basePath: '=?',\n    },\n    transclude: true,\n    template: '<li class=\"rd-tab\" ng-class=\"{active: tabId==selectedTab}\"><a href=\"{{basePath}}#{{tabId}}\">{{name}}<span ng-transclude></span></a></li>',\n    replace: true,\n    link(scope) {\n      scope.basePath = scope.basePath || $location.path().substring(1);\n      scope.$watch(\n        () => scope.$parent.selectedTab,\n        (tab) => { scope.selectedTab = tab; },\n      );\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('rdTab', rdTab);\n}\n\ninit.init = true;\n","import settingsMenu from '@/services/settingsMenu';\nimport template from './settings-screen.html';\n\nexport default function init(ngModule) {\n  ngModule.component('settingsScreen', {\n    transclude: true,\n    template,\n    controller($location, currentUser) {\n      this.settingsMenu = settingsMenu;\n      this.isActive = menuItem => menuItem.isActive($location.path());\n      this.isAvailable = permission => permission === undefined || currentUser.hasPermission(permission);\n    },\n  });\n}\n\ninit.init = true;\n","function controller($location) {\n  this.tabs.forEach((tab) => {\n    if (tab.isActive) {\n      tab.active = tab.isActive($location.path());\n    } else {\n      tab.active = $location.path().startsWith(`/${tab.path}`);\n    }\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.component('tabNav', {\n    template: '<ul class=\"tab-nav bg-white\">' +\n                '<li ng-repeat=\"tab in $ctrl.tabs\" ng-class=\"{\\'active\\': tab.active }\"><a ng-href=\"{{tab.path}}\">{{tab.name}}</a></li>' +\n              '</ul>',\n    controller,\n    bindings: {\n      tabs: '<',\n    },\n  });\n}\n\ninit.init = true;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1181;","var map = {\n\t\"./alert-dialog.js\": 1183,\n\t\"./alert-subscription.js\": 1184,\n\t\"./alert.js\": 257,\n\t\"./auth.js\": 14,\n\t\"./dashboard.js\": 145,\n\t\"./data-source.js\": 68,\n\t\"./destination.js\": 114,\n\t\"./events.js\": 1185,\n\t\"./getTags.js\": 185,\n\t\"./group.js\": 53,\n\t\"./keyboard-shortcuts.js\": 424,\n\t\"./navigateTo.js\": 66,\n\t\"./ng.js\": 25,\n\t\"./notification.js\": 9,\n\t\"./notifications.js\": 258,\n\t\"./offline-listener.js\": 1186,\n\t\"./organizationStatus.js\": 144,\n\t\"./policy/DefaultPolicy.js\": 430,\n\t\"./policy/index.js\": 57,\n\t\"./query-result.js\": 439,\n\t\"./query-snippet.js\": 423,\n\t\"./query-string.js\": 1187,\n\t\"./query.js\": 52,\n\t\"./recordEvent.js\": 73,\n\t\"./settingsMenu.js\": 79,\n\t\"./user.js\": 51,\n\t\"./utils.js\": 253,\n\t\"./visualization.js\": 254,\n\t\"./widget.js\": 100\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1182;","export let AlertDialog = null; // eslint-disable-line import/no-mutable-exports\n\nconst AlertDialogComponent = {\n  template: `\n<div class=\"modal-header\">\n    <h4 class=\"modal-title\" ng-if=\"$ctrl.title\">{{$ctrl.title}}</h4>\n</div>\n<div class=\"modal-body\">\n  <p ng-bind-html=\"$ctrl.message\"></p>\n</div>\n<div class=\"modal-footer\">\n  <button class=\"btn btn-default\" ng-click=\"$ctrl.dismiss()\">Cancel</button>\n  <button class=\"btn\" ng-class=\"$ctrl.confirm.class\" ng-click=\"$ctrl.close()\" ng-if=\"$ctrl.confirm.show\">{{$ctrl.confirm.title}}</button>\n</div>\n  `,\n  bindings: {\n    close: '&',\n    dismiss: '&',\n    resolve: '<',\n  },\n  controller() {\n    this.title = this.resolve.title;\n    this.message = this.resolve.message;\n    this.confirm = Object.assign({}, { class: 'btn-sucess', show: true, title: 'OK' }, this.resolve.confirm);\n  },\n};\n\nfunction AlertDialogService($uibModal) {\n  return {\n    open(title, message, confirm) {\n      return $uibModal.open({\n        component: 'alertDialog',\n        resolve: {\n          title: () => title,\n          message: () => message,\n          confirm: () => confirm,\n        },\n      }).result;\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('alertDialog', AlertDialogComponent);\n  ngModule.factory('AlertDialog', AlertDialogService);\n\n  ngModule.run(($injector) => {\n    AlertDialog = $injector.get('AlertDialog');\n  });\n}\n\ninit.init = true;\n","export let AlertSubscription = null; // eslint-disable-line import/no-mutable-exports\n\nfunction AlertSubscriptionService($resource) {\n  return $resource('api/alerts/:alertId/subscriptions/:subscriberId', { alertId: '@alert_id', subscriberId: '@id' });\n}\n\nexport default function init(ngModule) {\n  ngModule.factory('AlertSubscription', AlertSubscriptionService);\n\n  ngModule.run(($injector) => {\n    AlertSubscription = $injector.get('AlertSubscription');\n  });\n}\n\ninit.init = true;\n","import recordEvent from '@/services/recordEvent';\n\nfunction Events() {\n  this.record = recordEvent;\n}\n\nexport default function init(ngModule) {\n  ngModule.service('Events', Events);\n}\n\ninit.init = true;\n","import notification from '@/services/notification';\n\nfunction addOnlineListener(notificationKey) {\n  function onlineStateHandler() {\n    notification.close(notificationKey);\n    window.removeEventListener('online', onlineStateHandler);\n  }\n  window.addEventListener('online', onlineStateHandler);\n}\n\nexport default function init(ngModule) {\n  ngModule.run(() => {\n    window.addEventListener('offline', () => {\n      notification.warning('Please check your Internet connection.', null, {\n        key: 'connectionNotification',\n        duration: null,\n      });\n      addOnlineListener('connectionNotification');\n    });\n  });\n}\n\ninit.init = true;\n","import qs from 'qs';\n\nconst parse = queryString => qs.parse(queryString, { allowDots: true, ignoreQueryPrefix: true });\nconst onlyParameters = ([k]) => k.startsWith('p_');\nconst removePrefix = ([k, v]) => [k.slice(2), v];\nconst toObject = (obj, [k, v]) => Object.assign(obj, { [k]: v });\n\nexport default () => Object.entries(parse(location.search))\n  .filter(onlyParameters)\n  .map(removePrefix)\n  .reduce(toObject, {});\n","var map = {\n\t\"./ColorPalette.js\": 112,\n\t\"./EditVisualizationDialog.jsx\": 440,\n\t\"./VisualizationName.jsx\": 1193,\n\t\"./VisualizationRenderer.jsx\": 1194,\n\t\"./box-plot/Editor.jsx\": 441,\n\t\"./box-plot/index.js\": 1462,\n\t\"./chart/getChartData.js\": 316,\n\t\"./chart/index.js\": 1199,\n\t\"./chart/plotly/index.js\": 1200,\n\t\"./chart/plotly/utils.js\": 115,\n\t\"./choropleth/index.js\": 1388,\n\t\"./choropleth/utils.js\": 126,\n\t\"./cohort/index.js\": 1389,\n\t\"./counter/index.js\": 1392,\n\t\"./funnel/index.js\": 1393,\n\t\"./index.js\": 28,\n\t\"./map/index.js\": 1395,\n\t\"./pivot/Editor.jsx\": 443,\n\t\"./pivot/index.js\": 1401,\n\t\"./sankey/Editor.jsx\": 444,\n\t\"./sankey/index.js\": 1463,\n\t\"./sunburst/Editor.jsx\": 445,\n\t\"./sunburst/index.js\": 1464,\n\t\"./table/index.js\": 1407,\n\t\"./word-cloud/Editor.jsx\": 446,\n\t\"./word-cloud/index.js\": 1409\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1192;","import { react2angular } from 'react2angular';\nimport { VisualizationType, registeredVisualizations } from './index';\n\nexport function VisualizationName({ visualization }) {\n  const config = registeredVisualizations[visualization.type];\n  if (config) {\n    if (visualization.name !== config.name) {\n      return visualization.name;\n    }\n  }\n\n  return null;\n}\n\nVisualizationName.propTypes = {\n  visualization: VisualizationType.isRequired,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('visualizationName', react2angular(VisualizationName));\n}\n\ninit.init = true;\n","import { map, find } from 'lodash';\nimport React, { useState, useMemo, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\nimport useQueryResult from '@/lib/hooks/useQueryResult';\nimport { Filters, FiltersType, filterData } from '@/components/Filters';\nimport { registeredVisualizations, VisualizationType } from './index';\n\nfunction combineFilters(localFilters, globalFilters) {\n  // tiny optimization - to avoid unnecessary updates\n  if ((localFilters.length === 0) || (globalFilters.length === 0)) {\n    return localFilters;\n  }\n\n  return map(localFilters, (localFilter) => {\n    const globalFilter = find(globalFilters, f => f.name === localFilter.name);\n    if (globalFilter) {\n      return {\n        ...localFilter,\n        current: globalFilter.current,\n      };\n    }\n    return localFilter;\n  });\n}\n\nexport function VisualizationRenderer(props) {\n  const data = useQueryResult(props.queryResult);\n  const [filters, setFilters] = useState(data.filters);\n\n  // Reset local filters when query results updated\n  useEffect(() => {\n    setFilters(combineFilters(data.filters, props.filters));\n  }, [data]);\n\n  // Update local filters when global filters changed\n  useEffect(() => {\n    setFilters(combineFilters(filters, props.filters));\n  }, [props.filters]);\n\n  const filteredData = useMemo(() => ({\n    columns: data.columns,\n    rows: filterData(data.rows, filters),\n  }), [data, filters]);\n\n  const { showFilters, visualization } = props;\n  const { Renderer, getOptions } = registeredVisualizations[visualization.type];\n  const options = getOptions(visualization.options, data);\n\n  return (\n    <React.Fragment>\n      {showFilters && <Filters filters={filters} onChange={setFilters} />}\n      <div>\n        <Renderer options={options} data={filteredData} visualizationName={visualization.name} />\n      </div>\n    </React.Fragment>\n  );\n}\n\nVisualizationRenderer.propTypes = {\n  visualization: VisualizationType.isRequired,\n  queryResult: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n  filters: FiltersType,\n  showFilters: PropTypes.bool,\n};\n\nVisualizationRenderer.defaultProps = {\n  filters: [],\n  showFilters: true,\n};\n\nexport default function init(ngModule) {\n  ngModule.component('visualizationRenderer', react2angular(VisualizationRenderer));\n}\n\ninit.init = true;\n","import {\n  some, partial, intersection, without, includes, sortBy, each, map, keys, difference, merge, isNil, trim, pick,\n} from 'lodash';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\nimport { clientConfig } from '@/services/auth';\nimport ColorPalette from '@/visualizations/ColorPalette';\nimport getChartData from './getChartData';\nimport template from './chart.html';\nimport editorTemplate from './chart-editor.html';\n\nconst DEFAULT_OPTIONS = {\n  globalSeriesType: 'column',\n  sortX: true,\n  legend: { enabled: true },\n  yAxis: [{ type: 'linear' }, { type: 'linear', opposite: true }],\n  xAxis: { type: '-', labels: { enabled: true } },\n  error_y: { type: 'data', visible: true },\n  series: { stacking: null, error_y: { type: 'data', visible: true } },\n  seriesOptions: {},\n  valuesOptions: {},\n  columnMapping: {},\n  direction: { type: 'counterclockwise' },\n\n  // showDataLabels: false, // depends on chart type\n  numberFormat: '0,0[.]00000',\n  percentFormat: '0[.]00%',\n  // dateTimeFormat: 'DD/MM/YYYY HH:mm', // will be set from clientConfig\n  textFormat: '', // default: combination of {{ @@yPercent }} ({{ @@y }}  {{ @@yError }})\n};\n\nfunction initEditorForm(options, columns) {\n  const result = {\n    yAxisColumns: [],\n    seriesList: sortBy(keys(options.seriesOptions), name => options.seriesOptions[name].zIndex),\n    valuesList: keys(options.valuesOptions),\n  };\n\n  // Use only mappings for columns that exists in query results\n  const mappings = pick(\n    options.columnMapping,\n    map(columns, c => c.name),\n  );\n\n  each(mappings, (type, column) => {\n    switch (type) {\n      case 'x':\n        result.xAxisColumn = column;\n        break;\n      case 'y':\n        result.yAxisColumns.push(column);\n        break;\n      case 'series':\n        result.groupby = column;\n        break;\n      case 'yError':\n        result.errorColumn = column;\n        break;\n      case 'size':\n        result.sizeColumn = column;\n        break;\n      case 'zVal':\n        result.zValColumn = column;\n        break;\n      // no default\n    }\n  });\n\n  return result;\n}\n\nconst ChartRenderer = {\n  template,\n  bindings: {\n    data: '<',\n    options: '<',\n  },\n  controller($scope) {\n    this.chartSeries = [];\n\n    const update = () => {\n      if (this.data) {\n        this.chartSeries = getChartData(this.data.rows, this.options);\n      }\n    };\n\n    $scope.$watch('$ctrl.data', update);\n    $scope.$watch('$ctrl.options', update, true);\n  },\n};\n\nconst ChartEditor = {\n  template: editorTemplate,\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope) {\n    this.currentTab = 'general';\n    this.setCurrentTab = (tab) => {\n      this.currentTab = tab;\n    };\n\n    this.colors = {\n      Automatic: null,\n      ...ColorPalette,\n    };\n\n    this.stackingOptions = {\n      Disabled: null,\n      Stack: 'stack',\n    };\n\n    this.chartTypes = {\n      line: { name: 'Line', icon: 'line-chart' },\n      column: { name: 'Bar', icon: 'bar-chart' },\n      area: { name: 'Area', icon: 'area-chart' },\n      pie: { name: 'Pie', icon: 'pie-chart' },\n      scatter: { name: 'Scatter', icon: 'circle-o' },\n      bubble: { name: 'Bubble', icon: 'circle-o' },\n      heatmap: { name: 'Heatmap', icon: 'th' },\n      box: { name: 'Box', icon: 'square-o' },\n    };\n\n    if (clientConfig.allowCustomJSVisualizations) {\n      this.chartTypes.custom = { name: 'Custom', icon: 'code' };\n    }\n\n    this.directions = [\n      { label: 'Counterclockwise', value: 'counterclockwise' },\n      { label: 'Clockwise', value: 'clockwise' },\n    ];\n\n    this.xAxisScales = [\n      { label: 'Auto Detect', value: '-' },\n      { label: 'Datetime', value: 'datetime' },\n      { label: 'Linear', value: 'linear' },\n      { label: 'Logarithmic', value: 'logarithmic' },\n      { label: 'Category', value: 'category' },\n    ];\n    this.yAxisScales = ['linear', 'logarithmic', 'datetime', 'category'];\n\n    this.colorScheme = ['Blackbody', 'Bluered', 'Blues', 'Earth', 'Electric',\n      'Greens', 'Greys', 'Hot', 'Jet', 'Picnic', 'Portland',\n      'Rainbow', 'RdBu', 'Reds', 'Viridis', 'YlGnBu', 'YlOrRd', 'Custom...'];\n\n    this.chartTypeChanged = () => {\n      keys(this.options.seriesOptions).forEach((key) => {\n        this.options.seriesOptions[key].type = this.options.globalSeriesType;\n      });\n      this.options.showDataLabels = this.options.globalSeriesType === 'pie';\n      $scope.$applyAsync();\n    };\n\n    this.showSizeColumnPicker = () => some(this.options.seriesOptions, options => options.type === 'bubble');\n    this.showZColumnPicker = () => some(this.options.seriesOptions, options => options.type === 'heatmap');\n\n    if (isNil(this.options.customCode)) {\n      this.options.customCode = trim(`\n// Available variables are x, ys, element, and Plotly\n// Type console.log(x, ys); for more info about x and ys\n// To plot your graph call Plotly.plot(element, ...)\n// Plotly examples and docs: https://plot.ly/javascript/\n      `);\n    }\n\n    this.form = initEditorForm(this.options, this.data.columns);\n\n    const refreshColumns = () => {\n      this.columns = this.data.columns;\n      this.columnNames = map(this.columns, c => c.name);\n      if (this.columnNames.length > 0) {\n        each(difference(keys(this.options.columnMapping), this.columnNames), (column) => {\n          delete this.options.columnMapping[column];\n        });\n      }\n    };\n\n    const refreshColumnsAndForm = () => {\n      refreshColumns();\n      const data = this.data;\n      if (data && (data.columns.length > 0) && (data.rows.length > 0)) {\n        this.form.yAxisColumns = intersection(this.form.yAxisColumns, this.columnNames);\n        if (!includes(this.columnNames, this.form.xAxisColumn)) {\n          this.form.xAxisColumn = undefined;\n        }\n        if (!includes(this.columnNames, this.form.groupby)) {\n          this.form.groupby = undefined;\n        }\n      }\n    };\n\n    const refreshSeries = () => {\n      const chartData = getChartData(this.data.rows, this.options);\n      const seriesNames = map(chartData, s => s.name);\n      const existing = keys(this.options.seriesOptions);\n      each(difference(seriesNames, existing), (name) => {\n        this.options.seriesOptions[name] = {\n          type: this.options.globalSeriesType,\n          yAxis: 0,\n        };\n        this.form.seriesList.push(name);\n      });\n      each(difference(existing, seriesNames), (name) => {\n        this.form.seriesList = without(this.form.seriesList, name);\n        delete this.options.seriesOptions[name];\n      });\n\n      if (this.options.globalSeriesType === 'pie') {\n        const uniqueValuesNames = new Set();\n        each(chartData, (series) => {\n          each(series.data, (row) => {\n            uniqueValuesNames.add(row.x);\n          });\n        });\n        const valuesNames = [];\n        uniqueValuesNames.forEach(v => valuesNames.push(v));\n\n        // initialize newly added values\n        const newValues = difference(valuesNames, keys(this.options.valuesOptions));\n        each(newValues, (name) => {\n          this.options.valuesOptions[name] = {};\n          this.form.valuesList.push(name);\n        });\n        // remove settings for values that are no longer available\n        each(keys(this.options.valuesOptions), (name) => {\n          if (valuesNames.indexOf(name) === -1) {\n            delete this.options.valuesOptions[name];\n          }\n        });\n        this.form.valuesList = intersection(this.form.valuesList, valuesNames);\n      }\n    };\n\n    const setColumnRole = (role, column) => {\n      this.options.columnMapping[column] = role;\n    };\n\n    const unsetColumn = column => setColumnRole('unused', column);\n\n    refreshColumns();\n\n    $scope.$watch('$ctrl.options.columnMapping', refreshSeries, true);\n\n    $scope.$watch('$ctrl.data', () => {\n      refreshColumnsAndForm();\n      refreshSeries();\n    });\n\n    $scope.$watchCollection('$ctrl.form.seriesList', (value) => {\n      each(value, (name, index) => {\n        this.options.seriesOptions[name].zIndex = index;\n        this.options.seriesOptions[name].index = 0; // is this needed?\n      });\n    });\n\n    $scope.$watchCollection('$ctrl.form.yAxisColumns', (value, old) => {\n      each(old, unsetColumn);\n      each(value, partial(setColumnRole, 'y'));\n    });\n\n    $scope.$watch('$ctrl.form.xAxisColumn', (value, old) => {\n      if (old !== undefined) { unsetColumn(old); }\n      if (value !== undefined) { setColumnRole('x', value); }\n    });\n\n    $scope.$watch('$ctrl.form.errorColumn', (value, old) => {\n      if (old !== undefined) { unsetColumn(old); }\n      if (value !== undefined) { setColumnRole('yError', value); }\n    });\n\n    $scope.$watch('$ctrl.form.sizeColumn', (value, old) => {\n      if (old !== undefined) { unsetColumn(old); }\n      if (value !== undefined) { setColumnRole('size', value); }\n    });\n\n    $scope.$watch('$ctrl.form.zValColumn', (value, old) => {\n      if (old !== undefined) { unsetColumn(old); }\n      if (value !== undefined) { setColumnRole('zVal', value); }\n    });\n\n    $scope.$watch('$ctrl.form.groupby', (value, old) => {\n      if (old !== undefined) { unsetColumn(old); }\n      if (value !== undefined) { setColumnRole('series', value); }\n    });\n\n    $scope.$watch('$ctrl.options', (options) => {\n      this.onOptionsChange(options);\n    }, true);\n\n    this.templateHint = `\n      <div class=\"p-b-5\">Use special names to access additional properties:</div>\n      <div><code>{{ @@name }}</code> series name;</div>\n      <div><code>{{ @@x }}</code> x-value;</div>\n      <div><code>{{ @@y }}</code> y-value;</div>\n      <div><code>{{ @@yPercent }}</code> relative y-value;</div>\n      <div><code>{{ @@yError }}</code> y deviation;</div>\n      <div><code>{{ @@size }}</code> bubble size;</div>\n      <div class=\"p-t-5\">Also, all query result columns can be referenced using\n        <code class=\"text-nowrap\">{{ column_name }}</code> syntax.</div>\n    `;\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('chartRenderer', ChartRenderer);\n  ngModule.component('chartEditor', ChartEditor);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'CHART',\n      name: 'Chart',\n      getOptions: options => merge({}, DEFAULT_OPTIONS, {\n        showDataLabels: options.globalSeriesType === 'pie',\n        dateTimeFormat: clientConfig.dateTimeFormat,\n      }, options),\n      Renderer: angular2react('chartRenderer', ChartRenderer, $injector),\n      Editor: angular2react('chartEditor', ChartEditor, $injector),\n\n      defaultColumns: 3,\n      defaultRows: 8,\n      minColumns: 1,\n      minRows: 5,\n    });\n  });\n}\n\ninit.init = true;\n","import { each, debounce, isArray, isObject } from 'lodash';\n\nimport Plotly from 'plotly.js/lib/core';\nimport bar from 'plotly.js/lib/bar';\nimport pie from 'plotly.js/lib/pie';\nimport histogram from 'plotly.js/lib/histogram';\nimport box from 'plotly.js/lib/box';\nimport heatmap from 'plotly.js/lib/heatmap';\n\nimport {\n  prepareData,\n  prepareLayout,\n  updateData,\n  updateLayout,\n  normalizeValue,\n} from './utils';\n\nPlotly.register([bar, pie, histogram, box, heatmap]);\nPlotly.setPlotConfig({\n  modeBarButtonsToRemove: ['sendDataToCloud'],\n});\n\nconst PlotlyChart = () => ({\n  restrict: 'E',\n  template: '<div class=\"plotly-chart-container\" resize-event=\"handleResize()\"></div>',\n  scope: {\n    options: '=',\n    series: '=',\n  },\n  link(scope, element) {\n    const plotlyElement = element[0].querySelector('.plotly-chart-container');\n    const plotlyOptions = { showLink: false, displaylogo: false };\n    let layout = {};\n    let data = [];\n\n    function update() {\n      if (['normal', 'percent'].indexOf(scope.options.series.stacking) >= 0) {\n        // Backward compatibility\n        scope.options.series.percentValues = scope.options.series.stacking === 'percent';\n        scope.options.series.stacking = 'stack';\n      }\n\n      data = prepareData(scope.series, scope.options);\n      updateData(data, scope.options);\n      layout = prepareLayout(plotlyElement, scope.series, scope.options, data);\n\n      // It will auto-purge previous graph\n      Plotly.newPlot(plotlyElement, data, layout, plotlyOptions).then(() => {\n        updateLayout(plotlyElement, layout, (e, u) => Plotly.relayout(e, u));\n      });\n\n      plotlyElement.on('plotly_restyle', (updates) => {\n        // This event is triggered if some plotly data/layout has changed.\n        // We need to catch only changes of traces visibility to update stacking\n        if (isArray(updates) && isObject(updates[0]) && updates[0].visible) {\n          updateData(data, scope.options);\n          Plotly.relayout(plotlyElement, layout);\n        }\n      });\n    }\n    update();\n\n    scope.$watch('series', (oldValue, newValue) => {\n      if (oldValue !== newValue) {\n        update();\n      }\n    });\n    scope.$watch('options', (oldValue, newValue) => {\n      if (oldValue !== newValue) {\n        update();\n      }\n    }, true);\n\n    scope.handleResize = debounce(() => {\n      updateLayout(plotlyElement, layout, (e, u) => Plotly.relayout(e, u));\n    }, 50);\n  },\n});\n\nconst CustomPlotlyChart = clientConfig => ({\n  restrict: 'E',\n  template: '<div class=\"plotly-chart-container\" resize-event=\"handleResize()\"></div>',\n  scope: {\n    series: '=',\n    options: '=',\n  },\n  link(scope, element) {\n    if (!clientConfig.allowCustomJSVisualizations) {\n      return;\n    }\n\n    const refresh = () => {\n      // Clear existing data with blank data for succeeding codeCall adds data to existing plot.\n      Plotly.newPlot(element[0].firstChild);\n\n      try {\n        // eslint-disable-next-line no-new-func\n        const codeCall = new Function('x, ys, element, Plotly', scope.options.customCode);\n        codeCall(scope.x, scope.ys, element[0].children[0], Plotly);\n      } catch (err) {\n        if (scope.options.enableConsoleLogs) {\n          // eslint-disable-next-line no-console\n          console.log(`Error while executing custom graph: ${err}`);\n        }\n      }\n    };\n\n    const timeSeriesToPlotlySeries = () => {\n      scope.x = [];\n      scope.ys = {};\n      each(scope.series, (series) => {\n        scope.ys[series.name] = [];\n        each(series.data, (point) => {\n          scope.x.push(normalizeValue(point.x));\n          scope.ys[series.name].push(normalizeValue(point.y));\n        });\n      });\n    };\n\n    scope.handleResize = () => {\n      refresh();\n    };\n\n    scope.$watch('[options.customCode, options.autoRedraw]', () => {\n      refresh();\n    }, true);\n\n    scope.$watch('series', () => {\n      timeSeriesToPlotlySeries();\n      refresh();\n    }, true);\n  },\n});\n\nexport default function init(ngModule) {\n  ngModule.directive('plotlyChart', PlotlyChart);\n  ngModule.directive('customPlotlyChart', CustomPlotlyChart);\n}\n\ninit.init = true;\n","import _ from 'lodash';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { formatSimpleTemplate } from '@/lib/value-format';\nimport 'leaflet-fullscreen';\nimport 'leaflet-fullscreen/dist/leaflet.fullscreen.css';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\nimport ColorPalette from '@/visualizations/ColorPalette';\n\nimport {\n  AdditionalColors,\n  darkenColor,\n  createNumberFormatter,\n  prepareData,\n  getValueForFeature,\n  createScale,\n  prepareFeatureProperties,\n  getColorByValue,\n  inferCountryCodeType,\n} from './utils';\n\nimport template from './choropleth.html';\nimport editorTemplate from './choropleth-editor.html';\n\nimport countriesDataUrl from './countries.geo.json';\nimport subdivJapanDataUrl from './japan.prefectures.geo.json';\n\nexport const ChoroplethPalette = _.extend({}, AdditionalColors, ColorPalette);\n\nconst DEFAULT_OPTIONS = {\n  mapType: 'countries',\n  countryCodeColumn: '',\n  countryCodeType: 'iso_a3',\n  valueColumn: '',\n  clusteringMode: 'e',\n  steps: 5,\n  valueFormat: '0,0.00',\n  noValuePlaceholder: 'N/A',\n  colors: {\n    min: ChoroplethPalette['Light Blue'],\n    max: ChoroplethPalette['Dark Blue'],\n    background: ChoroplethPalette.White,\n    borders: ChoroplethPalette.White,\n    noValue: ChoroplethPalette['Light Gray'],\n  },\n  legend: {\n    visible: true,\n    position: 'bottom-left',\n    alignText: 'right',\n  },\n  tooltip: {\n    enabled: true,\n    template: '<b>{{ @@name }}</b>: {{ @@value }}',\n  },\n  popup: {\n    enabled: true,\n    template: 'Country: <b>{{ @@name_long }} ({{ @@iso_a2 }})</b>\\n<br>\\nValue: <b>{{ @@value }}</b>',\n  },\n};\n\nconst loadCountriesData = _.bind(function loadCountriesData($http, url) {\n  if (!this[url]) {\n    this[url] = $http.get(url).then(response => response.data);\n  }\n  return this[url];\n}, {});\n\nconst ChoroplethRenderer = {\n  template,\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope, $element, $sanitize, $http) {\n    let countriesData = null;\n    let map = null;\n    let choropleth = null;\n    let mapMoveLock = false;\n\n    const onMapMoveStart = () => {\n      mapMoveLock = true;\n    };\n\n    const onMapMoveEnd = () => {\n      const bounds = map.getBounds();\n      this.options.bounds = [\n        [bounds._southWest.lat, bounds._southWest.lng],\n        [bounds._northEast.lat, bounds._northEast.lng],\n      ];\n      if (this.onOptionsChange) {\n        this.onOptionsChange(this.options);\n      }\n      $scope.$applyAsync(() => {\n        mapMoveLock = false;\n      });\n    };\n\n    const updateBounds = ({ disableAnimation = false } = {}) => {\n      if (mapMoveLock) {\n        return;\n      }\n      if (map && choropleth) {\n        const bounds = this.options.bounds || choropleth.getBounds();\n        const options = disableAnimation ? {\n          animate: false,\n          duration: 0,\n        } : null;\n        map.fitBounds(bounds, options);\n      }\n    };\n\n    const getDataUrl = (type) => {\n      switch (type) {\n        case 'countries': return countriesDataUrl;\n        case 'subdiv_japan': return subdivJapanDataUrl;\n        default: return '';\n      }\n    };\n\n    let dataUrl = getDataUrl(this.options.mapType);\n\n    const render = () => {\n      if (map) {\n        map.remove();\n        map = null;\n        choropleth = null;\n      }\n      if (!countriesData) {\n        return;\n      }\n\n      this.formatValue = createNumberFormatter(\n        this.options.valueFormat,\n        this.options.noValuePlaceholder,\n      );\n\n      const data = prepareData(this.data.rows, this.options.countryCodeColumn, this.options.valueColumn);\n\n      const { limits, colors, legend } = createScale(countriesData.features, data, this.options);\n\n      // Update data for legend block\n      this.legendItems = legend;\n\n      choropleth = L.geoJson(countriesData, {\n        onEachFeature: (feature, layer) => {\n          const value = getValueForFeature(feature, data, this.options.countryCodeType);\n          const valueFormatted = this.formatValue(value);\n          const featureData = prepareFeatureProperties(\n            feature,\n            valueFormatted,\n            data,\n            this.options.countryCodeType,\n          );\n          const color = getColorByValue(value, limits, colors, this.options.colors.noValue);\n\n          layer.setStyle({\n            color: this.options.colors.borders,\n            weight: 1,\n            fillColor: color,\n            fillOpacity: 1,\n          });\n\n          if (this.options.tooltip.enabled) {\n            layer.bindTooltip($sanitize(formatSimpleTemplate(\n              this.options.tooltip.template,\n              featureData,\n            )), { sticky: true });\n          }\n\n          if (this.options.popup.enabled) {\n            layer.bindPopup($sanitize(formatSimpleTemplate(\n              this.options.popup.template,\n              featureData,\n            )));\n          }\n\n          layer.on('mouseover', () => {\n            layer.setStyle({\n              weight: 2,\n              fillColor: darkenColor(color),\n            });\n          });\n          layer.on('mouseout', () => {\n            layer.setStyle({\n              weight: 1,\n              fillColor: color,\n            });\n          });\n        },\n      });\n\n      const choroplethBounds = choropleth.getBounds();\n\n      map = L.map($element[0].children[0].children[0], {\n        center: choroplethBounds.getCenter(),\n        zoom: 1,\n        zoomSnap: 0,\n        layers: [choropleth],\n        scrollWheelZoom: false,\n        maxBounds: choroplethBounds,\n        maxBoundsViscosity: 1,\n        attributionControl: false,\n        fullscreenControl: true,\n      });\n\n      map.on('focus', () => {\n        map.on('movestart', onMapMoveStart);\n        map.on('moveend', onMapMoveEnd);\n      });\n      map.on('blur', () => {\n        map.off('movestart', onMapMoveStart);\n        map.off('moveend', onMapMoveEnd);\n      });\n\n      updateBounds({ disableAnimation: true });\n    };\n\n    const load = () => {\n      loadCountriesData($http, dataUrl).then((data) => {\n        if (_.isObject(data)) {\n          countriesData = data;\n          render();\n        }\n      });\n    };\n\n    load();\n\n\n    $scope.handleResize = _.debounce(() => {\n      if (map) {\n        map.invalidateSize(false);\n        updateBounds({ disableAnimation: true });\n      }\n    }, 50);\n\n    $scope.$watch('$ctrl.data', render);\n    $scope.$watch(() => _.omit(this.options, 'bounds', 'mapType'), render, true);\n    $scope.$watch('$ctrl.options.bounds', updateBounds, true);\n    $scope.$watch('$ctrl.options.mapType', () => {\n      dataUrl = getDataUrl(this.options.mapType);\n      load();\n    }, true);\n  },\n};\n\nconst ChoroplethEditor = {\n  template: editorTemplate,\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope) {\n    this.currentTab = 'general';\n    this.setCurrentTab = (tab) => {\n      this.currentTab = tab;\n    };\n\n    this.colors = ChoroplethPalette;\n\n    this.mapTypes = {\n      countries: 'Countries',\n      subdiv_japan: 'Japan/Prefectures',\n    };\n\n    this.clusteringModes = {\n      q: 'quantile',\n      e: 'equidistant',\n      k: 'k-means',\n    };\n\n    this.legendPositions = {\n      'top-left': 'top / left',\n      'top-right': 'top / right',\n      'bottom-left': 'bottom / left',\n      'bottom-right': 'bottom / right',\n    };\n\n    this.countryCodeTypes = {};\n\n    this.templateHintFormatter = propDescription => `\n      <div class=\"p-b-5\">All query result columns can be referenced using <code>{{ column_name }}</code> syntax.</div>\n      <div class=\"p-b-5\">Use special names to access additional properties:</div>\n      <div><code>{{ @@value }}</code> formatted value;</div>\n      ${propDescription}\n      <div class=\"p-t-5\">This syntax is applicable to tooltip and popup templates.</div>\n    `;\n\n    const updateCountryCodeType = () => {\n      this.options.countryCodeType = inferCountryCodeType(\n        this.options.mapType,\n        this.data ? this.data.rows : [],\n        this.options.countryCodeColumn,\n      ) || this.options.countryCodeType;\n    };\n\n    const populateCountryCodeTypes = () => {\n      let propDescription = '';\n      switch (this.options.mapType) {\n        case 'subdiv_japan':\n          propDescription = `\n            <div><code>{{ @@name }}</code> Prefecture name in English;</div>\n            <div><code>{{ @@name_local }}</code> Prefecture name in Kanji;</div>\n            <div><code>{{ @@iso_3166_2 }}</code> five-letter ISO subdivision code (JP-xx);</div>\n          `;\n          this.countryCodeTypes = {\n            name: 'Name',\n            name_local: 'Name (local)',\n            iso_3166_2: 'ISO-3166-2',\n          };\n          break;\n        case 'countries':\n          propDescription = `\n           <div><code>{{ @@name }}</code> short country name;</div>\n             <div><code>{{ @@name_long }}</code> full country name;</div>\n             <div><code>{{ @@abbrev }}</code> abbreviated country name;</div>\n             <div><code>{{ @@iso_a2 }}</code> two-letter ISO country code;</div>\n             <div><code>{{ @@iso_a3 }}</code> three-letter ISO country code;</div>\n             <div><code>{{ @@iso_n3 }}</code> three-digit ISO country code.</div>\n          `;\n          this.countryCodeTypes = {\n            name: 'Short name',\n            name_long: 'Full name',\n            abbrev: 'Abbreviated name',\n            iso_a2: 'ISO code (2 letters)',\n            iso_a3: 'ISO code (3 letters)',\n            iso_n3: 'ISO code (3 digits)',\n          };\n          break;\n        default:\n          this.countryCodeTypes = {};\n      }\n      this.templateHint = this.templateHintFormatter(propDescription);\n    };\n\n    $scope.$watch('$ctrl.options.mapType', populateCountryCodeTypes);\n    $scope.$watch('$ctrl.options.countryCodeColumn', updateCountryCodeType);\n    $scope.$watch('$ctrl.data', updateCountryCodeType);\n\n    $scope.$watch('$ctrl.options', (options) => {\n      this.onOptionsChange(options);\n    }, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('choroplethRenderer', ChoroplethRenderer);\n  ngModule.component('choroplethEditor', ChoroplethEditor);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'CHOROPLETH',\n      name: 'Map (Choropleth)',\n      getOptions: options => _.merge({}, DEFAULT_OPTIONS, options),\n      Renderer: angular2react('choroplethRenderer', ChoroplethRenderer, $injector),\n      Editor: angular2react('choroplethEditor', ChoroplethEditor, $injector),\n\n      defaultColumns: 3,\n      defaultRows: 8,\n      minColumns: 2,\n    });\n  });\n}\n\ninit.init = true;\n","/* global Cornelius */\nimport _ from 'lodash';\nimport moment from 'moment';\nimport 'cornelius/src/cornelius';\nimport 'cornelius/src/cornelius.css';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\n\nimport editorTemplate from './cohort-editor.html';\n\nconst momentInterval = {\n  weekly: 'weeks',\n  daily: 'days',\n  monthly: 'months',\n};\n\nconst DEFAULT_OPTIONS = {\n  timeInterval: 'daily',\n  mode: 'diagonal',\n  dateColumn: 'date',\n  stageColumn: 'day_number',\n  totalColumn: 'total',\n  valueColumn: 'value',\n};\n\nfunction groupData(sortedData) {\n  const result = {};\n\n  _.each(sortedData, (item) => {\n    const groupKey = item.date + 0;\n    result[groupKey] = result[groupKey] || {\n      date: moment(item.date),\n      total: parseInt(item.total, 10),\n      values: {},\n    };\n    result[groupKey].values[item.stage] = parseInt(item.value, 10);\n  });\n\n  return _.values(result);\n}\n\nfunction prepareDiagonalData(sortedData, options) {\n  const timeInterval = options.timeInterval;\n  const grouped = groupData(sortedData);\n  const firstStage = _.min(_.map(sortedData, i => i.stage));\n  const stageCount = moment(_.last(grouped).date).diff(_.first(grouped).date, momentInterval[timeInterval]);\n  let lastStage = firstStage + stageCount;\n\n  let previousDate = null;\n\n  const data = [];\n  _.each(grouped, (group) => {\n    if (previousDate !== null) {\n      let diff = Math.abs(previousDate.diff(group.date, momentInterval[timeInterval]));\n      while (diff > 1) {\n        const row = [0];\n        for (let stage = firstStage; stage <= lastStage; stage += 1) {\n          row.push(group.values[stage] || 0);\n        }\n        data.push(row);\n        // It should be diagonal, so decrease count of stages for each next row\n        lastStage -= 1;\n        diff -= 1;\n      }\n    }\n\n    previousDate = group.date;\n\n    const row = [group.total];\n    for (let stage = firstStage; stage <= lastStage; stage += 1) {\n      row.push(group.values[stage] || 0);\n    }\n    // It should be diagonal, so decrease count of stages for each next row\n    lastStage -= 1;\n\n    data.push(row);\n  });\n\n  return data;\n}\n\nfunction prepareSimpleData(sortedData, options) {\n  const timeInterval = options.timeInterval;\n  const grouped = groupData(sortedData);\n  const stages = _.map(sortedData, i => i.stage);\n  const firstStage = _.min(stages);\n  const lastStage = _.max(stages);\n\n  let previousDate = null;\n\n  const data = [];\n  _.each(grouped, (group) => {\n    if (previousDate !== null) {\n      let diff = Math.abs(previousDate.diff(group.date, momentInterval[timeInterval]));\n      while (diff > 1) {\n        data.push([0]);\n        diff -= 1;\n      }\n    }\n\n    previousDate = group.date;\n\n    const row = [group.total];\n    for (let stage = firstStage; stage <= lastStage; stage += 1) {\n      row.push(group.values[stage]);\n    }\n\n    data.push(row);\n  });\n\n  return data;\n}\n\nfunction prepareData(rawData, options) {\n  rawData = _.map(rawData, item => ({\n    date: item[options.dateColumn],\n    stage: parseInt(item[options.stageColumn], 10),\n    total: parseFloat(item[options.totalColumn]),\n    value: parseFloat(item[options.valueColumn]),\n  }));\n  const sortedData = _.sortBy(rawData, r => r.date + r.stage);\n  const initialDate = moment(sortedData[0].date).toDate();\n\n  let data;\n  switch (options.mode) {\n    case 'simple':\n      data = prepareSimpleData(sortedData, options);\n      break;\n    default:\n      data = prepareDiagonalData(sortedData, options);\n      break;\n  }\n\n  return { data, initialDate };\n}\n\nconst CohortRenderer = {\n  bindings: {\n    data: '<',\n    options: '<',\n  },\n  template: '',\n  replace: false,\n  controller($scope, $element) {\n    $scope.options = _.extend({}, DEFAULT_OPTIONS, $scope.options);\n\n    const update = () => {\n      $element.empty();\n\n      if (this.data.rows.length === 0) {\n        return;\n      }\n\n      const options = this.options;\n\n      const columnNames = _.map(this.data.columns, i => i.name);\n      if (\n        !_.includes(columnNames, options.dateColumn) ||\n        !_.includes(columnNames, options.stageColumn) ||\n        !_.includes(columnNames, options.totalColumn) ||\n        !_.includes(columnNames, options.valueColumn)\n      ) {\n        return;\n      }\n\n      const { data, initialDate } = prepareData(this.data.rows, options);\n\n      Cornelius.draw({\n        initialDate,\n        container: $element[0],\n        cohort: data,\n        title: null,\n        timeInterval: options.timeInterval,\n        labels: {\n          time: 'Time',\n          people: 'Users',\n          weekOf: 'Week of',\n        },\n      });\n    };\n\n    $scope.$watch('$ctrl.data', update);\n    $scope.$watch('$ctrl.options', update, true);\n  },\n};\n\nconst CohortEditor = {\n  template: editorTemplate,\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope) {\n    this.currentTab = 'columns';\n    this.setCurrentTab = (tab) => {\n      this.currentTab = tab;\n    };\n\n    $scope.$watch('$ctrl.options', (options) => {\n      this.onOptionsChange(options);\n    }, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('cohortRenderer', CohortRenderer);\n  ngModule.component('cohortEditor', CohortEditor);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'COHORT',\n      name: 'Cohort',\n      getOptions: options => ({ ...DEFAULT_OPTIONS, ...options }),\n      Renderer: angular2react('cohortRenderer', CohortRenderer, $injector),\n      Editor: angular2react('cohortEditor', CohortEditor, $injector),\n\n      autoHeight: true,\n      defaultRows: 8,\n    });\n  });\n}\n\ninit.init = true;\n","import numberFormat from 'underscore.string/numberFormat';\nimport { isNumber } from 'lodash';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\n\nimport counterTemplate from './counter.html';\nimport counterEditorTemplate from './counter-editor.html';\n\nconst DEFAULT_OPTIONS = {\n  counterLabel: '',\n  counterColName: 'counter',\n  rowNumber: 1,\n  targetRowNumber: 1,\n  stringDecimal: 0,\n  stringDecChar: '.',\n  stringThouSep: ',',\n};\n\n// TODO: Need to review this function, it does not properly handle edge cases.\nfunction getRowNumber(index, size) {\n  if (index >= 0) {\n    return index - 1;\n  }\n\n  if (Math.abs(index) > size) {\n    index %= size;\n  }\n\n  return size + index;\n}\n\nconst CounterRenderer = {\n  template: counterTemplate,\n  bindings: {\n    data: '<',\n    options: '<',\n    visualizationName: '<',\n  },\n  controller($scope, $element, $timeout) {\n    $scope.fontSize = '1em';\n\n    $scope.scale = 1;\n    const root = $element[0].querySelector('counter');\n    const container = $element[0].querySelector('counter > div');\n    $scope.handleResize = () => {\n      const scale = Math.min(root.offsetWidth / container.offsetWidth, root.offsetHeight / container.offsetHeight);\n      $scope.scale = Math.floor(scale * 100) / 100; // keep only two decimal places\n    };\n\n    const update = () => {\n      const options = this.options;\n      const data = this.data.rows;\n\n      if (data.length > 0) {\n        const rowNumber = getRowNumber(options.rowNumber, data.length);\n        const targetRowNumber = getRowNumber(options.targetRowNumber, data.length);\n        const counterColName = options.counterColName;\n        const targetColName = options.targetColName;\n        const counterLabel = options.counterLabel;\n\n        if (counterLabel) {\n          $scope.counterLabel = counterLabel;\n        } else {\n          $scope.counterLabel = this.visualizationName;\n        }\n\n        if (options.countRow) {\n          $scope.counterValue = data.length;\n        } else if (counterColName) {\n          $scope.counterValue = data[rowNumber][counterColName];\n        }\n        if (targetColName) {\n          $scope.targetValue = data[targetRowNumber][targetColName];\n\n          if ($scope.targetValue) {\n            $scope.delta = $scope.counterValue - $scope.targetValue;\n            $scope.trendPositive = $scope.delta >= 0;\n          }\n        } else {\n          $scope.targetValue = null;\n        }\n\n        $scope.isNumber = isNumber($scope.counterValue);\n        if ($scope.isNumber) {\n          $scope.stringPrefix = options.stringPrefix;\n          $scope.stringSuffix = options.stringSuffix;\n\n          const stringDecimal = options.stringDecimal;\n          const stringDecChar = options.stringDecChar;\n          const stringThouSep = options.stringThouSep;\n          if (stringDecimal || stringDecChar || stringThouSep) {\n            $scope.counterValue = numberFormat($scope.counterValue, stringDecimal, stringDecChar, stringThouSep);\n            $scope.isNumber = false;\n          }\n        } else {\n          $scope.stringPrefix = null;\n          $scope.stringSuffix = null;\n        }\n      }\n\n      $timeout(() => {\n        $scope.handleResize();\n      });\n    };\n\n    $scope.$watch('$ctrl.data', update);\n    $scope.$watch('$ctrl.options', update, true);\n  },\n};\n\nconst CounterEditor = {\n  template: counterEditorTemplate,\n  bindings: {\n    data: '<',\n    options: '<',\n    visualizationName: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope) {\n    this.currentTab = 'general';\n    this.changeTab = (tab) => {\n      this.currentTab = tab;\n    };\n\n    this.isValueNumber = () => {\n      const options = this.options;\n      const data = this.data.rows;\n\n      if (data.length > 0) {\n        const rowNumber = getRowNumber(options.rowNumber, data.length);\n        const counterColName = options.counterColName;\n\n        if (options.countRow) {\n          this.counterValue = data.length;\n        } else if (counterColName) {\n          this.counterValue = data[rowNumber][counterColName];\n        }\n      }\n\n      return isNumber(this.counterValue);\n    };\n\n    $scope.$watch('$ctrl.options', (options) => {\n      this.onOptionsChange(options);\n    }, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('counterRenderer', CounterRenderer);\n  ngModule.component('counterEditor', CounterEditor);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'COUNTER',\n      name: 'Counter',\n      getOptions: options => ({ ...DEFAULT_OPTIONS, ...options }),\n      Renderer: angular2react('counterRenderer', CounterRenderer, $injector),\n      Editor: angular2react('counterEditor', CounterEditor, $injector),\n\n      defaultColumns: 2,\n      defaultRows: 5,\n    });\n  });\n}\n\ninit.init = true;\n","import { debounce, sortBy, isFinite, every, difference, merge, map } from 'lodash';\nimport d3 from 'd3';\nimport angular from 'angular';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\n\nimport { normalizeValue } from '@/visualizations/chart/plotly/utils';\nimport ColorPalette from '@/visualizations/ColorPalette';\nimport editorTemplate from './funnel-editor.html';\nimport './funnel.less';\n\nconst DEFAULT_OPTIONS = {\n  stepCol: { colName: '', displayAs: 'Steps' },\n  valueCol: { colName: '', displayAs: 'Value' },\n  sortKeyCol: { colName: '' },\n  autoSort: true,\n};\n\nfunction normalizePercentage(num) {\n  if (num < 0.01) {\n    return '<0.01%';\n  }\n  if (num > 1000) {\n    return '>1000%';\n  }\n  return num.toFixed(2) + '%';\n}\n\nfunction Funnel(scope, element) {\n  this.element = element;\n  this.watches = [];\n  const vis = d3.select(element);\n  const options = scope.$ctrl.options;\n\n  function drawFunnel(data) {\n    const maxToPrevious = d3.max(data, d => d.pctPrevious);\n    // Table\n    const table = vis.append('table').attr('class', 'table table-condensed table-hover table-borderless');\n\n    // Header\n    const header = table.append('thead').append('tr');\n    header.append('th').text(options.stepCol.displayAs);\n    header\n      .append('th')\n      .attr('class', 'text-center')\n      .text(options.valueCol.displayAs);\n    header\n      .append('th')\n      .attr('class', 'text-center')\n      .text('% Max');\n    header\n      .append('th')\n      .attr('class', 'text-center')\n      .text('% Previous');\n\n    // Body\n    const trs = table\n      .append('tbody')\n      .selectAll('tr')\n      .data(data)\n      .enter()\n      .append('tr');\n\n    // Steps row\n    trs\n      .append('td')\n      .attr('class', 'col-xs-3 step')\n      .attr('title', d => d.step)\n      .text(d => d.step);\n\n    // Funnel bars\n    const valContainers = trs\n      .append('td')\n      .attr('class', 'col-xs-5')\n      .append('div')\n      .attr('class', 'container');\n    valContainers\n      .append('div')\n      .attr('class', 'bar centered')\n      .style('background-color', ColorPalette.Cyan)\n      .style('width', d => d.pctMax + '%');\n    valContainers\n      .append('div')\n      .attr('class', 'value')\n      .text(d => d.value.toLocaleString());\n\n    // pctMax\n    trs\n      .append('td')\n      .attr('class', 'col-xs-2 text-center')\n      .text(d => normalizePercentage(d.pctMax));\n\n    // pctPrevious\n    const pctContainers = trs\n      .append('td')\n      .attr('class', 'col-xs-2')\n      .append('div')\n      .attr('class', 'container');\n    pctContainers\n      .append('div')\n      .attr('class', 'bar')\n      .style('background-color', ColorPalette.Gray)\n      .style('opacity', '0.2')\n      .style('width', d => (d.pctPrevious / maxToPrevious) * 100.0 + '%');\n    pctContainers\n      .append('div')\n      .attr('class', 'value')\n      .text(d => normalizePercentage(d.pctPrevious));\n  }\n\n  function createVisualization(data) {\n    drawFunnel(data); // draw funnel\n  }\n\n  function removeVisualization() {\n    vis.selectAll('table').remove();\n  }\n\n  function prepareData(queryData) {\n    if (queryData.length === 0) {\n      return [];\n    }\n    const data = queryData.map(\n      row => ({\n        step: normalizeValue(row[options.stepCol.colName]),\n        value: Number(row[options.valueCol.colName]),\n        sortVal: options.autoSort ? '' : row[options.sortKeyCol.colName],\n      }),\n      [],\n    );\n    let sortedData;\n    if (options.autoSort) {\n      sortedData = sortBy(data, 'value').reverse();\n    } else {\n      sortedData = sortBy(data, 'sortVal');\n    }\n\n    // Column validity\n    if (sortedData[0].value === 0 || !every(sortedData, d => isFinite(d.value))) {\n      return;\n    }\n    const maxVal = d3.max(data, d => d.value);\n    sortedData.forEach((d, i) => {\n      d.pctMax = (d.value / maxVal) * 100.0;\n      d.pctPrevious = i === 0 ? 100.0 : (d.value / sortedData[i - 1].value) * 100.0;\n    });\n    return sortedData.slice(0, 100);\n  }\n\n  function invalidColNames() {\n    const colNames = map(scope.$ctrl.data.columns, col => col.name);\n    const colToCheck = [options.stepCol.colName, options.valueCol.colName];\n    if (!options.autoSort) {\n      colToCheck.push(options.sortKeyCol.colName);\n    }\n    return difference(colToCheck, colNames).length > 0;\n  }\n\n  function refresh() {\n    removeVisualization();\n    if (invalidColNames()) {\n      return;\n    }\n\n    const queryData = scope.$ctrl.data.rows;\n    const data = prepareData(queryData, options);\n    if (data.length > 0) {\n      createVisualization(data); // draw funnel\n    }\n  }\n\n  refresh();\n  this.watches.push(scope.$watch('$ctrl.data', refresh));\n  this.watches.push(scope.$watch('$ctrl.options', refresh, true));\n}\n\nFunnel.prototype.remove = function remove() {\n  this.watches.forEach((unregister) => {\n    unregister();\n  });\n  angular.element(this.element).empty();\n};\n\nconst FunnelRenderer = {\n  template: '<div class=\"funnel-visualization-container\" resize-event=\"handleResize()\"></div>',\n  bindings: {\n    data: '<',\n    options: '<',\n  },\n  controller($scope, $element) {\n    const container = $element[0].querySelector('.funnel-visualization-container');\n    let funnel = new Funnel($scope, container);\n\n    const update = () => {\n      funnel.remove();\n      funnel = new Funnel($scope, container);\n    };\n\n    $scope.handleResize = debounce(update, 50);\n\n    $scope.$watch('$ctrl.data', update);\n    $scope.$watch('$ctrl.options', update, true);\n  },\n};\n\nconst FunnelEditor = {\n  template: editorTemplate,\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope) {\n    $scope.$watch('$ctrl.options', (options) => {\n      this.onOptionsChange(options);\n    }, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('funnelRenderer', FunnelRenderer);\n  ngModule.component('funnelEditor', FunnelEditor);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'FUNNEL',\n      name: 'Funnel',\n      getOptions: options => merge({}, DEFAULT_OPTIONS, options),\n      Renderer: angular2react('funnelRenderer', FunnelRenderer, $injector),\n      Editor: angular2react('funnelEditor', FunnelEditor, $injector),\n\n      defaultRows: 10,\n    });\n  });\n}\n\ninit.init = true;\n","import _ from 'lodash';\nimport d3 from 'd3';\nimport L from 'leaflet';\nimport 'leaflet.markercluster';\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport markerIcon from 'leaflet/dist/images/marker-icon.png';\nimport markerIconRetina from 'leaflet/dist/images/marker-icon-2x.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\nimport 'leaflet-fullscreen';\nimport 'leaflet-fullscreen/dist/leaflet.fullscreen.css';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\n\nimport template from './map.html';\nimport editorTemplate from './map-editor.html';\n\n// This is a workaround for an issue with giving Leaflet load the icon on its own.\nL.Icon.Default.mergeOptions({\n  iconUrl: markerIcon,\n  iconRetinaUrl: markerIconRetina,\n  shadowUrl: markerShadow,\n});\n\ndelete L.Icon.Default.prototype._getIconUrl;\n\nconst MAP_TILES = [\n  {\n    name: 'OpenStreetMap',\n    url: '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'OpenStreetMap BW',\n    url: '//{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'OpenStreetMap DE',\n    url: '//{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'OpenStreetMap FR',\n    url: '//{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'OpenStreetMap Hot',\n    url: '//{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'Thunderforest',\n    url: '//{s}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'Thunderforest Spinal',\n    url: '//{s}.tile.thunderforest.com/spinal-map/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'OpenMapSurfer',\n    url: '//korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}',\n  },\n  {\n    name: 'Stamen Toner',\n    url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'Stamen Toner Background',\n    url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-background/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'Stamen Toner Lite',\n    url: '//stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png',\n  },\n  {\n    name: 'OpenTopoMap',\n    url: '//{s}.tile.opentopomap.org/{z}/{x}/{y}.png',\n  },\n];\n\nconst DEFAULT_OPTIONS = {\n  classify: 'none',\n  clusterMarkers: true,\n};\n\nfunction heatpoint(lat, lon, color) {\n  const style = {\n    fillColor: color,\n    fillOpacity: 0.9,\n    stroke: false,\n  };\n\n  return L.circleMarker([lat, lon], style);\n}\n\nconst createMarker = (lat, lon) => L.marker([lat, lon]);\n\nfunction createDescription(latCol, lonCol, row) {\n  const lat = row[latCol];\n  const lon = row[lonCol];\n\n  let description = '<ul style=\"list-style-type: none;padding-left: 0\">';\n  description += `<li><strong>${lat}, ${lon}</strong>`;\n\n  _.each(row, (v, k) => {\n    if (!(k === latCol || k === lonCol)) {\n      description += `<li>${k}: ${v}</li>`;\n    }\n  });\n\n  return description;\n}\n\nconst MapRenderer = {\n  template,\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope, $element) {\n    const colorScale = d3.scale.category10();\n    const map = L.map($element[0].children[0].children[0], {\n      scrollWheelZoom: false,\n      fullscreenControl: true,\n    });\n    const mapControls = L.control.layers().addTo(map);\n    const layers = {};\n    const tileLayer = L.tileLayer('//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    }).addTo(map);\n\n    let mapMoveLock = false;\n\n    const onMapMoveStart = () => {\n      mapMoveLock = true;\n    };\n\n    const onMapMoveEnd = () => {\n      this.options.bounds = map.getBounds();\n      if (this.onOptionsChange) {\n        this.onOptionsChange(this.options);\n      }\n    };\n\n    const updateBounds = ({ disableAnimation = false } = {}) => {\n      if (mapMoveLock) {\n        return;\n      }\n\n      const b = this.options.bounds;\n\n      if (b) {\n        map.fitBounds([[b._southWest.lat, b._southWest.lng],\n          [b._northEast.lat, b._northEast.lng]]);\n      } else if (layers) {\n        const allMarkers = _.flatten(_.map(_.values(layers), l => l.getLayers()));\n        if (allMarkers.length > 0) {\n          // eslint-disable-next-line new-cap\n          const group = new L.featureGroup(allMarkers);\n          const options = disableAnimation ? {\n            animate: false,\n            duration: 0,\n          } : null;\n          map.fitBounds(group.getBounds(), options);\n        }\n      }\n    };\n\n    map.on('focus', () => {\n      map.on('movestart', onMapMoveStart);\n      map.on('moveend', onMapMoveEnd);\n    });\n    map.on('blur', () => {\n      map.off('movestart', onMapMoveStart);\n      map.off('moveend', onMapMoveEnd);\n    });\n\n    const removeLayer = (layer) => {\n      if (layer) {\n        mapControls.removeLayer(layer);\n        map.removeLayer(layer);\n      }\n    };\n\n    const addLayer = (name, points) => {\n      const latCol = this.options.latColName || 'lat';\n      const lonCol = this.options.lonColName || 'lon';\n      const classify = this.options.classify;\n\n      let markers;\n      if (this.options.clusterMarkers) {\n        const color = this.options.groups[name].color;\n        const options = {};\n\n        if (classify) {\n          options.iconCreateFunction = (cluster) => {\n            const childCount = cluster.getChildCount();\n\n            let c = ' marker-cluster-';\n            if (childCount < 10) {\n              c += 'small';\n            } else if (childCount < 100) {\n              c += 'medium';\n            } else {\n              c += 'large';\n            }\n\n            c = '';\n\n            const style = `color: white; background-color: ${color};`;\n            return L.divIcon({ html: `<div style=\"${style}\"><span>${childCount}</span></div>`, className: `marker-cluster${c}`, iconSize: new L.Point(40, 40) });\n          };\n        }\n\n        markers = L.markerClusterGroup(options);\n      } else {\n        markers = L.layerGroup();\n      }\n\n      // create markers\n      _.each(points, (row) => {\n        let marker;\n\n        const lat = row[latCol];\n        const lon = row[lonCol];\n\n        if (lat === null || lon === null) return;\n\n        if (classify && classify !== 'none') {\n          const groupColor = this.options.groups[name].color;\n          marker = heatpoint(lat, lon, groupColor);\n        } else {\n          marker = createMarker(lat, lon);\n        }\n\n        marker.bindPopup(createDescription(latCol, lonCol, row));\n        markers.addLayer(marker);\n      });\n\n      markers.addTo(map);\n\n      layers[name] = markers;\n      mapControls.addOverlay(markers, name);\n    };\n\n    const render = () => {\n      const classify = this.options.classify;\n\n      tileLayer.setUrl(this.options.mapTileUrl || '//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');\n\n      if (this.options.clusterMarkers === undefined) {\n        this.options.clusterMarkers = true;\n      }\n\n      if (this.data) {\n        let pointGroups;\n        if (classify && classify !== 'none') {\n          pointGroups = _.groupBy(this.data.rows, classify);\n        } else {\n          pointGroups = { All: this.data.rows };\n        }\n\n        const groupNames = _.keys(pointGroups);\n        const options = _.map(groupNames, (group) => {\n          if (this.options.groups && this.options.groups[group]) {\n            return this.options.groups[group];\n          }\n          return { color: colorScale(group) };\n        });\n\n        this.options.groups = _.zipObject(groupNames, options);\n\n        _.each(layers, (v) => {\n          removeLayer(v);\n        });\n\n        _.each(pointGroups, (v, k) => {\n          addLayer(k, v);\n        });\n\n        updateBounds({ disableAnimation: true });\n      }\n    };\n\n    $scope.handleResize = () => {\n      if (!map) return;\n      map.invalidateSize(false);\n      updateBounds({ disableAnimation: true });\n    };\n\n    $scope.$watch('$ctrl.data', render);\n    $scope.$watch(() => _.omit(this.options, 'bounds'), render, true);\n    $scope.$watch('$ctrl.options.bounds', updateBounds, true);\n  },\n};\n\nconst MapEditor = {\n  template: editorTemplate,\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope) {\n    this.currentTab = 'general';\n    this.setCurrentTab = (tab) => {\n      this.currentTab = tab;\n    };\n\n    this.mapTiles = MAP_TILES;\n\n    $scope.$watch('$ctrl.data.columns', () => {\n      this.columns = this.data.columns;\n      this.columnNames = _.map(this.columns, c => c.name);\n      this.classifyColumns = [...this.columnNames, 'none'];\n    });\n\n    $scope.$watch('$ctrl.options', (options) => {\n      this.onOptionsChange(options);\n    }, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('mapRenderer', MapRenderer);\n  ngModule.component('mapEditor', MapEditor);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'MAP',\n      name: 'Map (Markers)',\n      getOptions: options => _.merge({}, DEFAULT_OPTIONS, options),\n      Renderer: angular2react('mapRenderer', MapRenderer, $injector),\n      Editor: angular2react('mapEditor', MapEditor, $injector),\n\n      defaultColumns: 3,\n      defaultRows: 8,\n      minColumns: 2,\n    });\n  });\n}\n\ninit.init = true;\n","import { merge, omit } from 'lodash';\nimport angular from 'angular';\nimport $ from 'jquery';\nimport 'pivottable';\nimport 'pivottable/dist/pivot.css';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\n\nimport './pivot.less';\n\nimport Editor from './Editor';\n\nconst DEFAULT_OPTIONS = {\n  controls: {\n    enabled: false, // `false` means \"show controls\" o_O\n  },\n};\n\nconst PivotTableRenderer = {\n  template: `\n    <div class=\"pivot-table-renderer\" ng-class=\"{'hide-controls': $ctrl.options.controls.enabled}\"></div>\n  `,\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  controller($scope, $element) {\n    const update = () => {\n      // We need to give the pivot table its own copy of the data, because it changes\n      // it which interferes with other visualizations.\n      const data = angular.copy(this.data.rows);\n      const options = {\n        renderers: $.pivotUtilities.renderers,\n        onRefresh: (config) => {\n          if (this.onOptionsChange) {\n            config = omit(config, [\n              // delete some values which are functions\n              'aggregators',\n              'renderers',\n              'onRefresh',\n              // delete some bulky de\n              'localeStrings',\n            ]);\n            this.onOptionsChange(config);\n          }\n        },\n        ...this.options,\n      };\n\n      $('.pivot-table-renderer', $element).pivotUI(data, options, true);\n    };\n\n    $scope.$watch('$ctrl.data', update);\n    // `options.controls.enabled` is not related to pivot renderer, it's handled by `ng-if`,\n    // so re-render only if other options changed\n    $scope.$watch(() => omit(this.options, 'controls'), update, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('pivotTableRenderer', PivotTableRenderer);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'PIVOT',\n      name: 'Pivot Table',\n      getOptions: options => merge({}, DEFAULT_OPTIONS, options),\n      Renderer: angular2react('pivotTableRenderer', PivotTableRenderer, $injector),\n      Editor,\n\n      defaultRows: 10,\n      defaultColumns: 3,\n      minColumns: 2,\n    });\n  });\n}\n\ninit.init = true;\n","import _ from 'lodash';\nimport { angular2react } from 'angular2react';\nimport { getColumnCleanName } from '@/services/query-result';\nimport { clientConfig } from '@/services/auth';\nimport { createFormatter } from '@/lib/value-format';\nimport { registerVisualization } from '@/visualizations';\nimport template from './table.html';\nimport editorTemplate from './table-editor.html';\nimport './table-editor.less';\n\nconst ALLOWED_ITEM_PER_PAGE = [5, 10, 15, 20, 25, 50, 100, 150, 200, 250];\n\nconst DISPLAY_AS_OPTIONS = [\n  { name: 'Text', value: 'string' },\n  { name: 'Number', value: 'number' },\n  { name: 'Date/Time', value: 'datetime' },\n  { name: 'Boolean', value: 'boolean' },\n  { name: 'JSON', value: 'json' },\n  { name: 'Image', value: 'image' },\n  { name: 'Link', value: 'link' },\n];\n\nconst DEFAULT_OPTIONS = {\n  itemsPerPage: 25,\n};\n\nfunction getColumnContentAlignment(type) {\n  return ['integer', 'float', 'boolean', 'date', 'datetime'].indexOf(type) >= 0 ? 'right' : 'left';\n}\n\nfunction getDefaultColumnsOptions(columns) {\n  const displayAs = {\n    integer: 'number',\n    float: 'number',\n    boolean: 'boolean',\n    date: 'datetime',\n    datetime: 'datetime',\n  };\n\n  return _.map(columns, (col, index) => ({\n    name: col.name,\n    type: col.type,\n    displayAs: displayAs[col.type] || 'string',\n    visible: true,\n    order: 100000 + index,\n    title: getColumnCleanName(col.name),\n    allowSearch: false,\n    alignContent: getColumnContentAlignment(col.type),\n    // `string` cell options\n    allowHTML: true,\n    highlightLinks: false,\n  }));\n}\n\nfunction getDefaultFormatOptions(column) {\n  const dateTimeFormat = {\n    date: clientConfig.dateFormat || 'DD/MM/YYYY',\n    datetime: clientConfig.dateTimeFormat || 'DD/MM/YYYY HH:mm',\n  };\n  const numberFormat = {\n    integer: clientConfig.integerFormat || '0,0',\n    float: clientConfig.floatFormat || '0,0.00',\n  };\n  return {\n    dateTimeFormat: dateTimeFormat[column.type],\n    numberFormat: numberFormat[column.type],\n    booleanValues: clientConfig.booleanValues || ['false', 'true'],\n    // `image` cell options\n    imageUrlTemplate: '{{ @ }}',\n    imageTitleTemplate: '{{ @ }}',\n    imageWidth: '',\n    imageHeight: '',\n    // `link` cell options\n    linkUrlTemplate: '{{ @ }}',\n    linkTextTemplate: '{{ @ }}',\n    linkTitleTemplate: '{{ @ }}',\n    linkOpenInNewTab: true,\n  };\n}\n\nfunction wereColumnsReordered(queryColumns, visualizationColumns) {\n  queryColumns = _.map(queryColumns, col => col.name);\n  visualizationColumns = _.map(visualizationColumns, col => col.name);\n\n  // Some columns may be removed - so skip them (but keep original order)\n  visualizationColumns = _.filter(visualizationColumns, col => _.includes(queryColumns, col));\n  // Pick query columns that were previously saved with viz (but keep order too)\n  queryColumns = _.filter(queryColumns, col => _.includes(visualizationColumns, col));\n\n  // Both array now have the same size as they both contains only common columns\n  // (in fact, it was an intersection, that kept order of items on both arrays).\n  // Now check for equality item-by-item; if common columns are in the same order -\n  // they were not reordered in editor\n  for (let i = 0; i < queryColumns.length; i += 1) {\n    if (visualizationColumns[i] !== queryColumns[i]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction getColumnsOptions(columns, visualizationColumns) {\n  const options = getDefaultColumnsOptions(columns);\n\n  if ((wereColumnsReordered(columns, visualizationColumns))) {\n    visualizationColumns = _.fromPairs(_.map(\n      visualizationColumns,\n      (col, index) => [col.name, _.extend({}, col, { order: index })],\n    ));\n  } else {\n    visualizationColumns = _.fromPairs(_.map(\n      visualizationColumns,\n      col => [col.name, _.omit(col, 'order')],\n    ));\n  }\n\n  _.each(options, col => _.extend(col, visualizationColumns[col.name]));\n\n  return _.sortBy(options, 'order');\n}\n\nfunction getColumnsToDisplay(columns, options) {\n  columns = _.fromPairs(_.map(columns, col => [col.name, col]));\n  let result = _.map(options, col => _.extend(\n    getDefaultFormatOptions(col),\n    col,\n    columns[col.name],\n  ));\n\n  result = _.map(result, col => _.extend(col, {\n    formatFunction: createFormatter(col),\n  }));\n\n  return _.sortBy(_.filter(result, 'visible'), 'order');\n}\n\nconst GridRenderer = {\n  bindings: {\n    data: '<',\n    options: '<',\n  },\n  template,\n  controller($scope) {\n    const update = () => {\n      this.gridColumns = [];\n      this.gridRows = [];\n      if (this.data) {\n        this.gridColumns = getColumnsToDisplay(this.data.columns, this.options.columns);\n        this.gridRows = this.data.rows;\n      }\n    };\n    update();\n\n    $scope.$watch('$ctrl.data', update);\n    $scope.$watch('$ctrl.options', update, true);\n  },\n};\n\nconst GridEditor = {\n  bindings: {\n    data: '<',\n    options: '<',\n    onOptionsChange: '<',\n  },\n  template: editorTemplate,\n  controller($scope) {\n    this.allowedItemsPerPage = ALLOWED_ITEM_PER_PAGE;\n    this.displayAsOptions = DISPLAY_AS_OPTIONS;\n\n    this.currentTab = 'columns';\n    this.setCurrentTab = (tab) => {\n      this.currentTab = tab;\n    };\n\n    $scope.$watch('$ctrl.options', (options) => {\n      this.onOptionsChange(options);\n    }, true);\n\n    this.templateHint = `\n      All columns can be referenced using <code>{{ column_name }}</code> syntax.\n      Use <code>{{ @ }}</code> to reference current (this) column.\n      This syntax is applicable to URL, Title and Size options.\n    `;\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('gridRenderer', GridRenderer);\n  ngModule.component('gridEditor', GridEditor);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'TABLE',\n      name: 'Table',\n      getOptions: (options, { columns }) => {\n        options = { ...DEFAULT_OPTIONS, ...options };\n        options.columns = _.map(\n          getColumnsOptions(columns, options.columns),\n          col => ({ ...getDefaultFormatOptions(col), ...col }),\n        );\n        return options;\n      },\n      Renderer: angular2react('gridRenderer', GridRenderer, $injector),\n      Editor: angular2react('gridEditor', GridEditor, $injector),\n\n      autoHeight: true,\n      defaultRows: 14,\n      defaultColumns: 3,\n      minColumns: 2,\n    });\n  });\n}\n\ninit.init = true;\n","import d3 from 'd3';\nimport cloud from 'd3-cloud';\nimport { map, min, max, values } from 'lodash';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\n\nimport Editor from './Editor';\n\nfunction findWordFrequencies(data, columnName) {\n  const wordsHash = {};\n\n  data.forEach((row) => {\n    const wordsList = row[columnName].toString().split(' ');\n    wordsList.forEach((d) => {\n      if (d in wordsHash) {\n        wordsHash[d] += 1;\n      } else {\n        wordsHash[d] = 1;\n      }\n    });\n  });\n\n  return wordsHash;\n}\n\n// target domain: [t1, t2]\nconst MIN_WORD_SIZE = 10;\nconst MAX_WORD_SIZE = 100;\n\nfunction createScale(wordCounts) {\n  wordCounts = values(wordCounts);\n\n  // source domain: [s1, s2]\n  const minCount = min(wordCounts);\n  const maxCount = max(wordCounts);\n\n  // Edge case - if all words have the same count; just set middle size for all\n  if (minCount === maxCount) {\n    return () => (MAX_WORD_SIZE + MIN_WORD_SIZE) / 2;\n  }\n\n  // v is value from source domain:\n  //    s1 <= v <= s2.\n  // We need to fit it target domain:\n  //    t1 <= v\" <= t2\n  // 1. offset source value to zero point:\n  //    v' = v - s1\n  // 2. offset source and target domains to zero point:\n  //    s' = s2 - s1\n  //    t' = t2 - t1\n  // 3. compute fraction:\n  //    f = v' / s';\n  //    0 <= f <= 1\n  // 4. map f to target domain:\n  //    v\" = f * t' + t1;\n  //    t1 <= v\" <= t' + t1;\n  //    t1 <= v\" <= t2 (because t' = t2 - t1, so t2 = t' + t1)\n\n  const sourceScale = maxCount - minCount;\n  const targetScale = MAX_WORD_SIZE - MIN_WORD_SIZE;\n\n  return value => ((value - minCount) / sourceScale) * targetScale + MIN_WORD_SIZE;\n}\n\nconst WordCloudRenderer = {\n  restrict: 'E',\n  bindings: {\n    data: '<',\n    options: '<',\n  },\n  controller($scope, $element) {\n    $element[0].style.display = 'block';\n\n    const update = () => {\n      const data = this.data.rows;\n      const options = this.options;\n\n      let wordsHash = {};\n      if (options.column) {\n        wordsHash = findWordFrequencies(data, options.column);\n      }\n\n      const scaleValue = createScale(wordsHash);\n\n      const wordList = map(wordsHash, (count, key) => ({\n        text: key,\n        size: scaleValue(count),\n      }));\n\n      const fill = d3.scale.category20();\n      const layout = cloud()\n        .size([500, 500])\n        .words(wordList)\n        .padding(5)\n        .rotate(() => Math.floor(Math.random() * 2) * 90)\n        .font('Impact')\n        .fontSize(d => d.size);\n\n      function draw(words) {\n        d3.select($element[0]).selectAll('*').remove();\n\n        d3.select($element[0])\n          .append('svg')\n          .attr('width', layout.size()[0])\n          .attr('height', layout.size()[1])\n          .append('g')\n          .attr('transform', `translate(${layout.size()[0] / 2},${layout.size()[1] / 2})`)\n          .selectAll('text')\n          .data(words)\n          .enter()\n          .append('text')\n          .style('font-size', d => `${d.size}px`)\n          .style('font-family', 'Impact')\n          .style('fill', (d, i) => fill(i))\n          .attr('text-anchor', 'middle')\n          .attr('transform', d => `translate(${[d.x, d.y]})rotate(${d.rotate})`)\n          .text(d => d.text);\n      }\n\n      layout.on('end', draw);\n\n      layout.start();\n    };\n\n    $scope.$watch('$ctrl.data', update);\n    $scope.$watch('$ctrl.options', update, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('wordCloudRenderer', WordCloudRenderer);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'WORD_CLOUD',\n      name: 'Word Cloud',\n      getOptions: options => ({ ...options }),\n      Renderer: angular2react('wordCloudRenderer', WordCloudRenderer, $injector),\n      Editor,\n\n      defaultRows: 8,\n    });\n  });\n}\n\ninit.init = true;\n","var map = {\n\t\"./admin/OutdatedQueries.jsx\": 1411,\n\t\"./admin/SystemStatus.jsx\": 1412,\n\t\"./admin/Tasks.jsx\": 1414,\n\t\"./alert/index.js\": 1415,\n\t\"./alerts/AlertsList.jsx\": 1416,\n\t\"./dashboards/DashboardList.jsx\": 1417,\n\t\"./dashboards/DashboardListEmptyState.jsx\": 447,\n\t\"./dashboards/ShareDashboardDialog.jsx\": 448,\n\t\"./dashboards/dashboard.js\": 1419,\n\t\"./dashboards/public-dashboard-page.js\": 1420,\n\t\"./data-sources/DataSourcesList.jsx\": 1421,\n\t\"./data-sources/EditDataSource.jsx\": 1422,\n\t\"./destinations/DestinationsList.jsx\": 1423,\n\t\"./destinations/EditDestination.jsx\": 1424,\n\t\"./groups/GroupDataSources.jsx\": 1425,\n\t\"./groups/GroupMembers.jsx\": 1426,\n\t\"./groups/GroupsList.jsx\": 1427,\n\t\"./home/index.js\": 1428,\n\t\"./queries-list/QueriesList.jsx\": 1429,\n\t\"./queries-list/QueriesListEmptyState.jsx\": 449,\n\t\"./queries/add-to-dashboard.js\": 1431,\n\t\"./queries/source-view.js\": 1432,\n\t\"./queries/view.js\": 1433,\n\t\"./query-snippets/edit.js\": 1434,\n\t\"./query-snippets/list.js\": 1457,\n\t\"./settings/organization.js\": 1436,\n\t\"./users/UserProfile.jsx\": 1437,\n\t\"./users/UsersList.jsx\": 1439,\n\t\"./users/index.js\": 1440\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1410;","import { map } from 'lodash';\nimport React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport Switch from 'antd/lib/switch';\nimport * as Grid from 'antd/lib/grid';\nimport { Paginator } from '@/components/Paginator';\nimport { QueryTagsControl } from '@/components/tags-control/TagsControl';\nimport { SchedulePhrase } from '@/components/queries/SchedulePhrase';\nimport { TimeAgo } from '@/components/TimeAgo';\nimport Layout from '@/components/admin/Layout';\n\nimport { wrap as itemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport { PageSizeSelect } from '@/components/items-list/components/Sidebar';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport { $http } from '@/services/ng';\nimport { Query } from '@/services/query';\nimport recordEvent from '@/services/recordEvent';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nclass OutdatedQueries extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    {\n      title: 'ID',\n      field: 'id',\n      width: '1%',\n      align: 'right',\n      sorter: true,\n    },\n    Columns.custom.sortable((text, item) => (\n      <React.Fragment>\n        <a className=\"table-main-title\" href={'queries/' + item.id}>{item.name}</a>\n        <QueryTagsControl\n          className=\"d-block\"\n          tags={item.tags}\n          isDraft={item.is_draft}\n          isArchived={item.is_archived}\n        />\n      </React.Fragment>\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.avatar({ field: 'user', className: 'p-l-0 p-r-0' }, name => `Created by ${name}`),\n    Columns.dateTime.sortable({ title: 'Created At', field: 'created_at' }),\n    Columns.duration.sortable({ title: 'Runtime', field: 'runtime' }),\n    Columns.dateTime.sortable({ title: 'Last Executed At', field: 'retrieved_at', orderByField: 'executed_at' }),\n    Columns.custom.sortable(\n      (text, item) => <SchedulePhrase schedule={item.schedule} isNew={item.isNew()} />,\n      { title: 'Update Schedule', field: 'schedule' },\n    ),\n  ];\n\n  state = {\n    autoUpdate: true,\n  };\n\n  _updateTimer = null;\n\n  componentDidMount() {\n    recordEvent('view', 'page', 'admin/queries/outdated');\n    this.update(true);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this._updateTimer);\n  }\n\n  update = (isInitialCall = false) => {\n    if (!isInitialCall && this.state.autoUpdate) {\n      this.props.controller.update();\n    }\n    this._updateTimer = setTimeout(this.update, 60 * 1000);\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <Layout activeTab={controller.params.currentPage}>\n        <Grid.Row className=\"m-15\">\n          <Grid.Col span={16}>\n            <div>\n              <label htmlFor=\"auto-update-switch\" className=\"m-0\">Auto update</label>\n              <Switch\n                id=\"auto-update-switch\"\n                className=\"m-l-10\"\n                checked={this.state.autoUpdate}\n                onChange={autoUpdate => this.setState({ autoUpdate })}\n              />\n            </div>\n            {controller.params.lastUpdatedAt && (\n              <div className=\"m-t-5\">\n                Last updated:{' '}\n                <TimeAgo date={controller.params.lastUpdatedAt * 1000} />\n              </div>\n            )}\n          </Grid.Col>\n          <Grid.Col span={8}>\n            {controller.isLoaded && !controller.isEmpty && (\n              <PageSizeSelect\n                options={controller.pageSizeOptions}\n                value={controller.itemsPerPage}\n                onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n              />\n            )}\n          </Grid.Col>\n        </Grid.Row>\n        {!controller.isLoaded && <LoadingState />}\n        {controller.isLoaded && controller.isEmpty && (\n          <div className=\"text-center p-15\">\n            There are no outdated queries.\n          </div>\n        )}\n        {\n          controller.isLoaded && !controller.isEmpty && (\n            <div className=\"bg-white tiled table-responsive\">\n              <ItemsTable\n                items={controller.pageItems}\n                columns={this.listColumns}\n                orderByField={controller.orderByField}\n                orderByReverse={controller.orderByReverse}\n                toggleSorting={controller.toggleSorting}\n              />\n              <Paginator\n                totalCount={controller.totalItemsCount}\n                itemsPerPage={controller.itemsPerPage}\n                page={controller.page}\n                onChange={page => controller.updatePagination({ page })}\n              />\n            </div>\n          )\n        }\n      </Layout>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageOutdatedQueries', react2angular(itemsList(\n    OutdatedQueries,\n    new ItemsSource({\n      doRequest(request, context) {\n        return $http.get('/api/admin/queries/outdated')\n          // eslint-disable-next-line camelcase\n          .then(({ data: { queries, updated_at } }) => {\n            context.setCustomParams({ lastUpdatedAt: parseFloat(updated_at) });\n            return queries;\n          });\n      },\n      processResults(items) {\n        return map(items, item => new Query(item));\n      },\n      isPlainList: true,\n    }),\n    new StateStorage({ orderByField: 'created_at', orderByReverse: true }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/admin/queries/outdated',\n      title: 'Outdated Queries',\n      key: 'outdated_queries',\n    },\n  ], {\n    template: '<page-outdated-queries on-error=\"handleError\"></page-outdated-queries>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import { omit } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nimport Layout from '@/components/admin/Layout';\nimport * as StatusBlock from '@/components/admin/StatusBlock';\n\nimport { $http } from '@/services/ng';\nimport recordEvent from '@/services/recordEvent';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nimport './system-status.less';\n\nclass SystemStatus extends React.Component {\n  static propTypes = {\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    queues: [],\n    manager: null,\n    databaseMetrics: {},\n    status: {},\n  };\n\n  _refreshTimer = null;\n\n  componentDidMount() {\n    recordEvent('view', 'page', 'admin/status');\n    this.refresh();\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this._refreshTimer);\n  }\n\n  refresh = () => {\n    $http.get('/status.json')\n      .then(({ data }) => {\n        this.setState({\n          queues: data.manager.queues,\n          manager: {\n            startedAt: data.manager.started_at * 1000,\n            lastRefreshAt: data.manager.last_refresh_at * 1000,\n            outdatedQueriesCount: data.manager.outdated_queries_count,\n          },\n          databaseMetrics: data.database_metrics.metrics || [],\n          status: omit(data, ['workers', 'manager', 'database_metrics']),\n        });\n      })\n      .catch((error) => {\n        // ANGULAR_REMOVE_ME This code is related to Angular's HTTP services\n        if (error.status && error.data) {\n          error = new PromiseRejectionError(error);\n        }\n        this.props.onError(error);\n      });\n    this._refreshTimer = setTimeout(this.refresh, 60 * 1000);\n  };\n\n  render() {\n    return (\n      <Layout activeTab=\"system_status\">\n        <div className=\"system-status-page\">\n          <div className=\"system-status-page-blocks\">\n            <div className=\"system-status-page-block\">\n              <StatusBlock.General info={this.state.status} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.Manager info={this.state.manager} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.Queues info={this.state.queues} />\n            </div>\n            <div className=\"system-status-page-block\">\n              <StatusBlock.DatabaseMetrics info={this.state.databaseMetrics} />\n            </div>\n          </div>\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageSystemStatus', react2angular(SystemStatus));\n\n  return routesToAngularRoutes([\n    {\n      path: '/admin/status',\n      title: 'System Status',\n      key: 'system_status',\n    },\n  ], {\n    template: '<page-system-status on-error=\"handleError\"></page-system-status>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import { values, each } from 'lodash';\nimport moment from 'moment';\nimport React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport Alert from 'antd/lib/alert';\nimport Tabs from 'antd/lib/tabs';\nimport * as Grid from 'antd/lib/grid';\nimport Layout from '@/components/admin/Layout';\nimport { CounterCard, QueuesTable, QueriesTable, OtherTasksTable } from '@/components/admin/CeleryStatus';\n\nimport { $http } from '@/services/ng';\nimport recordEvent from '@/services/recordEvent';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nclass Tasks extends React.Component {\n  state = {\n    isLoading: true,\n    error: null,\n\n    queues: [],\n    queries: [],\n    otherTasks: [],\n    counters: { active: 0, reserved: 0, waiting: 0 },\n  };\n\n  componentDidMount() {\n    recordEvent('view', 'page', 'admin/tasks');\n    $http\n      .get('/api/admin/queries/tasks')\n      .then(({ data }) => this.processTasks(data.tasks))\n      .catch(error => this.handleError(error));\n  }\n\n  componentWillUnmount() {\n    // Ignore data after component unmounted\n    this.processTasks = () => {};\n    this.handleError = () => {};\n  }\n\n  processTasks = (tasks) => {\n    const queues = {};\n    const queries = [];\n    const otherTasks = [];\n\n    const counters = { active: 0, reserved: 0, waiting: 0 };\n\n    each(tasks, (task) => {\n      queues[task.queue] = queues[task.queue] || { name: task.queue, active: 0, reserved: 0, waiting: 0 };\n      queues[task.queue][task.state] += 1;\n\n      if (task.enqueue_time) {\n        task.enqueue_time = moment(task.enqueue_time * 1000.0);\n      }\n      if (task.start_time) {\n        task.start_time = moment(task.start_time * 1000.0);\n      }\n\n      counters[task.state] += 1;\n\n      if (task.task_name === 'redash.tasks.execute_query') {\n        queries.push(task);\n      } else {\n        otherTasks.push(task);\n      }\n    });\n\n    this.setState({ isLoading: false, queues: values(queues), queries, otherTasks, counters });\n  };\n\n  handleError = (error) => {\n    this.setState({ isLoading: false, error });\n  };\n\n  render() {\n    const { isLoading, error, queues, queries, otherTasks, counters } = this.state;\n\n    return (\n      <Layout activeTab=\"tasks\">\n        <div className=\"p-15\">\n          {error && (\n            <Alert type=\"error\" message=\"Failed loading status. Please refresh.\" />\n          )}\n\n          {!error && (\n            <React.Fragment>\n              <Grid.Row gutter={15} className=\"m-b-15\">\n                <Grid.Col span={8}>\n                  <CounterCard title=\"Active Tasks\" value={counters.active} loading={isLoading} />\n                </Grid.Col>\n                <Grid.Col span={8}>\n                  <CounterCard title=\"Reserved Tasks\" value={counters.reserved} loading={isLoading} />\n                </Grid.Col>\n                <Grid.Col span={8}>\n                  <CounterCard title=\"Waiting Tasks\" value={counters.waiting} loading={isLoading} />\n                </Grid.Col>\n              </Grid.Row>\n\n              <Tabs defaultActiveKey=\"queues\" animated={false}>\n                <Tabs.TabPane key=\"queues\" tab=\"Queues\">\n                  <QueuesTable loading={isLoading} items={queues} />\n                </Tabs.TabPane>\n                <Tabs.TabPane key=\"queries\" tab=\"Queries\">\n                  <QueriesTable loading={isLoading} items={queries} />\n                </Tabs.TabPane>\n                <Tabs.TabPane key=\"other\" tab=\"Other Tasks\">\n                  <OtherTasksTable loading={isLoading} items={otherTasks} />\n                </Tabs.TabPane>\n              </Tabs>\n            </React.Fragment>\n          )}\n        </div>\n      </Layout>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageTasks', react2angular(Tasks));\n\n  return routesToAngularRoutes([\n    {\n      path: '/admin/queries/tasks',\n      title: 'Celery Status',\n      key: 'tasks',\n    },\n  ], {\n    template: '<page-tasks></page-tasks>',\n  });\n}\n\ninit.init = true;\n","import { template as templateBuilder } from 'lodash';\nimport notification from '@/services/notification';\nimport template from './alert.html';\n\nfunction AlertCtrl($scope, $routeParams, $location, $sce, currentUser, Query, Events, Alert) {\n  this.alertId = $routeParams.alertId;\n\n  if (this.alertId === 'new') {\n    Events.record('view', 'page', 'alerts/new');\n  }\n\n  this.trustAsHtml = html => $sce.trustAsHtml(html);\n\n  this.onQuerySelected = (item) => {\n    this.alert.query = item;\n    this.selectedQuery = new Query(item);\n    this.selectedQuery.getQueryResultPromise().then((result) => {\n      this.queryResult = result;\n      this.alert.options.column = this.alert.options.column || result.getColumnNames()[0];\n    });\n    $scope.$applyAsync();\n  };\n\n  if (this.alertId === 'new') {\n    this.alert = new Alert({ options: {} });\n    this.canEdit = true;\n  } else {\n    this.alert = Alert.get({ id: this.alertId }, (alert) => {\n      this.onQuerySelected(alert.query);\n      this.canEdit = currentUser.canEdit(this.alert);\n    });\n  }\n\n  this.ops = ['greater than', 'less than', 'equals'];\n  this.selectedQuery = null;\n\n  const defaultNameBuilder = templateBuilder('<%= query.name %>: <%= options.column %> <%= options.op %> <%= options.value %>');\n\n  this.getDefaultName = () => {\n    if (!this.alert.query) {\n      return undefined;\n    }\n    return defaultNameBuilder(this.alert);\n  };\n\n  this.searchQueries = (term) => {\n    if (!term || term.length < 3) {\n      return;\n    }\n\n    Query.query({ q: term }, (results) => {\n      this.queries = results.results;\n    });\n  };\n\n  this.saveChanges = () => {\n    if (this.alert.name === undefined || this.alert.name === '') {\n      this.alert.name = this.getDefaultName();\n    }\n    if (this.alert.rearm === '' || this.alert.rearm === 0) {\n      this.alert.rearm = null;\n    }\n    this.alert.$save(\n      (alert) => {\n        notification.success('Saved.');\n        if (this.alertId === 'new') {\n          $location.path(`/alerts/${alert.id}`).replace();\n        }\n      },\n      () => {\n        notification.error('Failed saving alert.');\n      },\n    );\n  };\n\n  this.delete = () => {\n    this.alert.$delete(\n      () => {\n        $location.path('/alerts');\n        notification.success('Alert deleted.');\n      },\n      () => {\n        notification.error('Failed deleting alert.');\n      },\n    );\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('alertPage', {\n    template,\n    controller: AlertCtrl,\n  });\n\n  return {\n    '/alerts/:alertId': {\n      template: '<alert-page></alert-page>',\n      title: 'Alerts',\n    },\n  };\n}\n\ninit.init = true;\n","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport { toUpper } from 'lodash';\nimport { PageHeader } from '@/components/PageHeader';\nimport { Paginator } from '@/components/Paginator';\nimport { EmptyState } from '@/components/empty-state/EmptyState';\n\nimport { wrap as liveItemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport { Alert } from '@/services/alert';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nconst STATE_CLASS = {\n  unknown: 'label-warning',\n  ok: 'label-success',\n  triggered: 'label-danger',\n};\n\nclass AlertsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom.sortable((text, alert) => (\n      <div>\n        <a className=\"table-main-title\" href={'alerts/' + alert.id}>{alert.name}</a>\n      </div>\n    ), {\n      title: 'Name',\n      field: 'name',\n    }),\n    Columns.custom.sortable((text, alert) => (\n      <div>\n        <span className={`label ${STATE_CLASS[alert.state]}`}>{toUpper(alert.state)}</span>\n      </div>\n    ), {\n      title: 'State',\n      field: 'state',\n      width: '1%',\n    }),\n    Columns.timeAgo.sortable({ title: 'Last Updated At',\n      field: 'updated_at',\n      className: 'text-nowrap',\n      width: '1%' }),\n    Columns.avatar({ field: 'user', className: 'p-l-0 p-r-0' }, name => `Created by ${name}`),\n    Columns.dateTime.sortable({ title: 'Created At',\n      field: 'created_at',\n      className: 'text-nowrap',\n      width: '1%' }),\n  ];\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div className=\"container\">\n        <PageHeader title={controller.params.title} />\n        <div className=\"m-l-15 m-r-15\">\n          {!controller.isLoaded && <LoadingState className=\"\" />}\n          {controller.isLoaded && controller.isEmpty && (\n            <EmptyState\n              icon=\"fa fa-bell-o\"\n              illustration=\"alert\"\n              description=\"Get notified on certain events\"\n              helpLink=\"https://redash.io/help/user-guide/alerts/\"\n              showAlertStep\n            />\n          )}\n          {\n            controller.isLoaded && !controller.isEmpty && (\n              <div className=\"table-responsive bg-white tiled\">\n                <ItemsTable\n                  items={controller.pageItems}\n                  columns={this.listColumns}\n                  orderByField={controller.orderByField}\n                  orderByReverse={controller.orderByReverse}\n                  toggleSorting={controller.toggleSorting}\n                />\n                <Paginator\n                  totalCount={controller.totalItemsCount}\n                  itemsPerPage={controller.itemsPerPage}\n                  page={controller.page}\n                  onChange={page => controller.updatePagination({ page })}\n                />\n              </div>\n            )\n          }\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageAlertsList', react2angular(liveItemsList(\n    AlertsList,\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest() {\n        return {};\n      },\n      getResource() {\n        return Alert.query.bind(Alert);\n      },\n      getItemProcessor() {\n        return (item => new Alert(item));\n      },\n    }),\n    new StateStorage({ orderByField: 'created_at', orderByReverse: true, itemsPerPage: 20 }),\n  )));\n  return routesToAngularRoutes([\n    {\n      path: '/alerts',\n      title: 'Alerts',\n      key: 'alerts',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<page-alerts-list on-error=\"handleError\"></page-alerts-list>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport { PageHeader } from '@/components/PageHeader';\nimport { Paginator } from '@/components/Paginator';\nimport { DashboardTagsControl } from '@/components/tags-control/TagsControl';\n\nimport { wrap as itemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { UrlStateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport * as Sidebar from '@/components/items-list/components/Sidebar';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport Layout from '@/components/layouts/ContentWithSidebar';\n\nimport { Dashboard } from '@/services/dashboard';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nimport DashboardListEmptyState from './DashboardListEmptyState';\n\nimport './dashboard-list.css';\n\nclass DashboardList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: 'all',\n      href: 'dashboards',\n      title: 'All Dashboards',\n    },\n    {\n      key: 'favorites',\n      href: 'dashboards/favorites',\n      title: 'Favorites',\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-star\" />,\n    },\n  ];\n\n  listColumns = [\n    Columns.favorites({ className: 'p-r-0' }),\n    Columns.custom.sortable((text, item) => (\n      <React.Fragment>\n        <a className=\"table-main-title\" href={'dashboard/' + item.slug} data-test={item.slug}>{ item.name }</a>\n        <DashboardTagsControl\n          className=\"d-block\"\n          tags={item.tags}\n          isDraft={item.is_draft}\n          isArchived={item.is_archived}\n        />\n      </React.Fragment>\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.avatar({ field: 'user', className: 'p-l-0 p-r-0' }, name => `Created by ${name}`),\n    Columns.dateTime.sortable({\n      title: 'Created At',\n      field: 'created_at',\n      className: 'text-nowrap',\n      width: '1%',\n    }),\n  ];\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div className=\"container\">\n        <PageHeader title={controller.params.title} />\n        <Layout className=\"m-l-15 m-r-15\">\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              placeholder=\"Search Dashboards...\"\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n            />\n            <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.Tags url=\"api/dashboards/tags\" onChange={controller.updateSelectedTags} />\n            <Sidebar.PageSizeSelect\n              className=\"m-b-10\"\n              options={controller.pageSizeOptions}\n              value={controller.itemsPerPage}\n              onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {controller.isLoaded ? (\n              <div data-test=\"DashboardLayoutContent\">\n                {controller.isEmpty ? (\n                  <DashboardListEmptyState\n                    page={controller.params.currentPage}\n                    searchTerm={controller.searchTerm}\n                    selectedTags={controller.selectedTags}\n                  />\n                ) : (\n                  <div className=\"bg-white tiled table-responsive\">\n                    <ItemsTable\n                      items={controller.pageItems}\n                      columns={this.listColumns}\n                      orderByField={controller.orderByField}\n                      orderByReverse={controller.orderByReverse}\n                      toggleSorting={controller.toggleSorting}\n                    />\n                    <Paginator\n                      totalCount={controller.totalItemsCount}\n                      itemsPerPage={controller.itemsPerPage}\n                      page={controller.page}\n                      onChange={page => controller.updatePagination({ page })}\n                    />\n                  </div>\n                )}\n              </div>\n            ) : (\n              <LoadingState />\n            )}\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageDashboardList', react2angular(itemsList(\n    DashboardList,\n    new ResourceItemsSource({\n      getResource({ params: { currentPage } }) {\n        return {\n          all: Dashboard.query.bind(Dashboard),\n          favorites: Dashboard.favorites.bind(Dashboard),\n        }[currentPage];\n      },\n      getItemProcessor() {\n        return (item => new Dashboard(item));\n      },\n    }),\n    new UrlStateStorage({ orderByField: 'created_at', orderByReverse: true }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/dashboards',\n      title: 'Dashboards',\n      key: 'all',\n    },\n    {\n      path: '/dashboards/favorites',\n      title: 'Favorite Dashboards',\n      key: 'favorites',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<page-dashboard-list on-error=\"handleError\"></page-dashboard-list>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import * as _ from 'lodash';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport getTags from '@/services/getTags';\nimport { policy } from '@/services/policy';\nimport { Widget } from '@/services/widget';\nimport {\n  editableMappingsToParameterMappings,\n  synchronizeWidgetTitles,\n} from '@/components/ParameterMappingInput';\nimport { collectDashboardFilters } from '@/services/dashboard';\nimport { durationHumanize } from '@/filters';\nimport template from './dashboard.html';\nimport ShareDashboardDialog from './ShareDashboardDialog';\nimport AddWidgetDialog from '@/components/dashboards/AddWidgetDialog';\nimport TextboxDialog from '@/components/dashboards/TextboxDialog';\nimport notification from '@/services/notification';\n\nimport './dashboard.less';\n\nfunction isWidgetPositionChanged(oldPosition, newPosition) {\n  const fields = ['col', 'row', 'sizeX', 'sizeY', 'autoHeight'];\n  oldPosition = _.pick(oldPosition, fields);\n  newPosition = _.pick(newPosition, fields);\n  return !!_.find(fields, key => newPosition[key] !== oldPosition[key]);\n}\n\nfunction getWidgetsWithChangedPositions(widgets) {\n  return _.filter(widgets, (widget) => {\n    if (!_.isObject(widget.$originalPosition)) {\n      return true;\n    }\n    return isWidgetPositionChanged(widget.$originalPosition, widget.options.position);\n  });\n}\n\nfunction DashboardCtrl(\n  $routeParams,\n  $location,\n  $timeout,\n  $q,\n  $uibModal,\n  $scope,\n  Title,\n  AlertDialog,\n  Dashboard,\n  currentUser,\n  clientConfig,\n  Events,\n) {\n  this.saveInProgress = false;\n  this.saveDelay = false;\n\n  this.saveDashboardLayout = () => {\n    if (!this.dashboard.canEdit()) {\n      return;\n    }\n\n    this.isLayoutDirty = true;\n\n    // calc diff, bail if none\n    const changedWidgets = getWidgetsWithChangedPositions(this.dashboard.widgets);\n    if (!changedWidgets.length) {\n      this.isLayoutDirty = false;\n      $scope.$applyAsync();\n      return;\n    }\n\n    this.saveDelay = false;\n    this.saveInProgress = true;\n    return $q\n      .all(_.map(changedWidgets, widget => widget.save()))\n      .then(() => {\n        this.isLayoutDirty = false;\n        if (this.editBtnClickedWhileSaving) {\n          this.layoutEditing = false;\n        }\n      })\n      .catch(() => {\n        // in the off-chance that a widget got deleted mid-saving it's position, an error will occur\n        // currently left unhandled PR 3653#issuecomment-481699053\n        notification.error('Error saving changes.');\n      })\n      .finally(() => {\n        this.saveInProgress = false;\n        this.editBtnClickedWhileSaving = false;\n      });\n  };\n\n  const saveDashboardLayoutDebounced = () => {\n    this.saveDelay = true;\n    return _.debounce(() => this.saveDashboardLayout(), 2000)();\n  };\n\n  this.saveDelay = false;\n  this.editBtnClickedWhileSaving = false;\n  this.layoutEditing = false;\n  this.isFullscreen = false;\n  this.refreshRate = null;\n  this.isGridDisabled = false;\n  this.updateGridItems = null;\n  this.showPermissionsControl = clientConfig.showPermissionsControl;\n  this.globalParameters = [];\n  this.isDashboardOwner = false;\n  this.isLayoutDirty = false;\n  this.filters = [];\n\n  this.refreshRates = clientConfig.dashboardRefreshIntervals.map(interval => ({\n    name: durationHumanize(interval),\n    rate: interval,\n    enabled: true,\n  }));\n\n  const allowedIntervals = policy.getDashboardRefreshIntervals();\n  if (_.isArray(allowedIntervals)) {\n    _.each(this.refreshRates, (rate) => {\n      rate.enabled = allowedIntervals.indexOf(rate.rate) >= 0;\n    });\n  }\n\n  this.setRefreshRate = (rate, load = true) => {\n    this.refreshRate = rate;\n    if (rate !== null) {\n      if (load) {\n        this.refreshDashboard();\n      }\n      this.autoRefresh();\n    }\n  };\n\n  this.extractGlobalParameters = () => {\n    this.globalParameters = this.dashboard.getParametersDefs();\n  };\n\n  $scope.$on('dashboard.update-parameters', () => {\n    this.extractGlobalParameters();\n  });\n\n  const collectFilters = (dashboard, forceRefresh) => {\n    const queryResultPromises = _.compact(this.dashboard.widgets.map((widget) => {\n      widget.getParametersDefs(); // Force widget to read parameters values from URL\n      return widget.load(forceRefresh);\n    }));\n\n    $q.all(queryResultPromises).then((queryResults) => {\n      this.filters = collectDashboardFilters(dashboard, queryResults, $location.search());\n      this.filtersOnChange = (allFilters) => {\n        this.filters = allFilters;\n        $scope.$applyAsync();\n      };\n    });\n  };\n\n  const renderDashboard = (dashboard, force) => {\n    Title.set(dashboard.name);\n    this.extractGlobalParameters();\n    collectFilters(dashboard, force);\n  };\n\n  this.loadDashboard = _.throttle((force) => {\n    Dashboard.get(\n      { slug: $routeParams.dashboardSlug },\n      (dashboard) => {\n        this.dashboard = dashboard;\n        this.isDashboardOwner = currentUser.id === dashboard.user.id || currentUser.hasPermission('admin');\n        Events.record('view', 'dashboard', dashboard.id);\n        renderDashboard(dashboard, force);\n\n        if ($location.search().edit === true) {\n          $location.search('edit', null);\n          this.editLayout(true);\n        }\n\n        if ($location.search().refresh !== undefined) {\n          if (this.refreshRate === null) {\n            const refreshRate = Math.max(30, parseFloat($location.search().refresh));\n\n            this.setRefreshRate(\n              {\n                name: durationHumanize(refreshRate),\n                rate: refreshRate,\n              },\n              false,\n            );\n          }\n        }\n      },\n      (rejection) => {\n        const statusGroup = Math.floor(rejection.status / 100);\n        if (statusGroup === 5) {\n          // recoverable errors - all 5** (server is temporarily unavailable\n          // for some reason, but it should get up soon).\n          this.loadDashboard();\n        } else {\n          // all kind of 4** errors are not recoverable, so just display them\n          throw new PromiseRejectionError(rejection);\n        }\n      },\n    );\n  }, 1000);\n\n  this.loadDashboard();\n\n  this.refreshDashboard = () => {\n    renderDashboard(this.dashboard, true);\n  };\n\n  this.autoRefresh = () => {\n    $timeout(() => {\n      this.refreshDashboard();\n    }, this.refreshRate.rate * 1000).then(() => this.autoRefresh());\n  };\n\n  this.archiveDashboard = () => {\n    const archive = () => {\n      Events.record('archive', 'dashboard', this.dashboard.id);\n      this.dashboard.$delete();\n    };\n\n    const title = 'Archive Dashboard';\n    const message = `Are you sure you want to archive the \"${this.dashboard.name}\" dashboard?`;\n    const confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  this.showManagePermissionsModal = () => {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: `api/dashboards/${this.dashboard.id}/acl` },\n        owner: this.dashboard.user,\n      },\n    });\n  };\n\n  this.onLayoutChanged = () => {\n    // prevent unnecessary save when gridstack is loaded\n    if (!this.layoutEditing) {\n      return;\n    }\n    this.isLayoutDirty = true;\n    saveDashboardLayoutDebounced();\n  };\n\n  this.editLayout = (enableEditing) => {\n    this.layoutEditing = enableEditing;\n  };\n\n  this.loadTags = () => getTags('api/dashboards/tags').then(tags => _.map(tags, t => t.name));\n\n  const updateDashboard = (data) => {\n    _.extend(this.dashboard, data);\n    data = _.extend({}, data, {\n      slug: this.dashboard.id,\n      version: this.dashboard.version,\n    });\n    Dashboard.save(\n      data,\n      (dashboard) => {\n        _.extend(this.dashboard, _.pick(dashboard, _.keys(data)));\n      },\n      (error) => {\n        if (error.status === 403) {\n          notification.error('Dashboard update failed', 'Permission Denied.');\n        } else if (error.status === 409) {\n          notification.error(\n            'It seems like the dashboard has been modified by another user. ',\n            'Please copy/backup your changes and reload this page.',\n            { duration: null },\n          );\n        }\n      },\n    );\n  };\n\n  this.saveName = (name) => {\n    updateDashboard({ name });\n  };\n\n  this.saveTags = (tags) => {\n    updateDashboard({ tags });\n  };\n\n  this.updateDashboardFiltersState = () => {\n    collectFilters(this.dashboard, false);\n    Dashboard.save(\n      {\n        slug: this.dashboard.id,\n        version: this.dashboard.version,\n        dashboard_filters_enabled: this.dashboard.dashboard_filters_enabled,\n      },\n      (dashboard) => {\n        this.dashboard = dashboard;\n      },\n      (error) => {\n        if (error.status === 403) {\n          notification.error('Name update failed', 'Permission denied.');\n        } else if (error.status === 409) {\n          notification.error(\n            'It seems like the dashboard has been modified by another user. ',\n            'Please copy/backup your changes and reload this page.',\n            { duration: null },\n          );\n        }\n      },\n    );\n  };\n\n  this.showAddTextboxDialog = () => {\n    TextboxDialog.showModal({\n      dashboard: this.dashboard,\n      onConfirm: this.addTextbox,\n    });\n  };\n\n  this.addTextbox = (text) => {\n    const widget = new Widget({\n      dashboard_id: this.dashboard.id,\n      options: {\n        isHidden: false,\n        position: {},\n      },\n      text,\n      visualization: null,\n      visualization_id: null,\n    });\n\n    const position = this.dashboard.calculateNewWidgetPosition(widget);\n    widget.options.position.col = position.col;\n    widget.options.position.row = position.row;\n\n    return widget.save()\n      .then(() => {\n        this.dashboard.widgets.push(widget);\n        this.onWidgetAdded();\n      });\n  };\n\n  this.showAddWidgetDialog = () => {\n    AddWidgetDialog.showModal({\n      dashboard: this.dashboard,\n      onConfirm: this.addWidget,\n    });\n  };\n\n  this.addWidget = (selectedVis, parameterMappings) => {\n    const widget = new Widget({\n      visualization_id: selectedVis && selectedVis.id,\n      dashboard_id: this.dashboard.id,\n      options: {\n        isHidden: false,\n        position: {},\n        parameterMappings: editableMappingsToParameterMappings(parameterMappings),\n      },\n      visualization: selectedVis,\n      text: '',\n    });\n\n    const position = this.dashboard.calculateNewWidgetPosition(widget);\n    widget.options.position.col = position.col;\n    widget.options.position.row = position.row;\n\n    const widgetsToSave = [\n      widget,\n      ...synchronizeWidgetTitles(widget.options.parameterMappings, this.dashboard.widgets),\n    ];\n\n    return Promise.all(widgetsToSave.map(w => w.save()))\n      .then(() => {\n        this.dashboard.widgets.push(widget);\n        this.onWidgetAdded();\n      });\n  };\n\n  this.onWidgetAdded = () => {\n    this.extractGlobalParameters();\n    collectFilters(this.dashboard, false);\n    // Save position of newly added widget (but not entire layout)\n    const widget = _.last(this.dashboard.widgets);\n    if (_.isObject(widget)) {\n      return widget.save();\n    }\n    $scope.$applyAsync();\n  };\n\n  this.removeWidget = (widgetId) => {\n    this.dashboard.widgets = this.dashboard.widgets.filter(w => w.id !== undefined && w.id !== widgetId);\n    this.extractGlobalParameters();\n    collectFilters(this.dashboard, false);\n    $scope.$applyAsync();\n\n    if (!this.layoutEditing) {\n      // We need to wait a bit while `angular` updates widgets, and only then save new layout\n      $timeout(() => this.saveDashboardLayout(), 50);\n    }\n  };\n\n  this.toggleFullscreen = () => {\n    this.isFullscreen = !this.isFullscreen;\n    document.querySelector('body').classList.toggle('headless');\n\n    if (this.isFullscreen) {\n      $location.search('fullscreen', true);\n    } else {\n      $location.search('fullscreen', null);\n    }\n  };\n\n  this.togglePublished = () => {\n    Events.record('toggle_published', 'dashboard', this.dashboard.id);\n    this.dashboard.is_draft = !this.dashboard.is_draft;\n    this.saveInProgress = true;\n    Dashboard.save(\n      {\n        slug: this.dashboard.id,\n        name: this.dashboard.name,\n        is_draft: this.dashboard.is_draft,\n      },\n      (dashboard) => {\n        this.saveInProgress = false;\n        this.dashboard.version = dashboard.version;\n      },\n    );\n  };\n\n  if (_.has($location.search(), 'fullscreen')) {\n    this.toggleFullscreen();\n  }\n\n  this.openShareForm = () => {\n    // check if any of the wigets have query parameters\n    const hasQueryParams = _.some(\n      this.dashboard.widgets,\n      w => !_.isEmpty(w.getQuery() && w.getQuery().getParametersDefs()),\n    );\n\n    ShareDashboardDialog.showModal({\n      dashboard: this.dashboard,\n      hasQueryParams,\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('dashboardPage', {\n    template,\n    controller: DashboardCtrl,\n  });\n\n  return {\n    '/dashboard/:dashboardSlug': {\n      template: '<dashboard-page></dashboard-page>',\n      reloadOnSearch: false,\n    },\n  };\n}\n\ninit.init = true;\n","import logoUrl from '@/assets/images/redash_icon_small.png';\nimport template from './public-dashboard-page.html';\nimport './dashboard.less';\n\nfunction loadDashboard($http, $route) {\n  const token = $route.current.params.token;\n  return $http.get(`api/dashboards/public/${token}`).then(response => response.data);\n}\n\nconst PublicDashboardPage = {\n  template,\n  bindings: {\n    dashboard: '<',\n  },\n  controller($scope, $timeout, $location, $http, $route, dashboardGridOptions, Dashboard) {\n    'ngInject';\n\n    this.dashboardGridOptions = Object.assign({}, dashboardGridOptions, {\n      resizable: { enabled: false },\n      draggable: { enabled: false },\n    });\n\n    this.logoUrl = logoUrl;\n    this.public = true;\n    this.dashboard.widgets = Dashboard.prepareDashboardWidgets(this.dashboard.widgets);\n\n    const refreshRate = Math.max(30, parseFloat($location.search().refresh));\n\n    if (refreshRate) {\n      const refresh = () => {\n        loadDashboard($http, $route).then((data) => {\n          this.dashboard = data;\n          this.dashboard.widgets = Dashboard.prepareDashboardWidgets(this.dashboard.widgets);\n\n          this.filters = []; // TODO: implement (@/services/dashboard.js:collectDashboardFilters)\n          this.filtersOnChange = (allFilters) => {\n            this.filters = allFilters;\n            $scope.$applyAsync();\n          };\n\n          $timeout(refresh, refreshRate * 1000.0);\n        });\n      };\n\n      $timeout(refresh, refreshRate * 1000.0);\n    }\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('publicDashboardPage', PublicDashboardPage);\n\n  function loadPublicDashboard($http, $route) {\n    'ngInject';\n\n    return loadDashboard($http, $route);\n  }\n\n  function session($http, $route, Auth) {\n    const token = $route.current.params.token;\n    Auth.setApiKey(token);\n    return Auth.loadConfig();\n  }\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.when('/public/dashboards/:token', {\n      template: '<public-dashboard-page dashboard=\"$resolve.dashboard\"></public-dashboard-page>',\n      reloadOnSearch: false,\n      resolve: {\n        dashboard: loadPublicDashboard,\n        session,\n      },\n    });\n  });\n\n  return [];\n}\n\ninit.init = true;\n","import React from 'react';\nimport Button from 'antd/lib/button';\nimport { react2angular } from 'react2angular';\nimport { isEmpty, get } from 'lodash';\nimport settingsMenu from '@/services/settingsMenu';\nimport { DataSource, IMG_ROOT } from '@/services/data-source';\nimport { policy } from '@/services/policy';\nimport navigateTo from '@/services/navigateTo';\nimport { $route } from '@/services/ng';\nimport { routesToAngularRoutes } from '@/lib/utils';\nimport CardsList from '@/components/cards-list/CardsList';\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport CreateSourceDialog from '@/components/CreateSourceDialog';\nimport helper from '@/components/dynamic-form/dynamicFormHelper';\n\nclass DataSourcesList extends React.Component {\n  state = {\n    dataSourceTypes: [],\n    dataSources: [],\n    loading: true,\n  };\n\n  componentDidMount() {\n    Promise.all([\n      DataSource.query().$promise,\n      DataSource.types().$promise,\n    ]).then(values => this.setState({\n      dataSources: values[0],\n      dataSourceTypes: values[1],\n      loading: false,\n    }, () => { // all resources are loaded in state\n      if ($route.current.locals.isNewDataSourcePage) {\n        if (policy.canCreateDataSource()) {\n          this.showCreateSourceDialog();\n        } else {\n          navigateTo('/data_sources');\n        }\n      }\n    }));\n  }\n\n  createDataSource = (selectedType, values) => {\n    const target = { options: {}, type: selectedType.type };\n    helper.updateTargetWithValues(target, values);\n\n    return DataSource.save(target).$promise.then((dataSource) => {\n      this.setState({ loading: true });\n      DataSource.query(dataSources => this.setState({ dataSources, loading: false }));\n      return dataSource;\n    }).catch((error) => {\n      if (!(error instanceof Error)) {\n        error = new Error(get(error, 'data.message', 'Failed saving.'));\n      }\n      return Promise.reject(error);\n    });\n  };\n\n  showCreateSourceDialog = () => {\n    CreateSourceDialog.showModal({\n      types: this.state.dataSourceTypes,\n      sourceType: 'Data Source',\n      imageFolder: IMG_ROOT,\n      helpTriggerPrefix: 'DS_',\n      onCreate: this.createDataSource,\n    }).result.then((result = {}) => {\n      if (result.success) {\n        navigateTo(`data_sources/${result.data.id}`);\n      }\n    });\n  };\n\n  renderDataSources() {\n    const { dataSources } = this.state;\n    const items = dataSources.map(dataSource => ({\n      title: dataSource.name,\n      imgSrc: `${IMG_ROOT}/${dataSource.type}.png`,\n      href: `data_sources/${dataSource.id}`,\n    }));\n\n    return isEmpty(dataSources) ? (\n      <div className=\"text-center\">\n        There are no data sources yet.\n        {policy.isCreateDataSourceEnabled() && (\n          <div className=\"m-t-5\">\n            <a className=\"clickable\" onClick={this.showCreateSourceDialog}>Click here</a> to add one.\n          </div>\n        )}\n      </div>\n    ) : (<CardsList items={items} />);\n  }\n\n  render() {\n    const newDataSourceProps = {\n      type: 'primary',\n      onClick: policy.isCreateDataSourceEnabled() ? this.showCreateSourceDialog : null,\n      disabled: !policy.isCreateDataSourceEnabled(),\n    };\n\n    return (\n      <div>\n        <div className=\"m-b-15\">\n          <Button {...newDataSourceProps}>\n            <i className=\"fa fa-plus m-r-5\" />\n            New Data Source\n          </Button>\n        </div>\n        {this.state.loading ? <LoadingState className=\"\" /> : this.renderDataSources()}\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'admin',\n    title: 'Data Sources',\n    path: 'data_sources',\n    order: 1,\n  });\n\n  ngModule.component('pageDataSourcesList', react2angular(DataSourcesList));\n\n  return routesToAngularRoutes([\n    {\n      path: '/data_sources',\n      title: 'Data Sources',\n      key: 'data_sources',\n    },\n    {\n      path: '/data_sources/new',\n      title: 'Data Sources',\n      key: 'data_sources',\n      isNewDataSourcePage: true,\n    },\n  ], {\n    template: '<settings-screen><page-data-sources-list></page-data-sources-list></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { get, find, toUpper } from 'lodash';\nimport { react2angular } from 'react2angular';\nimport Modal from 'antd/lib/modal';\nimport { DataSource, IMG_ROOT } from '@/services/data-source';\nimport navigateTo from '@/services/navigateTo';\nimport { $route } from '@/services/ng';\nimport notification from '@/services/notification';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport DynamicForm from '@/components/dynamic-form/DynamicForm';\nimport helper from '@/components/dynamic-form/dynamicFormHelper';\nimport { HelpTrigger, TYPES as HELP_TRIGGER_TYPES } from '@/components/HelpTrigger';\n\nclass EditDataSource extends React.Component {\n  static propTypes = {\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    dataSource: null,\n    type: null,\n    loading: true,\n  };\n\n  componentDidMount() {\n    DataSource.get({ id: $route.current.params.dataSourceId }).$promise.then((dataSource) => {\n      const { type } = dataSource;\n      this.setState({ dataSource });\n      DataSource.types(types => this.setState({ type: find(types, { type }), loading: false }));\n    }).catch((error) => {\n      // ANGULAR_REMOVE_ME This code is related to Angular's HTTP services\n      if (error.status && error.data) {\n        error = new PromiseRejectionError(error);\n      }\n      this.props.onError(error);\n    });\n  }\n\n  saveDataSource = (values, successCallback, errorCallback) => {\n    const { dataSource } = this.state;\n    helper.updateTargetWithValues(dataSource, values);\n    dataSource.$save(\n      () => successCallback('Saved.'),\n      (error) => {\n        const message = get(error, 'data.message', 'Failed saving.');\n        errorCallback(message);\n      },\n    );\n  }\n\n  deleteDataSource = (callback) => {\n    const { dataSource } = this.state;\n\n    const doDelete = () => {\n      dataSource.$delete(() => {\n        notification.success('Data source deleted successfully.');\n        navigateTo('/data_sources', true);\n      }, () => {\n        callback();\n      });\n    };\n\n    Modal.confirm({\n      title: 'Delete Data Source',\n      content: 'Are you sure you want to delete this data source?',\n      okText: 'Delete',\n      okType: 'danger',\n      onOk: doDelete,\n      onCancel: callback,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  testConnection = (callback) => {\n    const { dataSource } = this.state;\n    DataSource.test({ id: dataSource.id }, (httpResponse) => {\n      if (httpResponse.ok) {\n        notification.success('Success');\n      } else {\n        notification.error('Connection Test Failed:', httpResponse.message, { duration: 10 });\n      }\n      callback();\n    }, () => {\n      notification.error('Connection Test Failed:', 'Unknown error occurred while performing connection test. Please try again later.', { duration: 10 });\n      callback();\n    });\n  };\n\n  renderForm() {\n    const { dataSource, type } = this.state;\n    const fields = helper.getFields(type, dataSource);\n    const helpTriggerType = `DS_${toUpper(type.type)}`;\n    const formProps = {\n      fields,\n      type,\n      actions: [\n        { name: 'Delete', type: 'danger', callback: this.deleteDataSource },\n        { name: 'Test Connection', pullRight: true, callback: this.testConnection, disableWhenDirty: true },\n      ],\n      onSubmit: this.saveDataSource,\n      feedbackIcons: true,\n    };\n\n    return (\n      <div className=\"row\" data-test=\"DataSource\">\n        <div className=\"text-right m-r-10\">\n          {HELP_TRIGGER_TYPES[helpTriggerType] && (\n            <HelpTrigger className=\"f-13\" type={helpTriggerType}>\n              Setup Instructions <i className=\"fa fa-question-circle\" />\n            </HelpTrigger>\n          )}\n        </div>\n        <div className=\"text-center m-b-10\">\n          <img className=\"p-5\" src={`${IMG_ROOT}/${type.type}.png`} alt={type.name} width=\"64\" />\n          <h3 className=\"m-0\">{type.name}</h3>\n        </div>\n        <div className=\"col-md-4 col-md-offset-4 m-b-10\">\n          <DynamicForm {...formProps} />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return this.state.loading ? <LoadingState className=\"\" /> : this.renderForm();\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageEditDataSource', react2angular(EditDataSource));\n\n  return {\n    '/data_sources/:dataSourceId': {\n      template: '<settings-screen><page-edit-data-source on-error=\"handleError\"></page-edit-data-source></settings-screen>',\n      title: 'Data Sources',\n      controller($scope, $exceptionHandler) {\n        'ngInject';\n\n        $scope.handleError = $exceptionHandler;\n      },\n    },\n  };\n}\n\ninit.init = true;\n","import React from 'react';\nimport Button from 'antd/lib/button';\nimport { react2angular } from 'react2angular';\nimport { isEmpty, get } from 'lodash';\nimport settingsMenu from '@/services/settingsMenu';\nimport { Destination, IMG_ROOT } from '@/services/destination';\nimport { policy } from '@/services/policy';\nimport navigateTo from '@/services/navigateTo';\nimport { $route } from '@/services/ng';\nimport { routesToAngularRoutes } from '@/lib/utils';\nimport CardsList from '@/components/cards-list/CardsList';\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport CreateSourceDialog from '@/components/CreateSourceDialog';\nimport helper from '@/components/dynamic-form/dynamicFormHelper';\n\nclass DestinationsList extends React.Component {\n  state = {\n    destinationTypes: [],\n    destinations: [],\n    loading: true,\n  };\n\n  componentDidMount() {\n    Promise.all([\n      Destination.query().$promise,\n      Destination.types().$promise,\n    ]).then(values => this.setState({\n      destinations: values[0],\n      destinationTypes: values[1],\n      loading: false,\n    }, () => { // all resources are loaded in state\n      if ($route.current.locals.isNewDestinationPage) {\n        if (policy.canCreateDestination()) {\n          this.showCreateSourceDialog();\n        } else {\n          navigateTo('/destinations');\n        }\n      }\n    }));\n  }\n\n  createDestination = (selectedType, values) => {\n    const target = { options: {}, type: selectedType.type };\n    helper.updateTargetWithValues(target, values);\n\n    return Destination.save(target).$promise.then((destination) => {\n      this.setState({ loading: true });\n      Destination.query(destinations => this.setState({ destinations, loading: false }));\n      return destination;\n    }).catch((error) => {\n      if (!(error instanceof Error)) {\n        error = new Error(get(error, 'data.message', 'Failed saving.'));\n      }\n      return Promise.reject(error);\n    });\n  };\n\n  showCreateSourceDialog = () => {\n    CreateSourceDialog.showModal({\n      types: this.state.destinationTypes,\n      sourceType: 'Alert Destination',\n      imageFolder: IMG_ROOT,\n      onCreate: this.createDestination,\n    }).result.then((result = {}) => {\n      if (result.success) {\n        navigateTo(`destinations/${result.data.id}`);\n      }\n    });\n  };\n\n  renderDestinations() {\n    const { destinations } = this.state;\n    const items = destinations.map(destination => ({\n      title: destination.name,\n      imgSrc: `${IMG_ROOT}/${destination.type}.png`,\n      href: `destinations/${destination.id}`,\n    }));\n\n    return isEmpty(destinations) ? (\n      <div className=\"text-center\">\n        There are no alert destinations yet.\n        {policy.isCreateDestinationEnabled() && (\n          <div className=\"m-t-5\">\n            <a className=\"clickable\" onClick={this.showCreateSourceDialog}>Click here</a> to add one.\n          </div>\n        )}\n      </div>\n    ) : (<CardsList items={items} />);\n  }\n\n  render() {\n    const newDestinationProps = {\n      type: 'primary',\n      onClick: policy.isCreateDestinationEnabled() ? this.showCreateSourceDialog : null,\n      disabled: !policy.isCreateDestinationEnabled(),\n    };\n\n    return (\n      <div>\n        <div className=\"m-b-15\">\n          <Button {...newDestinationProps}>\n            <i className=\"fa fa-plus m-r-5\" />\n            New Alert Destination\n          </Button>\n        </div>\n        {this.state.loading ? <LoadingState className=\"\" /> : this.renderDestinations()}\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'admin',\n    title: 'Alert Destinations',\n    path: 'destinations',\n    order: 4,\n  });\n\n  ngModule.component('pageDestinationsList', react2angular(DestinationsList));\n\n  return routesToAngularRoutes([\n    {\n      path: '/destinations',\n      title: 'Alert Destinations',\n      key: 'destinations',\n    },\n    {\n      path: '/destinations/new',\n      title: 'Alert Destinations',\n      key: 'destinations',\n      isNewDestinationPage: true,\n    },\n  ], {\n    template: '<settings-screen><page-destinations-list></page-destinations-list></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { get, find } from 'lodash';\nimport { react2angular } from 'react2angular';\nimport Modal from 'antd/lib/modal';\nimport { Destination, IMG_ROOT } from '@/services/destination';\nimport navigateTo from '@/services/navigateTo';\nimport { $route } from '@/services/ng';\nimport notification from '@/services/notification';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport DynamicForm from '@/components/dynamic-form/DynamicForm';\nimport helper from '@/components/dynamic-form/dynamicFormHelper';\n\nclass EditDestination extends React.Component {\n  static propTypes = {\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  state = {\n    destination: null,\n    type: null,\n    loading: true,\n  };\n\n  componentDidMount() {\n    Destination.get({ id: $route.current.params.destinationId }).$promise.then((destination) => {\n      const { type } = destination;\n      this.setState({ destination });\n      Destination.types(types => this.setState({ type: find(types, { type }), loading: false }));\n    }).catch((error) => {\n      // ANGULAR_REMOVE_ME This code is related to Angular's HTTP services\n      if (error.status && error.data) {\n        error = new PromiseRejectionError(error);\n      }\n      this.props.onError(error);\n    });\n  }\n\n  saveDestination = (values, successCallback, errorCallback) => {\n    const { destination } = this.state;\n    helper.updateTargetWithValues(destination, values);\n    destination.$save(\n      () => successCallback('Saved.'),\n      (error) => {\n        const message = get(error, 'data.message', 'Failed saving.');\n        errorCallback(message);\n      },\n    );\n  }\n\n  deleteDestination = (callback) => {\n    const { destination } = this.state;\n\n    const doDelete = () => {\n      destination.$delete(() => {\n        notification.success('Alert destination deleted successfully.');\n        navigateTo('/destinations', true);\n      }, () => {\n        callback();\n      });\n    };\n\n    Modal.confirm({\n      title: 'Delete Alert Destination',\n      content: 'Are you sure you want to delete this alert destination?',\n      okText: 'Delete',\n      okType: 'danger',\n      onOk: doDelete,\n      onCancel: callback,\n      maskClosable: true,\n      autoFocusButton: null,\n    });\n  };\n\n  renderForm() {\n    const { destination, type } = this.state;\n    const fields = helper.getFields(type, destination);\n    const formProps = {\n      fields,\n      type,\n      actions: [\n        { name: 'Delete', type: 'danger', callback: this.deleteDestination },\n      ],\n      onSubmit: this.saveDestination,\n      feedbackIcons: true,\n    };\n\n    return (\n      <div className=\"row\" data-test=\"Destination\">\n        <div className=\"text-center m-b-10\">\n          <img className=\"p-5\" src={`${IMG_ROOT}/${type.type}.png`} alt={type.name} width=\"64\" />\n          <h3 className=\"m-0\">{type.name}</h3>\n        </div>\n        <div className=\"col-md-4 col-md-offset-4 m-b-10\">\n          <DynamicForm {...formProps} />\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return this.state.loading ? <LoadingState className=\"\" /> : this.renderForm();\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageEditDestination', react2angular(EditDestination));\n\n  return {\n    '/destinations/:destinationId': {\n      template: '<settings-screen><page-edit-destination on-error=\"handleError\"></page-edit-destination></settings-screen>',\n      title: 'Alert Destinations',\n      controller($scope, $exceptionHandler) {\n        'ngInject';\n\n        $scope.handleError = $exceptionHandler;\n      },\n    },\n  };\n}\n\ninit.init = true;\n","import { filter, map, includes } from 'lodash';\nimport React from 'react';\nimport { react2angular } from 'react2angular';\nimport Button from 'antd/lib/button';\nimport Dropdown from 'antd/lib/dropdown';\nimport Menu from 'antd/lib/menu';\nimport Icon from 'antd/lib/icon';\n\nimport { Paginator } from '@/components/Paginator';\n\nimport { wrap as liveItemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\nimport SelectItemsDialog from '@/components/SelectItemsDialog';\nimport { DataSourcePreviewCard } from '@/components/PreviewCard';\n\nimport GroupName from '@/components/groups/GroupName';\nimport ListItemAddon from '@/components/groups/ListItemAddon';\nimport Sidebar from '@/components/groups/DetailsPageSidebar';\nimport Layout from '@/components/layouts/ContentWithSidebar';\n\nimport notification from '@/services/notification';\nimport { currentUser } from '@/services/auth';\nimport { Group } from '@/services/group';\nimport { DataSource } from '@/services/data-source';\nimport navigateTo from '@/services/navigateTo';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nclass GroupDataSources extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  groupId = parseInt(this.props.controller.params.groupId, 10);\n\n  group = null;\n\n  sidebarMenu = [\n    {\n      key: 'users',\n      href: `groups/${this.groupId}`,\n      title: 'Members',\n    },\n    {\n      key: 'datasources',\n      href: `groups/${this.groupId}/data_sources`,\n      title: 'Data Sources',\n      isAvailable: () => currentUser.isAdmin,\n    },\n  ];\n\n  listColumns = [\n    Columns.custom((text, datasource) => (\n      <DataSourcePreviewCard dataSource={datasource} withLink />\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.custom((text, datasource) => {\n      const menu = (\n        <Menu\n          selectedKeys={[datasource.view_only ? 'viewonly' : 'full']}\n          onClick={item => this.setDataSourcePermissions(datasource, item.key)}\n        >\n          <Menu.Item key=\"full\">Full Access</Menu.Item>\n          <Menu.Item key=\"viewonly\">View Only</Menu.Item>\n        </Menu>\n      );\n\n      return (\n        <Dropdown trigger={['click']} overlay={menu}>\n          <Button className=\"w-100\">{datasource.view_only ? 'View Only' : 'Full Access'}<Icon type=\"down\" /></Button>\n        </Dropdown>\n      );\n    }, {\n      width: '1%',\n      className: 'p-r-0',\n      isAvailable: () => currentUser.isAdmin,\n    }),\n    Columns.custom((text, datasource) => (\n      <Button className=\"w-100\" type=\"danger\" onClick={() => this.removeGroupDataSource(datasource)}>Remove</Button>\n    ), {\n      width: '1%',\n      isAvailable: () => currentUser.isAdmin,\n    }),\n  ];\n\n  componentDidMount() {\n    Group.get({ id: this.groupId }).$promise\n      .then((group) => {\n        this.group = group;\n        this.forceUpdate();\n      })\n      .catch((error) => {\n        this.props.controller.handleError(error);\n      });\n  }\n\n  removeGroupDataSource = (datasource) => {\n    Group.removeDataSource({ id: this.groupId, dataSourceId: datasource.id }).$promise\n      .then(() => {\n        this.props.controller.updatePagination({ page: 1 });\n        this.props.controller.update();\n      })\n      .catch(() => {\n        notification.error('Failed to remove data source from group.');\n      });\n  };\n\n  setDataSourcePermissions = (datasource, permission) => {\n    const viewOnly = permission !== 'full';\n\n    Group.updateDataSource({ id: this.groupId, dataSourceId: datasource.id }, { view_only: viewOnly }).$promise\n      .then(() => {\n        datasource.view_only = viewOnly;\n        this.forceUpdate();\n      })\n      .catch(() => {\n        notification.error('Failed change data source permissions.');\n      });\n  };\n\n  addDataSources = () => {\n    const allDataSources = DataSource.query().$promise;\n    const alreadyAddedDataSources = map(this.props.controller.allItems, ds => ds.id);\n    SelectItemsDialog.showModal({\n      dialogTitle: 'Add Data Sources',\n      inputPlaceholder: 'Search data sources...',\n      selectedItemsTitle: 'New Data Sources',\n      searchItems: (searchTerm) => {\n        searchTerm = searchTerm.toLowerCase();\n        return allDataSources.then(items => filter(items, ds => ds.name.toLowerCase().includes(searchTerm)));\n      },\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = includes(alreadyAddedDataSources, item.id);\n        return {\n          content: (\n            <DataSourcePreviewCard dataSource={item}>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} />\n            </DataSourcePreviewCard>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? 'selected' : '',\n        };\n      },\n      renderStagedItem: (item, { isSelected }) => ({\n        content: (\n          <DataSourcePreviewCard dataSource={item}>\n            <ListItemAddon isSelected={isSelected} isStaged />\n          </DataSourcePreviewCard>\n        ),\n      }),\n      save: (items) => {\n        const promises = map(items, ds => Group.addDataSource({ id: this.groupId, data_source_id: ds.id }).$promise);\n        return Promise.all(promises);\n      },\n    }).result.finally(() => {\n      this.props.controller.update();\n    });\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div data-test=\"Group\">\n        <GroupName className=\"d-block m-t-0 m-b-15\" group={this.group} onChange={() => this.forceUpdate()} />\n        <Layout>\n          <Layout.Sidebar>\n            <Sidebar\n              controller={controller}\n              group={this.group}\n              items={this.sidebarMenu}\n              canAddDataSources={currentUser.isAdmin}\n              onAddDataSourcesClick={this.addDataSources}\n              onGroupDeleted={() => navigateTo('/groups', true)}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <div className=\"text-center\">\n                There are no data sources in this group yet.\n                {currentUser.isAdmin && (\n                  <div className=\"m-t-5\">\n                    <a href=\"javascript:void(0)\" onClick={this.addDataSources}>Click here</a>\n                    {' '} to add data sources.\n                  </div>\n                )}\n              </div>\n            )}\n            {\n              controller.isLoaded && !controller.isEmpty && (\n                <div className=\"table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    showHeader={false}\n                    context={this.actions}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )\n            }\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageGroupDataSources', react2angular(liveItemsList(\n    GroupDataSources,\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest(unused, { params: { groupId } }) {\n        return { id: groupId };\n      },\n      getResource() {\n        return Group.dataSources.bind(Group);\n      },\n      getItemProcessor() {\n        return (item => new DataSource(item));\n      },\n    }),\n    new StateStorage({ orderByField: 'name' }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/groups/:groupId/data_sources',\n      title: 'Group Data Sources',\n      key: 'datasources',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<settings-screen><page-group-data-sources on-error=\"handleError\"></page-group-data-sources></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import { includes, map } from 'lodash';\nimport React from 'react';\nimport { react2angular } from 'react2angular';\nimport Button from 'antd/lib/button';\n\nimport { Paginator } from '@/components/Paginator';\n\nimport { wrap as liveItemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\nimport SelectItemsDialog from '@/components/SelectItemsDialog';\nimport { UserPreviewCard } from '@/components/PreviewCard';\n\nimport GroupName from '@/components/groups/GroupName';\nimport ListItemAddon from '@/components/groups/ListItemAddon';\nimport Sidebar from '@/components/groups/DetailsPageSidebar';\nimport Layout from '@/components/layouts/ContentWithSidebar';\n\nimport notification from '@/services/notification';\nimport { currentUser } from '@/services/auth';\nimport { Group } from '@/services/group';\nimport { User } from '@/services/user';\nimport navigateTo from '@/services/navigateTo';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nclass GroupMembers extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  groupId = parseInt(this.props.controller.params.groupId, 10);\n\n  group = null;\n\n  sidebarMenu = [\n    {\n      key: 'users',\n      href: `groups/${this.groupId}`,\n      title: 'Members',\n    },\n    {\n      key: 'datasources',\n      href: `groups/${this.groupId}/data_sources`,\n      title: 'Data Sources',\n      isAvailable: () => currentUser.isAdmin,\n    },\n  ];\n\n  listColumns = [\n    Columns.custom((text, user) => (\n      <UserPreviewCard user={user} withLink />\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.custom((text, user) => {\n      if (!this.group) {\n        return null;\n      }\n\n      // cannot remove self from built-in groups\n      if ((this.group.type === 'builtin') && (currentUser.id === user.id)) {\n        return null;\n      }\n      return <Button className=\"w-100\" type=\"danger\" onClick={event => this.removeGroupMember(event, user)}>Remove</Button>;\n    }, {\n      width: '1%',\n      isAvailable: () => currentUser.isAdmin,\n    }),\n  ];\n\n  componentDidMount() {\n    Group.get({ id: this.groupId }).$promise\n      .then((group) => {\n        this.group = group;\n        this.forceUpdate();\n      })\n      .catch((error) => {\n        this.props.controller.handleError(error);\n      });\n  }\n\n  removeGroupMember = (event, user) => Group.removeMember({ id: this.groupId, userId: user.id }).$promise\n    .then(() => {\n      this.props.controller.updatePagination({ page: 1 });\n      this.props.controller.update();\n    })\n    .catch(() => {\n      notification.error('Failed to remove member from group.');\n    });\n\n  addMembers = () => {\n    const alreadyAddedUsers = map(this.props.controller.allItems, u => u.id);\n    SelectItemsDialog.showModal({\n      dialogTitle: 'Add Members',\n      inputPlaceholder: 'Search users...',\n      selectedItemsTitle: 'New Members',\n      searchItems: searchTerm => User.query({ q: searchTerm }).$promise.then(({ results }) => results),\n      renderItem: (item, { isSelected }) => {\n        const alreadyInGroup = includes(alreadyAddedUsers, item.id);\n        return {\n          content: (\n            <UserPreviewCard user={item}>\n              <ListItemAddon isSelected={isSelected} alreadyInGroup={alreadyInGroup} />\n            </UserPreviewCard>\n          ),\n          isDisabled: alreadyInGroup,\n          className: isSelected || alreadyInGroup ? 'selected' : '',\n        };\n      },\n      renderStagedItem: (item, { isSelected }) => ({\n        content: (\n          <UserPreviewCard user={item}>\n            <ListItemAddon isSelected={isSelected} isStaged />\n          </UserPreviewCard>\n        ),\n      }),\n      save: (items) => {\n        const promises = map(items, u => Group.addMember({ id: this.groupId }, { user_id: u.id }).$promise);\n        return Promise.all(promises);\n      },\n    }).result.finally(() => {\n      this.props.controller.update();\n    });\n  };\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div data-test=\"Group\">\n        <GroupName className=\"d-block m-t-0 m-b-15\" group={this.group} onChange={() => this.forceUpdate()} />\n        <Layout>\n          <Layout.Sidebar>\n            <Sidebar\n              controller={controller}\n              group={this.group}\n              items={this.sidebarMenu}\n              canAddMembers={currentUser.isAdmin}\n              onAddMembersClick={this.addMembers}\n              onGroupDeleted={() => navigateTo('/groups', true)}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && (\n              <div className=\"text-center\">\n                There are no members in this group yet.\n                {currentUser.isAdmin && (\n                  <div className=\"m-t-5\">\n                    <a href=\"javascript:void(0)\" onClick={this.addMembers}>Click here</a>\n                    {' '} to add members.\n                  </div>\n                )}\n              </div>\n            )}\n            {\n              controller.isLoaded && !controller.isEmpty && (\n                <div className=\"table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    showHeader={false}\n                    context={this.actions}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )\n            }\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageGroupMembers', react2angular(liveItemsList(\n    GroupMembers,\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest(unused, { params: { groupId } }) {\n        return { id: groupId };\n      },\n      getResource() {\n        return Group.members.bind(Group);\n      },\n      getItemProcessor() {\n        return (item => new User(item));\n      },\n    }),\n    new StateStorage({ orderByField: 'name' }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/groups/:groupId',\n      title: 'Group Members',\n      key: 'users',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<settings-screen><page-group-members on-error=\"handleError\"></page-group-members></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport Button from 'antd/lib/button';\nimport { Paginator } from '@/components/Paginator';\n\nimport { wrap as liveItemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { StateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport EmptyState from '@/components/items-list/components/EmptyState';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport CreateGroupDialog from '@/components/groups/CreateGroupDialog';\nimport DeleteGroupButton from '@/components/groups/DeleteGroupButton';\n\nimport { Group } from '@/services/group';\nimport settingsMenu from '@/services/settingsMenu';\nimport { currentUser } from '@/services/auth';\nimport navigateTo from '@/services/navigateTo';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nclass GroupsList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  listColumns = [\n    Columns.custom((text, group) => (\n      <div>\n        <a href={'groups/' + group.id}>{group.name}</a>\n        {(group.type === 'builtin') && <span className=\"label label-default m-l-10\">built-in</span>}\n      </div>\n    ), {\n      field: 'name',\n      width: null,\n    }),\n    Columns.custom((text, group) => (\n      <Button.Group>\n        <Button href={`groups/${group.id}`}>Members</Button>\n        {currentUser.isAdmin && (\n          <Button href={`groups/${group.id}/data_sources`}>Data Sources</Button>\n        )}\n      </Button.Group>\n    ), {\n      width: '1%',\n      className: 'text-nowrap',\n    }),\n    Columns.custom((text, group) => {\n      const canRemove = group.type !== 'builtin';\n      return (\n        <DeleteGroupButton\n          className=\"w-100\"\n          disabled={!canRemove}\n          group={group}\n          title={canRemove ? null : 'Cannot delete built-in group'}\n          onClick={() => this.onGroupDeleted()}\n        >\n          Delete\n        </DeleteGroupButton>\n      );\n    }, {\n      width: '1%',\n      className: 'text-nowrap p-l-0',\n      isAvailable: () => currentUser.isAdmin,\n    }),\n  ];\n\n  createGroup = () => {\n    CreateGroupDialog.showModal().result.then((group) => {\n      group.$save().then(newGroup => navigateTo(`/groups/${newGroup.id}`));\n    });\n  };\n\n  onGroupDeleted = () => {\n    this.props.controller.updatePagination({ page: 1 });\n    this.props.controller.update();\n  };\n\n  render() {\n    const { controller } = this.props;\n\n    return (\n      <div data-test=\"GroupList\">\n        {currentUser.isAdmin && (\n          <div className=\"m-b-15\">\n            <Button type=\"primary\" onClick={this.createGroup}>\n              <i className=\"fa fa-plus m-r-5\" />\n              New Group\n            </Button>\n          </div>\n        )}\n\n        {!controller.isLoaded && <LoadingState className=\"\" />}\n        {controller.isLoaded && controller.isEmpty && <EmptyState className=\"\" />}\n        {\n          controller.isLoaded && !controller.isEmpty && (\n            <div className=\"table-responsive\">\n              <ItemsTable\n                items={controller.pageItems}\n                columns={this.listColumns}\n                showHeader={false}\n                context={this.actions}\n                orderByField={controller.orderByField}\n                orderByReverse={controller.orderByReverse}\n                toggleSorting={controller.toggleSorting}\n              />\n              <Paginator\n                totalCount={controller.totalItemsCount}\n                itemsPerPage={controller.itemsPerPage}\n                page={controller.page}\n                onChange={page => controller.updatePagination({ page })}\n              />\n            </div>\n          )\n        }\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'list_users',\n    title: 'Groups',\n    path: 'groups',\n    order: 3,\n  });\n\n  ngModule.component('pageGroupsList', react2angular(liveItemsList(\n    GroupsList,\n    new ResourceItemsSource({\n      isPlainList: true,\n      getRequest() {\n        return {};\n      },\n      getResource() {\n        return Group.query.bind(Group);\n      },\n      getItemProcessor() {\n        return (item => new Group(item));\n      },\n    }),\n    new StateStorage({ orderByField: 'name', itemsPerPage: 10 }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/groups',\n      title: 'Groups',\n      key: 'groups',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<settings-screen><page-groups-list on-error=\"handleError\"></page-groups-list></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import template from './home.html';\nimport notification from '@/services/notification';\n\nfunction HomeCtrl(Events, Dashboard, Query, $http, messages) {\n  Events.record('view', 'page', 'personal_homepage');\n\n  this.noDashboards = false;\n  this.noQueries = false;\n\n  this.messages = messages;\n\n  Dashboard.favorites().$promise.then((data) => {\n    this.favoriteDashboards = data.results;\n    this.noDashboards = data.results.length === 0;\n  });\n  Query.favorites().$promise.then((data) => {\n    this.favoriteQueries = data.results;\n    this.noQueries = data.results.length === 0;\n  });\n\n  this.verifyEmail = () => {\n    $http.post('verification_email/').success(({ message }) => {\n      notification.success(message);\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.component('homePage', {\n    template,\n    controller: HomeCtrl,\n  });\n\n  return {\n    '/': {\n      template: '<home-page></home-page>',\n      title: 'Redash',\n    },\n  };\n}\n\ninit.init = true;\n","import React from 'react';\nimport { react2angular } from 'react2angular';\n\nimport { PageHeader } from '@/components/PageHeader';\nimport { Paginator } from '@/components/Paginator';\nimport { QueryTagsControl } from '@/components/tags-control/TagsControl';\nimport { SchedulePhrase } from '@/components/queries/SchedulePhrase';\n\nimport { wrap as itemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { UrlStateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport * as Sidebar from '@/components/items-list/components/Sidebar';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport Layout from '@/components/layouts/ContentWithSidebar';\n\nimport { Query } from '@/services/query';\nimport { currentUser } from '@/services/auth';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nimport QueriesListEmptyState from './QueriesListEmptyState';\n\nimport './queries-list.css';\n\nclass QueriesList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: 'all',\n      href: 'queries',\n      title: 'All Queries',\n    },\n    {\n      key: 'favorites',\n      href: 'queries/favorites',\n      title: 'Favorites',\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-star\" />,\n    },\n    {\n      key: 'archive',\n      href: 'queries/archive',\n      title: 'Archived',\n      icon: () => <Sidebar.MenuIcon icon=\"fa fa-archive\" />,\n    },\n    {\n      key: 'my',\n      href: 'queries/my',\n      title: 'My Queries',\n      icon: () => <Sidebar.ProfileImage user={currentUser} />,\n      isAvailable: () => currentUser.hasPermission('create_query'),\n    },\n  ];\n\n  listColumns = [\n    Columns.favorites({ className: 'p-r-0' }),\n    Columns.custom.sortable((text, item) => (\n      <React.Fragment>\n        <a className=\"table-main-title\" href={'queries/' + item.id}>{ item.name }</a>\n        <QueryTagsControl\n          className=\"d-block\"\n          tags={item.tags}\n          isDraft={item.is_draft}\n          isArchived={item.is_archived}\n        />\n      </React.Fragment>\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.avatar({ field: 'user', className: 'p-l-0 p-r-0' }, name => `Created by ${name}`),\n    Columns.dateTime.sortable({ title: 'Created At', field: 'created_at' }),\n    Columns.duration.sortable({ title: 'Runtime', field: 'runtime' }),\n    Columns.dateTime.sortable({ title: 'Last Executed At', field: 'retrieved_at', orderByField: 'executed_at' }),\n    Columns.custom.sortable(\n      (text, item) => <SchedulePhrase schedule={item.schedule} isNew={item.isNew()} />,\n      { title: 'Update Schedule', field: 'schedule' },\n    ),\n  ];\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <div className=\"container\">\n        <PageHeader title={controller.params.title} />\n        <Layout className=\"m-l-15 m-r-15\">\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              placeholder=\"Search Queries...\"\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n            />\n            <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.Tags url=\"api/queries/tags\" onChange={controller.updateSelectedTags} />\n            <Sidebar.PageSizeSelect\n              className=\"m-b-10\"\n              options={controller.pageSizeOptions}\n              value={controller.itemsPerPage}\n              onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState />}\n            {\n              controller.isLoaded && controller.isEmpty && (\n                <QueriesListEmptyState\n                  page={controller.params.currentPage}\n                  searchTerm={controller.searchTerm}\n                  selectedTags={controller.selectedTags}\n                />\n              )\n            }\n            {\n              controller.isLoaded && !controller.isEmpty && (\n                <div className=\"bg-white tiled table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )\n            }\n          </Layout.Content>\n        </Layout>\n      </div>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('pageQueriesList', react2angular(itemsList(\n    QueriesList,\n    new ResourceItemsSource({\n      getResource({ params: { currentPage } }) {\n        return {\n          all: Query.query.bind(Query),\n          my: Query.myQueries.bind(Query),\n          favorites: Query.favorites.bind(Query),\n          archive: Query.archive.bind(Query),\n        }[currentPage];\n      },\n      getItemProcessor() {\n        return (item => new Query(item));\n      },\n    }),\n    new UrlStateStorage({ orderByField: 'created_at', orderByReverse: true }),\n  )));\n\n  return routesToAngularRoutes([\n    {\n      path: '/queries',\n      title: 'Queries',\n      key: 'all',\n    },\n    {\n      path: '/queries/favorites',\n      title: 'Favorite Queries',\n      key: 'favorites',\n    },\n    {\n      path: '/queries/archive',\n      title: 'Archived Queries',\n      key: 'archive',\n    },\n    {\n      path: '/queries/my',\n      title: 'My Queries',\n      key: 'my',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<page-queries-list on-error=\"handleError\"></page-queries-list>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n}\n\ninit.init = true;\n","import template from './add-to-dashboard.html';\nimport notification from '@/services/notification';\n\nconst AddToDashboardForm = {\n  controller($sce, Dashboard, currentUser, Widget) {\n    'ngInject';\n\n    this.vis = this.resolve.vis;\n    this.saveInProgress = false;\n    this.trustAsHtml = html => $sce.trustAsHtml(html);\n    this.onDashboardSelected = (dash) => {\n      this.saveInProgress = true;\n      this.selected_query = this.resolve.query.id;\n      const widget = new Widget({\n        visualization_id: this.vis && this.vis.id,\n        dashboard_id: dash.id,\n        options: {},\n        width: 1,\n        type: 'visualization',\n      });\n      widget\n        .save()\n        .then(() => {\n          this.close();\n          notification.success('Widget added to dashboard.');\n        })\n        .catch(() => {\n          notification.error('Widget not added.');\n        })\n        .finally(() => {\n          this.saveInProgress = false;\n        });\n    };\n    this.selectedDashboard = null;\n    this.searchDashboards = (searchTerm) => {\n      // , limitToUsersDashboards\n      if (!searchTerm || searchTerm.length < 3) {\n        return;\n      }\n      Dashboard.get(\n        {\n          search_term: searchTerm,\n        },\n        (results) => {\n          this.dashboards = results.results;\n        },\n      );\n    };\n  },\n  bindings: {\n    resolve: '<',\n    close: '&',\n    dismiss: '&',\n    vis: '<',\n  },\n  template,\n};\nexport default function init(ngModule) {\n  ngModule.component('addToDashboardDialog', AddToDashboardForm);\n}\n\ninit.init = true;\n","import { map, defer } from 'lodash';\nimport template from './query.html';\nimport EditParameterSettingsDialog from '@/components/EditParameterSettingsDialog';\n\nfunction QuerySourceCtrl(\n  Events,\n  $controller,\n  $scope,\n  $location,\n  $uibModal,\n  currentUser,\n  KeyboardShortcuts,\n  $rootScope,\n) {\n  // extends QueryViewCtrl\n  $controller('QueryViewCtrl', { $scope });\n\n  Events.record('view_source', 'query', $scope.query.id);\n\n  const isNewQuery = !$scope.query.id;\n  let queryText = $scope.query.query;\n  const saveQuery = $scope.saveQuery;\n\n  $scope.sourceMode = true;\n  $scope.isDirty = false;\n  $scope.base_url = `${$location.protocol()}://${$location.host()}:${$location.port()}`;\n  $scope.modKey = KeyboardShortcuts.modKey;\n\n  // @override\n  Object.defineProperty($scope, 'showDataset', {\n    get() {\n      return $scope.queryResult && $scope.queryResult.getStatus() === 'done';\n    },\n  });\n\n  const shortcuts = {\n    'mod+s': function save() {\n      if ($scope.canEdit) {\n        $scope.saveQuery();\n      }\n    },\n    'mod+p': () => {\n      $scope.addNewParameter();\n    },\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', () => {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  $scope.canForkQuery = () => currentUser.hasPermission('edit_query') && !$scope.dataSource.view_only;\n\n  $scope.updateQuery = newQueryText => defer(() => $scope.$apply(() => { $scope.query.query = newQueryText; }));\n\n  // @override\n  $scope.saveQuery = (options, data) => {\n    const savePromise = saveQuery(options, data);\n\n    savePromise.then((savedQuery) => {\n      queryText = savedQuery.query;\n      $scope.isDirty = $scope.query.query !== queryText;\n      // update to latest version number\n      $scope.query.version = savedQuery.version;\n\n      if (isNewQuery) {\n        // redirect to new created query (keep hash)\n        $location.path(savedQuery.getSourceLink());\n      }\n    });\n\n    return savePromise;\n  };\n\n  $scope.addNewParameter = () => {\n    EditParameterSettingsDialog\n      .showModal({\n        parameter: {\n          title: null,\n          name: '',\n          type: 'text',\n          value: null,\n        },\n        existingParams: map($scope.query.getParameters().get(), p => p.name),\n      })\n      .result.then((param) => {\n        param = $scope.query.getParameters().add(param);\n        $rootScope.$broadcast('query-editor.command', 'paste', param.toQueryTextFragment());\n        $rootScope.$broadcast('query-editor.command', 'focus');\n      });\n  };\n\n  $scope.onParametersUpdated = () => {\n    // save if query clean\n    // https://discuss.redash.io/t/query-unsaved-changes-indication/3302/5\n    if (!$scope.isDirty) {\n      $scope.saveQuery();\n    }\n  };\n\n  $scope.listenForEditorCommand = f => $scope.$on('query-editor.command', f);\n  $scope.listenForResize = f => $scope.$parent.$on('angular-resizable.resizing', f);\n\n  $scope.$watch('query.query', (newQueryText) => {\n    $scope.isDirty = newQueryText !== queryText;\n  });\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('QuerySourceCtrl', QuerySourceCtrl);\n\n  return {\n    '/queries/new': {\n      template,\n      layout: 'fixed',\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: function newQuery(Query) {\n          'ngInject';\n\n          return Query.newQuery();\n        },\n        dataSources(DataSource) {\n          'ngInject';\n\n          return DataSource.query().$promise;\n        },\n      },\n    },\n    '/queries/:queryId/source': {\n      template,\n      layout: 'fixed',\n      controller: 'QuerySourceCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: (Query, $route) => {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        },\n      },\n    },\n  };\n}\n\ninit.init = true;\n","import { pick, some, find, minBy, map, intersection, isArray } from 'lodash';\nimport { SCHEMA_NOT_SUPPORTED, SCHEMA_LOAD_ERROR } from '@/services/data-source';\nimport getTags from '@/services/getTags';\nimport { policy } from '@/services/policy';\nimport { Visualization } from '@/services/visualization';\nimport Notifications from '@/services/notifications';\nimport ScheduleDialog from '@/components/queries/ScheduleDialog';\nimport { newVisualization } from '@/visualizations';\nimport EditVisualizationDialog from '@/visualizations/EditVisualizationDialog';\nimport notification from '@/services/notification';\nimport template from './query.html';\n\nfunction QueryViewCtrl(\n  $scope,\n  Events,\n  $route,\n  $routeParams,\n  $location,\n  $window,\n  $q,\n  KeyboardShortcuts,\n  Title,\n  AlertDialog,\n  clientConfig,\n  $uibModal,\n  currentUser,\n  Query,\n  DataSource,\n) {\n  // Should create it here since visualization registry might not be fulfilled when this file is loaded\n  const DEFAULT_VISUALIZATION = newVisualization('TABLE', { itemsPerPage: 50 });\n  DEFAULT_VISUALIZATION.id = 'table';\n\n  function getQueryResult(maxAge, selectedQueryText) {\n    if (maxAge === undefined) {\n      maxAge = $location.search().maxAge;\n    }\n\n    if (maxAge === undefined) {\n      maxAge = -1;\n    }\n\n    $scope.showLog = false;\n    if ($scope.isDirty) {\n      $scope.queryResult = $scope.query.getQueryResultByText(maxAge, selectedQueryText);\n    } else {\n      $scope.queryResult = $scope.query.getQueryResult(maxAge);\n    }\n  }\n\n\n  function getDataSourceId() {\n    // Try to get the query's data source id\n    let dataSourceId = $scope.query.data_source_id;\n\n    // If there is no source yet, then parse what we have in localStorage\n    //   e.g. `null` -> `NaN`, malformed data -> `NaN`, \"1\" -> 1\n    if (dataSourceId === undefined) {\n      dataSourceId = parseInt(localStorage.lastSelectedDataSourceId, 10);\n    }\n\n    // If we had an invalid value in localStorage (e.g. nothing, deleted source),\n    // then use the first data source\n    const isValidDataSourceId = !isNaN(dataSourceId) && some($scope.dataSources, ds => ds.id === dataSourceId);\n\n    if (!isValidDataSourceId) {\n      dataSourceId = $scope.dataSources[0].id;\n    }\n\n    // Return our data source id\n    return dataSourceId;\n  }\n\n  function getSchema(refresh = undefined) {\n    // TODO: is it possible this will be called before dataSource is set?\n    $scope.schema = [];\n    $scope.dataSource.getSchema(refresh).then((data) => {\n      if (data.schema) {\n        $scope.schema = data.schema;\n        $scope.schema.forEach((table) => {\n          table.collapsed = true;\n        });\n      } else if (data.error.code === SCHEMA_NOT_SUPPORTED) {\n        $scope.schema = undefined;\n      } else if (data.error.code === SCHEMA_LOAD_ERROR) {\n        notification.error('Schema refresh failed.', 'Please try again later.');\n      } else {\n        notification.error('Schema refresh failed.', 'Please try again later.');\n      }\n    });\n  }\n\n  $scope.refreshSchema = () => getSchema(true);\n\n  function updateDataSources(dataSources) {\n    // Filter out data sources the user can't query (or used by current query):\n    function canUseDataSource(dataSource) {\n      return !dataSource.view_only || dataSource.id === $scope.query.data_source_id;\n    }\n    $scope.dataSources = dataSources.filter(canUseDataSource);\n\n    if ($scope.dataSources.length === 0) {\n      $scope.noDataSources = true;\n      return;\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.query.data_source_id = getDataSourceId();\n    }\n\n    $scope.dataSource = find(dataSources, ds => ds.id === $scope.query.data_source_id);\n\n    $scope.canCreateQuery = some(dataSources, ds => !ds.view_only);\n\n    getSchema();\n  }\n\n  $scope.updateSelectedQuery = (selectedQueryText) => {\n    $scope.selectedQueryText = selectedQueryText;\n  };\n\n  $scope.executeQuery = () => {\n    if (!$scope.canExecuteQuery()) {\n      return;\n    }\n\n    if (!$scope.query.query) {\n      return;\n    }\n\n    getQueryResult(0, $scope.selectedQueryText);\n    $scope.lockButton(true);\n    $scope.cancelling = false;\n    Events.record('execute', 'query', $scope.query.id);\n\n    Notifications.getPermissions();\n  };\n\n  $scope.selectedVisualization = DEFAULT_VISUALIZATION;\n  $scope.currentUser = currentUser;\n  $scope.dataSource = {};\n  $scope.query = $route.current.locals.query;\n  $scope.showPermissionsControl = clientConfig.showPermissionsControl;\n\n  $scope.$watch('selectedVisualization', () => {\n    $scope.selectedTab = $scope.selectedVisualization.id; // Needed for `<rd-tab>` to work\n  });\n\n  const shortcuts = {\n    'mod+enter': $scope.executeQuery,\n    'alt+enter': $scope.executeQuery,\n  };\n\n  KeyboardShortcuts.bind(shortcuts);\n\n  $scope.$on('$destroy', () => {\n    KeyboardShortcuts.unbind(shortcuts);\n  });\n\n  if ($scope.query.hasResult() || $scope.query.paramsRequired()) {\n    getQueryResult();\n  }\n  $scope.queryExecuting = false;\n\n  $scope.isQueryOwner = currentUser.id === $scope.query.user.id || currentUser.hasPermission('admin');\n  $scope.canEdit = currentUser.canEdit($scope.query) || $scope.query.can_edit;\n  $scope.canViewSource = currentUser.hasPermission('view_source');\n\n  $scope.canExecuteQuery = () => $scope.query.is_safe || (currentUser.hasPermission('execute_query') && !$scope.dataSource.view_only);\n\n  $scope.canForkQuery = () => currentUser.hasPermission('edit_query') && !$scope.dataSource.view_only;\n\n  $scope.canScheduleQuery = currentUser.hasPermission('schedule_query');\n\n  if ($route.current.locals.dataSources) {\n    $scope.dataSources = $route.current.locals.dataSources;\n    updateDataSources($route.current.locals.dataSources);\n  } else {\n    $scope.dataSources = DataSource.query(updateDataSources);\n  }\n\n  // in view mode, latest dataset is always visible\n  // source mode changes this behavior\n  $scope.showDataset = true;\n  $scope.showLog = false;\n\n  $scope.lockButton = (lock) => {\n    $scope.queryExecuting = lock;\n  };\n\n  $scope.showApiKey = () => {\n    $uibModal.open({\n      component: 'apiKeyDialog',\n      resolve: {\n        query: $scope.query,\n      },\n    });\n  };\n\n  $scope.duplicateQuery = () => {\n    // To prevent opening the same tab, name must be unique for each browser\n    const tabName = 'duplicatedQueryTab' + Math.random().toString();\n\n    $window.open('', tabName);\n    Query.fork({ id: $scope.query.id }, (newQuery) => {\n      const queryUrl = newQuery.getUrl(true);\n      $window.open(queryUrl, tabName);\n    });\n  };\n\n  $scope.saveTags = (tags) => {\n    $scope.query.tags = tags;\n    $scope.saveQuery({}, { tags: $scope.query.tags });\n  };\n\n  $scope.loadTags = () => getTags('api/queries/tags').then(tags => map(tags, t => t.name));\n\n  $scope.saveQuery = (customOptions, data) => {\n    let request = data;\n\n    if (request) {\n      // Don't save new query with partial data\n      if ($scope.query.isNew()) {\n        return $q.reject();\n      }\n      request.id = $scope.query.id;\n      request.version = $scope.query.version;\n    } else {\n      request = pick($scope.query, [\n        'schedule',\n        'query',\n        'id',\n        'description',\n        'name',\n        'data_source_id',\n        'options',\n        'latest_query_data_id',\n        'version',\n        'is_draft',\n      ]);\n    }\n\n    const options = Object.assign(\n      {},\n      {\n        successMessage: 'Query saved',\n        errorMessage: 'Query could not be saved',\n      },\n      customOptions,\n    );\n\n    if (options.force) {\n      delete request.version;\n    }\n\n    function overwrite() {\n      options.force = true;\n      $scope.saveQuery(options, data);\n    }\n\n    return Query.save(\n      request,\n      (updatedQuery) => {\n        notification.success(options.successMessage);\n        $scope.query.version = updatedQuery.version;\n      },\n      (error) => {\n        if (error.status === 409) {\n          const errorMessage = 'It seems like the query has been modified by another user.';\n\n          if ($scope.isQueryOwner) {\n            const title = 'Overwrite Query';\n            const message = errorMessage + '<br>Are you sure you want to overwrite the query with your version?';\n            const confirm = { class: 'btn-warning', title: 'Overwrite' };\n\n            AlertDialog.open(title, message, confirm).then(overwrite);\n          } else {\n            notification.error(\n              'Changes not saved',\n              errorMessage + ' Please copy/backup your changes and reload this page.',\n              { duration: null },\n            );\n          }\n        } else {\n          notification.error(options.errorMessage);\n        }\n      },\n    ).$promise;\n  };\n\n  $scope.togglePublished = () => {\n    Events.record('toggle_published', 'query', $scope.query.id);\n    $scope.query.is_draft = !$scope.query.is_draft;\n    $scope.saveQuery(undefined, { is_draft: $scope.query.is_draft });\n  };\n\n  $scope.saveDescription = (desc) => {\n    $scope.query.description = desc;\n    Events.record('edit_description', 'query', $scope.query.id);\n    $scope.saveQuery(undefined, { description: $scope.query.description });\n  };\n\n  $scope.saveName = (name) => {\n    $scope.query.name = name;\n    Events.record('edit_name', 'query', $scope.query.id);\n    if ($scope.query.is_draft && clientConfig.autoPublishNamedQueries && $scope.query.name !== 'New Query') {\n      $scope.query.is_draft = false;\n    }\n\n    $scope.saveQuery(undefined, { name: $scope.query.name, is_draft: $scope.query.is_draft });\n  };\n\n  $scope.cancelExecution = () => {\n    $scope.cancelling = true;\n    $scope.queryResult.cancelExecution();\n    Events.record('cancel_execute', 'query', $scope.query.id);\n  };\n\n  $scope.archiveQuery = () => {\n    function archive() {\n      Query.delete(\n        { id: $scope.query.id },\n        () => {\n          $scope.query.is_archived = true;\n          $scope.query.schedule = null;\n        },\n        () => {\n          notification.error('Query could not be archived.');\n        },\n      );\n    }\n\n    const title = 'Archive Query';\n    const message =\n      'Are you sure you want to archive this query?<br/> All alerts and dashboard widgets created with its visualizations will be deleted.';\n    const confirm = { class: 'btn-warning', title: 'Archive' };\n\n    AlertDialog.open(title, message, confirm).then(archive);\n  };\n\n  $scope.updateDataSource = () => {\n    Events.record('update_data_source', 'query', $scope.query.id);\n    localStorage.lastSelectedDataSourceId = $scope.query.data_source_id;\n\n    $scope.query.latest_query_data = null;\n    $scope.query.latest_query_data_id = null;\n\n    if ($scope.query.id) {\n      Query.save(\n        {\n          id: $scope.query.id,\n          data_source_id: $scope.query.data_source_id,\n          latest_query_data_id: null,\n        },\n        (updatedQuery) => {\n          $scope.query.version = updatedQuery.version;\n        },\n      );\n    }\n\n    $scope.dataSource = find($scope.dataSources, ds => ds.id === $scope.query.data_source_id);\n    getSchema();\n    $scope.executeQuery();\n  };\n\n  $scope.setVisualizationTab = (visualization) => {\n    $scope.selectedVisualization = visualization;\n    $location.hash(visualization.id);\n  };\n\n  $scope.deleteVisualization = ($e, vis) => {\n    $e.preventDefault();\n\n    const title = undefined;\n    const message = `Are you sure you want to delete ${vis.name} ?`;\n    const confirm = { class: 'btn-danger', title: 'Delete' };\n\n    AlertDialog.open(title, message, confirm).then(() => {\n      Visualization.delete(\n        { id: vis.id },\n        () => {\n          if ($scope.selectedVisualization.id === vis.id) {\n            $scope.selectedVisualization = DEFAULT_VISUALIZATION;\n            $location.hash($scope.selectedVisualization.id);\n          }\n          $scope.query.visualizations = $scope.query.visualizations.filter(v => vis.id !== v.id);\n        },\n        () => {\n          notification.error('Error deleting visualization.', 'Maybe it\\'s used in a dashboard?');\n        },\n      );\n    });\n  };\n\n  $scope.$watch('query.name', () => {\n    Title.set($scope.query.name);\n  });\n\n  $scope.$watch('queryResult && queryResult.getStatus()', (status) => {\n    if (!status) {\n      return;\n    }\n\n    if (status === 'done') {\n      const ranSelectedQuery = $scope.query.query !== $scope.queryResult.query_result.query;\n      if (!ranSelectedQuery) {\n        $scope.query.latest_query_data_id = $scope.queryResult.getId();\n        $scope.query.queryResult = $scope.queryResult;\n      }\n\n      Notifications.showNotification('Redash', `${$scope.query.name} updated.`);\n    } else if (status === 'failed') {\n      Notifications.showNotification('Redash', `${$scope.query.name} failed to run: ${$scope.queryResult.getError()}`);\n    }\n\n    if (status === 'done' || status === 'failed') {\n      $scope.lockButton(false);\n    }\n\n    if ($scope.queryResult.getLog() != null) {\n      $scope.showLog = true;\n    }\n  });\n\n  function getVisualization(visId) {\n    // eslint-disable-next-line eqeqeq\n    return find($scope.query.visualizations, item => item.id == visId);\n  }\n\n  $scope.openVisualizationEditor = (visId) => {\n    function openModal() {\n      EditVisualizationDialog.showModal({\n        query: $scope.query,\n        visualization: getVisualization(visId),\n        queryResult: $scope.queryResult,\n      }).result.then((visualization) => {\n        $scope.setVisualizationTab(visualization);\n        $scope.$applyAsync();\n      });\n    }\n\n    if ($scope.query.isNew()) {\n      $scope.saveQuery().then((query) => {\n        // Because we have a path change, we need to \"signal\" the next page to\n        // open the visualization editor.\n        // TODO: we don't really need this. Just need to assign query to $scope.query\n        // and maybe a few more small changes. Not worth handling this now, but also\n        // we shouldn't copy this bizzare method to the React codebase.\n        $location.path(query.getSourceLink()).hash('add');\n      });\n    } else {\n      openModal();\n    }\n  };\n\n  if ($location.hash() === 'add') {\n    $location.hash(null);\n    $scope.openVisualizationEditor();\n  }\n  const intervals = clientConfig.queryRefreshIntervals;\n  const allowedIntervals = policy.getQueryRefreshIntervals();\n  $scope.refreshOptions = isArray(allowedIntervals) ? intersection(intervals, allowedIntervals) : intervals;\n\n  $scope.showScheduleForm = false;\n  $scope.editSchedule = () => {\n    if (!$scope.canEdit || !$scope.canScheduleQuery) {\n      return;\n    }\n    ScheduleDialog.showModal({\n      schedule: $scope.query.schedule,\n      refreshOptions: $scope.refreshOptions,\n    }).result.then((schedule) => {\n      $scope.query.schedule = schedule;\n      $scope.saveQuery();\n    });\n  };\n  $scope.closeScheduleForm = () => {\n    $scope.$apply(() => {\n      $scope.showScheduleForm = false;\n    });\n  };\n\n  $scope.openAddToDashboardForm = (visId) => {\n    const visualization = getVisualization(visId);\n    $uibModal.open({\n      component: 'addToDashboardDialog',\n      size: 'sm',\n      resolve: {\n        query: $scope.query,\n        vis: visualization,\n      },\n    });\n  };\n\n  $scope.showEmbedDialog = (query, visId) => {\n    const visualization = getVisualization(visId);\n    $uibModal.open({\n      component: 'embedCodeDialog',\n      resolve: {\n        query,\n        visualization,\n      },\n    });\n  };\n\n  $scope.$watch(\n    () => $location.hash(),\n    (hash) => {\n      $scope.selectedVisualization =\n        // try to find by hash\n        find($scope.query.visualizations, item => item.id == hash) || // eslint-disable-line eqeqeq\n        // try first one (with smallest ID)\n        minBy($scope.query.visualizations, viz => viz.id) ||\n        // fallback to default\n        DEFAULT_VISUALIZATION;\n    },\n  );\n\n  $scope.showManagePermissionsModal = () => {\n    $uibModal.open({\n      component: 'permissionsEditor',\n      resolve: {\n        aclUrl: { url: `api/queries/${$routeParams.queryId}/acl` },\n        owner: $scope.query.user,\n      },\n    });\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.controller('QueryViewCtrl', QueryViewCtrl);\n\n  return {\n    '/queries/:queryId': {\n      template,\n      layout: 'fixed',\n      controller: 'QueryViewCtrl',\n      reloadOnSearch: false,\n      resolve: {\n        query: (Query, $route) => {\n          'ngInject';\n\n          return Query.get({ id: $route.current.params.queryId }).$promise;\n        },\n      },\n    },\n  };\n}\n\ninit.init = true;\n","import 'brace/mode/snippets';\nimport notification from '@/services/notification';\nimport template from './edit.html';\n\nfunction SnippetCtrl($routeParams, $http, $location, currentUser, AlertDialog, QuerySnippet) {\n  this.snippetId = $routeParams.snippetId;\n\n  this.editorOptions = {\n    mode: 'snippets',\n    advanced: {\n      behavioursEnabled: true,\n      enableSnippets: false,\n      autoScrollEditorIntoView: true,\n    },\n    onLoad(editor) {\n      editor.$blockScrolling = Infinity;\n      editor.getSession().setUseWrapMode(true);\n      editor.setShowPrintMargin(false);\n    },\n  };\n\n  this.saveChanges = () => {\n    this.snippet.$save((snippet) => {\n      notification.success('Saved.');\n      if (this.snippetId === 'new') {\n        $location.path(`/query_snippets/${snippet.id}`).replace();\n      }\n    }, () => {\n      notification.error('Failed saving snippet.');\n    });\n  };\n\n  this.delete = () => {\n    const doDelete = () => {\n      this.snippet.$delete(() => {\n        $location.path('/query_snippets');\n        notification.success('Query snippet deleted.');\n      }, () => {\n        notification.error('Failed deleting query snippet.');\n      });\n    };\n\n    const title = 'Delete Snippet';\n    const message = `Are you sure you want to delete the \"${this.snippet.trigger}\" snippet?`;\n    const confirm = { class: 'btn-warning', title: 'Delete' };\n\n    AlertDialog.open(title, message, confirm).then(doDelete);\n  };\n\n  if (this.snippetId === 'new') {\n    this.snippet = new QuerySnippet({ description: '' });\n    this.canEdit = true;\n  } else {\n    this.snippet = QuerySnippet.get({ id: this.snippetId }, (snippet) => {\n      this.canEdit = currentUser.canEdit(snippet);\n    });\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('snippetPage', {\n    template,\n    controller: SnippetCtrl,\n  });\n\n  return {\n    '/query_snippets/:snippetId': {\n      template: '<snippet-page></snippet-page>',\n      title: 'Query Snippets',\n    },\n  };\n}\n\ninit.init = true;\n","import settingsMenu from '@/services/settingsMenu';\nimport notification from '@/services/notification';\nimport template from './organization.html';\n\nfunction OrganizationSettingsCtrl($http, clientConfig, Events) {\n  Events.record('view', 'page', 'org_settings');\n\n  this.settings = {};\n  $http.get('api/settings/organization').then((response) => {\n    this.settings = response.data.settings;\n  });\n\n  this.update = (key) => {\n    $http.post('api/settings/organization', { [key]: this.settings[key] }).then((response) => {\n      this.settings = response.data.settings;\n      notification.success('Settings changes saved.');\n\n      if (this.disablePasswordLoginToggle() && this.settings.auth_password_login_enabled === false) {\n        this.settings.auth_password_login_enabled = true;\n        this.update('auth_password_login_enabled');\n      }\n    }).catch(() => {\n      notification.error('Failed saving changes.');\n    });\n  };\n\n  this.dateFormatList = clientConfig.dateFormatList;\n  this.timeFormatList = clientConfig.timeFormatList;\n  this.googleLoginEnabled = clientConfig.googleLoginEnabled;\n\n  // eslint-disable-next-line max-len\n  this.disablePasswordLoginToggle = () => (clientConfig.googleLoginEnabled || this.settings.auth_saml_enabled) === false;\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'admin',\n    title: 'Settings',\n    path: 'settings/organization',\n    order: 6,\n  });\n\n  ngModule.component('organizationSettingsPage', {\n    template,\n    controller: OrganizationSettingsCtrl,\n  });\n\n  return {\n    '/settings/organization': {\n      template: '<organization-settings-page></organization-settings-page>',\n      title: 'Organization Settings',\n    },\n  };\n}\n\ninit.init = true;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nimport { EmailSettingsWarning } from '@/components/EmailSettingsWarning';\nimport UserEdit from '@/components/users/UserEdit';\nimport UserShow from '@/components/users/UserShow';\nimport LoadingState from '@/components/items-list/components/LoadingState';\n\nimport { User } from '@/services/user';\nimport settingsMenu from '@/services/settingsMenu';\nimport { $route } from '@/services/ng';\nimport { currentUser } from '@/services/auth';\nimport PromiseRejectionError from '@/lib/promise-rejection-error';\nimport './settings.less';\n\nclass UserProfile extends React.Component {\n  static propTypes = {\n    onError: PropTypes.func,\n  };\n\n  static defaultProps = {\n    onError: () => {},\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = { user: null };\n  }\n\n  componentDidMount() {\n    const userId = $route.current.params.userId || currentUser.id;\n    User.get({ id: userId }).$promise\n      .then(user => this.setState({ user: User.convertUserInfo(user) }))\n      .catch((error) => {\n        // ANGULAR_REMOVE_ME This code is related to Angular's HTTP services\n        if (error.status && error.data) {\n          error = new PromiseRejectionError(error);\n        }\n        this.props.onError(error);\n      });\n  }\n\n  render() {\n    const { user } = this.state;\n    const canEdit = user && (currentUser.isAdmin || currentUser.id === user.id);\n    const UserComponent = canEdit ? UserEdit : UserShow;\n    return (\n      <React.Fragment>\n        <EmailSettingsWarning featureName=\"invite emails\" />\n        <div className=\"row\">\n          {user ? <UserComponent user={user} /> : <LoadingState className=\"\" />}\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    title: 'Account',\n    path: 'users/me',\n    order: 7,\n  });\n\n  ngModule.component('pageUserProfile', react2angular(UserProfile));\n}\n\ninit.init = true;\n","import { map, get } from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { react2angular } from 'react2angular';\n\nimport Button from 'antd/lib/button';\nimport Modal from 'antd/lib/modal';\nimport { Paginator } from '@/components/Paginator';\nimport DynamicComponent from '@/components/DynamicComponent';\nimport { UserPreviewCard } from '@/components/PreviewCard';\nimport InputWithCopy from '@/components/InputWithCopy';\n\nimport { wrap as itemsList, ControllerType } from '@/components/items-list/ItemsList';\nimport { ResourceItemsSource } from '@/components/items-list/classes/ItemsSource';\nimport { UrlStateStorage } from '@/components/items-list/classes/StateStorage';\n\nimport LoadingState from '@/components/items-list/components/LoadingState';\nimport EmptyState from '@/components/items-list/components/EmptyState';\nimport * as Sidebar from '@/components/items-list/components/Sidebar';\nimport ItemsTable, { Columns } from '@/components/items-list/components/ItemsTable';\n\nimport Layout from '@/components/layouts/ContentWithSidebar';\nimport CreateUserDialog from '@/components/users/CreateUserDialog';\n\nimport settingsMenu from '@/services/settingsMenu';\nimport { currentUser } from '@/services/auth';\nimport { policy } from '@/services/policy';\nimport { User } from '@/services/user';\nimport navigateTo from '@/services/navigateTo';\nimport notification from '@/services/notification';\nimport { absoluteUrl } from '@/services/utils';\n\nfunction UsersListActions({ user, enableUser, disableUser, deleteUser }) {\n  if (user.id === currentUser.id) {\n    return null;\n  }\n  if (user.is_invitation_pending) {\n    return (\n      <Button type=\"danger\" className=\"w-100\" onClick={event => deleteUser(event, user)}>Delete</Button>\n    );\n  }\n  return user.is_disabled ? (\n    <Button type=\"primary\" className=\"w-100\" onClick={event => enableUser(event, user)}>Enable</Button>\n  ) : (\n    <Button className=\"w-100\" onClick={event => disableUser(event, user)}>Disable</Button>\n  );\n}\n\nUsersListActions.propTypes = {\n  user: PropTypes.shape({\n    id: PropTypes.number,\n    is_invitation_pending: PropTypes.bool,\n    is_disabled: PropTypes.bool,\n  }).isRequired,\n  enableUser: PropTypes.func.isRequired,\n  disableUser: PropTypes.func.isRequired,\n  deleteUser: PropTypes.func.isRequired,\n};\n\nclass UsersList extends React.Component {\n  static propTypes = {\n    controller: ControllerType.isRequired,\n  };\n\n  sidebarMenu = [\n    {\n      key: 'active',\n      href: 'users',\n      title: 'Active Users',\n    },\n    {\n      key: 'pending',\n      href: 'users/pending',\n      title: 'Pending Invitations',\n    },\n    {\n      key: 'disabled',\n      href: 'users/disabled',\n      title: 'Disabled Users',\n      isAvailable: () => policy.canCreateUser(),\n    },\n  ];\n\n  listColumns = [\n    Columns.custom.sortable((text, user) => (\n      <UserPreviewCard user={user} withLink />\n    ), {\n      title: 'Name',\n      field: 'name',\n      width: null,\n    }),\n    Columns.custom.sortable((text, user) => map(user.groups, group => (\n      <a key={'group' + group.id} className=\"label label-tag\" href={'groups/' + group.id}>{group.name}</a>\n    )), {\n      title: 'Groups',\n      field: 'groups',\n    }),\n    Columns.timeAgo.sortable({\n      title: 'Joined',\n      field: 'created_at',\n      className: 'text-nowrap',\n      width: '1%',\n    }),\n    Columns.timeAgo.sortable({\n      title: 'Last Active At',\n      field: 'active_at',\n      className: 'text-nowrap',\n      width: '1%',\n    }),\n    Columns.custom((text, user) => (\n      <UsersListActions\n        user={user}\n        enableUser={this.enableUser}\n        disableUser={this.disableUser}\n        deleteUser={this.deleteUser}\n      />\n    ), {\n      width: '1%',\n      isAvailable: () => policy.canCreateUser(),\n    }),\n  ];\n\n  componentDidMount() {\n    if (this.props.controller.params.isNewUserPage) {\n      this.showCreateUserDialog();\n    }\n  }\n\n  createUser = values => User.create(values).$promise.then((user) => {\n    notification.success('Saved.');\n    if (user.invite_link) {\n      Modal.warning({ title: 'Email not sent!',\n        content: (\n          <React.Fragment>\n            <p>\n              The mail server is not configured, please send the following link\n              to <b>{user.name}</b>:\n            </p>\n            <InputWithCopy value={absoluteUrl(user.invite_link)} readOnly />\n          </React.Fragment>\n        ) });\n    }\n  }).catch((error) => {\n    if (!(error instanceof Error)) {\n      error = new Error(get(error, 'data.message', 'Failed saving.'));\n    }\n    return Promise.reject(error);\n  });\n\n  showCreateUserDialog = () => {\n    if (policy.isCreateUserEnabled()) {\n      CreateUserDialog.showModal({ onCreate: this.createUser }).result\n        .then(() => this.props.controller.update())\n        .finally(() => {\n          if (this.props.controller.params.isNewUserPage) {\n            navigateTo('users');\n          }\n        });\n    }\n  };\n\n  enableUser = (event, user) => User.enableUser(user).then(() => this.props.controller.update());\n\n  disableUser = (event, user) => User.disableUser(user).then(() => this.props.controller.update());\n\n  deleteUser = (event, user) => User.deleteUser(user).then(() => this.props.controller.update());\n\n  // eslint-disable-next-line class-methods-use-this\n  renderPageHeader() {\n    if (!policy.canCreateUser()) {\n      return null;\n    }\n    return (\n      <div className=\"m-b-15\">\n        <Button type=\"primary\" disabled={!policy.isCreateUserEnabled()} onClick={this.showCreateUserDialog}>\n          <i className=\"fa fa-plus m-r-5\" />\n          New User\n        </Button>\n        <DynamicComponent name=\"UsersListExtra\" />\n      </div>\n    );\n  }\n\n  render() {\n    const { controller } = this.props;\n    return (\n      <React.Fragment>\n        {this.renderPageHeader()}\n        <Layout>\n          <Layout.Sidebar className=\"m-b-0\">\n            <Sidebar.SearchInput\n              value={controller.searchTerm}\n              onChange={controller.updateSearch}\n            />\n            <Sidebar.Menu items={this.sidebarMenu} selected={controller.params.currentPage} />\n            <Sidebar.PageSizeSelect\n              className=\"m-b-10\"\n              options={controller.pageSizeOptions}\n              value={controller.itemsPerPage}\n              onChange={itemsPerPage => controller.updatePagination({ itemsPerPage })}\n            />\n          </Layout.Sidebar>\n          <Layout.Content>\n            {!controller.isLoaded && <LoadingState className=\"\" />}\n            {controller.isLoaded && controller.isEmpty && <EmptyState className=\"\" />}\n            {\n              controller.isLoaded && !controller.isEmpty && (\n                <div className=\"table-responsive\">\n                  <ItemsTable\n                    items={controller.pageItems}\n                    columns={this.listColumns}\n                    context={this.actions}\n                    orderByField={controller.orderByField}\n                    orderByReverse={controller.orderByReverse}\n                    toggleSorting={controller.toggleSorting}\n                  />\n                  <Paginator\n                    totalCount={controller.totalItemsCount}\n                    itemsPerPage={controller.itemsPerPage}\n                    page={controller.page}\n                    onChange={page => controller.updatePagination({ page })}\n                  />\n                </div>\n              )\n            }\n          </Layout.Content>\n        </Layout>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'list_users',\n    title: 'Users',\n    path: 'users',\n    isActive: path => path.startsWith('/users') && (path !== '/users/me'),\n    order: 2,\n  });\n\n  ngModule.component('pageUsersList', react2angular(itemsList(\n    UsersList,\n    new ResourceItemsSource({\n      getRequest(request, { params: { currentPage } }) {\n        switch (currentPage) {\n          case 'active':\n            request.pending = false;\n            break;\n          case 'pending':\n            request.pending = true;\n            break;\n          case 'disabled':\n            request.disabled = true;\n            break;\n          // no default\n        }\n        return request;\n      },\n      getResource() {\n        return User.query.bind(User);\n      },\n      getItemProcessor() {\n        return (item => new User(item));\n      },\n    }),\n    new UrlStateStorage({ orderByField: 'created_at', orderByReverse: true }),\n  )));\n}\n\ninit.init = true;\n","import { extend } from 'lodash';\nimport { routesToAngularRoutes } from '@/lib/utils';\n\nexport default function init() {\n  const listRoutes = routesToAngularRoutes([\n    {\n      path: '/users',\n      title: 'Users',\n      key: 'active',\n    },\n    {\n      path: '/users/new',\n      title: 'Users',\n      key: 'active',\n      isNewUserPage: true,\n    },\n    {\n      path: '/users/pending',\n      title: 'Pending Invitations',\n      key: 'pending',\n    },\n    {\n      path: '/users/disabled',\n      title: 'Disabled Users',\n      key: 'disabled',\n    },\n  ], {\n    template: '<settings-screen><page-users-list on-error=\"handleError\"></page-users-list></settings-screen>',\n    reloadOnSearch: false,\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n\n  const profileRoutes = routesToAngularRoutes([\n    {\n      path: '/users/me',\n      title: 'Account',\n      key: 'users',\n    },\n    {\n      path: '/users/:userId',\n      title: 'Users',\n      key: 'users',\n    },\n  ], {\n    reloadOnSearch: false,\n    template: '<settings-screen><page-user-profile on-error=\"handleError\"></page-user-profile></settings-screen>',\n    controller($scope, $exceptionHandler) {\n      'ngInject';\n\n      $scope.handleError = $exceptionHandler;\n    },\n  });\n\n  return extend(listRoutes, profileRoutes);\n}\n\ninit.init = true;\n","/* eslint-disable */\n/*\nTODO:\n1. export module name.\n2. publish into its own repo?\n3. fix lint errors.\n*/\nimport angular from 'angular';\nimport jQuery from 'jquery';\nimport sortable from 'jquery-ui/ui/widgets/sortable';\n\n/*\n jQuery UI Sortable plugin wrapper\n\n @param [ui-sortable] {object} Options to pass to $.fn.sortable() merged onto ui.config\n */\nangular.module('ui.sortable', [])\n  .value('uiSortableConfig', {\n    // the default for jquery-ui sortable is \"> *\", we need to restrict this to\n    // ng-repeat items\n    // if the user uses\n    items: '> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]',\n    cancel: 'input, textarea, button, select, option, .ui-sortable-bypass',\n  })\n  .directive('uiSortable', [\n    'uiSortableConfig', '$timeout', '$log',\n    function (uiSortableConfig, $timeout, $log) {\n      return {\n        require: '?ngModel',\n        scope: {\n          ngModel: '=',\n          uiSortable: '=',\n        },\n        link(scope, element, attrs, ngModel) {\n          let savedNodes;\n          element = jQuery(element);\n\n          function combineCallbacks(first, second) {\n            const firstIsFunc = typeof first === 'function';\n            const secondIsFunc = typeof second === 'function';\n            if (firstIsFunc && secondIsFunc) {\n              return function () {\n                first.apply(this, arguments);\n                second.apply(this, arguments);\n              };\n            } else if (secondIsFunc) {\n              return second;\n            }\n            return first;\n          }\n\n          function getSortableWidgetInstance(element) {\n            // this is a fix to support jquery-ui prior to v1.11.x\n            // otherwise we should be using `element.sortable('instance')`\n            const data = element.data('ui-sortable');\n            if (data && typeof data === 'object' && data.widgetFullName === 'ui-sortable') {\n              return data;\n            }\n            return null;\n          }\n\n          function patchSortableOption(key, value) {\n            if (callbacks[key]) {\n              if (key === 'stop') {\n                // call apply after stop\n                value = combineCallbacks(\n                  value, () => { scope.$apply(); });\n\n                value = combineCallbacks(value, afterStop);\n              }\n              // wrap the callback\n              value = combineCallbacks(callbacks[key], value);\n            } else if (wrappers[key]) {\n              value = wrappers[key](value);\n            }\n\n            // patch the options that need to have values set\n            if (!value && (key === 'items' || key === 'ui-model-items')) {\n              value = uiSortableConfig.items;\n            }\n\n            return value;\n          }\n\n          function patchUISortableOptions(newVal, oldVal, sortableWidgetInstance) {\n            function addDummyOptionKey(value, key) {\n              if (!(key in opts)) {\n                // add the key in the opts object so that\n                // the patch function detects and handles it\n                opts[key] = null;\n              }\n            }\n            // for this directive to work we have to attach some callbacks\n            angular.forEach(callbacks, addDummyOptionKey);\n\n            // only initialize it in case we have to\n            // update some options of the sortable\n            let optsDiff = null;\n\n            if (oldVal) {\n              // reset deleted options to default\n              let defaultOptions;\n              angular.forEach(oldVal, (oldValue, key) => {\n                if (!newVal || !(key in newVal)) {\n                  if (key in directiveOpts) {\n                    if (key === 'ui-floating') {\n                      opts[key] = 'auto';\n                    } else {\n                      opts[key] = patchSortableOption(key, undefined);\n                    }\n                    return;\n                  }\n\n                  if (!defaultOptions) {\n                    defaultOptions = sortable().options;\n                  }\n                  let defaultValue = defaultOptions[key];\n                  defaultValue = patchSortableOption(key, defaultValue);\n\n                  if (!optsDiff) {\n                    optsDiff = {};\n                  }\n                  optsDiff[key] = defaultValue;\n                  opts[key] = defaultValue;\n                }\n              });\n            }\n\n            // update changed options\n            angular.forEach(newVal, (value, key) => {\n              // if it's a custom option of the directive,\n              // handle it approprietly\n              if (key in directiveOpts) {\n                if (key === 'ui-floating' && (value === false || value === true) && sortableWidgetInstance) {\n                  sortableWidgetInstance.floating = value;\n                }\n\n                opts[key] = patchSortableOption(key, value);\n                return;\n              }\n\n              value = patchSortableOption(key, value);\n\n              if (!optsDiff) {\n                optsDiff = {};\n              }\n              optsDiff[key] = value;\n              opts[key] = value;\n            });\n\n            return optsDiff;\n          }\n\n          function getPlaceholderElement(element) {\n            const placeholder = element.sortable('option', 'placeholder');\n\n            // placeholder.element will be a function if the placeholder, has\n            // been created (placeholder will be an object).  If it hasn't\n            // been created, either placeholder will be false if no\n            // placeholder class was given or placeholder.element will be\n            // undefined if a class was given (placeholder will be a string)\n            if (placeholder && placeholder.element && typeof placeholder.element === 'function') {\n              let result = placeholder.element();\n              // workaround for jquery ui 1.9.x,\n              // not returning jquery collection\n              result = jQuery(result);\n              return result;\n            }\n            return null;\n          }\n\n          function getPlaceholderExcludesludes(element, placeholder) {\n            // exact match with the placeholder's class attribute to handle\n            // the case that multiple connected sortables exist and\n            // the placeholder option equals the class of sortable items\n            const notCssSelector = opts['ui-model-items'].replace(/[^,]*>/g, '');\n            const excludes = element.find(`[class=\"${placeholder.attr('class')}\"]:not(${notCssSelector})`);\n            return excludes;\n          }\n\n          function hasSortingHelper(element, ui) {\n            const helperOption = element.sortable('option', 'helper');\n            return helperOption === 'clone' || (typeof helperOption === 'function' && ui.item.sortable.isCustomHelperUsed());\n          }\n\n          function getSortingHelper(element, ui, savedNodes) {\n            let result = null;\n            if (hasSortingHelper(element, ui) &&\n                element.sortable('option', 'appendTo') === 'parent') {\n              // The .ui-sortable-helper element (that's the default class name)\n              // is placed last.\n              result = savedNodes.last();\n            }\n            return result;\n          }\n\n          // thanks jquery-ui\n          function isFloating(item) {\n            return (/left|right/).test(item.css('float')) || (/inline|table-cell/).test(item.css('display'));\n          }\n\n          function getElementScope(elementScopes, element) {\n            let result = null;\n            for (let i = 0; i < elementScopes.length; i++) {\n              const x = elementScopes[i];\n              if (x.element[0] === element[0]) {\n                result = x.scope;\n                break;\n              }\n            }\n            return result;\n          }\n\n          function afterStop(e, ui) {\n            ui.item.sortable._destroy();\n          }\n\n          // return the index of ui.item among the items\n          // we can't just do ui.item.index() because there it might have siblings\n          // which are not items\n          function getItemIndex(item) {\n            return item.parent()\n              .find(opts['ui-model-items'])\n              .index(item);\n          }\n\n          let opts = {};\n\n          // directive specific options\n          let directiveOpts = {\n            'ui-floating': undefined,\n            'ui-model-items': uiSortableConfig.items,\n          };\n\n          let callbacks = {\n            receive: null,\n            remove: null,\n            start: null,\n            stop: null,\n            update: null,\n          };\n\n          let wrappers = {\n            helper: null,\n          };\n\n          angular.extend(opts, directiveOpts, uiSortableConfig, scope.uiSortable);\n\n          function wireUp() {\n            // When we add or remove elements, we need the sortable to 'refresh'\n            // so it can find the new/removed elements.\n            scope.$watchCollection('ngModel', () => {\n              // Timeout to let ng-repeat modify the DOM\n              $timeout(() => {\n                // ensure that the jquery-ui-sortable widget instance\n                // is still bound to the directive's element\n                if (!!getSortableWidgetInstance(element)) {\n                  element.sortable('refresh');\n                }\n              }, 0, false);\n            });\n\n            callbacks.start = function (e, ui) {\n              if (opts['ui-floating'] === 'auto') {\n                // since the drag has started, the element will be\n                // absolutely positioned, so we check its siblings\n                const siblings = ui.item.siblings();\n                const sortableWidgetInstance = getSortableWidgetInstance(jQuery(e.target));\n                sortableWidgetInstance.floating = isFloating(siblings);\n              }\n\n              // Save the starting position of dragged item\n              const index = getItemIndex(ui.item);\n              ui.item.sortable = {\n                model: ngModel.$modelValue[index],\n                index,\n                source: ui.item.parent(),\n                sourceModel: ngModel.$modelValue,\n                cancel() {\n                  ui.item.sortable._isCanceled = true;\n                },\n                isCanceled() {\n                  return ui.item.sortable._isCanceled;\n                },\n                isCustomHelperUsed() {\n                  return !!ui.item.sortable._isCustomHelperUsed;\n                },\n                _isCanceled: false,\n                _isCustomHelperUsed: ui.item.sortable._isCustomHelperUsed,\n                _destroy() {\n                  angular.forEach(ui.item.sortable, (value, key) => {\n                    ui.item.sortable[key] = undefined;\n                  });\n                },\n              };\n            };\n\n            callbacks.activate = function (e, ui) {\n              // We need to make a copy of the current element's contents so\n              // we can restore it after sortable has messed it up.\n              // This is inside activate (instead of start) in order to save\n              // both lists when dragging between connected lists.\n              savedNodes = element.contents();\n\n              // If this list has a placeholder (the connected lists won't),\n              // don't inlcude it in saved nodes.\n              const placeholder = getPlaceholderElement(element);\n              if (placeholder && placeholder.length) {\n                const excludes = getPlaceholderExcludesludes(element, placeholder);\n                savedNodes = savedNodes.not(excludes);\n              }\n\n              // save the directive's scope so that it is accessible from ui.item.sortable\n              const connectedSortables = ui.item.sortable._connectedSortables || [];\n\n              connectedSortables.push({\n                element,\n                scope,\n              });\n\n              ui.item.sortable._connectedSortables = connectedSortables;\n            };\n\n            callbacks.update = function (e, ui) {\n              // Save current drop position but only if this is not a second\n              // update that happens when moving between lists because then\n              // the value will be overwritten with the old value\n              if (!ui.item.sortable.received) {\n                ui.item.sortable.dropindex = getItemIndex(ui.item);\n                const droptarget = ui.item.parent();\n                ui.item.sortable.droptarget = droptarget;\n\n                const droptargetScope = getElementScope(ui.item.sortable._connectedSortables, droptarget);\n                ui.item.sortable.droptargetModel = droptargetScope.ngModel;\n\n                // Cancel the sort (let ng-repeat do the sort for us)\n                // Don't cancel if this is the received list because it has\n                // already been canceled in the other list, and trying to cancel\n                // here will mess up the DOM.\n                element.sortable('cancel');\n              }\n\n              // Put the nodes back exactly the way they started (this is very\n              // important because ng-repeat uses comment elements to delineate\n              // the start and stop of repeat sections and sortable doesn't\n              // respect their order (even if we cancel, the order of the\n              // comments are still messed up).\n              const sortingHelper = !ui.item.sortable.received && getSortingHelper(element, ui, savedNodes);\n              if (sortingHelper && sortingHelper.length) {\n                // Restore all the savedNodes except from the sorting helper element.\n                // That way it will be garbage collected.\n                savedNodes = savedNodes.not(sortingHelper);\n              }\n              savedNodes.appendTo(element);\n\n              // If this is the target connected list then\n              // it's safe to clear the restored nodes since:\n              // update is currently running and\n              // stop is not called for the target list.\n              if (ui.item.sortable.received) {\n                savedNodes = null;\n              }\n\n              // If received is true (an item was dropped in from another list)\n              // then we add the new item to this list otherwise wait until the\n              // stop event where we will know if it was a sort or item was\n              // moved here from another list\n              if (ui.item.sortable.received && !ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ngModel.$modelValue.splice(ui.item.sortable.dropindex, 0,\n                                             ui.item.sortable.moved);\n                });\n              }\n            };\n\n            callbacks.stop = function (e, ui) {\n              // If the received flag hasn't be set on the item, this is a\n              // normal sort, if dropindex is set, the item was moved, so move\n              // the items in the list.\n              if (!ui.item.sortable.received &&\n                 ('dropindex' in ui.item.sortable) &&\n                 !ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ngModel.$modelValue.splice(\n                    ui.item.sortable.dropindex, 0,\n                    ngModel.$modelValue.splice(ui.item.sortable.index, 1)[0]);\n                });\n              } else {\n                // if the item was not moved, then restore the elements\n                // so that the ngRepeat's comment are correct.\n                if ((!('dropindex' in ui.item.sortable) || ui.item.sortable.isCanceled()) &&\n                    !angular.equals(element.contents(), savedNodes)) {\n                  const sortingHelper = getSortingHelper(element, ui, savedNodes);\n                  if (sortingHelper && sortingHelper.length) {\n                    // Restore all the savedNodes except from the sorting helper element.\n                    // That way it will be garbage collected.\n                    savedNodes = savedNodes.not(sortingHelper);\n                  }\n                  savedNodes.appendTo(element);\n                }\n              }\n\n              // It's now safe to clear the savedNodes\n              // since stop is the last callback.\n              savedNodes = null;\n            };\n\n            callbacks.receive = function (e, ui) {\n              // An item was dropped here from another list, set a flag on the\n              // item.\n              ui.item.sortable.received = true;\n            };\n\n            callbacks.remove = function (e, ui) {\n              // Workaround for a problem observed in nested connected lists.\n              // There should be an 'update' event before 'remove' when moving\n              // elements. If the event did not fire, cancel sorting.\n              if (!('dropindex' in ui.item.sortable)) {\n                element.sortable('cancel');\n                ui.item.sortable.cancel();\n              }\n\n              // Remove the item from this list's model and copy data into item,\n              // so the next list can retrive it\n              if (!ui.item.sortable.isCanceled()) {\n                scope.$apply(() => {\n                  ui.item.sortable.moved = ngModel.$modelValue.splice(\n                    ui.item.sortable.index, 1)[0];\n                });\n              }\n            };\n\n            wrappers.helper = function (inner) {\n              if (inner && typeof inner === 'function') {\n                return function (e, item) {\n                  const oldItemSortable = item.sortable;\n                  const index = getItemIndex(item);\n                  item.sortable = {\n                    model: ngModel.$modelValue[index],\n                    index,\n                    source: item.parent(),\n                    sourceModel: ngModel.$modelValue,\n                    _restore() {\n                      angular.forEach(item.sortable, (value, key) => {\n                        item.sortable[key] = undefined;\n                      });\n\n                      item.sortable = oldItemSortable;\n                    },\n                  };\n\n                  const innerResult = inner.apply(this, arguments);\n                  item.sortable._restore();\n                  item.sortable._isCustomHelperUsed = item !== innerResult;\n                  return innerResult;\n                };\n              }\n              return inner;\n            };\n\n            scope.$watchCollection('uiSortable', (newVal, oldVal) => {\n              // ensure that the jquery-ui-sortable widget instance\n              // is still bound to the directive's element\n              const sortableWidgetInstance = getSortableWidgetInstance(element);\n              if (!!sortableWidgetInstance) {\n                const optsDiff = patchUISortableOptions(newVal, oldVal, sortableWidgetInstance);\n\n                if (optsDiff) {\n                  element.sortable('option', optsDiff);\n                }\n              }\n            }, true);\n\n            patchUISortableOptions(opts);\n          }\n\n          function init() {\n            if (ngModel) {\n              wireUp();\n            } else {\n              $log.info('ui.sortable: ngModel not provided!', element);\n            }\n\n            // Create sortable\n            element.sortable(opts);\n          }\n\n          function initIfEnabled() {\n            if (scope.uiSortable && scope.uiSortable.disabled) {\n              return false;\n            }\n\n            init();\n\n            // Stop Watcher\n            initIfEnabled.cancelWatcher();\n            initIfEnabled.cancelWatcher = angular.noop;\n\n            return true;\n          }\n\n          initIfEnabled.cancelWatcher = angular.noop;\n\n          if (!initIfEnabled()) {\n            initIfEnabled.cancelWatcher = scope.$watch('uiSortable.disabled', initIfEnabled);\n          }\n        },\n      };\n    },\n  ]);\n","function autofocus($timeout) {\n  return {\n    link(scope, element) {\n      $timeout(() => {\n        element[0].focus();\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('autofocus', autofocus);\n}\n\ninit.init = true;\n","function compareTo() {\n  return {\n    require: 'ngModel',\n    scope: {\n      otherModelValue: '=compareTo',\n    },\n    link(scope, element, attributes, ngModel) {\n      const validate = (value) => {\n        ngModel.$setValidity('compareTo', value === scope.otherModelValue);\n      };\n\n      scope.$watch('otherModelValue', () => {\n        validate(ngModel.$modelValue);\n      });\n\n      ngModel.$parsers.push((value) => {\n        validate(value);\n        return value;\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('compareTo', compareTo);\n}\n\ninit.init = true;\n","import debug from 'debug';\n\nexport const logger = debug('redash:directives');\n\nexport const requestAnimationFrame = window.requestAnimationFrame ||\n  window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame ||\n  window.msRequestAnimationFrame ||\n  function requestAnimationFrameFallback(callback) {\n    setTimeout(callback, 10);\n  };\n","import { logger } from './utils';\n\nfunction TitleService($rootScope) {\n  const Title = {\n    title: 'Redash',\n    set(newTitle) {\n      this.title = newTitle;\n      $rootScope.$broadcast('$titleChange');\n    },\n    get() {\n      return this.title;\n    },\n  };\n\n  return Title;\n}\n\nfunction title($rootScope, Title) {\n  return {\n    restrict: 'E',\n    link(scope, element) {\n      function updateTitle() {\n        const newTitle = Title.get();\n        logger('Updating title to: %s', newTitle);\n        element.text(newTitle);\n      }\n\n      $rootScope.$on('$routeChangeSuccess', (event, to) => {\n        if (to.title) {\n          Title.set(to.title);\n        }\n      });\n      $rootScope.$on('$titleChange', updateTitle);\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule\n    .factory('Title', TitleService)\n    .directive('title', title);\n}\n\ninit.init = true;\n","import { findIndex } from 'lodash';\n\nconst items = new Map();\n\nfunction checkItems() {\n  items.forEach((item, node) => {\n    const offsetWidth = node.offsetWidth;\n    const offsetHeight = node.offsetHeight;\n\n    if (\n      (item.offsetWidth !== offsetWidth) ||\n      (item.offsetHeight !== offsetHeight)\n    ) {\n      item.offsetWidth = offsetWidth;\n      item.offsetHeight = offsetHeight;\n      item.callback(node);\n    }\n  });\n\n  setTimeout(checkItems, 50);\n}\n\ncheckItems(); // ensure it was called only once!\n\nfunction resizeEvent() {\n  return {\n    restrict: 'A',\n    link($scope, $element, attrs) {\n      const node = $element[0];\n      if (!items.has(node)) {\n        items.set(node, {\n          callback: () => {\n            $scope.$evalAsync(attrs.resizeEvent);\n          },\n        });\n\n        $scope.$on('$destroy', () => {\n          const index = findIndex(items, item => item.node === node);\n          if (index >= 0) {\n            items.splice(index, 1); // remove item\n          }\n        });\n      }\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('resizeEvent', resizeEvent);\n}\n\ninit.init = true;\n","import { find } from 'lodash';\n\nfunction sameNumber(a, b) {\n  return (isNaN(a) && isNaN(b)) || (a === b);\n}\n\nconst flexBasis = find(\n  ['flexBasis', 'webkitFlexBasis', 'msFlexPreferredSize'],\n  prop => prop in document.documentElement.style,\n) || 'flexBasis';\n\nconst threshold = 5;\n\nfunction resizableToggle(KeyboardShortcuts) {\n  return {\n    link($scope, $element, $attrs) {\n      if ($attrs.resizable === 'false') return;\n\n      let ignoreResizeEvents = false;\n\n      let resizeStartInfo = null;\n      let allowHClick = true;\n      let allowVClick = true;\n      let lastWidth = $element.width();\n      let lastHeight = $element.height();\n\n      const isFlex = $scope.$eval($attrs.rFlex);\n\n      const shortcuts = {\n        [$attrs.toggleShortcut]: () => {\n          // It's a bit jQuery-way to handle this, but I really don't want\n          // to add any custom code that will detect resizer direction (keep\n          // in mind that this component is a hook to another 3dr-party one).\n          // So let's just find any available handle and \"click\" it, and let\n          // `angular-resizable` does it's job\n          $element.find('.rg-left, .rg-right, .rg-top, .rg-bottom').click();\n        },\n      };\n\n      KeyboardShortcuts.bind(shortcuts);\n      $scope.$on('$destroy', () => {\n        KeyboardShortcuts.unbind(shortcuts);\n      });\n\n      $scope.$on('angular-resizable.resizeStart', ($event, info) => {\n        if (!ignoreResizeEvents) {\n          resizeStartInfo = Object.assign({}, info);\n        }\n      });\n\n      $scope.$on('angular-resizable.resizeEnd', ($event, info) => {\n        if (!ignoreResizeEvents) {\n          allowHClick = true;\n          if (info.width !== false) {\n            allowHClick = sameNumber(info.width, resizeStartInfo.width);\n          }\n          allowVClick = true;\n          if (info.height !== false) {\n            allowVClick = sameNumber(info.height, resizeStartInfo.height);\n          }\n        }\n      });\n\n      function emulateAngularResizableEvents(width, height) {\n        ignoreResizeEvents = true;\n        const info = {\n          width,\n          height,\n          id: $element.attr('id'),\n          evt: null,\n        };\n        $scope.$emit('angular-resizable.resizeStart', info);\n        $scope.$emit('angular-resizable.resizing', info);\n        $scope.$emit('angular-resizable.resizeEnd', info);\n        ignoreResizeEvents = false;\n      }\n\n      $element.on('click', '.rg-left, .rg-right', () => {\n        if (allowHClick) {\n          const minSize = parseFloat($element.css('min-width')) + threshold;\n          const currentSize = $element.width();\n          const isCollapsed = currentSize <= minSize;\n          const animateProp = isFlex ? flexBasis : 'width';\n          if (isCollapsed) {\n            $element.animate({ [animateProp]: lastWidth + 'px' }, 300, () => {\n              emulateAngularResizableEvents(lastWidth, false);\n            });\n          } else {\n            lastWidth = currentSize;\n            $element\n              .css({ [animateProp]: currentSize + 'px' })\n              .animate({ [animateProp]: 0 }, 300, () => {\n                emulateAngularResizableEvents(0, false);\n              });\n          }\n        }\n      });\n\n      $element.on('click', '.rg-top, .rg-bottom', () => {\n        if (allowVClick) {\n          const minSize = parseFloat($element.css('min-height')) + threshold;\n          const currentSize = $element.height();\n          const isCollapsed = currentSize <= minSize;\n          const animateProp = isFlex ? flexBasis : 'height';\n          if (isCollapsed) {\n            $element.animate({ [animateProp]: lastHeight + 'px' }, 300, () => {\n              emulateAngularResizableEvents(false, lastHeight);\n            });\n          } else {\n            lastHeight = currentSize;\n            $element\n              .css({ [animateProp]: currentSize + 'px' })\n              .animate({ [animateProp]: 0 }, 300, () => {\n                emulateAngularResizableEvents(false, 0);\n              });\n          }\n        }\n      });\n    },\n  };\n}\n\nexport default function init(ngModule) {\n  ngModule.directive('resizableToggle', resizableToggle);\n}\n\ninit.init = true;\n","import autofocus from './autofocus';\nimport compareTo from './compare-to';\nimport title from './title';\nimport resizeEvent from './resize-event';\nimport resizableToggle from './resizable-toggle';\n\nexport default function init(ngModule) {\n  autofocus(ngModule);\n  compareTo(ngModule);\n  title(ngModule);\n  resizeEvent(ngModule);\n  resizableToggle(ngModule);\n}\n\ninit.init = true;\n","import { markdown } from 'markdown';\n\nexport default function init(ngModule) {\n  ngModule.filter('markdown', ($sce, clientConfig) => function parseMarkdown(text) {\n    if (!text) {\n      return '';\n    }\n\n    let html = markdown.toHTML(String(text));\n    if (clientConfig.allowScriptsInUserInput) {\n      html = $sce.trustAsHtml(html);\n    }\n\n    return html;\n  });\n}\n\ninit.init = true;\n","const dashboardGridOptions = {\n  columns: 6, // grid columns count\n  rowHeight: 50, // grid row height (incl. bottom padding)\n  margins: 15, // widget margins\n  mobileBreakPoint: 800,\n  // defaults for widgets\n  defaultSizeX: 3,\n  defaultSizeY: 3,\n  minSizeX: 1,\n  maxSizeX: 6,\n  minSizeY: 1,\n  maxSizeY: 1000,\n};\n\nexport default function init(ngModule) {\n  ngModule.constant('dashboardGridOptions', dashboardGridOptions);\n}\n\ninit.init = true;\n","import React from 'react';\nimport Spin from 'antd/lib/spin';\n\nSpin.setDefaultIndicator(<i className=\"fa fa-spinner fa-pulse\" />);\n","// This polyfill is needed to support PhantomJS which we use to generate PNGs from embeds.\nimport 'core-js/fn/typed/array-buffer';\n\n// Ensure that this image will be available in assets folder\nimport '@/assets/images/avatar.svg';\n\nimport * as Pace from 'pace-progress';\nimport debug from 'debug';\nimport angular from 'angular';\nimport ngSanitize from 'angular-sanitize';\nimport ngRoute from 'angular-route';\nimport ngResource from 'angular-resource';\nimport uiBootstrap from 'angular-ui-bootstrap';\nimport uiSelect from 'ui-select';\nimport ngMessages from 'angular-messages';\nimport ngUpload from 'angular-base64-upload';\nimport vsRepeat from 'angular-vs-repeat';\nimport 'brace';\nimport 'angular-ui-ace';\nimport 'angular-resizable';\nimport { each, isFunction, extend } from 'lodash';\n\nimport '@/lib/sortable';\n\nimport DialogWrapper from '@/components/DialogWrapper';\nimport organizationStatus from '@/services/organizationStatus';\n\nimport * as filters from '@/filters';\nimport registerDirectives from '@/directives';\nimport markdownFilter from '@/filters/markdown';\nimport dateTimeFilter from '@/filters/datetime';\nimport dashboardGridOptions from './dashboard-grid-options';\nimport './antd-spinner';\n\nconst logger = debug('redash:config');\n\nPace.options.shouldHandlePushState = (prevUrl, newUrl) => {\n  // Show pace progress bar only if URL path changed; when query params\n  // or hash changed - ignore that history event\n  const [prevPrefix] = prevUrl.split('?');\n  const [newPrefix] = newUrl.split('?');\n  return prevPrefix !== newPrefix;\n};\n\nconst requirements = [\n  ngRoute,\n  ngResource,\n  ngSanitize,\n  uiBootstrap,\n  ngMessages,\n  uiSelect,\n  'ui.ace',\n  ngUpload,\n  'angularResizable',\n  vsRepeat,\n  'ui.sortable',\n];\n\nconst ngModule = angular.module('app', requirements);\n\ndashboardGridOptions(ngModule);\n\nfunction registerAll(context) {\n  const modules = context\n    .keys()\n    .map(context)\n    .map(module => module.default);\n\n  return modules\n    .filter(isFunction)\n    .filter(f => f.init)\n    .map(f => f(ngModule));\n}\n\nfunction requireImages() {\n  // client/app/assets/images/<path> => /images/<path>\n  const ctx = require.context('@/assets/images/', true, /\\.(png|jpe?g|gif|svg)$/);\n  ctx.keys().forEach(ctx);\n}\n\nfunction registerComponents() {\n  // We repeat this code in other register functions, because if we don't use a literal for the path\n  // Webpack won't be able to statcily analyze our imports.\n  const context = require.context('@/components', true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  registerAll(context);\n}\n\nfunction registerExtensions() {\n  const context = require.context('extensions', true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  registerAll(context);\n}\n\nfunction registerServices() {\n  const context = require.context('@/services', true, /^((?![\\\\/.]test[\\\\./]).)*\\.js$/);\n  registerAll(context);\n}\n\nfunction registerVisualizations() {\n  const context = require.context('@/visualizations', true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  registerAll(context);\n}\n\nfunction registerPages() {\n  const context = require.context('@/pages', true, /^((?![\\\\/.]test[\\\\./]).)*\\.jsx?$/);\n  const routesCollection = registerAll(context);\n  routesCollection.forEach((routes) => {\n    ngModule.config(($routeProvider) => {\n      each(routes, (route, path) => {\n        logger('Registering route: %s', path);\n        route.authenticated = true;\n        route.resolve = extend(\n          {\n            __organizationStatus: () => organizationStatus.refresh(),\n          },\n          route.resolve,\n        );\n        $routeProvider.when(path, route);\n      });\n    });\n  });\n\n  ngModule.config(($routeProvider) => {\n    $routeProvider.otherwise({\n      resolve: {\n        // Ugly hack to show 404 when hitting an unknown route.\n        error: () => {\n          const error = { status: 404 };\n          throw error;\n        },\n      },\n    });\n  });\n}\n\nfunction registerFilters() {\n  each(filters, (filter, name) => {\n    ngModule.filter(name, () => filter);\n  });\n}\n\nrequireImages();\nregisterDirectives(ngModule);\nregisterServices();\nregisterFilters();\nmarkdownFilter(ngModule);\ndateTimeFilter(ngModule);\nregisterComponents();\nregisterPages();\nregisterExtensions();\nregisterVisualizations(ngModule);\n\nngModule.run(($q) => {\n  DialogWrapper.Promise = $q;\n});\n\nexport default ngModule;\n","import ngModule from '@/config';\n\nngModule.config(($locationProvider, $compileProvider, uiSelectConfig) => {\n  $compileProvider.debugInfoEnabled(false);\n  $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|data|tel|sms|mailto):/);\n  $locationProvider.html5Mode(true);\n  uiSelectConfig.theme = 'bootstrap';\n});\n\n// Update ui-select's template to use Font-Awesome instead of glyphicon.\nngModule.run(($templateCache) => {\n  const templateName = 'bootstrap/match.tpl.html';\n  let template = $templateCache.get(templateName);\n  template = template.replace('glyphicon glyphicon-remove', 'fa fa-remove');\n  $templateCache.put(templateName, template);\n});\n\nexport default ngModule;\n","import { sortBy } from 'lodash';\n\nexport default class Paginator {\n  constructor(rows, { page = 1, itemsPerPage = 20, totalCount = undefined } = {}) {\n    this.page = page;\n    this.itemsPerPage = itemsPerPage;\n    this.updateRows(rows, totalCount);\n    this.orderByField = undefined;\n    this.orderByReverse = false;\n  }\n\n  setPage(page) {\n    this.page = page;\n  }\n\n  getPageRows() {\n    const first = this.itemsPerPage * (this.page - 1);\n    const last = this.itemsPerPage * (this.page);\n\n    return this.rows.slice(first, last);\n  }\n\n  updateRows(rows, totalCount = undefined) {\n    this.rows = rows;\n    if (this.rows) {\n      this.totalCount = totalCount || rows.length;\n    } else {\n      this.totalCount = 0;\n    }\n  }\n\n  orderBy(column) {\n    if (column === this.orderByField) {\n      this.orderByReverse = !this.orderByReverse;\n    } else {\n      this.orderByField = column;\n      this.orderByReverse = false;\n    }\n\n    if (this.orderByField) {\n      this.rows = sortBy(this.rows, this.orderByField);\n      if (this.orderByReverse) {\n        this.rows = this.rows.reverse();\n      }\n    }\n  }\n}\n","import settingsMenu from '@/services/settingsMenu';\nimport { Paginator } from '@/lib/pagination';\nimport template from './list.html';\n\nfunction SnippetsCtrl($location, currentUser, QuerySnippet) {\n  this.snippets = new Paginator([], { itemsPerPage: 20 });\n  QuerySnippet.query((snippets) => {\n    this.snippets.updateRows(snippets);\n  });\n}\n\nexport default function init(ngModule) {\n  settingsMenu.add({\n    permission: 'create_query',\n    title: 'Query Snippets',\n    path: 'query_snippets',\n    order: 5,\n  });\n\n  ngModule.component('snippetsListPage', {\n    template,\n    controller: SnippetsCtrl,\n  });\n\n  return {\n    '/query_snippets': {\n      template: '<snippets-list-page></snippets-list-page>',\n      title: 'Query Snippets',\n    },\n  };\n}\n\ninit.init = true;\n","/* eslint-disable */\n// Inspired by http://informationandvisualization.de/blog/box-plot\nfunction box() {\n  let width = 1,\n    height = 1,\n    duration = 0,\n    domain = null,\n    value = Number,\n    whiskers = boxWhiskers,\n    quartiles = boxQuartiles,\n    tickFormat = null;\n\n  // For each small multiple\n  function box(g) {\n    g.each(function(d, i) {\n      d = d.map(value).sort(d3.ascending);\n      let g = d3.select(this),\n        n = d.length,\n        min = d[0],\n        max = d[n - 1];\n\n      // Compute quartiles. Must return exactly 3 elements.\n      const quartileData = (d.quartiles = quartiles(d));\n\n      // Compute whiskers. Must return exactly 2 elements, or null.\n      let whiskerIndices = whiskers && whiskers.call(this, d, i),\n        whiskerData = whiskerIndices && whiskerIndices.map(i => d[i]);\n\n      // Compute outliers. If no whiskers are specified, all data are \"outliers\".\n      // We compute the outliers as indices, so that we can join across transitions!\n      const outlierIndices = whiskerIndices\n        ? d3.range(0, whiskerIndices[0]).concat(d3.range(whiskerIndices[1] + 1, n))\n        : d3.range(n);\n\n      // Compute the new x-scale.\n      const x1 = d3.scale\n        .linear()\n        .domain((domain && domain.call(this, d, i)) || [min, max])\n        .range([height, 0]);\n\n      // Retrieve the old x-scale, if this is an update.\n      const x0 =\n        this.__chart__ ||\n        d3.scale\n          .linear()\n          .domain([0, Infinity])\n          .range(x1.range());\n\n      // Stash the new scale.\n      this.__chart__ = x1;\n\n      // Note: the box, median, and box tick elements are fixed in number,\n      // so we only have to handle enter and update. In contrast, the outliers\n      // and other elements are variable, so we need to exit them! Variable\n      // elements also fade in and out.\n\n      // Update center line: the vertical line spanning the whiskers.\n      const center = g.selectAll('line.center').data(whiskerData ? [whiskerData] : []);\n\n      center\n        .enter()\n        .insert('line', 'rect')\n        .attr('class', 'center')\n        .attr('x1', width / 2)\n        .attr('y1', d => x0(d[0]))\n        .attr('x2', width / 2)\n        .attr('y2', d => x0(d[1]))\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .style('opacity', 1)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]));\n\n      center\n        .transition()\n        .duration(duration)\n        .style('opacity', 1)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]));\n\n      center\n        .exit()\n        .transition()\n        .duration(duration)\n        .style('opacity', 1e-6)\n        .attr('y1', d => x1(d[0]))\n        .attr('y2', d => x1(d[1]))\n        .remove();\n\n      // Update innerquartile box.\n      const box = g.selectAll('rect.box').data([quartileData]);\n\n      box\n        .enter()\n        .append('rect')\n        .attr('class', 'box')\n        .attr('x', 0)\n        .attr('y', d => x0(d[2]))\n        .attr('width', width)\n        .attr('height', d => x0(d[0]) - x0(d[2]))\n        .transition()\n        .duration(duration)\n        .attr('y', d => x1(d[2]))\n        .attr('height', d => x1(d[0]) - x1(d[2]));\n\n      box\n        .transition()\n        .duration(duration)\n        .attr('y', d => x1(d[2]))\n        .attr('height', d => x1(d[0]) - x1(d[2]));\n\n      box.exit().remove();\n\n      // Update median line.\n      const medianLine = g.selectAll('line.median').data([quartileData[1]]);\n\n      medianLine\n        .enter()\n        .append('line')\n        .attr('class', 'median')\n        .attr('x1', 0)\n        .attr('y1', x0)\n        .attr('x2', width)\n        .attr('y2', x0)\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1);\n\n      medianLine\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1);\n\n      medianLine.exit().remove();\n\n      // Update whiskers.\n      const whisker = g.selectAll('line.whisker').data(whiskerData || []);\n\n      whisker\n        .enter()\n        .insert('line', 'circle, text')\n        .attr('class', 'whisker')\n        .attr('x1', 0)\n        .attr('y1', x0)\n        .attr('x2', width)\n        .attr('y2', x0)\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1);\n\n      whisker\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1);\n\n      whisker\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('y1', x1)\n        .attr('y2', x1)\n        .style('opacity', 1e-6)\n        .remove();\n\n      // Update outliers.\n      const outlier = g.selectAll('circle.outlier').data(outlierIndices, Number);\n\n      outlier\n        .enter()\n        .insert('circle', 'text')\n        .attr('class', 'outlier')\n        .attr('r', 5)\n        .attr('cx', width / 2)\n        .attr('cy', i => x0(d[i]))\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1);\n\n      outlier\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1);\n\n      outlier\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('cy', i => x1(d[i]))\n        .style('opacity', 1e-6)\n        .remove();\n\n      // Compute the tick format.\n      const format = tickFormat || x1.tickFormat(8);\n\n      // Update box ticks.\n      const boxTick = g.selectAll('text.box').data(quartileData);\n\n      boxTick\n        .enter()\n        .append('text')\n        .attr('class', 'box')\n        .attr('dy', '.3em')\n        .attr('dx', (d, i) => (i & 1 ? 6 : -6))\n        .attr('x', (d, i) => (i & 1 ? width : 0))\n        .attr('y', x0)\n        .attr('text-anchor', (d, i) => (i & 1 ? 'start' : 'end'))\n        .text(format)\n        .transition()\n        .duration(duration)\n        .attr('y', x1);\n\n      boxTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr('y', x1);\n\n      boxTick.exit().remove();\n\n      // Update whisker ticks. These are handled separately from the box\n      // ticks because they may or may not exist, and we want don't want\n      // to join box ticks pre-transition with whisker ticks post-.\n      const whiskerTick = g.selectAll('text.whisker').data(whiskerData || []);\n\n      whiskerTick\n        .enter()\n        .append('text')\n        .attr('class', 'whisker')\n        .attr('dy', '.3em')\n        .attr('dx', 6)\n        .attr('x', width)\n        .attr('y', x0)\n        .text(format)\n        .style('opacity', 1e-6)\n        .transition()\n        .duration(duration)\n        .attr('y', x1)\n        .style('opacity', 1);\n\n      whiskerTick\n        .transition()\n        .duration(duration)\n        .text(format)\n        .attr('y', x1)\n        .style('opacity', 1);\n\n      whiskerTick\n        .exit()\n        .transition()\n        .duration(duration)\n        .attr('y', x1)\n        .style('opacity', 1e-6)\n        .remove();\n    });\n    d3.timer.flush();\n  }\n\n  box.width = function(x) {\n    if (!arguments.length) return width;\n    width = x;\n    return box;\n  };\n\n  box.height = function(x) {\n    if (!arguments.length) return height;\n    height = x;\n    return box;\n  };\n\n  box.tickFormat = function(x) {\n    if (!arguments.length) return tickFormat;\n    tickFormat = x;\n    return box;\n  };\n\n  box.duration = function(x) {\n    if (!arguments.length) return duration;\n    duration = x;\n    return box;\n  };\n\n  box.domain = function(x) {\n    if (!arguments.length) return domain;\n    domain = x == null ? x : d3.functor(x);\n    return box;\n  };\n\n  box.value = function(x) {\n    if (!arguments.length) return value;\n    value = x;\n    return box;\n  };\n\n  box.whiskers = function(x) {\n    if (!arguments.length) return whiskers;\n    whiskers = x;\n    return box;\n  };\n\n  box.quartiles = function(x) {\n    if (!arguments.length) return quartiles;\n    quartiles = x;\n    return box;\n  };\n\n  return box;\n}\n\nfunction boxWhiskers(d) {\n  return [0, d.length - 1];\n}\n\nfunction boxQuartiles(d) {\n  return [d3.quantile(d, 0.25), d3.quantile(d, 0.5), d3.quantile(d, 0.75)];\n}\n\nexport default box;\n","import { map } from 'lodash';\nimport d3 from 'd3';\nimport { angular2react } from 'angular2react';\nimport box from '@/lib/visualizations/d3box';\nimport { registerVisualization } from '@/visualizations';\n\nimport Editor from './Editor';\n\nconst BoxPlotRenderer = {\n  template: '<div resize-event=\"handleResize()\"></div>',\n  bindings: {\n    data: '<',\n    options: '<',\n  },\n  controller($scope, $element) {\n    const container = $element[0].querySelector('div');\n\n    function calcIqr(k) {\n      return (d) => {\n        const q1 = d.quartiles[0];\n        const q3 = d.quartiles[2];\n        const iqr = (q3 - q1) * k;\n\n        let i = -1;\n        let j = d.length;\n\n        // eslint-disable-next-line no-plusplus\n        while (d[++i] < q1 - iqr);\n        // eslint-disable-next-line no-plusplus\n        while (d[--j] > q3 + iqr);\n        return [i, j];\n      };\n    }\n\n    const update = () => {\n      const data = this.data.rows;\n      const parentWidth = container.offsetWidth;\n      const margin = {\n        top: 10, right: 50, bottom: 40, left: 50, inner: 25,\n      };\n      const width = parentWidth - margin.right - margin.left;\n      const height = 500 - margin.top - margin.bottom;\n\n      let min = Infinity;\n      let max = -Infinity;\n      const mydata = [];\n      let value = 0;\n      let d = [];\n      const xAxisLabel = this.options.xAxisLabel;\n      const yAxisLabel = this.options.yAxisLabel;\n\n      const columns = map(this.data.columns, col => col.name);\n      const xscale = d3.scale.ordinal()\n        .domain(columns)\n        .rangeBands([0, parentWidth - margin.left - margin.right]);\n\n      let boxWidth;\n      if (columns.length > 1) {\n        boxWidth = Math.min(xscale(columns[1]), 120.0);\n      } else {\n        boxWidth = 120.0;\n      }\n      margin.inner = boxWidth / 3.0;\n\n      columns.forEach((column, i) => {\n        d = mydata[i] = [];\n        data.forEach((row) => {\n          value = row[column];\n          d.push(value);\n          if (value > max) max = Math.ceil(value);\n          if (value < min) min = Math.floor(value);\n        });\n      });\n\n      const yscale = d3.scale.linear()\n        .domain([min * 0.99, max * 1.01])\n        .range([height, 0]);\n\n      const chart = box()\n        .whiskers(calcIqr(1.5))\n        .width(boxWidth - 2 * margin.inner)\n        .height(height)\n        .domain([min * 0.99, max * 1.01]);\n      const xAxis = d3.svg.axis()\n        .scale(xscale)\n        .orient('bottom');\n\n\n      const yAxis = d3.svg.axis()\n        .scale(yscale)\n        .orient('left');\n\n      const xLines = d3.svg.axis()\n        .scale(xscale)\n        .tickSize(height)\n        .orient('bottom');\n\n      const yLines = d3.svg.axis()\n        .scale(yscale)\n        .tickSize(width)\n        .orient('right');\n\n      function barOffset(i) {\n        return xscale(columns[i]) + (xscale(columns[1]) - margin.inner) / 2.0;\n      }\n\n      d3.select(container).selectAll('*').remove();\n\n      const svg = d3.select(container).append('svg')\n        .attr('width', parentWidth)\n        .attr('height', height + margin.bottom + margin.top);\n\n      const plot = svg.append('g')\n        .attr('width', parentWidth - margin.left - margin.right)\n        .attr('transform', `translate(${margin.left},${margin.top})`);\n\n      svg.append('text')\n        .attr('class', 'box')\n        .attr('x', parentWidth / 2.0)\n        .attr('text-anchor', 'middle')\n        .attr('y', height + margin.bottom)\n        .text(xAxisLabel);\n\n      svg.append('text')\n        .attr('class', 'box')\n        .attr('transform', `translate(10,${(height + margin.top + margin.bottom) / 2.0})rotate(-90)`)\n        .attr('text-anchor', 'middle')\n        .text(yAxisLabel);\n\n      plot.append('rect')\n        .attr('class', 'grid-background')\n        .attr('width', width)\n        .attr('height', height);\n\n      plot.append('g')\n        .attr('class', 'grid')\n        .call(yLines);\n\n      plot.append('g')\n        .attr('class', 'grid')\n        .call(xLines);\n\n      plot.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', `translate(0,${height})`)\n        .call(xAxis);\n\n      plot.append('g')\n        .attr('class', 'y axis')\n        .call(yAxis);\n\n      plot.selectAll('.box').data(mydata)\n        .enter().append('g')\n        .attr('class', 'box')\n        .attr('width', boxWidth)\n        .attr('height', height)\n        .attr('transform', (_, i) => `translate(${barOffset(i)},${0})`)\n        .call(chart);\n    };\n\n    $scope.handleResize = update;\n\n    $scope.$watch('$ctrl.data', update);\n    $scope.$watch('$ctrl.options', update, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('boxplotRenderer', BoxPlotRenderer);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'BOXPLOT',\n      name: 'Boxplot (Deprecated)',\n      isDeprecated: true,\n      getOptions: options => ({ ...options }),\n      Renderer: angular2react('boxplotRenderer', BoxPlotRenderer, $injector),\n      Editor,\n\n      defaultRows: 8,\n      minRows: 5,\n    });\n  });\n}\n\ninit.init = true;\n","/* eslint-disable */\n\nimport d3 from 'd3';\n\nfunction center(node) {\n  return node.y + node.dy / 2;\n}\n\nfunction value(link) {\n  return link.value;\n}\n\nfunction Sankey() {\n  const sankey = {};\n  let nodeWidth = 24;\n  let nodePadding = 8;\n  let size = [1, 1];\n  let nodes = [];\n  let links = [];\n\n  // Populate the sourceLinks and targetLinks for each node.\n  // Also, if the source and target are not objects, assume they are indices.\n  function computeNodeLinks() {\n    nodes.forEach(node => {\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n    links.forEach(link => {\n      let source = link.source;\n      let target = link.target;\n      if (typeof source === 'number') source = link.source = nodes[link.source];\n      if (typeof target === 'number') target = link.target = nodes[link.target];\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n  }\n\n  // Compute the value (size) of each node by summing the associated links.\n  function computeNodeValues() {\n    nodes.forEach(node => {\n      node.value = Math.max(d3.sum(node.sourceLinks, value), d3.sum(node.targetLinks, value));\n    });\n  }\n\n  function moveSinksRight(x) {\n    nodes.forEach(node => {\n      if (!node.sourceLinks.length) {\n        node.x = x - 1;\n      }\n    });\n  }\n\n  function scaleNodeBreadths(kx) {\n    nodes.forEach(node => {\n      node.x *= kx;\n    });\n  }\n\n  // Iteratively assign the breadth (x-position) for each node.\n  // Nodes are assigned the maximum breadth of incoming neighbors plus one;\n  // nodes with no incoming links are assigned breadth zero, while\n  // nodes with no outgoing links are assigned the maximum breadth.\n  function computeNodeBreadths() {\n    let remainingNodes = nodes;\n    let nextNodes;\n    let x = 0;\n\n    function assignBreadth(node) {\n      node.x = x;\n      node.dx = nodeWidth;\n      node.sourceLinks.forEach(link => {\n        if (nextNodes.indexOf(link.target) < 0) {\n          nextNodes.push(link.target);\n        }\n      });\n    }\n\n    while (remainingNodes.length) {\n      nextNodes = [];\n      remainingNodes.forEach(assignBreadth);\n      remainingNodes = nextNodes;\n      x += 1;\n    }\n\n    //\n    moveSinksRight(x);\n    scaleNodeBreadths((size[0] - nodeWidth) / (x - 1));\n  }\n\n  function moveSourcesRight() {\n    nodes.forEach(node => {\n      if (!node.targetLinks.length) {\n        node.x = d3.min(node.sourceLinks, d => d.target.x) - 1;\n      }\n    });\n  }\n\n  function computeNodeDepths(iterations) {\n    const nodesByBreadth = d3\n      .nest()\n      .key(d => d.x)\n      .sortKeys(d3.ascending)\n      .entries(nodes)\n      .map(d => d.values);\n\n    function initializeNodeDepth() {\n      const ky = d3.min(\n        nodesByBreadth,\n        n => (size[1] - (n.length - 1) * nodePadding) / d3.sum(n, value),\n      );\n\n      nodesByBreadth.forEach(n => {\n        n.forEach((node, i) => {\n          node.y = i;\n          node.dy = node.value * ky;\n        });\n      });\n\n      links.forEach(link => {\n        link.dy = link.value * ky;\n      });\n    }\n\n    function relaxLeftToRight(alpha) {\n      function weightedSource(link) {\n        return center(link.source) * link.value;\n      }\n\n      nodesByBreadth.forEach(n => {\n        n.forEach(node => {\n          if (node.targetLinks.length) {\n            const y = d3.sum(node.targetLinks, weightedSource) / d3.sum(node.targetLinks, value);\n            node.y += (y - center(node)) * alpha;\n          }\n        });\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(nodes => {\n        const n = nodes.length;\n        let node;\n        let dy;\n        let y0 = 0;\n        let i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    function resolveCollisions() {\n      nodesByBreadth.forEach(nodes => {\n        let node,\n          dy,\n          y0 = 0,\n          n = nodes.length,\n          i;\n\n        // Push any overlapping nodes down.\n        nodes.sort(ascendingDepth);\n        for (i = 0; i < n; ++i) {\n          node = nodes[i];\n          dy = y0 - node.y;\n          if (dy > 0) node.y += dy;\n          y0 = node.y + node.dy + nodePadding;\n        }\n\n        // If the bottommost node goes outside the bounds, push it back up.\n        dy = y0 - nodePadding - size[1];\n        if (dy > 0) {\n          y0 = node.y -= dy;\n\n          // Push any overlapping nodes back up.\n          for (i = n - 2; i >= 0; --i) {\n            node = nodes[i];\n            dy = node.y + node.dy + nodePadding - y0;\n            if (dy > 0) node.y -= dy;\n            y0 = node.y;\n          }\n        }\n      });\n    }\n\n    initializeNodeDepth();\n    resolveCollisions();\n\n    for (let alpha = 1; iterations > 0; iterations -= 1) {\n      relaxRightToLeft((alpha *= 0.99));\n      resolveCollisions();\n      relaxLeftToRight(alpha);\n      resolveCollisions();\n    }\n\n    function relaxRightToLeft(alpha) {\n      nodesByBreadth\n        .slice()\n        .reverse()\n        .forEach(nodes => {\n          nodes.forEach(node => {\n            if (node.sourceLinks.length) {\n              const y = d3.sum(node.sourceLinks, weightedTarget) / d3.sum(node.sourceLinks, value);\n              node.y += (y - center(node)) * alpha;\n            }\n          });\n        });\n\n      function weightedTarget(link) {\n        return center(link.target) * link.value;\n      }\n    }\n\n    function ascendingDepth(a, b) {\n      return a.y - b.y;\n    }\n  }\n\n  function computeLinkDepths() {\n    nodes.forEach(node => {\n      node.sourceLinks.sort(ascendingTargetDepth);\n      node.targetLinks.sort(ascendingSourceDepth);\n    });\n    nodes.forEach(node => {\n      let sy = 0,\n        ty = 0;\n      node.sourceLinks.forEach(link => {\n        link.sy = sy;\n        sy += link.dy;\n      });\n      node.targetLinks.forEach(link => {\n        link.ty = ty;\n        ty += link.dy;\n      });\n    });\n\n    function ascendingSourceDepth(a, b) {\n      return a.source.y - b.source.y;\n    }\n\n    function ascendingTargetDepth(a, b) {\n      return a.target.y - b.target.y;\n    }\n  }\n\n  sankey.nodeWidth = function(_) {\n    if (!arguments.length) return nodeWidth;\n    nodeWidth = +_;\n    return sankey;\n  };\n\n  sankey.nodePadding = function(_) {\n    if (!arguments.length) return nodePadding;\n    nodePadding = +_;\n    return sankey;\n  };\n\n  sankey.nodes = function(_) {\n    if (!arguments.length) return nodes;\n    nodes = _;\n    return sankey;\n  };\n\n  sankey.links = function(_) {\n    if (!arguments.length) return links;\n    links = _;\n    return sankey;\n  };\n\n  sankey.size = function(_) {\n    if (!arguments.length) return size;\n    size = _;\n    return sankey;\n  };\n\n  sankey.layout = function(iterations) {\n    computeNodeLinks();\n    computeNodeValues();\n    computeNodeBreadths();\n    computeNodeDepths(iterations);\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.relayout = function() {\n    computeLinkDepths();\n    return sankey;\n  };\n\n  sankey.link = function() {\n    let curvature = 0.5;\n\n    function link(d) {\n      const x0 = d.source.x + d.source.dx;\n      const x1 = d.target.x;\n      const xi = d3.interpolateNumber(x0, x1);\n      const x2 = xi(curvature);\n      const x3 = xi(1 - curvature);\n      const y0 = d.source.y + d.sy + d.dy / 2;\n      const y1 = d.target.y + d.ty + d.dy / 2;\n\n      return `M${x0},${y0}C${x2},${y0} ${x3},${y1} ${x1},${y1}`;\n    }\n\n    link.curvature = _ => {\n      if (!arguments.length) return curvature;\n      curvature = +_;\n      return link;\n    };\n\n    return link;\n  };\n\n  return sankey;\n}\n\nexport default Sankey;\n","import angular from 'angular';\nimport _ from 'lodash';\nimport d3 from 'd3';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\n\nimport d3sankey from '@/lib/visualizations/d3sankey';\n\nimport Editor from './Editor';\n\nfunction getConnectedNodes(node) {\n  // source link = this node is the source, I need the targets\n  const nodes = [];\n  node.sourceLinks.forEach((link) => {\n    nodes.push(link.target);\n  });\n  node.targetLinks.forEach((link) => {\n    nodes.push(link.source);\n  });\n\n  return nodes;\n}\n\nfunction graph(data) {\n  const nodesDict = {};\n  const links = {};\n  const nodes = [];\n\n  // ANGULAR_REMOVE_ME $$ check is for Angular's internal properties\n  const validKey = key => key !== 'value' && key.indexOf('$$') !== 0;\n  const keys = _.sortBy(_.filter(_.keys(data[0]), validKey), _.identity);\n\n  function normalizeName(name) {\n    if (!_.isNil(name)) {\n      return '' + name;\n    }\n\n    return 'Exit';\n  }\n\n  function getNode(name, level) {\n    name = normalizeName(name);\n    const key = `${name}:${String(level)}`;\n    let node = nodesDict[key];\n    if (!node) {\n      node = { name };\n      node.id = nodes.push(node) - 1;\n      nodesDict[key] = node;\n    }\n    return node;\n  }\n\n  function getLink(source, target) {\n    let link = links[[source, target]];\n    if (!link) {\n      link = { target, source, value: 0 };\n      links[[source, target]] = link;\n    }\n\n    return link;\n  }\n\n  function addLink(sourceName, targetName, value, depth) {\n    if ((sourceName === '' || !sourceName) && depth > 1) {\n      return;\n    }\n\n    const source = getNode(sourceName, depth);\n    const target = getNode(targetName, depth + 1);\n    const link = getLink(source.id, target.id);\n    link.value += parseInt(value, 10);\n  }\n\n  data.forEach((row) => {\n    addLink(row[keys[0]], row[keys[1]], row.value || 0, 1);\n    addLink(row[keys[1]], row[keys[2]], row.value || 0, 2);\n    addLink(row[keys[2]], row[keys[3]], row.value || 0, 3);\n    addLink(row[keys[3]], row[keys[4]], row.value || 0, 4);\n  });\n\n  return { nodes, links: _.values(links) };\n}\n\nfunction spreadNodes(height, data) {\n  const nodesByBreadth = d3\n    .nest()\n    .key(d => d.x)\n    .entries(data.nodes)\n    .map(d => d.values);\n\n  nodesByBreadth.forEach((nodes) => {\n    nodes = _.filter(_.sortBy(nodes, node => -node.value), node => node.name !== 'Exit');\n\n    const sum = d3.sum(nodes, o => o.dy);\n    const padding = (height - sum) / nodes.length;\n\n    _.reduce(\n      nodes,\n      (y0, node) => {\n        node.y = y0;\n        return y0 + node.dy + padding;\n      },\n      0,\n    );\n  });\n}\n\nfunction createSankey(element, data) {\n  const margin = {\n    top: 10,\n    right: 10,\n    bottom: 10,\n    left: 10,\n  };\n  const width = element.offsetWidth - margin.left - margin.right;\n  const height = element.offsetHeight - margin.top - margin.bottom;\n\n  if (width <= 0 || height <= 0) {\n    return;\n  }\n\n  const format = d => d3.format(',.0f')(d);\n  const color = d3.scale.category20();\n\n  data = graph(data);\n  data.nodes = _.map(data.nodes, d => _.extend(d, { color: color(d.name.replace(/ .*/, '')) }));\n\n  // append the svg canvas to the page\n  const svg = d3\n    .select(element)\n    .append('svg')\n    .attr('class', 'sankey')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  // Set the sankey diagram properties\n  const sankey = d3sankey()\n    .nodeWidth(15)\n    .nodePadding(10)\n    .size([width, height]);\n\n  const path = sankey.link();\n\n  sankey\n    .nodes(data.nodes)\n    .links(data.links)\n    .layout(0);\n\n  spreadNodes(height, data);\n  sankey.relayout();\n\n  // add in the links\n  const link = svg\n    .append('g')\n    .selectAll('.link')\n    .data(data.links)\n    .enter()\n    .append('path')\n    .filter(l => l.target.name !== 'Exit')\n    .attr('class', 'link')\n    .attr('d', path)\n    .style('stroke-width', d => Math.max(1, d.dy))\n    .sort((a, b) => b.dy - a.dy);\n\n  // add the link titles\n  link.append('title').text(d => `${d.source.name}  ${d.target.name}\\n${format(d.value)}`);\n\n  const node = svg\n    .append('g')\n    .selectAll('.node')\n    .data(data.nodes)\n    .enter()\n    .append('g')\n    .filter(n => n.name !== 'Exit')\n    .attr('class', 'node')\n    .attr('transform', d => `translate(${d.x},${d.y})`);\n\n  function nodeMouseOver(currentNode) {\n    let nodes = getConnectedNodes(currentNode);\n    nodes = _.map(nodes, i => i.id);\n    node\n      .filter((d) => {\n        if (d === currentNode) {\n          return false;\n        }\n        return !_.includes(nodes, d.id);\n      })\n      .style('opacity', 0.2);\n    link\n      .filter(l => !(_.includes(currentNode.sourceLinks, l) || _.includes(currentNode.targetLinks, l)))\n      .style('opacity', 0.2);\n  }\n\n  function nodeMouseOut() {\n    node.style('opacity', 1);\n    link.style('opacity', 1);\n  }\n\n  // add in the nodes\n  node.on('mouseover', nodeMouseOver).on('mouseout', nodeMouseOut);\n\n  // add the rectangles for the nodes\n  node\n    .append('rect')\n    .attr('height', d => d.dy)\n    .attr('width', sankey.nodeWidth())\n    .style('fill', d => d.color)\n    .style('stroke', d => d3.rgb(d.color).darker(2))\n    .append('title')\n    .text(d => `${d.name}\\n${format(d.value)}`);\n\n  // add in the title for the nodes\n  node\n    .append('text')\n    .attr('x', -6)\n    .attr('y', d => d.dy / 2)\n    .attr('dy', '.35em')\n    .attr('text-anchor', 'end')\n    .attr('transform', null)\n    .text(d => d.name)\n    .filter(d => d.x < width / 2)\n    .attr('x', 6 + sankey.nodeWidth())\n    .attr('text-anchor', 'start');\n}\n\nfunction isDataValid(data) {\n  // data should contain column named 'value', otherwise no reason to render anything at all\n  return _.find(data.columns, c => c.name === 'value');\n}\n\nconst SankeyRenderer = {\n  template: '<div class=\"sankey-visualization-container\" resize-event=\"handleResize()\"></div>',\n  bindings: {\n    data: '<',\n    options: '<',\n  },\n  controller($scope, $element) {\n    const container = $element[0].querySelector('.sankey-visualization-container');\n\n    const update = () => {\n      if (this.data) {\n        // do the render logic.\n        angular.element(container).empty();\n        if (isDataValid(this.data)) {\n          createSankey(container, this.data.rows);\n        }\n      }\n    };\n\n    $scope.handleResize = _.debounce(update, 50);\n\n    $scope.$watch('$ctrl.data', update);\n    $scope.$watch('$ctrl.options', update, true);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('sankeyRenderer', SankeyRenderer);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'SANKEY',\n      name: 'Sankey',\n      getOptions: options => ({ ...options }),\n      Renderer: angular2react('sankeyRenderer', SankeyRenderer, $injector),\n      Editor,\n\n      defaultRows: 7,\n    });\n  });\n}\n\ninit.init = true;\n","import * as d3 from 'd3';\nimport _ from 'lodash';\nimport angular from 'angular';\n\nconst exitNode = '<<<Exit>>>';\nconst colors = d3.scale.category10();\n\n// helper function colorMap - color gray if \"end\" is detected\nfunction colorMap(d) {\n  return colors(d.name);\n}\n\n// Return array of ancestors of nodes, highest first, but excluding the root.\nfunction getAncestors(node) {\n  const path = [];\n  let current = node;\n\n  while (current.parent) {\n    path.unshift(current);\n    current = current.parent;\n  }\n  return path;\n}\n\n// The following is based on @chrisrzhou's example from: http://bl.ocks.org/chrisrzhou/d5bdd8546f64ca0e4366.\nfunction Sunburst(scope, element) {\n  this.element = element;\n  this.watches = [];\n\n  // svg dimensions\n  const width = element.clientWidth;\n  const height = element.offsetHeight;\n\n  // Breadcrumb dimensions: width, height, spacing, width of tip/tail.\n  const b = {\n    w: width / 6,\n    h: 30,\n    s: 3,\n    t: 10,\n  };\n\n  const radius = Math.min(width - b.h, height - b.h) / 2 - 5;\n  if (radius <= 0) {\n    return;\n  }\n\n  // margins\n  const margin = {\n    top: radius,\n    bottom: 50,\n    left: radius,\n    right: 0,\n  };\n\n  /**\n   * Drawing variables:\n   *\n   * e.g. colors, totalSize, partitions, arcs\n   */\n  // Mapping of nodes to colorscale.\n\n  // Total size of all nodes, to be used later when data is loaded\n  let totalSize = 0;\n\n  // create d3.layout.partition\n  const partition = d3.layout\n    .partition()\n    .size([2 * Math.PI, radius * radius])\n    .value(d => d.size);\n\n  // create arcs for drawing D3 paths\n  const arc = d3.svg\n    .arc()\n    .startAngle(d => d.x)\n    .endAngle(d => d.x + d.dx)\n    .innerRadius(d => Math.sqrt(d.y))\n    .outerRadius(d => Math.sqrt(d.y + d.dy));\n\n  /**\n   * Define and initialize D3 select references and div-containers\n   *\n   * e.g. vis, breadcrumbs, lastCrumb, summary, sunburst, legend\n   */\n  const vis = d3.select(element);\n\n  // create and position breadcrumbs container and svg\n  const breadcrumbs = vis\n    .append('div')\n    .classed('breadcrumbs-container', true)\n    .append('svg')\n    .attr('width', width)\n    .attr('height', b.h)\n    .attr('fill', 'white')\n    .attr('font-weight', 600);\n\n  // create and position SVG\n  const container = vis.append('div');\n\n  // create and position summary container\n  const summary = container\n    .append('div')\n    .classed('summary-container', true);\n\n  const sunburst = container\n    .append('div')\n    .classed('sunburst-container', true)\n    .append('svg')\n    .attr('width', radius * 2)\n    .attr('height', radius * 2)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  // create last breadcrumb element\n  const lastCrumb = breadcrumbs.append('text').classed('lastCrumb', true);\n\n  // Generate a string representation for drawing a breadcrumb polygon.\n  function breadcrumbPoints(d, i) {\n    const points = [];\n    points.push('0,0');\n    points.push(`${b.w},0`);\n    points.push(`${b.w + b.t},${b.h / 2}`);\n    points.push(`${b.w},${b.h}`);\n    points.push(`0,${b.h}`);\n\n    if (i > 0) {\n      // Leftmost breadcrumb; don't include 6th vertex.\n      points.push(`${b.t},${b.h / 2}`);\n    }\n    return points.join(' ');\n  }\n\n  // Update the breadcrumb breadcrumbs to show the current sequence and percentage.\n  function updateBreadcrumbs(ancestors, percentageString) {\n    // Data join, where primary key = name + depth.\n    const g = breadcrumbs.selectAll('g').data(ancestors, d => d.name + d.depth);\n\n    // Add breadcrumb and label for entering nodes.\n    const breadcrumb = g.enter().append('g');\n\n    breadcrumb\n      .append('polygon')\n      .classed('breadcrumbs-shape', true)\n      .attr('points', breadcrumbPoints)\n      .attr('fill', colorMap);\n\n    breadcrumb\n      .append('text')\n      .classed('breadcrumbs-text', true)\n      .attr('x', (b.w + b.t) / 2)\n      .attr('y', b.h / 2)\n      .attr('dy', '0.35em')\n      .attr('font-size', '10px')\n      .attr('text-anchor', 'middle')\n      .text(d => d.name);\n\n    // Set position for entering and updating nodes.\n    g.attr('transform', (d, i) => `translate(${i * (b.w + b.s)}, 0)`);\n\n    // Remove exiting nodes.\n    g.exit().remove();\n\n    // Update percentage at the lastCrumb.\n    lastCrumb\n      .attr('x', (ancestors.length + 0.5) * (b.w + b.s))\n      .attr('y', b.h / 2)\n      .attr('dy', '0.35em')\n      .attr('text-anchor', 'middle')\n      .attr('fill', 'black')\n      .attr('font-weight', 600)\n      .text(percentageString);\n  }\n\n  // helper function mouseover to handle mouseover events/animations and calculation\n  // of ancestor nodes etc\n  function mouseover(d) {\n    // build percentage string\n    const percentage = (100 * d.value / totalSize).toPrecision(3);\n    let percentageString = `${percentage}%`;\n    if (percentage < 1) {\n      percentageString = '< 1.0%';\n    }\n\n    // update breadcrumbs (get all ancestors)\n    const ancestors = getAncestors(d);\n    updateBreadcrumbs(ancestors, percentageString);\n\n    // update sunburst (Fade all the segments and highlight only ancestors of current segment)\n    sunburst.selectAll('path').attr('opacity', 0.3);\n    sunburst\n      .selectAll('path')\n      .filter(node => ancestors.indexOf(node) >= 0)\n      .attr('opacity', 1);\n\n    // update summary\n    summary.html(`\n      <span>Stage: ${d.depth}</span>\n      <span class='percentage' style='font-size: 2em;'>${percentageString}</span>\n      <span>${d.value} of ${totalSize}</span>\n    `);\n\n    // display summary and breadcrumbs if hidden\n    summary.style('visibility', '');\n    breadcrumbs.style('visibility', '');\n  }\n\n  // helper function click to handle mouseleave events/animations\n  function click() {\n    // Deactivate all segments then retransition each segment to full opacity.\n    sunburst.selectAll('path').on('mouseover', null);\n    sunburst\n      .selectAll('path')\n      .transition()\n      .duration(1000)\n      .attr('opacity', 1)\n      .each('end', function endClick() {\n        d3.select(this).on('mouseover', mouseover);\n      });\n\n    // hide summary and breadcrumbs if visible\n    breadcrumbs.style('visibility', 'hidden');\n    summary.style('visibility', 'hidden');\n  }\n\n  // helper function to draw the sunburst and breadcrumbs\n  function drawSunburst(json) {\n    // Build only nodes of a threshold \"visible\" sizes to improve efficiency\n    // 0.005 radians = 0.29 degrees\n    const nodes = partition.nodes(json).filter(d => d.dx > 0.005 && d.name !== exitNode);\n\n    // this section is required to update the colors.domain() every time the data updates\n    const uniqueNames = (function uniqueNames(a) {\n      const output = [];\n      a.forEach((d) => {\n        if (output.indexOf(d.name) === -1) output.push(d.name);\n      });\n      return output;\n    }(nodes));\n    colors.domain(uniqueNames); // update domain colors\n\n    // create path based on nodes\n    const path = sunburst\n      .data([json])\n      .selectAll('path')\n      .data(nodes)\n      .enter()\n      .append('path')\n      .classed('nodePath', true)\n      .attr('display', d => (d.depth ? null : 'none'))\n      .attr('d', arc)\n      .attr('fill', colorMap)\n      .attr('opacity', 1)\n      .attr('stroke', 'white')\n      .on('mouseover', mouseover);\n\n    // // trigger mouse click over sunburst to reset visualization summary\n    vis.on('click', click);\n\n    // Update totalSize of the tree = value of root node from partition.\n    totalSize = path.node().__data__.value;\n  }\n\n  // visualize json tree structure\n  function createVisualization(json) {\n    drawSunburst(json); // draw sunburst\n  }\n\n  function removeVisualization() {\n    sunburst.selectAll('.nodePath').remove();\n    // legend.selectAll(\"g\").remove();\n  }\n\n  function buildNodes(raw) {\n    let values;\n\n    if (\n      _.has(raw[0], 'sequence') &&\n      _.has(raw[0], 'stage') &&\n      _.has(raw[0], 'node') &&\n      _.has(raw[0], 'value')\n    ) {\n      const grouped = _.groupBy(raw, 'sequence');\n\n      values = _.map(grouped, (value) => {\n        const sorted = _.sortBy(value, 'stage');\n        return {\n          size: value[0].value || 0,\n          sequence: value[0].sequence,\n          nodes: _.map(sorted, i => i.node),\n        };\n      });\n    } else {\n      // ANGULAR_REMOVE_ME $$ check is for Angular's internal properties\n      const validKey = key => key !== 'value' && key.indexOf('$$') !== 0;\n      const keys = _.sortBy(_.filter(_.keys(raw[0]), validKey), _.identity);\n\n      values = _.map(raw, (row, sequence) => ({\n        size: row.value || 0,\n        sequence,\n        nodes: _.compact(_.map(keys, key => row[key])),\n      }));\n    }\n\n    return values;\n  }\n\n  function buildHierarchy(csv) {\n    const data = buildNodes(csv);\n\n    // build tree\n    const root = {\n      name: 'root',\n      children: [],\n    };\n\n    data.forEach((d) => {\n      const nodes = d.nodes;\n      const size = parseInt(d.size, 10);\n\n      // build graph, nodes, and child nodes\n      let currentNode = root;\n      for (let j = 0; j < nodes.length; j += 1) {\n        let children = currentNode.children;\n        const nodeName = nodes[j];\n        const isLeaf = j + 1 === nodes.length;\n\n        if (!children) {\n          currentNode.children = children = [];\n          children.push({\n            name: exitNode,\n            size: currentNode.size,\n          });\n        }\n\n        let childNode = _.find(children, child => child.name === nodeName);\n\n        if (isLeaf && childNode) {\n          childNode.children = childNode.children || [];\n          childNode.children.push({\n            name: exitNode,\n            size,\n          });\n        } else if (isLeaf) {\n          children.push({\n            name: nodeName,\n            size,\n          });\n        } else {\n          if (!childNode) {\n            childNode = {\n              name: nodeName,\n              children: [],\n            };\n            children.push(childNode);\n          }\n\n          currentNode = childNode;\n        }\n      }\n    });\n\n    return root;\n  }\n\n  function render(data) {\n    const json = buildHierarchy(data); // build json tree\n    removeVisualization(); // remove existing visualization if any\n    createVisualization(json); // visualize json tree\n  }\n\n  function refreshData() {\n    if (scope.$ctrl.data) {\n      render(scope.$ctrl.data.rows);\n    }\n  }\n\n  refreshData();\n  this.watches.push(scope.$watch('$ctrl.data', refreshData));\n  this.watches.push(scope.$watch('$ctrl.options', refreshData, true));\n}\n\nSunburst.prototype.remove = function remove() {\n  this.watches.forEach((unregister) => {\n    unregister();\n  });\n  angular.element(this.element).empty('.vis-container');\n};\n\nexport default Sunburst;\n","import { debounce } from 'lodash';\nimport Sunburst from '@/lib/visualizations/sunburst';\nimport { angular2react } from 'angular2react';\nimport { registerVisualization } from '@/visualizations';\n\nimport Editor from './Editor';\n\nconst SunburstSequenceRenderer = {\n  template: '<div class=\"sunburst-visualization-container\" resize-event=\"handleResize()\"></div>',\n  bindings: {\n    data: '<',\n    options: '<',\n  },\n  controller($scope, $element) {\n    const container = $element[0].querySelector('.sunburst-visualization-container');\n    let sunburst = new Sunburst($scope, container);\n\n    function update() {\n      sunburst.remove();\n      sunburst = new Sunburst($scope, container);\n    }\n\n    $scope.handleResize = debounce(update, 50);\n  },\n};\n\nexport default function init(ngModule) {\n  ngModule.component('sunburstSequenceRenderer', SunburstSequenceRenderer);\n\n  ngModule.run(($injector) => {\n    registerVisualization({\n      type: 'SUNBURST_SEQUENCE',\n      name: 'Sunburst Sequence',\n      getOptions: options => ({ ...options }),\n      Renderer: angular2react('sunburstSequenceRenderer', SunburstSequenceRenderer, $injector),\n      Editor,\n\n      defaultRows: 7,\n    });\n  });\n}\n\ninit.init = true;\n","const PREFIX = 'localOptions:';\n\nfunction get(key, defaultValue = undefined) {\n  const fullKey = PREFIX + key;\n  if (fullKey in window.localStorage) {\n    return JSON.parse(window.localStorage.getItem(fullKey));\n  }\n  return defaultValue;\n}\n\nfunction set(key, value) {\n  const fullKey = PREFIX + key;\n  window.localStorage.setItem(fullKey, JSON.stringify(value));\n}\n\nexport default {\n  get,\n  set,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from 'antd/lib/tooltip';\nimport { react2angular } from 'react2angular';\n\nimport AceEditor from 'react-ace';\nimport ace from 'brace';\nimport notification from '@/services/notification';\n\nimport 'brace/ext/language_tools';\nimport 'brace/mode/json';\nimport 'brace/mode/python';\nimport 'brace/mode/sql';\nimport 'brace/mode/yaml';\nimport 'brace/theme/textmate';\nimport 'brace/ext/searchbox';\n\nimport { Query } from '@/services/query';\nimport { QuerySnippet } from '@/services/query-snippet';\nimport { KeyboardShortcuts } from '@/services/keyboard-shortcuts';\n\nimport localOptions from '@/lib/localOptions';\nimport AutocompleteToggle from '@/components/AutocompleteToggle';\nimport keywordBuilder from './keywordBuilder';\nimport { DataSource, Schema } from './proptypes';\n\nimport './QueryEditor.css';\n\nconst langTools = ace.acequire('ace/ext/language_tools');\nconst snippetsModule = ace.acequire('ace/snippets');\n\n// By default Ace will try to load snippet files for the different modes and fail.\n// We don't need them, so we use these placeholders until we define our own.\nfunction defineDummySnippets(mode) {\n  ace.define(`ace/snippets/${mode}`, ['require', 'exports', 'module'], (require, exports) => {\n    exports.snippetText = '';\n    exports.scope = mode;\n  });\n}\n\ndefineDummySnippets('python');\ndefineDummySnippets('sql');\ndefineDummySnippets('json');\ndefineDummySnippets('yaml');\n\nclass QueryEditor extends React.Component {\n  static propTypes = {\n    queryText: PropTypes.string.isRequired,\n    schema: Schema, // eslint-disable-line react/no-unused-prop-types\n    addNewParameter: PropTypes.func.isRequired,\n    dataSources: PropTypes.arrayOf(DataSource),\n    dataSource: DataSource,\n    canEdit: PropTypes.bool.isRequired,\n    isDirty: PropTypes.bool.isRequired,\n    isQueryOwner: PropTypes.bool.isRequired,\n    updateDataSource: PropTypes.func.isRequired,\n    canExecuteQuery: PropTypes.func.isRequired,\n    executeQuery: PropTypes.func.isRequired,\n    queryExecuting: PropTypes.bool.isRequired,\n    saveQuery: PropTypes.func.isRequired,\n    updateQuery: PropTypes.func.isRequired,\n    updateSelectedQuery: PropTypes.func.isRequired,\n    listenForResize: PropTypes.func.isRequired,\n    listenForEditorCommand: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    schema: null,\n    dataSource: {},\n    dataSources: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.refEditor = React.createRef();\n\n    this.state = {\n      schema: null, // eslint-disable-line react/no-unused-state\n      keywords: {\n        table: [],\n        column: [],\n        tableColumn: [],\n      },\n      autocompleteQuery: localOptions.get('liveAutocomplete', true),\n      liveAutocompleteDisabled: false,\n      // XXX temporary while interfacing with angular\n      queryText: props.queryText,\n      selectedQueryText: null,\n    };\n\n    const schemaCompleter = {\n      identifierRegexps: [/[a-zA-Z_0-9.\\-\\u00A2-\\uFFFF]/],\n      getCompletions: (state, session, pos, prefix, callback) => {\n        const tableKeywords = this.state.keywords.table;\n        const columnKeywords = this.state.keywords.column;\n        const tableColumnKeywords = this.state.keywords.tableColumn;\n\n        if (prefix.length === 0 || tableKeywords.length === 0) {\n          callback(null, []);\n          return;\n        }\n\n        if (prefix[prefix.length - 1] === '.') {\n          const tableName = prefix.substring(0, prefix.length - 1);\n          callback(null, tableKeywords.concat(tableColumnKeywords[tableName]));\n          return;\n        }\n        callback(null, tableKeywords.concat(columnKeywords));\n      },\n    };\n\n    langTools.setCompleters([\n      langTools.snippetCompleter,\n      langTools.keyWordCompleter,\n      langTools.textCompleter,\n      schemaCompleter,\n    ]);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!nextProps.schema) {\n      return {\n        keywords: {\n          table: [],\n          column: [],\n          tableColumn: [],\n        },\n        liveAutocompleteDisabled: false,\n      };\n    } else if (nextProps.schema !== prevState.schema) {\n      const tokensCount = nextProps.schema.reduce((totalLength, table) => totalLength + table.columns.length, 0);\n      return {\n        schema: nextProps.schema,\n        keywords: keywordBuilder.buildKeywordsFromSchema(nextProps.schema),\n        liveAutocompleteDisabled: tokensCount > 5000,\n      };\n    }\n    return null;\n  }\n\n  onLoad = (editor) => {\n    // Release Cmd/Ctrl+L to the browser\n    editor.commands.bindKey('Cmd+L', null);\n    editor.commands.bindKey('Ctrl+P', null);\n    editor.commands.bindKey('Ctrl+L', null);\n\n    // Ignore Ctrl+P to open new parameter dialog\n    editor.commands.bindKey({ win: 'Ctrl+P', mac: null }, null);\n    // Lineup only mac\n    editor.commands.bindKey({ win: null, mac: 'Ctrl+P' }, 'golineup');\n\n    // Reset Completer in case dot is pressed\n    editor.commands.on('afterExec', (e) => {\n      if (e.command.name === 'insertstring' && e.args === '.'\n          && editor.completer) {\n        editor.completer.showPopup(editor);\n      }\n    });\n\n    QuerySnippet.query((snippets) => {\n      const snippetManager = snippetsModule.snippetManager;\n      const m = {\n        snippetText: '',\n      };\n      m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n      snippets.forEach((snippet) => {\n        m.snippets.push(snippet.getSnippet());\n      });\n      snippetManager.register(m.snippets || [], m.scope);\n    });\n\n    editor.focus();\n    this.props.listenForResize(() => editor.resize());\n    this.props.listenForEditorCommand((e, command, ...args) => {\n      switch (command) {\n        case 'focus': {\n          editor.focus();\n          break;\n        }\n        case 'paste': {\n          const [text] = args;\n          editor.session.doc.replace(editor.selection.getRange(), text);\n          const range = editor.selection.getRange();\n          this.props.updateQuery(editor.session.getValue());\n          editor.selection.setRange(range);\n          break;\n        }\n        default:\n          break;\n      }\n    });\n  };\n\n  updateSelectedQuery = (selection) => {\n    const { editor } = this.refEditor.current;\n    const doc = editor.getSession().doc;\n    const rawSelectedQueryText = doc.getTextRange(selection.getRange());\n    const selectedQueryText = (rawSelectedQueryText.length > 1) ? rawSelectedQueryText : null;\n    this.setState({ selectedQueryText });\n    this.props.updateSelectedQuery(selectedQueryText);\n  };\n\n  updateQuery = (queryText) => {\n    this.props.updateQuery(queryText);\n    this.setState({ queryText });\n  };\n\n  formatQuery = () => {\n    Query.format(this.props.dataSource.syntax || 'sql', this.props.queryText)\n      .then(this.updateQuery)\n      .catch(error => notification.error(error));\n  };\n\n  toggleAutocomplete = (state) => {\n    this.setState({ autocompleteQuery: state });\n    localOptions.set('liveAutocomplete', state);\n  };\n\n  componentDidUpdate = () => {\n    // ANGULAR_REMOVE_ME  Work-around for a resizing issue, see https://github.com/getredash/redash/issues/3353\n    const { editor } = this.refEditor.current;\n    editor.resize();\n  };\n\n  render() {\n    const modKey = KeyboardShortcuts.modKey;\n\n    const isExecuteDisabled = this.props.queryExecuting || !this.props.canExecuteQuery();\n\n    return (\n      <section style={{ height: '100%' }} data-test=\"QueryEditor\">\n        <div className=\"container p-15 m-b-10\" style={{ height: '100%' }}>\n          <div data-executing={this.props.queryExecuting} style={{ height: 'calc(100% - 40px)', marginBottom: '0px' }} className=\"editor__container\">\n            <AceEditor\n              ref={this.refEditor}\n              theme=\"textmate\"\n              mode={this.props.dataSource.syntax || 'sql'}\n              value={this.state.queryText}\n              editorProps={{ $blockScrolling: Infinity }}\n              width=\"100%\"\n              height=\"100%\"\n              setOptions={{\n                behavioursEnabled: true,\n                enableSnippets: true,\n                enableBasicAutocompletion: true,\n                enableLiveAutocompletion: !this.state.liveAutocompleteDisabled && this.state.autocompleteQuery,\n                autoScrollEditorIntoView: true,\n              }}\n              showPrintMargin={false}\n              wrapEnabled={false}\n              onLoad={this.onLoad}\n              onPaste={this.onPaste}\n              onChange={this.updateQuery}\n              onSelectionChange={this.updateSelectedQuery}\n            />\n          </div>\n\n          <div className=\"editor__control\">\n            <div className=\"form-inline d-flex\">\n              <Tooltip\n                placement=\"top\"\n                title={<span>Add New Parameter (<i>{modKey} + P</i>)</span>}\n              >\n                <button type=\"button\" className=\"btn btn-default m-r-5\" onClick={this.props.addNewParameter}>\n                  &#123;&#123;&nbsp;&#125;&#125;\n                </button>\n              </Tooltip>\n              <Tooltip placement=\"top\" title=\"Format Query\">\n                <button type=\"button\" className=\"btn btn-default m-r-5\" onClick={this.formatQuery}>\n                  <span className=\"zmdi zmdi-format-indent-increase\" />\n                </button>\n              </Tooltip>\n              <AutocompleteToggle\n                state={this.state.autocompleteQuery}\n                onToggle={this.toggleAutocomplete}\n                disabled={this.state.liveAutocompleteDisabled}\n              />\n              <select\n                className=\"form-control datasource-small flex-fill w-100\"\n                onChange={this.props.updateDataSource}\n                disabled={!this.props.isQueryOwner}\n              >\n                {this.props.dataSources.map(ds => (\n                  <option label={ds.name} value={ds.id} key={`ds-option-${ds.id}`}>\n                    {ds.name}\n                  </option>\n                ))}\n              </select>\n              {this.props.canEdit ? (\n                <Tooltip placement=\"top\" title={modKey + ' + S'}>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-default m-l-5\"\n                    onClick={this.props.saveQuery}\n                    data-test=\"SaveButton\"\n                    title=\"Save\"\n                  >\n                    <span className=\"fa fa-floppy-o\" />\n                    <span className=\"hidden-xs m-l-5\">Save</span>\n                    {this.props.isDirty ? '*' : null}\n                  </button>\n                </Tooltip>\n              ) : null}\n              <Tooltip placement=\"top\" title={modKey + ' + Enter'}>\n                {/*\n                  Tooltip wraps disabled buttons with `<span>` and moves all styles\n                  and classes to that `<span>`. There is a piece of CSS that fixes\n                  button appearance, but also wwe need to add `disabled` class to\n                  disabled buttons so it will be assigned to wrapper and make it\n                  looking properly\n                */}\n                <button\n                  type=\"button\"\n                  className={'btn btn-primary m-l-5' + (isExecuteDisabled ? ' disabled' : '')}\n                  disabled={isExecuteDisabled}\n                  onClick={this.props.executeQuery}\n                  data-test=\"ExecuteButton\"\n                >\n                  <span className=\"zmdi zmdi-play\" />\n                  <span className=\"hidden-xs m-l-5\">{ (this.state.selectedQueryText == null) ? 'Execute' : 'Execute Selected' }</span>\n                </button>\n              </Tooltip>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nexport default function init(ngModule) {\n  ngModule.component('queryEditor', react2angular(QueryEditor));\n}\n\ninit.init = true;\n"],"sourceRoot":""}